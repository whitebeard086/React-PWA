import{d as h,j as e,w as n,aP as f,S as t,G as y,b as v,r as p,bb as g,bc as w,Y as b,at as N,bd as S,be as T}from"./index-d4dc8e82.js";import{T as u}from"./index-7138301a.js";const j=({transactions:i})=>{const{userType:l}=h(s=>s.auth.user);return e.jsx("div",{className:"flex flex-col",children:i==null?void 0:i.map(s=>{var c,r,m,d,x;return e.jsxs(n,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-700",children:s.type}),s.type==="Wallet Topup"&&e.jsxs("p",{className:"text-lg font-semibold text-green-500",children:["+₦",(c=s.amount)==null?void 0:c.toLocaleString()]}),s.type==="Service Payment Refund"&&e.jsxs("p",{className:"text-lg font-semibold text-green-500",children:["+₦",(r=s.amount)==null?void 0:r.toLocaleString()]}),s.type.split(" ")[1]==="Airtime"&&e.jsxs("p",{className:"text-lg font-semibold text-green-500",children:["+₦",(m=s.amount)==null?void 0:m.toLocaleString()]}),l==="Provider"&&s.type==="Service Payment"&&e.jsxs("p",{className:"text-lg font-semibold text-green-500",children:["+₦",(d=s.amount)==null?void 0:d.toLocaleString()]}),l==="Client"&&s.type==="Service Payment"&&e.jsxs("p",{className:"text-lg font-semibold text-red-500",children:["-₦",(x=s.amount)==null?void 0:x.toLocaleString()]})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[s.status==="Success"&&e.jsx("p",{className:"font-semibold text-green-500",children:"Completed"}),e.jsx("p",{className:"font-semibold",children:f(s.created_at).format("DD MMM YYYY hh:mm a")})]})]},s.id)})})},D=()=>e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(n,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(t,{height:"1rem",width:"21%"}),e.jsx(t,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(t,{height:"1rem",width:"18%"}),e.jsx(t,{height:"1rem",width:"28%"})]})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(t,{height:"1rem",width:"21%"}),e.jsx(t,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(t,{height:"1rem",width:"18%"}),e.jsx(t,{height:"1rem",width:"28%"})]})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(t,{height:"1rem",width:"21%"}),e.jsx(t,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(t,{height:"1rem",width:"18%"}),e.jsx(t,{height:"1rem",width:"28%"})]})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(t,{height:"1rem",width:"21%"}),e.jsx(t,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(t,{height:"1rem",width:"18%"}),e.jsx(t,{height:"1rem",width:"28%"})]})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(t,{height:"1rem",width:"21%"}),e.jsx(t,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(t,{height:"1rem",width:"18%"}),e.jsx(t,{height:"1rem",width:"28%"})]})]})]}),P=()=>{const{verifying:i}=h(a=>a.payments.data),{userType:l}=h(a=>a.auth.user),{transactions:s}=h(a=>a.payments.data),c=s==null?void 0:s.filter(a=>a.type==="Wallet Topup"),r=s==null?void 0:s.filter(a=>a.type==="Wallet Topup"||a.type==="Service Payment"),m=s==null?void 0:s.filter(a=>a.type==="Service Payment"),{TabNav:d,TabList:x,TabContent:o}=u;return e.jsxs("div",{className:"mt-2 mb-2",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-700 mb-4",children:"Transactions"}),i?e.jsx(D,{}):e.jsx(e.Fragment,{children:e.jsxs(u,{defaultValue:"all",variant:"pill",children:[e.jsxs(x,{children:[e.jsx(d,{value:"all",children:"All"}),e.jsx(d,{value:"topups",children:"Topups"}),e.jsx(d,{value:"expenses",children:"Expenses"}),l==="Provider"&&e.jsx(d,{value:"withdrawals",children:"Withdrawals"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(o,{value:"all",children:e.jsx(j,{transactions:s})}),e.jsxs(o,{value:"topups",children:[l==="Client"&&e.jsx(j,{transactions:c}),l==="Provider"&&e.jsx(j,{transactions:r})]}),e.jsx(o,{value:"expenses",children:l==="Client"&&e.jsx(j,{transactions:m})})]})]})})]})};y("payments",T);const L=()=>{const i=v(),{updateStatus:l,receivedDeposit:s}=h(r=>r.payments.data),{depositDialog:c}=h(r=>r.payments.state);return p.useEffect(()=>{i(g())},[]),p.useEffect(()=>{(l==="success"||l==="error")&&i(w("idle"))},[i,l]),p.useEffect(()=>{s&&(i(g()),i(b()),c&&i(N(!1))),i(S(!1))},[c,i,s]),e.jsx("div",{className:"mt-2 p-4",children:e.jsx(P,{})})};export{L as default};
