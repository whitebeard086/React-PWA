import{a as Q,u as w,n as _,r as Y,P as k,j as s,F as ee,p as v,I as se,Q as H,L as ae,T as te,U as ie,w as re,V as ne,W as le,y as ce}from"./index-508e130b.js";import{s as ue,M as de,T as oe,W as ye,a as me,F as ge,S as pe,b as ve,g as he,u as xe,d as fe,e as je,f as Se,h as Ve,i as be,j as _e,k as Ne,l as Fe,m as Ce,n as Ee,o as Pe,p as Te,q as Me,t as qe,v as Ie,r as We}from"./index-e0d1befe.js";import{F as Le,a as $e,b as h}from"./formik.esm-5d2ef744.js";import{c as De,a as x}from"./index.esm-5685692b.js";import"./formatTime-7871a97f.js";const Re=()=>{var L,$,D,R,B;const a=Q(),f=w(),{profile:e}=_(t=>t.auth.user),{loadingCategories:y,categories:m,loadingSubCategories:j,subCategories:g,creatingService:N,serviceStatus:c}=_(t=>t.service.data),{mondayValue:F,mondayValue2:C,tuesdayValue:E,wednesdayValue:P,thursdayValue:T,fridayValue:M,saturdayValue:q,sundayValue:I,tuesdayValue2:S,wednesdayValue2:W,thursdayValue2:A,fridayValue2:G,saturdayValue2:J,sundayValue2:K}=_(t=>t.service.state),X=De().shape({title:x().required("Please enter the title of your service or business"),category:x().required("Please select a category"),subcategory:x().required("Please select a sub category"),description:x().required("Please write a brief description of your service"),startingPrice:x().required("Please enter a minimum price for your service")}),Z={title:(L=e.service)==null?void 0:L.title,category:($=e.service)==null?void 0:$.category_id,subcategory:(D=e.service)==null?void 0:D.sub_category_id,description:(R=e.service)==null?void 0:R.description,startingPrice:(B=e.service)==null?void 0:B.starting_price},V=m==null?void 0:m.map(t=>({label:t.name,value:t.id})),b=g==null?void 0:g.map(t=>({label:t.name,value:t.id})),O=t=>{var l,d;const{title:u,category:r,subcategory:U,description:z,startingPrice:i}=t,n={service_id:(l=e.service)==null?void 0:l.id,workdays_id:(d=e.service)==null?void 0:d.workdays_id,monday1:F,monday2:C,tuesday1:E,tuesday2:S,wednesday1:P,wednesday2:W,thursday1:T,thursday2:A,friday1:M,friday2:G,saturday1:q,saturday2:J,sunday1:I,sunday2:K,category:r,subcategory:U,title:u,description:z,starting_price:i};a(xe(n))};return Y.useEffect(()=>{c!=="idle"&&(u=>{ne.push(s.jsx(le,{title:`${c==="success"?"Success":"Error"}`,type:`${c==="success"?"success":"danger"}`,duration:5e3,children:c==="success"?"Service updated successfully!":"Looks like something went wrong, please try again."}),{placement:"top-center"})})(),setTimeout(()=>{c==="success"&&(a(k()),f(-1))},2e3),(c==="success"||c==="error")&&a(ue("idle"))},[a,f,c]),s.jsx("div",{className:"mt-8",children:s.jsx(Le,{initialValues:Z,validationSchema:X,onSubmit:(t,{resetForm:u,setSubmitting:r})=>{O(t)},children:({isSubmitting:t,touched:u,errors:r,values:U,setFieldValue:z})=>s.jsx($e,{children:s.jsxs(ee,{children:[s.jsx(v,{label:"",invalid:r.title&&u.title,errorMessage:r.title,children:s.jsx(h,{type:"text",autoComplete:"off",name:"title",placeholder:"Business Name or Service Title",component:se})}),s.jsxs("div",{className:"mt-8",children:[s.jsx("p",{className:"font-bold",children:"Set Working Hours"}),s.jsx(de,{}),s.jsx(oe,{}),s.jsx(ye,{}),s.jsx(me,{}),s.jsx(ge,{}),s.jsx(pe,{}),s.jsx(ve,{})]}),s.jsxs("div",{className:"mt-8 flex gap-4 justify-between",children:[s.jsx(v,{label:"",invalid:r.category&&u.category,className:"w-full",errorMessage:r.category,children:s.jsx(h,{name:"category",prefix:"",className:"w-full",autoComplete:"off",children:({field:i,form:n})=>{var l,d,p;return s.jsx(H,{placeholder:"Service Category",field:i,form:n,className:"w-full",isLoading:y,onInputChange:o=>{console.log(o)},options:V,defaultValue:{label:(d=(l=e.service)==null?void 0:l.category)==null?void 0:d.name,value:(p=e.service)==null?void 0:p.category_id},value:V==null?void 0:V.value,onChange:o=>{n.setFieldValue(i.name,o.value),a(he({category_id:o.value})),n.setFieldValue("subcategory","")}})}})}),s.jsx(v,{label:"",invalid:r.subcategory&&u.subcategory,className:"w-full",errorMessage:r.subcategory,children:s.jsx(h,{name:"subcategory",prefix:"",className:"w-full",autoComplete:"off",children:({field:i,form:n})=>{var l,d,p;return j||y?s.jsx("div",{className:"border-2 h-11 rounded-md",children:s.jsx(ae,{size:30,loading:!0})}):s.jsx(H,{placeholder:"Sub Category",field:i,form:n,className:"w-full",isLoading:j||y,onInputChange:o=>{console.log(o)},options:b,defaultValue:{label:(d=(l=e.service)==null?void 0:l.sub_category)==null?void 0:d.name,value:(p=e.service)==null?void 0:p.category_id},value:b==null?void 0:b.value,onChange:o=>{n.setFieldValue(i.name,o.value)}})}})})]}),s.jsx(v,{label:s.jsx("p",{className:"text-gray-400",children:"Describe the nature of your services"}),labelClass:"!justify-start",invalid:r.description&&u.description,errorMessage:r.description,children:s.jsx(h,{name:"description",children:({field:i,form:n})=>s.jsx(te,{value:i.value,onChange:l=>n.setFieldValue(i.name,l)})})}),s.jsx(v,{label:"",invalid:r.startingPrice&&u.startingPrice,errorMessage:r.startingPrice,children:s.jsx(h,{name:"startingPrice",children:({field:i,form:n})=>s.jsx(ie,{thousandSeparator:!0,form:n,field:i,placeholder:"Service Starting Price",decimalScale:2,onValueChange:l=>{n.setFieldValue(i.name,l.floatValue)},value:i.value,inputPrefix:s.jsx("span",{className:"font-semibold",children:"â‚¦"})})})}),s.jsx("div",{className:"mt-8",children:s.jsx(re,{block:!0,variant:"solid",type:"submit",loading:N,children:"Finish"})})]})})})})};ce("service",We);const Ye=()=>{var S;const a=Q(),{profile:f}=_(W=>W.auth.user),e=(S=f.service)==null?void 0:S.workdays,y=e==null?void 0:e.monday_start,m=e==null?void 0:e.monday_end,j=e==null?void 0:e.tuesday_start,g=e==null?void 0:e.tuesday_end,N=e==null?void 0:e.wednesday_start,c=e==null?void 0:e.wednesday_end,F=e==null?void 0:e.thursday_start,C=e==null?void 0:e.thursday_end,E=e==null?void 0:e.friday_start,P=e==null?void 0:e.friday_end,T=e==null?void 0:e.saturday_start,M=e==null?void 0:e.saturday_end,q=e==null?void 0:e.sunday_start,I=e==null?void 0:e.sunday_end;return Y.useEffect(()=>{a(fe()),a(je(y)),a(Se(m)),a(Ve(j)),a(be(g)),a(_e(N)),a(Ne(c)),a(Fe(F)),a(Ce(C)),a(Ee(E)),a(Pe(P)),a(Te(T)),a(Me(M)),a(qe(q)),a(Ie(I))},[]),s.jsx("div",{className:"flex h-full justify-center items-center p-8",children:s.jsxs("div",{className:"w-full h-full",children:[s.jsx("h1",{className:"font-bold text-xl text-center",children:"Your Service Details"}),s.jsx(Re,{})]})})};export{Ye as default};
