import{r as m,a_ as E,n as f,j as e,a$ as k,b0 as $,c as p,v as j,aP as W,S as a,E as Y,a as M,b1 as w,b2 as U,U as V,ap as A,b3 as I,b4 as _}from"./index-cd793fee.js";const g=m.createContext({}),F=g.Provider;g.Consumer;function y(){return m.useContext(g)}const u=m.forwardRef((t,i)=>{const{className:s,defaultValue:n,onChange:r,value:d,variant:c="underline",...o}=t,[h,l]=E({prop:d,onChange:r,defaultProp:n}),b=f("tabs",s);return e.jsx(F,{value:{value:h,onValueChange:l,variant:c},children:e.jsx("div",{className:b,...o,ref:i})})});u.displayName="Tabs";const C=m.forwardRef((t,i)=>{const{className:s,children:n,...r}=t,{variant:d}=y(),c=f("tab-list",`tab-list-${d}`,s);return e.jsx("div",{ref:i,role:"tablist",className:c,...r,children:n})});C.displayName="TabList";const T=m.forwardRef((t,i)=>{const{value:s,disabled:n,className:r,icon:d,children:c,...o}=t,{value:h,onValueChange:l,variant:b}=y(),x=s===h,{themeColor:P,primaryColorLevel:D}=k(),N=$(()=>{!x&&!n&&(l==null||l(s))}),L=`${P}-${D}`,R=f("tab-nav",`tab-nav-${b}`,x&&"tab-nav-active text-white",x&&b==="underline"&&`border-${L}`,x&&b==="pill"&&"bg-black",n&&"tab-nav-disabled",!n&&!x&&"hover:text-black hover:bg-gray-300",r);return e.jsxs("div",{ref:i,className:R,role:"tab","aria-selected":x,tabIndex:0,onClick:N,onKeyDown:N,...o,children:[d&&e.jsx("div",{className:"tab-nav-icon",children:d}),c]})});T.displayName="TabNav";const S=m.forwardRef((t,i)=>{const{value:s,children:n,className:r,...d}=t,c=y(),o=s===c.value,h=f("tab-content",o&&"tab-content-active",r);return e.jsx("div",{ref:i,role:"tabpanel",tabIndex:0,className:h,...d,children:o&&n})});S.displayName="TabContent";u.TabList=C;u.TabNav=T;u.TabContent=S;const v=({transactions:t})=>{const{userType:i}=p(s=>s.auth.user);return e.jsx("div",{className:"flex flex-col",children:t==null?void 0:t.map(s=>{var n,r,d,c,o;return e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-700",children:s.type}),s.type==="Wallet Topup"&&e.jsxs("p",{className:"text-lg font-semibold text-green-500",children:["+₦",(n=s.amount)==null?void 0:n.toLocaleString()]}),s.type==="Service Payment Refund"&&e.jsxs("p",{className:"text-lg font-semibold text-green-500",children:["+₦",(r=s.amount)==null?void 0:r.toLocaleString()]}),s.type.split(" ")[1]==="Airtime"&&e.jsxs("p",{className:"text-lg font-semibold text-green-500",children:["+₦",(d=s.amount)==null?void 0:d.toLocaleString()]}),i==="Provider"&&s.type==="Service Payment"&&e.jsxs("p",{className:"text-lg font-semibold text-green-500",children:["+₦",(c=s.amount)==null?void 0:c.toLocaleString()]}),i==="Client"&&s.type==="Service Payment"&&e.jsxs("p",{className:"text-lg font-semibold text-red-500",children:["-₦",(o=s.amount)==null?void 0:o.toLocaleString()]})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[s.status==="Success"&&e.jsx("p",{className:"font-semibold text-green-500",children:"Completed"}),e.jsx("p",{className:"font-semibold",children:W(s.created_at).format("DD MMM YYYY hh:mm a")})]})]},s.id)})})},G=()=>e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(a,{height:"1rem",width:"21%"}),e.jsx(a,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(a,{height:"1rem",width:"18%"}),e.jsx(a,{height:"1rem",width:"28%"})]})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(a,{height:"1rem",width:"21%"}),e.jsx(a,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(a,{height:"1rem",width:"18%"}),e.jsx(a,{height:"1rem",width:"28%"})]})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(a,{height:"1rem",width:"21%"}),e.jsx(a,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(a,{height:"1rem",width:"18%"}),e.jsx(a,{height:"1rem",width:"28%"})]})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(a,{height:"1rem",width:"21%"}),e.jsx(a,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(a,{height:"1rem",width:"18%"}),e.jsx(a,{height:"1rem",width:"28%"})]})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(a,{height:"1rem",width:"21%"}),e.jsx(a,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(a,{height:"1rem",width:"18%"}),e.jsx(a,{height:"1rem",width:"28%"})]})]})]}),H=()=>{const{verifying:t}=p(l=>l.payments.data),{userType:i}=p(l=>l.auth.user),{transactions:s}=p(l=>l.payments.data),n=s==null?void 0:s.filter(l=>l.type==="Wallet Topup"),r=s==null?void 0:s.filter(l=>l.type==="Wallet Topup"||l.type==="Service Payment"),d=s==null?void 0:s.filter(l=>l.type==="Service Payment"),{TabNav:c,TabList:o,TabContent:h}=u;return e.jsxs("div",{className:"mt-2 mb-2",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-700 mb-4",children:"Transactions"}),t?e.jsx(G,{}):e.jsx(e.Fragment,{children:e.jsxs(u,{defaultValue:"all",variant:"pill",children:[e.jsxs(o,{children:[e.jsx(c,{value:"all",children:"All"}),e.jsx(c,{value:"topups",children:"Topups"}),e.jsx(c,{value:"expenses",children:"Expenses"}),i==="Provider"&&e.jsx(c,{value:"withdrawals",children:"Withdrawals"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(h,{value:"all",children:e.jsx(v,{transactions:s})}),e.jsxs(h,{value:"topups",children:[i==="Client"&&e.jsx(v,{transactions:n}),i==="Provider"&&e.jsx(v,{transactions:r})]}),e.jsx(h,{value:"expenses",children:i==="Client"&&e.jsx(v,{transactions:d})})]})]})})]})};Y("payments",_);const q=()=>{const t=M(),{updateStatus:i,receivedDeposit:s}=p(r=>r.payments.data),{depositDialog:n}=p(r=>r.payments.state);return m.useEffect(()=>{t(w())},[]),m.useEffect(()=>{(i==="success"||i==="error")&&t(U("idle"))},[t,i]),m.useEffect(()=>{s&&(t(w()),t(V()),n&&t(A(!1))),t(I(!1))},[n,t,s]),e.jsx("div",{className:"mt-2 p-4",children:e.jsx(H,{})})};export{q as default};
