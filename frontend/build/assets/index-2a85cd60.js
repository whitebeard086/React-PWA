import{a as N,u as V,n as h,r as w,P as b,j as e,F as H,p as u,I as Q,Q as S,L as Y,T as A,U as G,w as J,V as K,W as X,y as Z,C as O}from"./index-508e130b.js";import{s as ee,M as ae,T as se,W as te,a as ie,F as re,S as le,b as ne,g as ce,c as oe,d as ue,r as de}from"./index-e0d1befe.js";import{F as me,a as ye,b as d}from"./formik.esm-5d2ef744.js";import{c as ge,a as m}from"./index.esm-5685692b.js";import"./formatTime-7871a97f.js";const he=()=>{const l=N(),c=V(),{verifiedPhone:o}=h(a=>a.auth.user),{loadingCategories:p,categories:x,loadingSubCategories:j,subCategories:v,creatingService:C,serviceStatus:n}=h(a=>a.service.data),{mondayValue:F,mondayValue2:P,tuesdayValue:M,wednesdayValue:T,thursdayValue:E,fridayValue:I,saturdayValue:k,sundayValue:q,tuesdayValue2:L,wednesdayValue2:W,thursdayValue2:$,fridayValue2:D,saturdayValue2:R,sundayValue2:B}=h(a=>a.service.state),U=ge().shape({title:m().required("Please enter the title of your service or business"),category:m().required("Please select a category"),subcategory:m().required("Please select a sub category"),description:m().required("Please write a brief description of your service"),startingPrice:m().required("Please enter a minimum price for your service")}),_={title:"",category:"",subcategory:"",description:"",startingPrice:""},y=x==null?void 0:x.map(a=>({label:a.name,value:a.id})),g=v==null?void 0:v.map(a=>({label:a.name,value:a.id})),z=a=>{const{title:i,category:f,subcategory:s,description:r,startingPrice:t}=a;l(oe({monday1:F,monday2:P,tuesday1:M,tuesday2:L,wednesday1:T,wednesday2:W,thursday1:E,thursday2:$,friday1:I,friday2:D,saturday1:k,saturday2:R,sunday1:q,sunday2:B,category:f,subcategory:s,title:i,description:r,starting_price:t}))};return w.useEffect(()=>{n!=="idle"&&(()=>{K.push(e.jsx(X,{title:`${n==="success"?"Success":"Error"}`,type:`${n==="success"?"success":"danger"}`,duration:5e3,children:n==="success"?"Service added successfully!":"Looks like something went wrong, please try again."}),{placement:"top-center"})})(),setTimeout(()=>{n==="success"&&o?(l(b()),c("/home")):n==="success"&&!o&&(l(b()),c("/verify"))},2e3),(n==="success"||n==="error")&&l(ee("idle"))},[l,c,n,o]),e.jsx("div",{className:"mt-8",children:e.jsx(me,{initialValues:_,validationSchema:U,onSubmit:(a,{setSubmitting:i})=>{z(a)},children:({touched:a,errors:i,values:f})=>(console.log(f),e.jsx(ye,{children:e.jsxs(H,{children:[e.jsx(u,{label:"",invalid:i.title&&a.title,errorMessage:i.title,children:e.jsx(d,{type:"text",autoComplete:"off",name:"title",placeholder:"Business Name or Service Title",component:Q})}),e.jsxs("div",{className:"mt-8",children:[e.jsx("p",{className:"font-bold",children:"Set Working Hours"}),e.jsx(ae,{}),e.jsx(se,{}),e.jsx(te,{}),e.jsx(ie,{}),e.jsx(re,{}),e.jsx(le,{}),e.jsx(ne,{})]}),e.jsxs("div",{className:"mt-8 flex gap-4 justify-between",children:[e.jsx(u,{label:"",invalid:i.category&&a.category,className:"w-full",errorMessage:i.category,children:e.jsx(d,{name:"category",prefix:"",className:"w-full",autoComplete:"off",children:({field:s,form:r})=>e.jsx(S,{placeholder:"Service Category",field:s,form:r,className:"w-full",isLoading:p,onInputChange:t=>{console.log(t)},options:y,value:y==null?void 0:y.value,onChange:t=>{r.setFieldValue(s.name,t.value),l(ce({category_id:t.value})),r.setFieldValue("subcategory","")}})})}),e.jsx(u,{label:"",invalid:i.subcategory&&a.subcategory,className:"w-full",errorMessage:i.subcategory,children:e.jsx(d,{name:"subcategory",prefix:"",className:"w-full",autoComplete:"off",children:({field:s,form:r})=>j?e.jsx("div",{className:"border-2 h-11 rounded-md",children:e.jsx(Y,{size:30,loading:!0})}):e.jsx(S,{placeholder:"Sub Category",field:s,form:r,className:"w-full",isLoading:j,onInputChange:t=>{console.log(t)},options:g,value:g==null?void 0:g.value,onChange:t=>{r.setFieldValue(s.name,t.value)}})})})]}),e.jsx(u,{label:e.jsx("p",{className:"text-gray-400",children:"Describe the nature of your services"}),labelClass:"!justify-start",invalid:i.description&&a.description,errorMessage:i.description,children:e.jsx(d,{name:"description",children:({field:s,form:r})=>e.jsx(A,{value:s.value,onChange:t=>r.setFieldValue(s.name,t)})})}),e.jsx(u,{label:"",invalid:i.startingPrice&&a.startingPrice,errorMessage:i.startingPrice,children:e.jsx(d,{name:"startingPrice",children:({field:s,form:r})=>e.jsx(G,{thousandSeparator:!0,form:r,field:s,placeholder:"Service Starting Price",decimalScale:2,onValueChange:t=>{r.setFieldValue(s.name,t.floatValue)},value:s.value,inputPrefix:e.jsx("span",{className:"font-semibold",children:"â‚¦"})})})}),e.jsx("div",{className:"mt-8",children:e.jsx(J,{block:!0,variant:"solid",type:"submit",loading:C,children:"Finish"})})]})}))})})};Z("service",de);const Se=()=>{const l=N(),c=V(),{hasService:o}=h(p=>p.auth.user);return w.useEffect(()=>{o&&c(-1),l(ue())},[l,o,c]),e.jsx(O,{className:"max-w-xl",children:e.jsx("div",{className:"flex h-full justify-center items-center p-8",children:e.jsxs("div",{className:"w-full h-full",children:[e.jsx("h1",{className:"font-bold text-xl text-center",children:"Your Service Details"}),e.jsx(he,{})]})})})};export{Se as default};
