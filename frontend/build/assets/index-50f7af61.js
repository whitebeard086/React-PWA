import{aF as A,aG as w,aH as f,i as y,aI as G,aJ as b,aK as g,k as M,d as z,aL as h,aM as W,j as e,z as x,aN as Y,aO as D,a8 as E,a9 as F,aP as N,aQ as H,O as C,aR as I,N as T,aS as B,G as O,r as U}from"./index-d4dc8e82.js";const i="Referral",_=A(),P=w(G,`${i}/data/getUser`),k=w(b,`${i}/data/getReferrals`),j=_.getInitialState({user:{...f},referrals:{...f},store:{}}),Q=y({name:`${i}/data`,initialState:j,reducers:{setStore:(t,s)=>{t.store=s.payload===0?{}:s.payload},resetState:(t,s)=>{const r={user:()=>{t.user=j.user}}[s.payload];r&&r()}},extraReducers:t=>{g(t,P,"user","user"),g(t,k,"referrals","referrals")}}),q=Q.reducer,L={state:{state:!1,steps:0},query:{search:""}},S=y({name:`${i}/state`,initialState:L,reducers:{setState:(t,{payload:s})=>{t.state.state=s!==0,t.state.steps=s===0?0:s},setSearch:(t,{payload:s})=>{t.query.search=s}}}),{setState:$,setSearch:re}=S.actions,X=S.reducer,J=M({state:X,data:q}),v=z,K=()=>{const t=h(),{profile:s}=W(r=>r.auth.user),n=()=>{t($(1))};return e.jsxs("div",{className:"p-5 grid gap-4 justify-center items-center",children:[e.jsxs(x,{shape:"circle",className:"min-w-[220px] flex items-center justify-center",variant:"plain",onClick:()=>{navigator.clipboard.writeText(s==null?void 0:s.username),Y("","Copied","success",1e3)},children:[s==null?void 0:s.username," ",e.jsx(D,{className:"ml-1 h-6 w-6"})]}),e.jsx(x,{shape:"circle",className:"min-w-[220px]",variant:"solid",children:"Invite a friend"}),e.jsx(x,{shape:"circle",onClick:n,children:"Referral history"})]})};var R={exports:{}};(function(t,s){(function(n,r){t.exports=r()})(E,function(){return function(n,r){var d=r.prototype,u=d.format;d.format=function(c){var a=this,m=this.$locale();if(!this.isValid())return u.bind(this)(c);var o=this.$utils(),p=(c||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(l){switch(l){case"Q":return Math.ceil((a.$M+1)/3);case"Do":return m.ordinal(a.$D);case"gggg":return a.weekYear();case"GGGG":return a.isoWeekYear();case"wo":return m.ordinal(a.week(),"W");case"w":case"ww":return o.s(a.week(),l==="w"?1:2,"0");case"W":case"WW":return o.s(a.isoWeek(),l==="W"?1:2,"0");case"k":case"kk":return o.s(String(a.$H===0?24:a.$H),l==="k"?1:2,"0");case"X":return Math.floor(a.$d.getTime()/1e3);case"x":return a.$d.getTime();case"z":return"["+a.offsetName()+"]";case"zzz":return"["+a.offsetName("long")+"]";default:return l}});return u.bind(this)(p)}}})})(R);var V=R.exports;const Z=F(V);N.extend(Z);const ee=({referrals:t})=>{const s=h(),n=T.imagePath,{data:r,status:d}=t,u=()=>{s($(0))};return e.jsxs("div",{className:"w-[96%] mx-auto",children:[e.jsx(H,{className:"h-6 w-6 hover:cursor-pointer",onClick:u}),e.jsx("div",{className:"mt-3 grid gap-3",children:["pending","idle"].includes(d)?"loading...":e.jsx(e.Fragment,{children:r.length===0?e.jsx("p",{children:"No referrals"}):e.jsx(e.Fragment,{children:r.map(c=>{const{image:a,first_name:m,last_name:o,created_at:p}=c==null?void 0:c.referred;return e.jsxs("div",{className:"flex gap-3 items-center bg-gray-100 p-3 rounded-lg",children:[e.jsx(C,{size:40,shape:"circle",src:a?`${n}/${a}`:null,icon:a?null:e.jsx(I,{})}),e.jsxs("p",{className:"text-xl font-extrabold",children:[m," ",o]}),e.jsx("p",{className:"ml-auto font-semibold",children:N(p).format("Do MMM YYYY")})]},c.id)})})})})]})},se=()=>e.jsxs("div",{className:"mx-auto text-center",children:[e.jsx(B,{className:"h-28 w-28 mx-auto stroke-green-300 stroke-1"}),e.jsx("h2",{className:"text-2xl px-5",children:"Refer and Earn"}),e.jsxs("p",{className:"py-2 max-w-[350px] px-5 mx-auto",children:["Refer your friends to our app and you'll receive a special bonus"," ",e.jsx("span",{className:"text-green-400",children:"â‚¦200"}),"! Our app is a convinient and easy to use mobile app. Plus, with services like handyman and bill payments, it is the best choice for anyone looking for an easy life. Don'y miss out on this limited time offer - start referring todat!"]})]});O(`${i}`,J);const te=()=>{const t=h(),{referrals:s}=v(r=>r[i].data),{state:n}=v(r=>r[i].state);return U.useEffect(()=>{t(k())},[t]),console.log("referrals: ",s),console.log("state: ",n),e.jsx("div",{className:"bg-white min-h-[80vh] space-y-2",children:n.state?e.jsx(e.Fragment,{children:n.steps===1&&e.jsx(ee,{referrals:s})}):e.jsxs(e.Fragment,{children:[e.jsx(se,{}),e.jsx(K,{})]})})},ne=te;export{ne as default};
