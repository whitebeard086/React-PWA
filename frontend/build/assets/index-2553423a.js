import{h as g,d as i,Q as S,T as x,U as P,V as _,i as j,E as A,r as t,_ as y,u as E,a as b,c as R,j as r,C as V,L as T}from"./index-2cc994c4.js";const h=g({name:"verify/state",initialState:{country:null,resent:!1},reducers:{setCountry:(s,e)=>{s.country=e.payload},setResent:(s,e)=>{s.resent=e.payload}}}),{setCountry:D,setResent:B}=h.actions,k=h.reducer,o=i("verify/data/getCountries",async(s,{rejectWithValue:e})=>{try{return(await S(s)).data}catch(a){return e(a.response.data)}}),d=i("verify/data/updatePhone",async(s,{rejectWithValue:e})=>{try{return(await x(s)).data}catch(a){return e(a.response.data)}}),c=i("verify/data/verifyPhone",async(s,{rejectWithValue:e})=>{try{return(await P(s)).data}catch(a){return e(a.response.data)}}),l=i("verify/data/assignVirtualAccount",async(s,{rejectWithValue:e})=>{try{return(await _(s)).data}catch(a){return e(a.response.data)}}),v=g({name:"verify/data",initialState:{countries:[],loading:!1,phone:null,assigningAccount:!1,settingPhone:!1,verifying:!1,resending:!1,phoneStatus:"idle",accountStatus:"idle",message:"",verifyMessage:"",status:"idle",timer:!0},reducers:{setPhone:(s,e)=>{s.phone=e.payload},setPhoneStatus:(s,e)=>{s.phoneStatus=e.payload},setMessage:(s,e)=>{s.message=e.payload},resetStatus:s=>{s.status="idle"},setTimer:(s,e)=>{s.timer=e.payload}},extraReducers:s=>{s.addCase(o.pending,e=>{e.loading=!0}).addCase(o.fulfilled,(e,a)=>{e.loading=!1,e.countries=a.payload.countries}).addCase(o.rejected,e=>{e.loading=!1}).addCase(d.pending,e=>{e.settingPhone=!0,e.resending=!0}).addCase(d.fulfilled,(e,a)=>{e.settingPhone=!1,e.resending=!1,e.message=a.payload.message}).addCase(d.rejected,e=>{e.settingPhone=!1,e.resending=!1,e.message=""}).addCase(c.pending,e=>{e.verifying=!0}).addCase(c.fulfilled,(e,a)=>{e.verifying=!1,e.status=a.payload.status,e.verifyMessage=a.payload.message}).addCase(c.rejected,(e,a)=>{e.verifying=!1,e.status=a.payload.status,e.verifyMessage=a.payload.message}).addCase(l.pending,e=>{e.assigningAccount=!0}).addCase(l.fulfilled,(e,a)=>{e.assigningAccount=!1,e.accountStatus=a.payload.status}).addCase(l.rejected,e=>{e.assigningAccount=!1})}}),{setPhone:I,setPhoneStatus:U,setMessage:p,resetStatus:G,setTimer:Q}=v.actions,w=v.reducer,M=j({state:k,data:w});A("verify",M);const N=t.lazy(()=>y(()=>import("./Step1-f0d474f4.js"),["assets/Step1-f0d474f4.js","assets/index-2cc994c4.js","assets/index-adcc7fb0.css"])),L=t.lazy(()=>y(()=>import("./Step2-b739a561.js"),["assets/Step2-b739a561.js","assets/index-2cc994c4.js","assets/index-adcc7fb0.css","assets/index.es-e4e7ae4c.js","assets/useTimeOutMessage-f2ba29c0.js"])),O=()=>{const s=E(),e=b(),{verifiedPhone:a}=R(C=>C.auth.user),[n,u]=t.useState(1);t.useEffect(()=>{a&&s("/home")},[s,a]),t.useEffect(()=>{e(o())},[e]);const f=t.useCallback(()=>{e(p("")),u(n+1)},[e,n]),m=t.useCallback(()=>{e(p("")),u(n-1)},[e,n]);return console.log(n),r.jsx(V,{className:"max-w-xl h-screen bg-white",children:r.jsxs(t.Suspense,{fallback:r.jsx("div",{className:"flex flex-auto flex-col h-[100vh]",children:r.jsx(T,{loading:!0})}),children:[n===1&&r.jsx(N,{onNext:f}),n===2&&r.jsx(L,{onNext:f,onBack:m})]})})},q=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"}));export{B as a,q as i,Q as s,d as u,c as v};
