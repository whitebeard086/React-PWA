import{r as d,j as e,z as j,S as c,c as f,t as b,aF as k,K as $,a as M,aG as C,aH as U,Z as W,ar as Y,aI as I,aJ as A}from"./index-3595f095.js";import{d as F}from"./dayjs.min-31d410ef.js";function g(t){const a=d.useRef(t);return d.useEffect(()=>{a.current=t}),d.useMemo(()=>(...s)=>{var l;return(l=a.current)==null?void 0:l.call(a,...s)},[])}function G({defaultProp:t,onChange:a}){const s=d.useState(t),[l]=s,i=d.useRef(l),r=g(a);return d.useEffect(()=>{i.current!==l&&(r(l),i.current=l)},[l,i,r]),s}function H({prop:t,defaultProp:a,onChange:s=()=>{}}){const[l,i]=G({defaultProp:a,onChange:s}),r=t!==void 0,o=r?t:l,h=g(s),m=d.useCallback(n=>{const x=n;if(r){const u=typeof n=="function"?x(t):n;u!==t&&h(u)}else i(n)},[r,t,i,h]);return[o,m]}const K=()=>e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"21%"}),e.jsx(c,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"18%"}),e.jsx(c,{height:"1rem",width:"28%"})]})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"21%"}),e.jsx(c,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"18%"}),e.jsx(c,{height:"1rem",width:"28%"})]})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"21%"}),e.jsx(c,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"18%"}),e.jsx(c,{height:"1rem",width:"28%"})]})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"21%"}),e.jsx(c,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"18%"}),e.jsx(c,{height:"1rem",width:"28%"})]})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"21%"}),e.jsx(c,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"18%"}),e.jsx(c,{height:"1rem",width:"28%"})]})]})]}),v=({transactions:t})=>{const{userType:a}=f(s=>s.auth.user);return e.jsx("div",{className:"flex flex-col",children:t==null?void 0:t.map(s=>{var l,i,r,o;return e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-700",children:s.type}),s.type==="Wallet Topup"&&e.jsxs("p",{className:"text-lg font-semibold text-green-500",children:["+₦",(l=s.amount)==null?void 0:l.toLocaleString()]}),s.type.split(" ")[1]==="Airtime"&&e.jsxs("p",{className:"text-lg font-semibold text-green-500",children:["+₦",(i=s.amount)==null?void 0:i.toLocaleString()]}),a==="Provider"&&s.type==="Service Payment"&&e.jsxs("p",{className:"text-lg font-semibold text-green-500",children:["+₦",(r=s.amount)==null?void 0:r.toLocaleString()]}),a==="Client"&&s.type==="Service Payment"&&e.jsxs("p",{className:"text-lg font-semibold text-red-500",children:["-₦",(o=s.amount)==null?void 0:o.toLocaleString()]})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[s.status==="Success"&&e.jsx("p",{className:"font-semibold text-green-500",children:"Completed"}),e.jsx("p",{className:"font-semibold",children:F(s.created_at).format("DD MMM YYYY hh:mm a")})]})]},s.id)})})},y=d.createContext({}),V=y.Provider;y.Consumer;function N(){return d.useContext(y)}const p=d.forwardRef((t,a)=>{const{className:s,defaultValue:l,onChange:i,value:r,variant:o="underline",...h}=t,[m,n]=H({prop:r,onChange:i,defaultProp:l}),x=b("tabs",s);return e.jsx(V,{value:{value:m,onValueChange:n,variant:o},children:e.jsx("div",{className:x,...h,ref:a})})});p.displayName="Tabs";const T=d.forwardRef((t,a)=>{const{className:s,children:l,...i}=t,{variant:r}=N(),o=b("tab-list",`tab-list-${r}`,s);return e.jsx("div",{ref:a,role:"tablist",className:o,...i,children:l})});T.displayName="TabList";const S=d.forwardRef((t,a)=>{const{value:s,disabled:l,className:i,icon:r,children:o,...h}=t,{value:m,onValueChange:n,variant:x}=N(),u=s===m,{themeColor:D,primaryColorLevel:L}=k(),w=g(()=>{!u&&!l&&(n==null||n(s))}),R=`${D}-${L}`,E=b("tab-nav",`tab-nav-${x}`,u&&"tab-nav-active text-white",u&&x==="underline"&&`border-${R}`,u&&x==="pill"&&"bg-black",l&&"tab-nav-disabled",!l&&!u&&"hover:text-black hover:bg-gray-300",i);return e.jsxs("div",{ref:a,className:E,role:"tab","aria-selected":u,tabIndex:0,onClick:w,onKeyDown:w,...h,children:[r&&e.jsx("div",{className:"tab-nav-icon",children:r}),o]})});S.displayName="TabNav";const P=d.forwardRef((t,a)=>{const{value:s,children:l,className:i,...r}=t,o=N(),h=s===o.value,m=b("tab-content",h&&"tab-content-active",i);return e.jsx("div",{ref:a,role:"tabpanel",tabIndex:0,className:m,...r,children:h&&l})});P.displayName="TabContent";p.TabList=T;p.TabNav=S;p.TabContent=P;const z=()=>{const{verifying:t}=f(n=>n.payments.data),{userType:a}=f(n=>n.auth.user),{transactions:s}=f(n=>n.payments.data),l=s==null?void 0:s.filter(n=>n.type==="Wallet Topup"),i=s==null?void 0:s.filter(n=>n.type==="Wallet Topup"||n.type==="Service Payment"),r=s==null?void 0:s.filter(n=>n.type==="Service Payment"),{TabNav:o,TabList:h,TabContent:m}=p;return e.jsxs("div",{className:"mt-2 mb-2",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-700 mb-4",children:"Transactions"}),t?e.jsx(K,{}):e.jsx(e.Fragment,{children:e.jsxs(p,{defaultValue:"all",variant:"pill",children:[e.jsxs(h,{children:[e.jsx(o,{value:"all",children:"All"}),e.jsx(o,{value:"topups",children:"Topups"}),e.jsx(o,{value:"expenses",children:"Expenses"}),a==="Provider"&&e.jsx(o,{value:"withdrawals",children:"Withdrawals"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(m,{value:"all",children:e.jsx(v,{transactions:s})}),e.jsxs(m,{value:"topups",children:[a==="Client"&&e.jsx(v,{transactions:l}),a==="Provider"&&e.jsx(v,{transactions:i})]}),e.jsx(m,{value:"expenses",children:a==="Client"&&e.jsx(v,{transactions:r})})]})]})})]})};$("payments",A);const _=()=>{const t=M(),{updateStatus:a,receivedDeposit:s}=f(i=>i.payments.data),{depositDialog:l}=f(i=>i.payments.state);return d.useEffect(()=>{t(C())},[]),d.useEffect(()=>{(a==="success"||a==="error")&&t(U("idle"))},[t,a]),d.useEffect(()=>{s&&(t(C()),t(W()),l&&t(Y(!1))),t(I(!1))},[l,t,s]),e.jsx("div",{className:"mt-2 p-4",children:e.jsx(z,{})})};export{_ as default};
