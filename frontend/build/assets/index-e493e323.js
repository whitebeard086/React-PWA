import{b as p,d as u,l as N,m as C,r as j,am as m,an as b,Y as S,j as e,F as D,p as P,q as E,t as k,v as F,P as O,z as g,a1 as A,a2 as $,ao as I,E as Y,ap as f,aq as U,o as z,O as y,ar as w,L as R,N as T,G as q,a as L,as as B,at as H,D as c,au as _,av as V,aw as K,ax as v}from"./index-d4dc8e82.js";import{u as M}from"./useAuth-b6856c85.js";import{C as G}from"./index.es-b5ad55ec.js";import{U as W}from"./UploadImage-5db2a0a0.js";import"./CropImage-834e87ea.js";const J=()=>{const a=p(),{deletingAccount:s,deleteStatus:r}=u(t=>t.settings.data),l=N().shape({password:C().required("Please enter your password")}),i={password:""},o=(t,n,h,d)=>{A.push(e.jsx($,{title:h||"Error",type:n||"warning",duration:d||3e3,children:t}),{placement:"top-center"})};j.useEffect(()=>{r==="error"&&(o("Oops! Something went wrong, please try again.","danger","Error",5e3),a(m("idle")),a(b(!1))),r==="password error"&&(o("The password entered does not match your account password, please try again.","danger","Error",5e3),a(m("idle"))),r==="success"&&(o("Your account will be deleted in 72hrs, you can still cancel the process before time is up.","success","Success",6e3),a(m("idle")),a(S()),a(b(!1)))},[r,a]);const x=({password:t})=>{a(I({password:t}))};return e.jsx(D,{initialValues:i,validationSchema:l,onSubmit:t=>x(t),children:({touched:t,errors:n})=>e.jsx(P,{children:e.jsxs(E,{children:[e.jsx(k,{label:"Please Enter Your Password To Confirm",invalid:n.password&&t.password,errorMessage:n.password,children:e.jsx(F,{autoComplete:"off",name:"password",placeholder:"Enter Your Password",component:O})}),e.jsx(g,{type:"submit",variant:"solid",size:"sm",block:!0,className:"bg-red-100 !text-red-500 hover:!text-white hover:bg-red-500",loading:s,children:"Delete account"})]})})})},Q=()=>{const a=p(),{deleteDialog:s}=u(l=>l.settings.state),r=()=>{a(b(!1))};return e.jsxs(Y,{isOpen:s,onClose:r,onRequestClose:r,scrollable:!0,className:"overflow-y-auto",bodyOpenClassName:"overflow-hidden",contentClassName:"mt-[30vh]",title:"delete account",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-700",children:"Are you sure you want to do this?"}),e.jsx("div",{className:"mt-4 overflow-y-auto",children:e.jsx(J,{})})]})},X=()=>{const a=p(),{deletingAccount:s,deleteStatus:r}=u(t=>t.settings.data),l=N().shape({password:C().required("Please enter your password")}),i={password:""},o=(t,n,h,d)=>{A.push(e.jsx($,{title:h||"Error",type:n||"warning",duration:d||3e3,children:t}),{placement:"top-center"})};j.useEffect(()=>{r==="error"&&(o("Oops! Something went wrong, please try again.","danger","Error",5e3),a(m("idle")),a(f(!1))),r==="password error"&&(o("The password entered does not match your account password, please try again.","danger","Error",5e3),a(m("idle"))),r==="success"&&(o("Your account deletion has been canceled.","success","Success",6e3),a(m("idle")),a(S()),a(f(!1)))},[r,a]);const x=({password:t})=>{a(U({password:t}))};return e.jsx(D,{initialValues:i,validationSchema:l,onSubmit:t=>x(t),children:({touched:t,errors:n})=>e.jsx(P,{children:e.jsxs(E,{children:[e.jsx(k,{label:"Please Enter Your Password To Confirm",invalid:n.password&&t.password,errorMessage:n.password,children:e.jsx(F,{autoComplete:"off",name:"password",placeholder:"Enter Your Password",component:O})}),e.jsx(g,{type:"submit",variant:"solid",size:"sm",block:!0,className:"!bg-gray-900 hover:!bg-black",loading:s,children:"Submit"})]})})})},Z=()=>{const a=p(),{cancelDeleteDialog:s}=u(l=>l.settings.state),r=()=>{a(f(!1))};return e.jsxs(Y,{isOpen:s,onClose:r,onRequestClose:r,scrollable:!0,className:"overflow-y-auto",bodyOpenClassName:"overflow-hidden",contentClassName:"mt-[30vh]",title:"delete account",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-700",children:"Are you sure you want to cancel this action?"}),e.jsx("div",{className:"mt-4 overflow-y-auto",children:e.jsx(X,{})})]})},ee=()=>{const{imagePath:a}=T,{profile:s,gettingUser:r}=u(i=>i.auth.user),{uploading:l}=u(i=>i.settings.data);return e.jsxs("div",{className:"flex flex-col justify-center items-center mb-8",children:[e.jsx("div",{className:z("flex items-center flex-row gap-2 cursor-pointer relative"),children:r||l?e.jsxs("div",{className:"relative",children:[e.jsx(y,{size:150,icon:e.jsx(w,{}),src:s!=null&&s.image?`${a}/${s.image}`:null}),e.jsx("div",{className:"absolute top-0 w-full h-full grid place-content-center bg-black/50 rounded-lg",children:e.jsx(R,{loading:!0})})]}):e.jsxs("div",{className:"relative",children:[e.jsx(y,{size:150,className:"relative",icon:s!=null&&s.image?null:e.jsx(w,{}),src:s!=null&&s.image?`${a}/${s.image}`:null}),e.jsx(W,{})]})}),e.jsxs("div",{className:"flex flex-col justify-center items-center",children:[e.jsx("h4",{className:"text-lg font-bold text-primary-500",children:s.username}),e.jsx("p",{className:"text-base font-semibold text-primary-500",children:s.email})]})]})};q("settings",K);const oe=()=>{const{handleSignOut:a}=M(),s=p(),{hasPin:r,user:l,userType:i}=L();window.OneSignal=window.OneSignal||[];const o=window.OneSignal;j.useEffect(()=>{s(B())},[]);const{enabledNotifications:x}=u(d=>d.auth.user);o.push(()=>{o.init({appId:"9749386f-0c3b-417c-b986-3447a73296cd",safari_web_id:"web.onesignal.auto.4d0b3421-6847-4c4b-a531-b4bcf634e4d8",allowLocalhostAsSecureOrigin:!0,autoResubscribe:!0,promptOptions:{customlink:{enabled:!0,style:"button",size:"small",color:{button:"",text:"#FFFFFF"},text:{subscribe:"Subscribe to push notifications",unsubscribe:"Unsubscribe from push notifications"},unsubscribeEnabled:!0}}})});const t=()=>{o.push(function(){o.isPushNotificationsEnabled(function(d){d?(console.log("Push notifications are enabled!"),o.setExternalUserId(l==null?void 0:l.id),x||s(v(!0))):(console.log("Push notifications are not enabled yet."),x&&s(v(!1)))})})},n=()=>{s(b(!0))},h=()=>{s(f(!0))};return e.jsxs("div",{className:"bg-white min-h-[80vh]",children:[e.jsx(ee,{}),e.jsx("hr",{}),e.jsx("div",{className:"",children:e.jsxs("div",{children:[e.jsx("div",{onClick:()=>s(H(!0)),className:"flex items-center gap-2 transition duration-300 cursor-pointer w-full py-4 px-4 hover:bg-gray-100 border-b-gray-200 border-b-2",children:e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("span",{className:"text-base font-semibold text-gray-600",children:"Your Information"}),e.jsx("p",{className:"text xs",children:"Account details"})]})}),e.jsx(c,{className:"flex items-center gap-2 transition duration-300 w-full py-4 px-4 hover:bg-gray-100 border-b-gray-200 border-b-2",to:"/transactions",children:e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("span",{className:"text-base font-semibold text-gray-600",children:"Transactions"}),e.jsx("p",{className:"text xs",children:"View your transaction history"})]})}),i==="Provider"&&e.jsx(e.Fragment,{children:e.jsx(c,{className:"flex items-center gap-2 transition duration-300 w-full py-4 px-4 hover:bg-gray-100 border-b-gray-200 border-b-2",to:"/profile",children:e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("span",{className:"text-base font-semibold text-gray-600",children:"Provider Profile"}),e.jsx("p",{className:"text xs",children:"Edit your service provider profile"})]})})}),i==="Provider"&&e.jsx(e.Fragment,{children:e.jsx(c,{className:"flex items-center gap-2 transition duration-300 w-full py-4 px-4 hover:bg-gray-100 border-b-gray-200 border-b-2",to:"/withdraw",children:e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("span",{className:"text-base font-semibold text-gray-600",children:"Withdrawal Banks"}),e.jsx("p",{className:"text xs",children:"Add or Remove Bank Accounts"})]})})}),e.jsx(c,{className:"flex items-center gap-2 transition duration-300 w-full py-4 px-4 hover:bg-gray-100 border-b-gray-200 border-b-2",to:"/transaction-pin",children:e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("span",{className:"text-base font-semibold text-gray-600",children:r?"Change PIN":"Create PIN"}),e.jsxs("p",{className:"text xs",children:[r?"Change your":"Create"," transaction pin"]})]})}),e.jsx("div",{onClick:()=>s(_(!0)),className:"flex items-center gap-2 transition duration-300 w-full py-4 px-4 cursor-pointer hover:bg-gray-100 border-b-gray-200 border-b-2",children:e.jsx("div",{className:"w-full flex flex-col",children:e.jsx("span",{className:"text-base font-semibold text-gray-600",children:"KYC"})})}),e.jsx(c,{className:"flex items-center gap-2 transition duration-300 w-full py-4 px-4 hover:bg-gray-100 border-b-gray-200 border-b-2",to:"/refer-and-earn",children:e.jsx("div",{className:"w-full flex flex-col",children:e.jsx("span",{className:"text-base font-semibold text-gray-600",children:"Refer & Earn"})})}),e.jsx(c,{className:"flex items-center gap-2 transition duration-300 w-full py-4 px-4 hover:bg-gray-100 border-b-gray-200 border-b-2",to:"/help-&-support",children:e.jsx("div",{className:"w-full flex flex-col",children:e.jsx("span",{className:"text-base font-semibold text-gray-600",children:"Help & Support"})})}),e.jsx(c,{className:"flex items-center gap-2 transition duration-300 w-full py-4 px-4 hover:bg-gray-100 border-b-gray-200 border-b-2",to:"/t-&-c",children:e.jsx("div",{className:"w-full flex flex-col",children:e.jsx("span",{className:"text-base font-semibold text-gray-600",children:"Terms & Conditions"})})}),e.jsx(c,{className:"flex items-center gap-2 transition duration-300 w-full py-4 px-4 hover:bg-gray-100 border-b-gray-200 border-b-2",to:"/privacy-policy",children:e.jsx("div",{className:"w-full flex flex-col",children:e.jsx("span",{className:"text-base font-semibold text-gray-600",children:"Privacy Policy"})})}),e.jsx("div",{onClick:t,className:"onesignal-customlink-container"}),e.jsxs("div",{onClick:a,className:"flex items-center gap-2 cursor-pointer transition duration-300 w-full py-4 px-4 hover:bg-gray-100 border-b-gray-200 border-b-2",children:[e.jsx("span",{className:"text-xl text-red-500 opacity-50",children:e.jsx(V,{})}),e.jsx("span",{className:"w-full text-base font-semibold text-red-500",children:"Logout"})]}),e.jsx("div",{className:"p-4",children:(l==null?void 0:l.deactivate_at)===null?e.jsx(g,{variant:"solid",size:"sm",className:"bg-red-100 !text-red-500 hover:!text-white hover:bg-red-500",onClick:n,children:"Delete your account"}):e.jsxs("div",{className:"",children:[e.jsxs("span",{className:"text-base font-semibold text-red-500",children:["Your account will be deleted in"," ",e.jsx(G,{daysInHours:!0,date:l==null?void 0:l.deactivate_at})]}),e.jsx(g,{variant:"solid",size:"sm",className:"!bg-gray-900 hover:!bg-black block mt-4",onClick:h,children:"Cancel"})]})})]})}),e.jsx(Q,{}),e.jsx(Z,{})]})};export{oe as default};
