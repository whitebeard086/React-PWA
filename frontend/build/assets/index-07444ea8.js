var Wh=Object.defineProperty;var Vh=(e,t,St)=>t in e?Wh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:St}):e[t]=St;var ir=(e,t,St)=>(Vh(e,typeof t!="symbol"?t+"":t,St),St),Ml=(e,t,St)=>{if(!t.has(e))throw TypeError("Cannot "+St)};var pn=(e,t,St)=>(Ml(e,t,"read from private field"),St?St.call(e):t.get(e)),ti=(e,t,St)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,St)},pi=(e,t,St,r)=>(Ml(e,t,"write to private field"),r?r.call(e,St):t.set(e,St),St);var Do=(e,t,St,r)=>({set _(xe){pi(e,t,xe,St)},get _(){return pn(e,t,r)}}),ri=(e,t,St)=>(Ml(e,t,"access private method"),St);import{a8 as commonjsGlobal,n as getDefaultExportFromCjs,b9 as getAugmentedNamespace,aR as dayjs,a as useDispatch,r as reactExports,c as useSelector,ba as setDeleteMessageStatus,j as jsxRuntimeExports,bb as AnimatePresence,B as motion,t as classNames,T as Avatar,z as Card,O as Image$1,Q as appConfig,a1 as toast,a2 as Notification,aH as imageCompression,bc as useDropdownMenuContext,bd as sendNewMessageEmail,be as setMessageStatus,bf as setFile,bg as sendMessage,bh as BsEmojiSmile,bi as Dropdown,bj as IoIosAddCircleOutline,ae as Upload,bk as FaFileImage,bl as FaFileInvoiceDollar,bm as IoIosSend,bn as setInvoice,bo as _typeof,_ as __vitePreload,o as create$3,p as create$6,F as Formik,v as Form,w as FormContainer,x as FormItem,y as Field,I as Input,a0 as FormNumericInput,G as Button,bp as MdOutlineDownloadDone,bq as AiOutlineRollback,br as setAddingItem,bs as createUID,bt as setInvoiceData,bu as createNotification,bv as sendNewInvoiceNotification,bw as setInvoiceStatus,bx as socket,by as setCreateStatus,J as Dialog,bz as Table,bA as MdDelete,bB as removeInvoiceItem,bC as BiAddToQueue,bD as setInvoiceComplete,bE as BsFillSendFill,bF as AiTwotoneEdit,bG as toggleInvoiceDialog,bH as makeInvoice,bI as resetBookingStatus,bJ as togglePaymentDialog,bK as BiCheckDouble,bL as MdOutlineCancel,bM as setViewingInvoice,bN as bookService,u as useNavigate,bO as HiArrowNarrowLeft,H as Link,bP as AiFillEye,bQ as FaMoneyCheckAlt,bR as BsShieldFillCheck,bS as AiOutlineSync,K as injectReducer,b as useLocation,ak as useParams,bT as initiateChat,bU as setReceivedInvoice,bV as setServiceBooked,L as Loading,bW as reducer,bX as setInvoiceNumber}from"./index-a992da42.js";import{i as index,E as EllipsisButton}from"./react-textarea-autosize.browser.esm-f65a6054.js";import{s as sendPushNotification}from"./sendPushNotification-2a35c3f5.js";var calendar$1={exports:{}};(function(e,t){(function(St,r){e.exports=r()})(commonjsGlobal,function(){return function(St,r,xe){var _e="h:mm A",Ee={lastDay:"[Yesterday at] "+_e,sameDay:"[Today at] "+_e,nextDay:"[Tomorrow at] "+_e,nextWeek:"dddd [at] "+_e,lastWeek:"[Last] dddd [at] "+_e,sameElse:"MM/DD/YYYY"};r.prototype.calendar=function(Pe,Ce){var Te=Ce||this.$locale().calendar||Ee,Ie=xe(Pe||void 0).startOf("d"),Ve=this.diff(Ie,"d",!0),He="sameElse",ke=Ve<-6?He:Ve<-1?"lastWeek":Ve<0?"lastDay":Ve<1?"sameDay":Ve<2?"nextDay":Ve<7?"nextWeek":He,qe=Te[ke]||Ee[ke];return typeof qe=="function"?qe.call(this,xe()):this.format(qe)}}})})(calendar$1);var calendarExports=calendar$1.exports;const calendar=getDefaultExportFromCjs(calendarExports);function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(t,St){module.exports=St()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,t)=>{var Mi;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=ii,t.bytesToString=Sn,t.createValidAbsoluteUrl=_n,t.getModificationDate=li,t.getVerbosityLevel=Dn,t.info=Rn,t.isArrayBuffer=si,t.isArrayEqual=yi,t.normalizeUnicode=fi,t.objectFromMap=yn,t.objectSize=We,t.setVerbosityLevel=kn,t.shadow=sn,t.string32=$e,t.stringToBytes=Ke,t.stringToPDFString=$n,t.stringToUTF8String=Yn,t.unreachable=zn,t.utf8StringToString=ni,t.warn=jn;const St=[1,0,0,1,0,0];t.IDENTITY_MATRIX=St;const r=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=r;const xe=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=xe;const _e=1.35;t.LINE_FACTOR=_e;const Ee=.35;t.LINE_DESCENT_FACTOR=Ee;const Pe=Ee/_e;t.BASELINE_FACTOR=Pe;const Ce={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=Ce;const Te={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=Te;const Ie="pdfjs_internal_editor_";t.AnnotationEditorPrefix=Ie;const Ve={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};t.AnnotationEditorType=Ve;const He={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};t.AnnotationEditorParamsType=He;const ke={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=ke;const qe={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=qe;const De={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=De;const Oe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=Oe;const Be={MARKED:"Marked",REVIEW:"Review"};t.AnnotationStateModelType=Be;const Ye={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationMarkedState=Ye;const nn={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReviewState=nn;const en={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=en;const Ue={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=Ue;const Je={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=Je;const Ge={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=Ge;const Me={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=Me;const tn={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=tn;const dn={O:"PageOpen",C:"PageClose"};t.PageActionEventType=dn;const Re={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=Re;const Qe={NONE:0,BINARY:1};t.CMapCompressionType=Qe;const cn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=cn;const hn={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=hn;let Pn=Re.WARNINGS;function kn(ei){Number.isInteger(ei)&&(Pn=ei)}function Dn(){return Pn}function Rn(ei){Pn>=Re.INFOS&&console.log(`Info: ${ei}`)}function jn(ei){Pn>=Re.WARNINGS&&console.log(`Warning: ${ei}`)}function zn(ei){throw new Error(ei)}function ii(ei,Cn){ei||zn(Cn)}function an(ei){switch(ei==null?void 0:ei.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function _n(ei,Cn=null,Tn=null){if(!ei)return null;try{if(Tn&&typeof ei=="string"){if(Tn.addDefaultProtocol&&ei.startsWith("www.")){const gi=ei.match(/\./g);(gi==null?void 0:gi.length)>=2&&(ei=`http://${ei}`)}if(Tn.tryConvertEncoding)try{ei=Yn(ei)}catch{}}const Jn=Cn?new URL(ei,Cn):new URL(ei);if(an(Jn))return Jn}catch{}return null}function sn(ei,Cn,Tn,Jn=!1){return Object.defineProperty(ei,Cn,{value:Tn,enumerable:!Jn,configurable:!0,writable:!1}),Tn}const ze=function(){function Cn(Tn,Jn){this.constructor===Cn&&zn("Cannot initialize BaseException."),this.message=Tn,this.name=Jn}return Cn.prototype=new Error,Cn.constructor=Cn,Cn}();t.BaseException=ze;class Xe extends ze{constructor(Cn,Tn){super(Cn,"PasswordException"),this.code=Tn}}t.PasswordException=Xe;class rn extends ze{constructor(Cn,Tn){super(Cn,"UnknownErrorException"),this.details=Tn}}t.UnknownErrorException=rn;class gn extends ze{constructor(Cn){super(Cn,"InvalidPDFException")}}t.InvalidPDFException=gn;class fn extends ze{constructor(Cn){super(Cn,"MissingPDFException")}}t.MissingPDFException=fn;class Nn extends ze{constructor(Cn,Tn){super(Cn,"UnexpectedResponseException"),this.status=Tn}}t.UnexpectedResponseException=Nn;class wn extends ze{constructor(Cn){super(Cn,"FormatError")}}t.FormatError=wn;class xn extends ze{constructor(Cn){super(Cn,"AbortException")}}t.AbortException=xn;function Sn(ei){(typeof ei!="object"||(ei==null?void 0:ei.length)===void 0)&&zn("Invalid argument for bytesToString");const Cn=ei.length,Tn=8192;if(Cn<Tn)return String.fromCharCode.apply(null,ei);const Jn=[];for(let gi=0;gi<Cn;gi+=Tn){const Si=Math.min(gi+Tn,Cn),Ni=ei.subarray(gi,Si);Jn.push(String.fromCharCode.apply(null,Ni))}return Jn.join("")}function Ke(ei){typeof ei!="string"&&zn("Invalid argument for stringToBytes");const Cn=ei.length,Tn=new Uint8Array(Cn);for(let Jn=0;Jn<Cn;++Jn)Tn[Jn]=ei.charCodeAt(Jn)&255;return Tn}function $e(ei){return String.fromCharCode(ei>>24&255,ei>>16&255,ei>>8&255,ei&255)}function We(ei){return Object.keys(ei).length}function yn(ei){const Cn=Object.create(null);for(const[Tn,Jn]of ei)Cn[Tn]=Jn;return Cn}function bn(){const ei=new Uint8Array(4);return ei[0]=1,new Uint32Array(ei.buffer,0,1)[0]===1}function Ln(){try{return new Function(""),!0}catch{return!1}}class Bn{static get isLittleEndian(){return sn(this,"isLittleEndian",bn())}static get isEvalSupported(){return sn(this,"isEvalSupported",Ln())}static get isOffscreenCanvasSupported(){return sn(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?sn(this,"platform",{isWin:!1,isMac:!1}):sn(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}t.FeatureTest=Bn;const On=[...Array(256).keys()].map(ei=>ei.toString(16).padStart(2,"0"));class qn{static makeHexColor(Cn,Tn,Jn){return`#${On[Cn]}${On[Tn]}${On[Jn]}`}static scaleMinMax(Cn,Tn){let Jn;Cn[0]?(Cn[0]<0&&(Jn=Tn[0],Tn[0]=Tn[1],Tn[1]=Jn),Tn[0]*=Cn[0],Tn[1]*=Cn[0],Cn[3]<0&&(Jn=Tn[2],Tn[2]=Tn[3],Tn[3]=Jn),Tn[2]*=Cn[3],Tn[3]*=Cn[3]):(Jn=Tn[0],Tn[0]=Tn[2],Tn[2]=Jn,Jn=Tn[1],Tn[1]=Tn[3],Tn[3]=Jn,Cn[1]<0&&(Jn=Tn[2],Tn[2]=Tn[3],Tn[3]=Jn),Tn[2]*=Cn[1],Tn[3]*=Cn[1],Cn[2]<0&&(Jn=Tn[0],Tn[0]=Tn[1],Tn[1]=Jn),Tn[0]*=Cn[2],Tn[1]*=Cn[2]),Tn[0]+=Cn[4],Tn[1]+=Cn[4],Tn[2]+=Cn[5],Tn[3]+=Cn[5]}static transform(Cn,Tn){return[Cn[0]*Tn[0]+Cn[2]*Tn[1],Cn[1]*Tn[0]+Cn[3]*Tn[1],Cn[0]*Tn[2]+Cn[2]*Tn[3],Cn[1]*Tn[2]+Cn[3]*Tn[3],Cn[0]*Tn[4]+Cn[2]*Tn[5]+Cn[4],Cn[1]*Tn[4]+Cn[3]*Tn[5]+Cn[5]]}static applyTransform(Cn,Tn){const Jn=Cn[0]*Tn[0]+Cn[1]*Tn[2]+Tn[4],gi=Cn[0]*Tn[1]+Cn[1]*Tn[3]+Tn[5];return[Jn,gi]}static applyInverseTransform(Cn,Tn){const Jn=Tn[0]*Tn[3]-Tn[1]*Tn[2],gi=(Cn[0]*Tn[3]-Cn[1]*Tn[2]+Tn[2]*Tn[5]-Tn[4]*Tn[3])/Jn,Si=(-Cn[0]*Tn[1]+Cn[1]*Tn[0]+Tn[4]*Tn[1]-Tn[5]*Tn[0])/Jn;return[gi,Si]}static getAxialAlignedBoundingBox(Cn,Tn){const Jn=qn.applyTransform(Cn,Tn),gi=qn.applyTransform(Cn.slice(2,4),Tn),Si=qn.applyTransform([Cn[0],Cn[3]],Tn),Ni=qn.applyTransform([Cn[2],Cn[1]],Tn);return[Math.min(Jn[0],gi[0],Si[0],Ni[0]),Math.min(Jn[1],gi[1],Si[1],Ni[1]),Math.max(Jn[0],gi[0],Si[0],Ni[0]),Math.max(Jn[1],gi[1],Si[1],Ni[1])]}static inverseTransform(Cn){const Tn=Cn[0]*Cn[3]-Cn[1]*Cn[2];return[Cn[3]/Tn,-Cn[1]/Tn,-Cn[2]/Tn,Cn[0]/Tn,(Cn[2]*Cn[5]-Cn[4]*Cn[3])/Tn,(Cn[4]*Cn[1]-Cn[5]*Cn[0])/Tn]}static singularValueDecompose2dScale(Cn){const Tn=[Cn[0],Cn[2],Cn[1],Cn[3]],Jn=Cn[0]*Tn[0]+Cn[1]*Tn[2],gi=Cn[0]*Tn[1]+Cn[1]*Tn[3],Si=Cn[2]*Tn[0]+Cn[3]*Tn[2],Ni=Cn[2]*Tn[1]+Cn[3]*Tn[3],Fi=(Jn+Ni)/2,Pi=Math.sqrt((Jn+Ni)**2-4*(Jn*Ni-Si*gi))/2,wi=Fi+Pi||1,xi=Fi-Pi||1;return[Math.sqrt(wi),Math.sqrt(xi)]}static normalizeRect(Cn){const Tn=Cn.slice(0);return Cn[0]>Cn[2]&&(Tn[0]=Cn[2],Tn[2]=Cn[0]),Cn[1]>Cn[3]&&(Tn[1]=Cn[3],Tn[3]=Cn[1]),Tn}static intersect(Cn,Tn){const Jn=Math.max(Math.min(Cn[0],Cn[2]),Math.min(Tn[0],Tn[2])),gi=Math.min(Math.max(Cn[0],Cn[2]),Math.max(Tn[0],Tn[2]));if(Jn>gi)return null;const Si=Math.max(Math.min(Cn[1],Cn[3]),Math.min(Tn[1],Tn[3])),Ni=Math.min(Math.max(Cn[1],Cn[3]),Math.max(Tn[1],Tn[3]));return Si>Ni?null:[Jn,Si,gi,Ni]}static bezierBoundingBox(Cn,Tn,Jn,gi,Si,Ni,Fi,Pi){const wi=[],xi=[[],[]];let $i,Ii,zi,Ti,Li,Ji,Zi,tr;for(let wr=0;wr<2;++wr){if(wr===0?(Ii=6*Cn-12*Jn+6*Si,$i=-3*Cn+9*Jn-9*Si+3*Fi,zi=3*Jn-3*Cn):(Ii=6*Tn-12*gi+6*Ni,$i=-3*Tn+9*gi-9*Ni+3*Pi,zi=3*gi-3*Tn),Math.abs($i)<1e-12){if(Math.abs(Ii)<1e-12)continue;Ti=-zi/Ii,0<Ti&&Ti<1&&wi.push(Ti);continue}Zi=Ii*Ii-4*zi*$i,tr=Math.sqrt(Zi),!(Zi<0)&&(Li=(-Ii+tr)/(2*$i),0<Li&&Li<1&&wi.push(Li),Ji=(-Ii-tr)/(2*$i),0<Ji&&Ji<1&&wi.push(Ji))}let qi=wi.length,Ui;const rr=qi;for(;qi--;)Ti=wi[qi],Ui=1-Ti,xi[0][qi]=Ui*Ui*Ui*Cn+3*Ui*Ui*Ti*Jn+3*Ui*Ti*Ti*Si+Ti*Ti*Ti*Fi,xi[1][qi]=Ui*Ui*Ui*Tn+3*Ui*Ui*Ti*gi+3*Ui*Ti*Ti*Ni+Ti*Ti*Ti*Pi;return xi[0][rr]=Cn,xi[1][rr]=Tn,xi[0][rr+1]=Fi,xi[1][rr+1]=Pi,xi[0].length=xi[1].length=rr+2,[Math.min(...xi[0]),Math.min(...xi[1]),Math.max(...xi[0]),Math.max(...xi[1])]}}t.Util=qn;const Gn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function $n(ei){if(ei[0]>="ï"){let Tn;if(ei[0]==="þ"&&ei[1]==="ÿ"?Tn="utf-16be":ei[0]==="ÿ"&&ei[1]==="þ"?Tn="utf-16le":ei[0]==="ï"&&ei[1]==="»"&&ei[2]==="¿"&&(Tn="utf-8"),Tn)try{const Jn=new TextDecoder(Tn,{fatal:!0}),gi=Ke(ei);return Jn.decode(gi)}catch(Jn){jn(`stringToPDFString: "${Jn}".`)}}const Cn=[];for(let Tn=0,Jn=ei.length;Tn<Jn;Tn++){const gi=Gn[ei.charCodeAt(Tn)];Cn.push(gi?String.fromCharCode(gi):ei.charAt(Tn))}return Cn.join("")}function Yn(ei){return decodeURIComponent(escape(ei))}function ni(ei){return unescape(encodeURIComponent(ei))}function si(ei){return typeof ei=="object"&&(ei==null?void 0:ei.byteLength)!==void 0}function yi(ei,Cn){if(ei.length!==Cn.length)return!1;for(let Tn=0,Jn=ei.length;Tn<Jn;Tn++)if(ei[Tn]!==Cn[Tn])return!1;return!0}function li(ei=new Date){return[ei.getUTCFullYear().toString(),(ei.getUTCMonth()+1).toString().padStart(2,"0"),ei.getUTCDate().toString().padStart(2,"0"),ei.getUTCHours().toString().padStart(2,"0"),ei.getUTCMinutes().toString().padStart(2,"0"),ei.getUTCSeconds().toString().padStart(2,"0")].join("")}class vi{constructor(){ti(this,Mi,!1);this.promise=new Promise((Cn,Tn)=>{this.resolve=Jn=>{pi(this,Mi,!0),Cn(Jn)},this.reject=Jn=>{pi(this,Mi,!0),Tn(Jn)}})}get settled(){return pn(this,Mi)}}Mi=new WeakMap,t.PromiseCapability=vi;let Mn=null,bi=null;function fi(ei){return Mn||(Mn=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,bi=new Map([["ﬅ","ſt"]])),ei.replaceAll(Mn,(Cn,Tn,Jn)=>Tn?Tn.normalize("NFKC"):bi.get(Jn))}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var e,St,r,xe,fa,Ee,jo,Ce,Te,Ie,Ve,He,ke,qe,De,Ol,Be,Ye,Dl,en,Ue;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:Ge,NodeCMapReaderFactory:Me,NodeFilterFactory:tn,NodeStandardFontDataFactory:dn}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=Ge,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=Me,exports.DefaultFilterFactory=DefaultFilterFactory=tn,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=dn}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:Ge}=__w_pdfjs_require__(21);createPDFNetworkStream=Me=>new Ge(Me)}else{const{PDFNetworkStream:Ge}=__w_pdfjs_require__(24),{PDFFetchStream:Me}=__w_pdfjs_require__(25);createPDFNetworkStream=tn=>(0,_display_utils.isValidFetchUrl)(tn.url)?new Me(tn):new Ge(tn)}function getDocument(Ge){if(typeof Ge=="string"||Ge instanceof URL?Ge={url:Ge}:(0,_util.isArrayBuffer)(Ge)&&(Ge={data:Ge}),typeof Ge!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!Ge.url&&!Ge.data&&!Ge.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const Me=new PDFDocumentLoadingTask,{docId:tn}=Me,dn=Ge.url?getUrlProp(Ge.url):null,Re=Ge.data?getDataProp(Ge.data):null,Qe=Ge.httpHeaders||null,cn=Ge.withCredentials===!0,hn=Ge.password??null,Pn=Ge.range instanceof PDFDataRangeTransport?Ge.range:null,kn=Number.isInteger(Ge.rangeChunkSize)&&Ge.rangeChunkSize>0?Ge.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Dn=Ge.worker instanceof PDFWorker?Ge.worker:null;const Rn=Ge.verbosity,jn=typeof Ge.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(Ge.docBaseUrl)?Ge.docBaseUrl:null,zn=typeof Ge.cMapUrl=="string"?Ge.cMapUrl:null,ii=Ge.cMapPacked!==!1,an=Ge.CMapReaderFactory||DefaultCMapReaderFactory,_n=typeof Ge.standardFontDataUrl=="string"?Ge.standardFontDataUrl:null,sn=Ge.StandardFontDataFactory||DefaultStandardFontDataFactory,ze=Ge.stopAtErrors!==!0,Xe=Number.isInteger(Ge.maxImageSize)&&Ge.maxImageSize>-1?Ge.maxImageSize:-1,rn=Ge.isEvalSupported!==!1,gn=typeof Ge.isOffscreenCanvasSupported=="boolean"?Ge.isOffscreenCanvasSupported:!_is_node.isNodeJS,fn=Number.isInteger(Ge.canvasMaxAreaInBytes)?Ge.canvasMaxAreaInBytes:-1,Nn=typeof Ge.disableFontFace=="boolean"?Ge.disableFontFace:_is_node.isNodeJS,wn=Ge.fontExtraProperties===!0,xn=Ge.enableXfa===!0,Sn=Ge.ownerDocument||globalThis.document,Ke=Ge.disableRange===!0,$e=Ge.disableStream===!0,We=Ge.disableAutoFetch===!0,yn=Ge.pdfBug===!0,bn=Pn?Pn.length:Ge.length??NaN,Ln=typeof Ge.useSystemFonts=="boolean"?Ge.useSystemFonts:!_is_node.isNodeJS&&!Nn,Bn=typeof Ge.useWorkerFetch=="boolean"?Ge.useWorkerFetch:an===_display_utils.DOMCMapReaderFactory&&sn===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(zn,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(_n,document.baseURI),On=Ge.canvasFactory||new DefaultCanvasFactory({ownerDocument:Sn}),qn=Ge.filterFactory||new DefaultFilterFactory({docId:tn,ownerDocument:Sn}),Gn=null;(0,_util.setVerbosityLevel)(Rn);const $n={canvasFactory:On,filterFactory:qn};if(Bn||($n.cMapReaderFactory=new an({baseUrl:zn,isCompressed:ii}),$n.standardFontDataFactory=new sn({baseUrl:_n})),!Dn){const si={verbosity:Rn,port:_worker_options.GlobalWorkerOptions.workerPort};Dn=si.port?PDFWorker.fromPort(si):new PDFWorker(si),Me._worker=Dn}const Yn={docId:tn,apiVersion:"3.6.172",data:Re,password:hn,disableAutoFetch:We,rangeChunkSize:kn,length:bn,docBaseUrl:jn,enableXfa:xn,evaluatorOptions:{maxImageSize:Xe,disableFontFace:Nn,ignoreErrors:ze,isEvalSupported:rn,isOffscreenCanvasSupported:gn,canvasMaxAreaInBytes:fn,fontExtraProperties:wn,useSystemFonts:Ln,cMapUrl:Bn?zn:null,standardFontDataUrl:Bn?_n:null}},ni={ignoreErrors:ze,isEvalSupported:rn,disableFontFace:Nn,fontExtraProperties:wn,enableXfa:xn,ownerDocument:Sn,disableAutoFetch:We,pdfBug:yn,styleElement:Gn};return Dn.promise.then(function(){if(Me.destroyed)throw new Error("Loading aborted");const si=_fetchDocument(Dn,Yn),yi=new Promise(function(li){let vi;Pn?vi=new _transport_stream.PDFDataTransportStream({length:bn,initialData:Pn.initialData,progressiveDone:Pn.progressiveDone,contentDispositionFilename:Pn.contentDispositionFilename,disableRange:Ke,disableStream:$e},Pn):Re||(vi=createPDFNetworkStream({url:dn,length:bn,httpHeaders:Qe,withCredentials:cn,rangeChunkSize:kn,disableRange:Ke,disableStream:$e})),li(vi)});return Promise.all([si,yi]).then(function([li,vi]){if(Me.destroyed)throw new Error("Loading aborted");const Mn=new _message_handler.MessageHandler(tn,li,Dn.port),bi=new WorkerTransport(Mn,Me,vi,ni,$n);Me._transport=bi,Mn.send("Ready",null)})}).catch(Me._capability.reject),Me}async function _fetchDocument(Ge,Me){if(Ge.destroyed)throw new Error("Worker was destroyed");const tn=await Ge.messageHandler.sendWithPromise("GetDocRequest",Me,Me.data?[Me.data.buffer]:null);if(Ge.destroyed)throw new Error("Worker was destroyed");return tn}function getUrlProp(Ge){if(Ge instanceof URL)return Ge.href;try{return new URL(Ge,window.location).href}catch{if(_is_node.isNodeJS&&typeof Ge=="string")return Ge}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(Ge){if(_is_node.isNodeJS&&typeof Buffer<"u"&&Ge instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(Ge);if(Ge instanceof Uint8Array&&Ge.byteLength===Ge.buffer.byteLength)return Ge;if(typeof Ge=="string")return(0,_util.stringToBytes)(Ge);if(typeof Ge=="object"&&!isNaN(Ge==null?void 0:Ge.length)||(0,_util.isArrayBuffer)(Ge))return new Uint8Array(Ge);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class t{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Do(t,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var Me;this.destroyed=!0,await((Me=this._transport)==null?void 0:Me.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};e=new WeakMap,ti(t,e,0);let PDFDocumentLoadingTask=t;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(Me,tn,dn=!1,Re=null){this.length=Me,this.initialData=tn,this.progressiveDone=dn,this.contentDispositionFilename=Re,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(Me){this._rangeListeners.push(Me)}addProgressListener(Me){this._progressListeners.push(Me)}addProgressiveReadListener(Me){this._progressiveReadListeners.push(Me)}addProgressiveDoneListener(Me){this._progressiveDoneListeners.push(Me)}onDataRange(Me,tn){for(const dn of this._rangeListeners)dn(Me,tn)}onDataProgress(Me,tn){this._readyCapability.promise.then(()=>{for(const dn of this._progressListeners)dn(Me,tn)})}onDataProgressiveRead(Me){this._readyCapability.promise.then(()=>{for(const tn of this._progressiveReadListeners)tn(Me)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const Me of this._progressiveDoneListeners)Me()})}transportReady(){this._readyCapability.resolve()}requestDataRange(Me,tn){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(Me,tn){this._pdfInfo=Me,this._transport=tn}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(Me){return this._transport.getPage(Me)}getPageIndex(Me){return this._transport.getPageIndex(Me)}getDestinations(){return this._transport.getDestinations()}getDestination(Me){return this._transport.getDestination(Me)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(Me=!1){return this._transport.startCleanup(Me||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(Me,tn,dn,Re=!1){ti(this,xe);ti(this,Ee);ti(this,St,null);ti(this,r,!1);this._pageIndex=Me,this._pageInfo=tn,this._transport=dn,this._stats=Re?new _display_utils.StatTimer:null,this._pdfBug=Re,this.commonObjs=dn.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:Me,rotation:tn=this.rotate,offsetX:dn=0,offsetY:Re=0,dontFlip:Qe=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:Me,rotation:tn,offsetX:dn,offsetY:Re,dontFlip:Qe})}getAnnotations({intent:Me="display"}={}){const tn=this._transport.getRenderingIntent(Me);return this._transport.getAnnotations(this._pageIndex,tn.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var Me;return((Me=this._transport._htmlForXfa)==null?void 0:Me.children[this._pageIndex])||null}render({canvasContext:Me,viewport:tn,intent:dn="display",annotationMode:Re=_util.AnnotationMode.ENABLE,transform:Qe=null,background:cn=null,optionalContentConfigPromise:hn=null,annotationCanvasMap:Pn=null,pageColors:kn=null,printAnnotationStorage:Dn=null}){var sn,ze,Xe;if((sn=arguments[0])!=null&&sn.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(ze=this._stats)==null||ze.time("Overall");const Rn=this._transport.getRenderingIntent(dn,Re,Dn);pi(this,r,!1),ri(this,Ee,jo).call(this),hn||(hn=this._transport.getOptionalContentConfig());let jn=this._intentStates.get(Rn.cacheKey);jn||(jn=Object.create(null),this._intentStates.set(Rn.cacheKey,jn)),jn.streamReaderCancelTimeout&&(clearTimeout(jn.streamReaderCancelTimeout),jn.streamReaderCancelTimeout=null);const zn=!!(Rn.renderingIntent&_util.RenderingIntentFlag.PRINT);jn.displayReadyCapability||(jn.displayReadyCapability=new _util.PromiseCapability,jn.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Xe=this._stats)==null||Xe.time("Page Request"),this._pumpOperatorList(Rn));const ii=rn=>{var gn,fn;jn.renderTasks.delete(an),(this._maybeCleanupAfterRender||zn)&&pi(this,r,!0),ri(this,xe,fa).call(this,!zn),rn?(an.capability.reject(rn),this._abortOperatorList({intentState:jn,reason:rn instanceof Error?rn:new Error(rn)})):an.capability.resolve(),(gn=this._stats)==null||gn.timeEnd("Rendering"),(fn=this._stats)==null||fn.timeEnd("Overall")},an=new InternalRenderTask({callback:ii,params:{canvasContext:Me,viewport:tn,transform:Qe,background:cn},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Pn,operatorList:jn.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!zn,pdfBug:this._pdfBug,pageColors:kn});(jn.renderTasks||(jn.renderTasks=new Set)).add(an);const _n=an.task;return Promise.all([jn.displayReadyCapability.promise,hn]).then(([rn,gn])=>{var fn;if(pn(this,r)){ii();return}(fn=this._stats)==null||fn.time("Rendering"),an.initializeGraphics({transparency:rn,optionalContentConfig:gn}),an.operatorListChanged()}).catch(ii),_n}getOperatorList({intent:Me="display",annotationMode:tn=_util.AnnotationMode.ENABLE,printAnnotationStorage:dn=null}={}){var Pn;function Re(){cn.operatorList.lastChunk&&(cn.opListReadCapability.resolve(cn.operatorList),cn.renderTasks.delete(hn))}const Qe=this._transport.getRenderingIntent(Me,tn,dn,!0);let cn=this._intentStates.get(Qe.cacheKey);cn||(cn=Object.create(null),this._intentStates.set(Qe.cacheKey,cn));let hn;return cn.opListReadCapability||(hn=Object.create(null),hn.operatorListChanged=Re,cn.opListReadCapability=new _util.PromiseCapability,(cn.renderTasks||(cn.renderTasks=new Set)).add(hn),cn.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Pn=this._stats)==null||Pn.time("Page Request"),this._pumpOperatorList(Qe)),cn.opListReadCapability.promise}streamTextContent({includeMarkedContent:Me=!1,disableNormalization:tn=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:Me===!0,disableNormalization:tn===!0},{highWaterMark:100,size(Re){return Re.items.length}})}getTextContent(Me={}){if(this._transport._htmlForXfa)return this.getXfa().then(dn=>_xfa_text.XfaText.textContent(dn));const tn=this.streamTextContent(Me);return new Promise(function(dn,Re){function Qe(){cn.read().then(function({value:Pn,done:kn}){if(kn){dn(hn);return}Object.assign(hn.styles,Pn.styles),hn.items.push(...Pn.items),Qe()},Re)}const cn=tn.getReader(),hn={items:[],styles:Object.create(null)};Qe()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const Me=[];for(const tn of this._intentStates.values())if(this._abortOperatorList({intentState:tn,reason:new Error("Page was destroyed."),force:!0}),!tn.opListReadCapability)for(const dn of tn.renderTasks)Me.push(dn.completed),dn.cancel();return this.objs.clear(),pi(this,r,!1),ri(this,Ee,jo).call(this),Promise.all(Me)}cleanup(Me=!1){pi(this,r,!0);const tn=ri(this,xe,fa).call(this,!1);return Me&&tn&&this._stats&&(this._stats=new _display_utils.StatTimer),tn}_startRenderPage(Me,tn){var Re,Qe;const dn=this._intentStates.get(tn);dn&&((Re=this._stats)==null||Re.timeEnd("Page Request"),(Qe=dn.displayReadyCapability)==null||Qe.resolve(Me))}_renderPageChunk(Me,tn){for(let dn=0,Re=Me.length;dn<Re;dn++)tn.operatorList.fnArray.push(Me.fnArray[dn]),tn.operatorList.argsArray.push(Me.argsArray[dn]);tn.operatorList.lastChunk=Me.lastChunk,tn.operatorList.separateAnnots=Me.separateAnnots;for(const dn of tn.renderTasks)dn.operatorListChanged();Me.lastChunk&&ri(this,xe,fa).call(this,!0)}_pumpOperatorList({renderingIntent:Me,cacheKey:tn,annotationStorageMap:dn}){const Qe=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:Me,cacheKey:tn,annotationStorage:dn}).getReader(),cn=this._intentStates.get(tn);cn.streamReader=Qe;const hn=()=>{Qe.read().then(({value:Pn,done:kn})=>{if(kn){cn.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Pn,cn),hn())},Pn=>{if(cn.streamReader=null,!this._transport.destroyed){if(cn.operatorList){cn.operatorList.lastChunk=!0;for(const kn of cn.renderTasks)kn.operatorListChanged();ri(this,xe,fa).call(this,!0)}if(cn.displayReadyCapability)cn.displayReadyCapability.reject(Pn);else if(cn.opListReadCapability)cn.opListReadCapability.reject(Pn);else throw Pn}})};hn()}_abortOperatorList({intentState:Me,reason:tn,force:dn=!1}){if(Me.streamReader){if(Me.streamReaderCancelTimeout&&(clearTimeout(Me.streamReaderCancelTimeout),Me.streamReaderCancelTimeout=null),!dn){if(Me.renderTasks.size>0)return;if(tn instanceof _display_utils.RenderingCancelledException){let Re=RENDERING_CANCELLED_TIMEOUT;tn.extraDelay>0&&tn.extraDelay<1e3&&(Re+=tn.extraDelay),Me.streamReaderCancelTimeout=setTimeout(()=>{Me.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:Me,reason:tn,force:!0})},Re);return}}if(Me.streamReader.cancel(new _util.AbortException(tn.message)).catch(()=>{}),Me.streamReader=null,!this._transport.destroyed){for(const[Re,Qe]of this._intentStates)if(Qe===Me){this._intentStates.delete(Re);break}this.cleanup()}}}get stats(){return this._stats}}St=new WeakMap,r=new WeakMap,xe=new WeakSet,fa=function(Me=!1){if(ri(this,Ee,jo).call(this),!pn(this,r))return!1;if(Me)return pi(this,St,setTimeout(()=>{pi(this,St,null),ri(this,xe,fa).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:tn,operatorList:dn}of this._intentStates.values())if(tn.size>0||!dn.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),pi(this,r,!1),!0},Ee=new WeakSet,jo=function(){pn(this,St)&&(clearTimeout(pn(this,St)),pi(this,St,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){ti(this,Ce,new Set);ti(this,Te,Promise.resolve())}postMessage(Me,tn){const dn={data:structuredClone(Me,tn?{transfer:tn}:null)};pn(this,Te).then(()=>{for(const Re of pn(this,Ce))Re.call(this,dn)})}addEventListener(Me,tn){pn(this,Ce).add(tn)}removeEventListener(Me,tn){pn(this,Ce).delete(tn)}terminate(){pn(this,Ce).clear()}}Ce=new WeakMap,Te=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const Ge=(Ie=document==null?void 0:document.currentScript)==null?void 0:Ie.src;Ge&&(PDFWorkerUtil.fallbackWorkerSrc=Ge.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(Ge,Me){let tn;try{if(tn=new URL(Ge),!tn.origin||tn.origin==="null")return!1}catch{return!1}const dn=new URL(Me,tn);return tn.origin===dn.origin},PDFWorkerUtil.createCDNWrapper=function(Ge){const Me=`importScripts("${Ge}");`;return URL.createObjectURL(new Blob([Me]))}}const _PDFWorker=class _PDFWorker{constructor({name:Ge=null,port:Me=null,verbosity:tn=(0,_util.getVerbosityLevel)()}={}){if(Me&&pn(_PDFWorker,Ve).has(Me))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=Ge,this.destroyed=!1,this.verbosity=tn,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,Me){pn(_PDFWorker,Ve).set(Me,this),this._initializeFromPort(Me);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(Ge){this._port=Ge,this._messageHandler=new _message_handler.MessageHandler("main","worker",Ge),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:Ge}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,Ge)||(Ge=PDFWorkerUtil.createCDNWrapper(new URL(Ge,window.location).href));const Me=new Worker(Ge),tn=new _message_handler.MessageHandler("main","worker",Me),dn=()=>{Me.removeEventListener("error",Re),tn.destroy(),Me.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Re=()=>{this._webWorker||dn()};Me.addEventListener("error",Re),tn.on("test",cn=>{if(Me.removeEventListener("error",Re),this.destroyed){dn();return}cn?(this._messageHandler=tn,this._port=Me,this._webWorker=Me,this._readyCapability.resolve(),tn.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),tn.destroy(),Me.terminate())}),tn.on("ready",cn=>{if(Me.removeEventListener("error",Re),this.destroyed){dn();return}try{Qe()}catch{this._setupFakeWorker()}});const Qe=()=>{const cn=new Uint8Array;tn.send("test",cn,[cn.buffer])};Qe();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(Ge=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const Me=new LoopbackPort;this._port=Me;const tn=`fake${PDFWorkerUtil.fakeWorkerId++}`,dn=new _message_handler.MessageHandler(tn+"_worker",tn,Me);Ge.setup(dn,Me);const Re=new _message_handler.MessageHandler(tn,tn+"_worker",Me);this._messageHandler=Re,this._readyCapability.resolve(),Re.send("configure",{verbosity:this.verbosity})}).catch(Ge=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${Ge.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),pn(_PDFWorker,Ve).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(Ge){if(!(Ge!=null&&Ge.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return pn(this,Ve).has(Ge.port)?pn(this,Ve).get(Ge.port):new _PDFWorker(Ge)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var Ge;try{return((Ge=globalThis.pdfjsWorker)==null?void 0:Ge.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};Ve=new WeakMap,ti(_PDFWorker,Ve,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(Me,tn,dn,Re,Qe){ti(this,De);ti(this,He,new Map);ti(this,ke,new Map);ti(this,qe,new Map);this.messageHandler=Me,this.loadingTask=tn,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Re.ownerDocument,styleElement:Re.styleElement}),this._params=Re,this.canvasFactory=Qe.canvasFactory,this.filterFactory=Qe.filterFactory,this.cMapReaderFactory=Qe.cMapReaderFactory,this.standardFontDataFactory=Qe.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=dn,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(Me,tn=_util.AnnotationMode.ENABLE,dn=null,Re=!1){let Qe=_util.RenderingIntentFlag.DISPLAY,cn=null;switch(Me){case"any":Qe=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Qe=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${Me}`)}switch(tn){case _util.AnnotationMode.DISABLE:Qe+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Qe+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Qe+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,cn=(Qe&_util.RenderingIntentFlag.PRINT&&dn instanceof _annotation_storage.PrintAnnotationStorage?dn:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${tn}`)}return Re&&(Qe+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Qe,cacheKey:`${Qe}_${_annotation_storage.AnnotationStorage.getHash(cn)}`,annotationStorageMap:cn}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const Me=[];for(const dn of pn(this,ke).values())Me.push(dn._destroy());pn(this,ke).clear(),pn(this,qe).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const tn=this.messageHandler.sendWithPromise("Terminate",null);return Me.push(tn),Promise.all(Me).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),pn(this,He).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:Me,loadingTask:tn}=this;Me.on("GetReader",(dn,Re)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Qe=>{this._lastProgress={loaded:Qe.loaded,total:Qe.total}},Re.onPull=()=>{this._fullReader.read().then(function({value:Qe,done:cn}){if(cn){Re.close();return}(0,_util.assert)(Qe instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Re.enqueue(new Uint8Array(Qe),1,[Qe])}).catch(Qe=>{Re.error(Qe)})},Re.onCancel=Qe=>{this._fullReader.cancel(Qe),Re.ready.catch(cn=>{if(!this.destroyed)throw cn})}}),Me.on("ReaderHeadersReady",dn=>{const Re=new _util.PromiseCapability,Qe=this._fullReader;return Qe.headersReady.then(()=>{var cn;(!Qe.isStreamingSupported||!Qe.isRangeSupported)&&(this._lastProgress&&((cn=tn.onProgress)==null||cn.call(tn,this._lastProgress)),Qe.onProgress=hn=>{var Pn;(Pn=tn.onProgress)==null||Pn.call(tn,{loaded:hn.loaded,total:hn.total})}),Re.resolve({isStreamingSupported:Qe.isStreamingSupported,isRangeSupported:Qe.isRangeSupported,contentLength:Qe.contentLength})},Re.reject),Re.promise}),Me.on("GetRangeReader",(dn,Re)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Qe=this._networkStream.getRangeReader(dn.begin,dn.end);if(!Qe){Re.close();return}Re.onPull=()=>{Qe.read().then(function({value:cn,done:hn}){if(hn){Re.close();return}(0,_util.assert)(cn instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Re.enqueue(new Uint8Array(cn),1,[cn])}).catch(cn=>{Re.error(cn)})},Re.onCancel=cn=>{Qe.cancel(cn),Re.ready.catch(hn=>{if(!this.destroyed)throw hn})}}),Me.on("GetDoc",({pdfInfo:dn})=>{this._numPages=dn.numPages,this._htmlForXfa=dn.htmlForXfa,delete dn.htmlForXfa,tn._capability.resolve(new PDFDocumentProxy(dn,this))}),Me.on("DocException",function(dn){let Re;switch(dn.name){case"PasswordException":Re=new _util.PasswordException(dn.message,dn.code);break;case"InvalidPDFException":Re=new _util.InvalidPDFException(dn.message);break;case"MissingPDFException":Re=new _util.MissingPDFException(dn.message);break;case"UnexpectedResponseException":Re=new _util.UnexpectedResponseException(dn.message,dn.status);break;case"UnknownErrorException":Re=new _util.UnknownErrorException(dn.message,dn.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}tn._capability.reject(Re)}),Me.on("PasswordRequest",dn=>{if(this._passwordCapability=new _util.PromiseCapability,tn.onPassword){const Re=Qe=>{Qe instanceof Error?this._passwordCapability.reject(Qe):this._passwordCapability.resolve({password:Qe})};try{tn.onPassword(Re,dn.code)}catch(Qe){this._passwordCapability.reject(Qe)}}else this._passwordCapability.reject(new _util.PasswordException(dn.message,dn.code));return this._passwordCapability.promise}),Me.on("DataLoaded",dn=>{var Re;(Re=tn.onProgress)==null||Re.call(tn,{loaded:dn.length,total:dn.length}),this.downloadInfoCapability.resolve(dn)}),Me.on("StartRenderPage",dn=>{if(this.destroyed)return;pn(this,ke).get(dn.pageIndex)._startRenderPage(dn.transparency,dn.cacheKey)}),Me.on("commonobj",([dn,Re,Qe])=>{var cn;if(!this.destroyed&&!this.commonObjs.has(dn))switch(Re){case"Font":const hn=this._params;if("error"in Qe){const Dn=Qe.error;(0,_util.warn)(`Error during font loading: ${Dn}`),this.commonObjs.resolve(dn,Dn);break}const Pn=hn.pdfBug&&((cn=globalThis.FontInspector)!=null&&cn.enabled)?(Dn,Rn)=>globalThis.FontInspector.fontAdded(Dn,Rn):null,kn=new _font_loader.FontFaceObject(Qe,{isEvalSupported:hn.isEvalSupported,disableFontFace:hn.disableFontFace,ignoreErrors:hn.ignoreErrors,inspectFont:Pn});this.fontLoader.bind(kn).catch(Dn=>Me.sendWithPromise("FontFallback",{id:dn})).finally(()=>{!hn.fontExtraProperties&&kn.data&&(kn.data=null),this.commonObjs.resolve(dn,kn)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(dn,Qe);break;default:throw new Error(`Got unknown common object type ${Re}`)}}),Me.on("obj",([dn,Re,Qe,cn])=>{var Pn;if(this.destroyed)return;const hn=pn(this,ke).get(Re);if(!hn.objs.has(dn))switch(Qe){case"Image":if(hn.objs.resolve(dn,cn),cn){let kn;if(cn.bitmap){const{width:Dn,height:Rn}=cn;kn=Dn*Rn*4}else kn=((Pn=cn.data)==null?void 0:Pn.length)||0;kn>_util.MAX_IMAGE_SIZE_TO_CACHE&&(hn._maybeCleanupAfterRender=!0)}break;case"Pattern":hn.objs.resolve(dn,cn);break;default:throw new Error(`Got unknown object type ${Qe}`)}}),Me.on("DocProgress",dn=>{var Re;this.destroyed||(Re=tn.onProgress)==null||Re.call(tn,{loaded:dn.loaded,total:dn.total})}),Me.on("FetchBuiltInCMap",dn=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(dn):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),Me.on("FetchStandardFontData",dn=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(dn):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Me;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((Me=this._fullReader)==null?void 0:Me.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(Me){if(!Number.isInteger(Me)||Me<=0||Me>this._numPages)return Promise.reject(new Error("Invalid page request."));const tn=Me-1,dn=pn(this,qe).get(tn);if(dn)return dn;const Re=this.messageHandler.sendWithPromise("GetPage",{pageIndex:tn}).then(Qe=>{if(this.destroyed)throw new Error("Transport destroyed");const cn=new PDFPageProxy(tn,Qe,this,this._params.pdfBug);return pn(this,ke).set(tn,cn),cn});return pn(this,qe).set(tn,Re),Re}getPageIndex(Me){return typeof Me!="object"||Me===null||!Number.isInteger(Me.num)||Me.num<0||!Number.isInteger(Me.gen)||Me.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:Me.num,gen:Me.gen})}getAnnotations(Me,tn){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:Me,intent:tn})}getFieldObjects(){return ri(this,De,Ol).call(this,"GetFieldObjects")}hasJSActions(){return ri(this,De,Ol).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(Me){return typeof Me!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:Me})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(Me){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:Me})}getStructTree(Me){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:Me})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(Me=>new _optional_content_config.OptionalContentConfig(Me))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const Me="GetMetadata",tn=pn(this,He).get(Me);if(tn)return tn;const dn=this.messageHandler.sendWithPromise(Me,null).then(Re=>{var Qe,cn;return{info:Re[0],metadata:Re[1]?new _metadata.Metadata(Re[1]):null,contentDispositionFilename:((Qe=this._fullReader)==null?void 0:Qe.filename)??null,contentLength:((cn=this._fullReader)==null?void 0:cn.contentLength)??null}});return pn(this,He).set(Me,dn),dn}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(Me=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const tn of pn(this,ke).values())if(!tn.cleanup())throw new Error(`startCleanup: Page ${tn.pageNumber} is currently rendering.`);this.commonObjs.clear(),Me||this.fontLoader.clear(),pn(this,He).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:Me,enableXfa:tn}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:Me,enableXfa:tn})}}He=new WeakMap,ke=new WeakMap,qe=new WeakMap,De=new WeakSet,Ol=function(Me,tn=null){const dn=pn(this,He).get(Me);if(dn)return dn;const Re=this.messageHandler.sendWithPromise(Me,tn);return pn(this,He).set(Me,Re),Re};class PDFObjects{constructor(){ti(this,Ye);ti(this,Be,Object.create(null))}get(Me,tn=null){if(tn){const Re=ri(this,Ye,Dl).call(this,Me);return Re.capability.promise.then(()=>tn(Re.data)),null}const dn=pn(this,Be)[Me];if(!(dn!=null&&dn.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${Me}.`);return dn.data}has(Me){const tn=pn(this,Be)[Me];return(tn==null?void 0:tn.capability.settled)||!1}resolve(Me,tn=null){const dn=ri(this,Ye,Dl).call(this,Me);dn.data=tn,dn.capability.resolve()}clear(){var Me;for(const tn in pn(this,Be)){const{data:dn}=pn(this,Be)[tn];(Me=dn==null?void 0:dn.bitmap)==null||Me.close()}pi(this,Be,Object.create(null))}}Be=new WeakMap,Ye=new WeakSet,Dl=function(Me){const tn=pn(this,Be)[Me];return tn||(pn(this,Be)[Me]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(Me){ti(this,en,null);pi(this,en,Me),this.onContinue=null}get promise(){return pn(this,en).capability.promise}cancel(Me=0){pn(this,en).cancel(null,Me)}get separateAnnots(){const{separateAnnots:Me}=pn(this,en).operatorList;if(!Me)return!1;const{annotationCanvasMap:tn}=pn(this,en);return Me.form||Me.canvas&&(tn==null?void 0:tn.size)>0}}en=new WeakMap,exports.RenderTask=RenderTask;const Je=class Je{constructor({callback:Me,params:tn,objs:dn,commonObjs:Re,annotationCanvasMap:Qe,operatorList:cn,pageIndex:hn,canvasFactory:Pn,filterFactory:kn,useRequestAnimationFrame:Dn=!1,pdfBug:Rn=!1,pageColors:jn=null}){this.callback=Me,this.params=tn,this.objs=dn,this.commonObjs=Re,this.annotationCanvasMap=Qe,this.operatorListIdx=null,this.operatorList=cn,this._pageIndex=hn,this.canvasFactory=Pn,this.filterFactory=kn,this._pdfBug=Rn,this.pageColors=jn,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Dn===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=tn.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:Me=!1,optionalContentConfig:tn}){var hn,Pn;if(this.cancelled)return;if(this._canvas){if(pn(Je,Ue).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");pn(Je,Ue).add(this._canvas)}this._pdfBug&&((hn=globalThis.StepperManager)!=null&&hn.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:dn,viewport:Re,transform:Qe,background:cn}=this.params;this.gfx=new _canvas.CanvasGraphics(dn,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:tn},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Qe,viewport:Re,transparency:Me,background:cn}),this.operatorListIdx=0,this.graphicsReady=!0,(Pn=this.graphicsReadyCallback)==null||Pn.call(this)}cancel(Me=null,tn=0){var dn;this.running=!1,this.cancelled=!0,(dn=this.gfx)==null||dn.endDrawing(),this._canvas&&pn(Je,Ue).delete(this._canvas),this.callback(Me||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",tn))}operatorListChanged(){var Me;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(Me=this.stepper)==null||Me.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&pn(Je,Ue).delete(this._canvas),this.callback())))}};Ue=new WeakMap,ti(Je,Ue,new WeakSet);let InternalRenderTask=Je;const version="3.6.172";exports.version=version;const build="4d3dfe254";exports.build=build},(e,t,St)=>{var Ce,Te,Ie,Dc,He;Object.defineProperty(t,"__esModule",{value:!0}),t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var r=St(1),xe=St(4),_e=St(8);class Ee{constructor(){ti(this,Ie);ti(this,Ce,!1);ti(this,Te,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(qe,De){const Oe=pn(this,Te).get(qe);return Oe===void 0?De:Object.assign(De,Oe)}getRawValue(qe){return pn(this,Te).get(qe)}remove(qe){if(pn(this,Te).delete(qe),pn(this,Te).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const De of pn(this,Te).values())if(De instanceof xe.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(qe,De){const Oe=pn(this,Te).get(qe);let Be=!1;if(Oe!==void 0)for(const[Ye,nn]of Object.entries(De))Oe[Ye]!==nn&&(Be=!0,Oe[Ye]=nn);else Be=!0,pn(this,Te).set(qe,De);Be&&ri(this,Ie,Dc).call(this),De instanceof xe.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(De.constructor._type)}has(qe){return pn(this,Te).has(qe)}getAll(){return pn(this,Te).size>0?(0,r.objectFromMap)(pn(this,Te)):null}setAll(qe){for(const[De,Oe]of Object.entries(qe))this.setValue(De,Oe)}get size(){return pn(this,Te).size}resetModified(){pn(this,Ce)&&(pi(this,Ce,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Pe(this)}get serializable(){if(pn(this,Te).size===0)return null;const qe=new Map;for(const[De,Oe]of pn(this,Te)){const Be=Oe instanceof xe.AnnotationEditor?Oe.serialize():Oe;Be&&qe.set(De,Be)}return qe}static getHash(qe){if(!qe)return"";const De=new _e.MurmurHash3_64;for(const[Oe,Be]of qe)De.update(`${Oe}:${JSON.stringify(Be)}`);return De.hexdigest()}}Ce=new WeakMap,Te=new WeakMap,Ie=new WeakSet,Dc=function(){pn(this,Ce)||(pi(this,Ce,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=Ee;class Pe extends Ee{constructor(De){super();ti(this,He,null);pi(this,He,structuredClone(De.serializable))}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return pn(this,He)}}He=new WeakMap,t.PrintAnnotationStorage=Pe},(e,t,St)=>{var Ee,Pe,Ce,Te,Ie,Ve;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var r=St(5),xe=St(1);const He=class He{constructor(qe){ti(this,Ee,this.focusin.bind(this));ti(this,Pe,this.focusout.bind(this));ti(this,Ce,!1);ti(this,Te,!1);ti(this,Ie,!1);ir(this,"_uiManager",null);ti(this,Ve,He._zIndex++);this.constructor===He&&(0,xe.unreachable)("Cannot initialize AnnotationEditor."),this.parent=qe.parent,this.id=qe.id,this.width=this.height=null,this.pageIndex=qe.parent.pageIndex,this.name=qe.name,this.div=null,this._uiManager=qe.uiManager;const{rotation:De,rawDims:{pageWidth:Oe,pageHeight:Be,pageX:Ye,pageY:nn}}=this.parent.viewport;this.rotation=De,this.pageRotation=(360+De-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[Oe,Be],this.pageTranslation=[Ye,nn];const[en,Ue]=this.parentDimensions;this.x=qe.x/en,this.y=qe.y/Ue,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,xe.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(qe){this._uiManager.addCommands(qe)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=pn(this,Ve)}setParent(qe){qe!==null&&(this.pageIndex=qe.pageIndex,this.pageDimensions=qe.pageDimensions),this.parent=qe}focusin(qe){pn(this,Ce)?pi(this,Ce,!1):this.parent.setSelected(this)}focusout(qe){var Oe;if(!this.isAttachedToDOM)return;const De=qe.relatedTarget;De!=null&&De.closest(`#${this.id}`)||(qe.preventDefault(),(Oe=this.parent)!=null&&Oe.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(qe){const De=this.parent.div.getBoundingClientRect();this.startX=qe.clientX-De.x,this.startY=qe.clientY-De.y,qe.dataTransfer.setData("text/plain",this.id),qe.dataTransfer.effectAllowed="move"}setAt(qe,De,Oe,Be){const[Ye,nn]=this.parentDimensions;[Oe,Be]=this.screenToPageTranslation(Oe,Be),this.x=(qe+Oe)/Ye,this.y=(De+Be)/nn,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(qe,De){const[Oe,Be]=this.parentDimensions;[qe,De]=this.screenToPageTranslation(qe,De),this.x+=qe/Oe,this.y+=De/Be,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(qe,De){switch(this.parentRotation){case 90:return[De,-qe];case 180:return[-qe,-De];case 270:return[-De,qe];default:return[qe,De]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:qe}=this._uiManager.viewParameters,[De,Oe]=this.pageDimensions;return[De*qe,Oe*qe]}setDims(qe,De){const[Oe,Be]=this.parentDimensions;this.div.style.width=`${100*qe/Oe}%`,this.div.style.height=`${100*De/Be}%`}fixDims(){const{style:qe}=this.div,{height:De,width:Oe}=qe,Be=Oe.endsWith("%"),Ye=De.endsWith("%");if(Be&&Ye)return;const[nn,en]=this.parentDimensions;Be||(qe.width=`${100*parseFloat(Oe)/nn}%`),Ye||(qe.height=`${100*parseFloat(De)/en}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",pn(this,Ee)),this.div.addEventListener("focusout",pn(this,Pe));const[qe,De]=this.getInitialTranslation();return this.translate(qe,De),(0,r.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(qe){const{isMac:De}=xe.FeatureTest.platform;if(qe.button!==0||qe.ctrlKey&&De){qe.preventDefault();return}qe.ctrlKey&&!De||qe.shiftKey||qe.metaKey&&De?this.parent.toggleSelected(this):this.parent.setSelected(this),pi(this,Ce,!0)}getRect(qe,De){const Oe=this.parentScale,[Be,Ye]=this.pageDimensions,[nn,en]=this.pageTranslation,Ue=qe/Oe,Je=De/Oe,Ge=this.x*Be,Me=this.y*Ye,tn=this.width*Be,dn=this.height*Ye;switch(this.rotation){case 0:return[Ge+Ue+nn,Ye-Me-Je-dn+en,Ge+Ue+tn+nn,Ye-Me-Je+en];case 90:return[Ge+Je+nn,Ye-Me+Ue+en,Ge+Je+dn+nn,Ye-Me+Ue+tn+en];case 180:return[Ge-Ue-tn+nn,Ye-Me+Je+en,Ge-Ue+nn,Ye-Me+Je+dn+en];case 270:return[Ge-Je-dn+nn,Ye-Me-Ue-tn+en,Ge-Je+nn,Ye-Me-Ue+en];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(qe,De){const[Oe,Be,Ye,nn]=qe,en=Ye-Oe,Ue=nn-Be;switch(this.rotation){case 0:return[Oe,De-nn,en,Ue];case 90:return[Oe,De-Be,Ue,en];case 180:return[Ye,De-Be,en,Ue];case 270:return[Ye,De-nn,Ue,en];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){pi(this,Ie,!0)}disableEditMode(){pi(this,Ie,!1)}isInEditMode(){return pn(this,Ie)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var qe;(qe=this.div)==null||qe.addEventListener("focusin",pn(this,Ee))}serialize(){(0,xe.unreachable)("An editor must be serializable")}static deserialize(qe,De,Oe){const Be=new this.prototype.constructor({parent:De,id:De.getNextId(),uiManager:Oe});Be.rotation=qe.rotation;const[Ye,nn]=Be.pageDimensions,[en,Ue,Je,Ge]=Be.getRectInCurrentCoords(qe.rect,nn);return Be.x=en/Ye,Be.y=Ue/nn,Be.width=Je/Ye,Be.height=Ge/nn,Be}remove(){this.div.removeEventListener("focusin",pn(this,Ee)),this.div.removeEventListener("focusout",pn(this,Pe)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var qe;(qe=this.div)==null||qe.classList.add("selectedEditor")}unselect(){var qe;(qe=this.div)==null||qe.classList.remove("selectedEditor")}updateParams(qe,De){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return pn(this,Te)}set isEditing(qe){pi(this,Te,qe),qe?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};Ee=new WeakMap,Pe=new WeakMap,Ce=new WeakMap,Te=new WeakMap,Ie=new WeakMap,Ve=new WeakMap,ir(He,"_colorManager",new r.ColorManager),ir(He,"_zIndex",1);let _e=He;t.AnnotationEditor=_e},(e,t,St)=>{var He,ke,qe,De,Oe,Be,jc,en,Ue,Je,Ge,Me,tn,dn,Re,Qe,cn,hn,Pn,kn,Dn,Rn,jn,zn,ii,an,_n,sn,ze,Xe,rn,Bc,fn,jl,wn,qc,Sn,Uc,$e,Ur,yn,$a,Ln,zc,On,Hc,Gn,Bl,Yn,Xa,si,ql;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=_e,t.opacityToHex=Ee;var r=St(1),xe=St(6);function _e(vi,Mn,bi){for(const fi of bi)Mn.addEventListener(fi,vi[fi].bind(vi))}function Ee(vi){return Math.round(Math.min(255,Math.max(1,255*vi))).toString(16).padStart(2,"0")}class Pe{constructor(){ti(this,He,0)}getId(){return`${r.AnnotationEditorPrefix}${Do(this,He)._++}`}}He=new WeakMap;class Ce{constructor(Mn=128){ti(this,ke,[]);ti(this,qe,!1);ti(this,De,void 0);ti(this,Oe,-1);pi(this,De,Mn)}add({cmd:Mn,undo:bi,mustExec:fi,type:Mi=NaN,overwriteIfSameType:ei=!1,keepUndo:Cn=!1}){if(fi&&Mn(),pn(this,qe))return;const Tn={cmd:Mn,undo:bi,type:Mi};if(pn(this,Oe)===-1){pn(this,ke).length>0&&(pn(this,ke).length=0),pi(this,Oe,0),pn(this,ke).push(Tn);return}if(ei&&pn(this,ke)[pn(this,Oe)].type===Mi){Cn&&(Tn.undo=pn(this,ke)[pn(this,Oe)].undo),pn(this,ke)[pn(this,Oe)]=Tn;return}const Jn=pn(this,Oe)+1;Jn===pn(this,De)?pn(this,ke).splice(0,1):(pi(this,Oe,Jn),Jn<pn(this,ke).length&&pn(this,ke).splice(Jn)),pn(this,ke).push(Tn)}undo(){pn(this,Oe)!==-1&&(pi(this,qe,!0),pn(this,ke)[pn(this,Oe)].undo(),pi(this,qe,!1),pi(this,Oe,pn(this,Oe)-1))}redo(){pn(this,Oe)<pn(this,ke).length-1&&(pi(this,Oe,pn(this,Oe)+1),pi(this,qe,!0),pn(this,ke)[pn(this,Oe)].cmd(),pi(this,qe,!1))}hasSomethingToUndo(){return pn(this,Oe)!==-1}hasSomethingToRedo(){return pn(this,Oe)<pn(this,ke).length-1}destroy(){pi(this,ke,null)}}ke=new WeakMap,qe=new WeakMap,De=new WeakMap,Oe=new WeakMap,t.CommandManager=Ce;class Te{constructor(Mn){ti(this,Be);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:bi}=r.FeatureTest.platform;for(const[fi,Mi]of Mn)for(const ei of fi){const Cn=ei.startsWith("mac+");bi&&Cn?(this.callbacks.set(ei.slice(4),Mi),this.allKeys.add(ei.split("+").at(-1))):!bi&&!Cn&&(this.callbacks.set(ei,Mi),this.allKeys.add(ei.split("+").at(-1)))}}exec(Mn,bi){if(!this.allKeys.has(bi.key))return;const fi=this.callbacks.get(ri(this,Be,jc).call(this,bi));fi&&(fi.bind(Mn)(),bi.stopPropagation(),bi.preventDefault())}}Be=new WeakSet,jc=function(Mn){Mn.altKey&&this.buffer.push("alt"),Mn.ctrlKey&&this.buffer.push("ctrl"),Mn.metaKey&&this.buffer.push("meta"),Mn.shiftKey&&this.buffer.push("shift"),this.buffer.push(Mn.key);const bi=this.buffer.join("+");return this.buffer.length=0,bi},t.KeyboardManager=Te;const nn=class nn{get _colors(){const Mn=new Map([["CanvasText",null],["Canvas",null]]);return(0,xe.getColorValues)(Mn),(0,r.shadow)(this,"_colors",Mn)}convert(Mn){const bi=(0,xe.getRGB)(Mn);if(!window.matchMedia("(forced-colors: active)").matches)return bi;for(const[fi,Mi]of this._colors)if(Mi.every((ei,Cn)=>ei===bi[Cn]))return nn._colorsMapping.get(fi);return bi}getHexCode(Mn){const bi=this._colors.get(Mn);return bi?r.Util.makeHexColor(...bi):Mn}};ir(nn,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Ie=nn;t.ColorManager=Ie;const li=class li{constructor(Mn,bi,fi){ti(this,rn);ti(this,fn);ti(this,wn);ti(this,Sn);ti(this,$e);ti(this,yn);ti(this,Ln);ti(this,On);ti(this,Gn);ti(this,Yn);ti(this,si);ti(this,en,null);ti(this,Ue,new Map);ti(this,Je,new Map);ti(this,Ge,null);ti(this,Me,new Ce);ti(this,tn,0);ti(this,dn,null);ti(this,Re,new Set);ti(this,Qe,null);ti(this,cn,new Pe);ti(this,hn,!1);ti(this,Pn,r.AnnotationEditorType.NONE);ti(this,kn,new Set);ti(this,Dn,this.copy.bind(this));ti(this,Rn,this.cut.bind(this));ti(this,jn,this.paste.bind(this));ti(this,zn,this.keydown.bind(this));ti(this,ii,this.onEditingAction.bind(this));ti(this,an,this.onPageChanging.bind(this));ti(this,_n,this.onScaleChanging.bind(this));ti(this,sn,this.onRotationChanging.bind(this));ti(this,ze,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});ti(this,Xe,null);pi(this,Xe,Mn),pi(this,Qe,bi),pn(this,Qe)._on("editingaction",pn(this,ii)),pn(this,Qe)._on("pagechanging",pn(this,an)),pn(this,Qe)._on("scalechanging",pn(this,_n)),pn(this,Qe)._on("rotationchanging",pn(this,sn)),pi(this,Ge,fi),this.viewParameters={realScale:xe.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){ri(this,fn,jl).call(this),pn(this,Qe)._off("editingaction",pn(this,ii)),pn(this,Qe)._off("pagechanging",pn(this,an)),pn(this,Qe)._off("scalechanging",pn(this,_n)),pn(this,Qe)._off("rotationchanging",pn(this,sn));for(const Mn of pn(this,Je).values())Mn.destroy();pn(this,Je).clear(),pn(this,Ue).clear(),pn(this,Re).clear(),pi(this,en,null),pn(this,kn).clear(),pn(this,Me).destroy()}onPageChanging({pageNumber:Mn}){pi(this,tn,Mn-1)}focusMainContainer(){pn(this,Xe).focus()}addShouldRescale(Mn){pn(this,Re).add(Mn)}removeShouldRescale(Mn){pn(this,Re).delete(Mn)}onScaleChanging({scale:Mn}){this.commitOrRemove(),this.viewParameters.realScale=Mn*xe.PixelsPerInch.PDF_TO_CSS_UNITS;for(const bi of pn(this,Re))bi.onScaleChanging()}onRotationChanging({pagesRotation:Mn}){this.commitOrRemove(),this.viewParameters.rotation=Mn}addToAnnotationStorage(Mn){!Mn.isEmpty()&&pn(this,Ge)&&!pn(this,Ge).has(Mn.id)&&pn(this,Ge).setValue(Mn.id,Mn)}copy(Mn){if(Mn.preventDefault(),pn(this,en)&&pn(this,en).commitOrRemove(),!this.hasSelection)return;const bi=[];for(const fi of pn(this,kn))fi.isEmpty()||bi.push(fi.serialize());bi.length!==0&&Mn.clipboardData.setData("application/pdfjs",JSON.stringify(bi))}cut(Mn){this.copy(Mn),this.delete()}paste(Mn){Mn.preventDefault();let bi=Mn.clipboardData.getData("application/pdfjs");if(!bi)return;try{bi=JSON.parse(bi)}catch(Mi){(0,r.warn)(`paste: "${Mi.message}".`);return}if(!Array.isArray(bi))return;this.unselectAll();const fi=pn(this,Je).get(pn(this,tn));try{const Mi=[];for(const Tn of bi){const Jn=fi.deserialize(Tn);if(!Jn)return;Mi.push(Jn)}const ei=()=>{for(const Tn of Mi)ri(this,Gn,Bl).call(this,Tn);ri(this,si,ql).call(this,Mi)},Cn=()=>{for(const Tn of Mi)Tn.remove()};this.addCommands({cmd:ei,undo:Cn,mustExec:!0})}catch(Mi){(0,r.warn)(`paste: "${Mi.message}".`)}}keydown(Mn){var bi;(bi=this.getActive())!=null&&bi.shouldGetKeyboardEvents()||li._keyboardManager.exec(this,Mn)}onEditingAction(Mn){["undo","redo","delete","selectAll"].includes(Mn.name)&&this[Mn.name]()}setEditingState(Mn){Mn?(ri(this,rn,Bc).call(this),ri(this,wn,qc).call(this),ri(this,$e,Ur).call(this,{isEditing:pn(this,Pn)!==r.AnnotationEditorType.NONE,isEmpty:ri(this,Yn,Xa).call(this),hasSomethingToUndo:pn(this,Me).hasSomethingToUndo(),hasSomethingToRedo:pn(this,Me).hasSomethingToRedo(),hasSelectedEditor:!1})):(ri(this,fn,jl).call(this),ri(this,Sn,Uc).call(this),ri(this,$e,Ur).call(this,{isEditing:!1}))}registerEditorTypes(Mn){if(!pn(this,dn)){pi(this,dn,Mn);for(const bi of pn(this,dn))ri(this,yn,$a).call(this,bi.defaultPropertiesToUpdate)}}getId(){return pn(this,cn).getId()}get currentLayer(){return pn(this,Je).get(pn(this,tn))}get currentPageIndex(){return pn(this,tn)}addLayer(Mn){pn(this,Je).set(Mn.pageIndex,Mn),pn(this,hn)?Mn.enable():Mn.disable()}removeLayer(Mn){pn(this,Je).delete(Mn.pageIndex)}updateMode(Mn){if(pi(this,Pn,Mn),Mn===r.AnnotationEditorType.NONE)this.setEditingState(!1),ri(this,On,Hc).call(this);else{this.setEditingState(!0),ri(this,Ln,zc).call(this);for(const bi of pn(this,Je).values())bi.updateMode(Mn)}}updateToolbar(Mn){Mn!==pn(this,Pn)&&pn(this,Qe).dispatch("switchannotationeditormode",{source:this,mode:Mn})}updateParams(Mn,bi){if(pn(this,dn)){for(const fi of pn(this,kn))fi.updateParams(Mn,bi);for(const fi of pn(this,dn))fi.updateDefaultParams(Mn,bi)}}getEditors(Mn){const bi=[];for(const fi of pn(this,Ue).values())fi.pageIndex===Mn&&bi.push(fi);return bi}getEditor(Mn){return pn(this,Ue).get(Mn)}addEditor(Mn){pn(this,Ue).set(Mn.id,Mn)}removeEditor(Mn){var bi;pn(this,Ue).delete(Mn.id),this.unselect(Mn),(bi=pn(this,Ge))==null||bi.remove(Mn.id)}setActiveEditor(Mn){pn(this,en)!==Mn&&(pi(this,en,Mn),Mn&&ri(this,yn,$a).call(this,Mn.propertiesToUpdate))}toggleSelected(Mn){if(pn(this,kn).has(Mn)){pn(this,kn).delete(Mn),Mn.unselect(),ri(this,$e,Ur).call(this,{hasSelectedEditor:this.hasSelection});return}pn(this,kn).add(Mn),Mn.select(),ri(this,yn,$a).call(this,Mn.propertiesToUpdate),ri(this,$e,Ur).call(this,{hasSelectedEditor:!0})}setSelected(Mn){for(const bi of pn(this,kn))bi!==Mn&&bi.unselect();pn(this,kn).clear(),pn(this,kn).add(Mn),Mn.select(),ri(this,yn,$a).call(this,Mn.propertiesToUpdate),ri(this,$e,Ur).call(this,{hasSelectedEditor:!0})}isSelected(Mn){return pn(this,kn).has(Mn)}unselect(Mn){Mn.unselect(),pn(this,kn).delete(Mn),ri(this,$e,Ur).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return pn(this,kn).size!==0}undo(){pn(this,Me).undo(),ri(this,$e,Ur).call(this,{hasSomethingToUndo:pn(this,Me).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ri(this,Yn,Xa).call(this)})}redo(){pn(this,Me).redo(),ri(this,$e,Ur).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:pn(this,Me).hasSomethingToRedo(),isEmpty:ri(this,Yn,Xa).call(this)})}addCommands(Mn){pn(this,Me).add(Mn),ri(this,$e,Ur).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ri(this,Yn,Xa).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const Mn=[...pn(this,kn)],bi=()=>{for(const Mi of Mn)Mi.remove()},fi=()=>{for(const Mi of Mn)ri(this,Gn,Bl).call(this,Mi)};this.addCommands({cmd:bi,undo:fi,mustExec:!0})}commitOrRemove(){var Mn;(Mn=pn(this,en))==null||Mn.commitOrRemove()}selectAll(){for(const Mn of pn(this,kn))Mn.commit();ri(this,si,ql).call(this,pn(this,Ue).values())}unselectAll(){if(pn(this,en)){pn(this,en).commitOrRemove();return}if(pn(this,kn).size!==0){for(const Mn of pn(this,kn))Mn.unselect();pn(this,kn).clear(),ri(this,$e,Ur).call(this,{hasSelectedEditor:!1})}}isActive(Mn){return pn(this,en)===Mn}getActive(){return pn(this,en)}getMode(){return pn(this,Pn)}};en=new WeakMap,Ue=new WeakMap,Je=new WeakMap,Ge=new WeakMap,Me=new WeakMap,tn=new WeakMap,dn=new WeakMap,Re=new WeakMap,Qe=new WeakMap,cn=new WeakMap,hn=new WeakMap,Pn=new WeakMap,kn=new WeakMap,Dn=new WeakMap,Rn=new WeakMap,jn=new WeakMap,zn=new WeakMap,ii=new WeakMap,an=new WeakMap,_n=new WeakMap,sn=new WeakMap,ze=new WeakMap,Xe=new WeakMap,rn=new WeakSet,Bc=function(){pn(this,Xe).addEventListener("keydown",pn(this,zn))},fn=new WeakSet,jl=function(){pn(this,Xe).removeEventListener("keydown",pn(this,zn))},wn=new WeakSet,qc=function(){document.addEventListener("copy",pn(this,Dn)),document.addEventListener("cut",pn(this,Rn)),document.addEventListener("paste",pn(this,jn))},Sn=new WeakSet,Uc=function(){document.removeEventListener("copy",pn(this,Dn)),document.removeEventListener("cut",pn(this,Rn)),document.removeEventListener("paste",pn(this,jn))},$e=new WeakSet,Ur=function(Mn){Object.entries(Mn).some(([fi,Mi])=>pn(this,ze)[fi]!==Mi)&&pn(this,Qe).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(pn(this,ze),Mn)})},yn=new WeakSet,$a=function(Mn){pn(this,Qe).dispatch("annotationeditorparamschanged",{source:this,details:Mn})},Ln=new WeakSet,zc=function(){if(!pn(this,hn)){pi(this,hn,!0);for(const Mn of pn(this,Je).values())Mn.enable()}},On=new WeakSet,Hc=function(){if(this.unselectAll(),pn(this,hn)){pi(this,hn,!1);for(const Mn of pn(this,Je).values())Mn.disable()}},Gn=new WeakSet,Bl=function(Mn){const bi=pn(this,Je).get(Mn.pageIndex);bi?bi.addOrRebuild(Mn):this.addEditor(Mn)},Yn=new WeakSet,Xa=function(){if(pn(this,Ue).size===0)return!0;if(pn(this,Ue).size===1)for(const Mn of pn(this,Ue).values())return Mn.isEmpty();return!1},si=new WeakSet,ql=function(Mn){pn(this,kn).clear();for(const bi of Mn)bi.isEmpty()||(pn(this,kn).add(bi),bi.select());ri(this,$e,Ur).call(this,{hasSelectedEditor:!0})},ir(li,"_keyboardManager",new Te([[["ctrl+a","mac+meta+a"],li.prototype.selectAll],[["ctrl+z","mac+meta+z"],li.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],li.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],li.prototype.delete],[["Escape","mac+Escape"],li.prototype.unselectAll]]));let Ve=li;t.AnnotationEditorUIManager=Ve},(e,t,St)=>{var Dn,Rn,jn,zn,ii,an,_n,sn,ze,pa,rn,ks,fn,ns;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=t.AnnotationPrefix=void 0,t.deprecated=Ge,t.getColorValues=Qe,t.getCurrentTransform=cn,t.getCurrentTransformInverse=hn,t.getFilenameFromUrl=Ye,t.getPdfFilenameFromUrl=nn,t.getRGB=Re,t.getXfaPageViewport=dn,t.isDataScheme=Oe,t.isPdfFile=Be,t.isValidFetchUrl=Ue,t.loadScript=Je,t.setLayerDimensions=Pn;var r=St(7),xe=St(1);const _e="http://www.w3.org/2000/svg",Ee="pdfjs_internal_id_";t.AnnotationPrefix=Ee;const kn=class kn{};ir(kn,"CSS",96),ir(kn,"PDF",72),ir(kn,"PDF_TO_CSS_UNITS",kn.CSS/kn.PDF);let Pe=kn;t.PixelsPerInch=Pe;class Ce extends r.BaseFilterFactory{constructor({docId:Sn,ownerDocument:Ke=globalThis.document}={}){super();ti(this,ze);ti(this,rn);ti(this,fn);ti(this,Dn,void 0);ti(this,Rn,void 0);ti(this,jn,void 0);ti(this,zn,void 0);ti(this,ii,void 0);ti(this,an,void 0);ti(this,_n,void 0);ti(this,sn,0);pi(this,jn,Sn),pi(this,zn,Ke)}addFilter(Sn){if(!Sn)return"none";let Ke=pn(this,ze,pa).get(Sn);if(Ke)return Ke;let $e,We,yn,bn;if(Sn.length===1){const Gn=Sn[0],$n=new Array(256);for(let Yn=0;Yn<256;Yn++)$n[Yn]=Gn[Yn]/255;bn=$e=We=yn=$n.join(",")}else{const[Gn,$n,Yn]=Sn,ni=new Array(256),si=new Array(256),yi=new Array(256);for(let li=0;li<256;li++)ni[li]=Gn[li]/255,si[li]=$n[li]/255,yi[li]=Yn[li]/255;$e=ni.join(","),We=si.join(","),yn=yi.join(","),bn=`${$e}${We}${yn}`}if(Ke=pn(this,ze,pa).get(bn),Ke)return pn(this,ze,pa).set(Sn,Ke),Ke;const Ln=`g_${pn(this,jn)}_transfer_map_${Do(this,sn)._++}`,Bn=`url(#${Ln})`;pn(this,ze,pa).set(Sn,Bn),pn(this,ze,pa).set(bn,Bn);const On=pn(this,zn).createElementNS(_e,"filter",_e);On.setAttribute("id",Ln),On.setAttribute("color-interpolation-filters","sRGB");const qn=pn(this,zn).createElementNS(_e,"feComponentTransfer");return On.append(qn),ri(this,fn,ns).call(this,qn,"feFuncR",$e),ri(this,fn,ns).call(this,qn,"feFuncG",We),ri(this,fn,ns).call(this,qn,"feFuncB",yn),pn(this,rn,ks).append(On),Bn}addHCMFilter(Sn,Ke){var Yn;const $e=`${Sn}-${Ke}`;if(pn(this,an)===$e)return pn(this,_n);if(pi(this,an,$e),pi(this,_n,"none"),(Yn=pn(this,ii))==null||Yn.remove(),!Sn||!Ke)return pn(this,_n);pn(this,rn,ks).style.color=Sn,Sn=getComputedStyle(pn(this,rn,ks)).getPropertyValue("color");const We=Re(Sn);Sn=xe.Util.makeHexColor(...We),pn(this,rn,ks).style.color=Ke,Ke=getComputedStyle(pn(this,rn,ks)).getPropertyValue("color");const yn=Re(Ke);if(Ke=xe.Util.makeHexColor(...yn),pn(this,rn,ks).style.color="",Sn==="#000000"&&Ke==="#ffffff"||Sn===Ke)return pn(this,_n);const bn=new Array(256);for(let ni=0;ni<=255;ni++){const si=ni/255;bn[ni]=si<=.03928?si/12.92:((si+.055)/1.055)**2.4}const Ln=bn.join(","),Bn=`g_${pn(this,jn)}_hcm_filter`,On=pi(this,ii,pn(this,zn).createElementNS(_e,"filter",_e));On.setAttribute("id",Bn),On.setAttribute("color-interpolation-filters","sRGB");let qn=pn(this,zn).createElementNS(_e,"feComponentTransfer");On.append(qn),ri(this,fn,ns).call(this,qn,"feFuncR",Ln),ri(this,fn,ns).call(this,qn,"feFuncG",Ln),ri(this,fn,ns).call(this,qn,"feFuncB",Ln);const Gn=pn(this,zn).createElementNS(_e,"feColorMatrix");Gn.setAttribute("type","matrix"),Gn.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),On.append(Gn),qn=pn(this,zn).createElementNS(_e,"feComponentTransfer"),On.append(qn);const $n=(ni,si)=>{const yi=We[ni]/255,li=yn[ni]/255,vi=new Array(si+1);for(let Mn=0;Mn<=si;Mn++)vi[Mn]=yi+Mn/si*(li-yi);return vi.join(",")};return ri(this,fn,ns).call(this,qn,"feFuncR",$n(0,5)),ri(this,fn,ns).call(this,qn,"feFuncG",$n(1,5)),ri(this,fn,ns).call(this,qn,"feFuncB",$n(2,5)),pn(this,rn,ks).append(On),pi(this,_n,`url(#${Bn})`),pn(this,_n)}destroy(Sn=!1){Sn&&pn(this,_n)||(pn(this,Rn)&&(pn(this,Rn).parentNode.parentNode.remove(),pi(this,Rn,null)),pn(this,Dn)&&(pn(this,Dn).clear(),pi(this,Dn,null)),pi(this,sn,0))}}Dn=new WeakMap,Rn=new WeakMap,jn=new WeakMap,zn=new WeakMap,ii=new WeakMap,an=new WeakMap,_n=new WeakMap,sn=new WeakMap,ze=new WeakSet,pa=function(){return pn(this,Dn)||pi(this,Dn,new Map)},rn=new WeakSet,ks=function(){if(!pn(this,Rn)){const Sn=pn(this,zn).createElement("div"),{style:Ke}=Sn;Ke.visibility="hidden",Ke.contain="strict",Ke.width=Ke.height=0,Ke.position="absolute",Ke.top=Ke.left=0,Ke.zIndex=-1;const $e=pn(this,zn).createElementNS(_e,"svg");$e.setAttribute("width",0),$e.setAttribute("height",0),pi(this,Rn,pn(this,zn).createElementNS(_e,"defs")),Sn.append($e),$e.append(pn(this,Rn)),pn(this,zn).body.append(Sn)}return pn(this,Rn)},fn=new WeakSet,ns=function(Sn,Ke,$e){const We=pn(this,zn).createElementNS(_e,Ke);We.setAttribute("type","discrete"),We.setAttribute("tableValues",$e),Sn.append(We)},t.DOMFilterFactory=Ce;class Te extends r.BaseCanvasFactory{constructor({ownerDocument:xn=globalThis.document}={}){super(),this._document=xn}_createCanvas(xn,Sn){const Ke=this._document.createElement("canvas");return Ke.width=xn,Ke.height=Sn,Ke}}t.DOMCanvasFactory=Te;async function Ie(wn,xn=!1){if(Ue(wn,document.baseURI)){const Sn=await fetch(wn);if(!Sn.ok)throw new Error(Sn.statusText);return xn?new Uint8Array(await Sn.arrayBuffer()):(0,xe.stringToBytes)(await Sn.text())}return new Promise((Sn,Ke)=>{const $e=new XMLHttpRequest;$e.open("GET",wn,!0),xn&&($e.responseType="arraybuffer"),$e.onreadystatechange=()=>{if($e.readyState===XMLHttpRequest.DONE){if($e.status===200||$e.status===0){let We;if(xn&&$e.response?We=new Uint8Array($e.response):!xn&&$e.responseText&&(We=(0,xe.stringToBytes)($e.responseText)),We){Sn(We);return}}Ke(new Error($e.statusText))}},$e.send(null)})}class Ve extends r.BaseCMapReaderFactory{_fetchData(xn,Sn){return Ie(xn,this.isCompressed).then(Ke=>({cMapData:Ke,compressionType:Sn}))}}t.DOMCMapReaderFactory=Ve;class He extends r.BaseStandardFontDataFactory{_fetchData(xn){return Ie(xn,!0)}}t.DOMStandardFontDataFactory=He;class ke extends r.BaseSVGFactory{_createSVG(xn){return document.createElementNS(_e,xn)}}t.DOMSVGFactory=ke;class qe{constructor({viewBox:xn,scale:Sn,rotation:Ke,offsetX:$e=0,offsetY:We=0,dontFlip:yn=!1}){this.viewBox=xn,this.scale=Sn,this.rotation=Ke,this.offsetX=$e,this.offsetY=We;const bn=(xn[2]+xn[0])/2,Ln=(xn[3]+xn[1])/2;let Bn,On,qn,Gn;switch(Ke%=360,Ke<0&&(Ke+=360),Ke){case 180:Bn=-1,On=0,qn=0,Gn=1;break;case 90:Bn=0,On=1,qn=1,Gn=0;break;case 270:Bn=0,On=-1,qn=-1,Gn=0;break;case 0:Bn=1,On=0,qn=0,Gn=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}yn&&(qn=-qn,Gn=-Gn);let $n,Yn,ni,si;Bn===0?($n=Math.abs(Ln-xn[1])*Sn+$e,Yn=Math.abs(bn-xn[0])*Sn+We,ni=(xn[3]-xn[1])*Sn,si=(xn[2]-xn[0])*Sn):($n=Math.abs(bn-xn[0])*Sn+$e,Yn=Math.abs(Ln-xn[1])*Sn+We,ni=(xn[2]-xn[0])*Sn,si=(xn[3]-xn[1])*Sn),this.transform=[Bn*Sn,On*Sn,qn*Sn,Gn*Sn,$n-Bn*Sn*bn-qn*Sn*Ln,Yn-On*Sn*bn-Gn*Sn*Ln],this.width=ni,this.height=si}get rawDims(){const{viewBox:xn}=this;return(0,xe.shadow)(this,"rawDims",{pageWidth:xn[2]-xn[0],pageHeight:xn[3]-xn[1],pageX:xn[0],pageY:xn[1]})}clone({scale:xn=this.scale,rotation:Sn=this.rotation,offsetX:Ke=this.offsetX,offsetY:$e=this.offsetY,dontFlip:We=!1}={}){return new qe({viewBox:this.viewBox.slice(),scale:xn,rotation:Sn,offsetX:Ke,offsetY:$e,dontFlip:We})}convertToViewportPoint(xn,Sn){return xe.Util.applyTransform([xn,Sn],this.transform)}convertToViewportRectangle(xn){const Sn=xe.Util.applyTransform([xn[0],xn[1]],this.transform),Ke=xe.Util.applyTransform([xn[2],xn[3]],this.transform);return[Sn[0],Sn[1],Ke[0],Ke[1]]}convertToPdfPoint(xn,Sn){return xe.Util.applyInverseTransform([xn,Sn],this.transform)}}t.PageViewport=qe;class De extends xe.BaseException{constructor(xn,Sn,Ke=0){super(xn,"RenderingCancelledException"),this.type=Sn,this.extraDelay=Ke}}t.RenderingCancelledException=De;function Oe(wn){const xn=wn.length;let Sn=0;for(;Sn<xn&&wn[Sn].trim()==="";)Sn++;return wn.substring(Sn,Sn+5).toLowerCase()==="data:"}function Be(wn){return typeof wn=="string"&&/\.pdf$/i.test(wn)}function Ye(wn,xn=!1){return xn||([wn]=wn.split(/[#?]/,1)),wn.substring(wn.lastIndexOf("/")+1)}function nn(wn,xn="document.pdf"){if(typeof wn!="string")return xn;if(Oe(wn))return(0,xe.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),xn;const Sn=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Ke=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,$e=Sn.exec(wn);let We=Ke.exec($e[1])||Ke.exec($e[2])||Ke.exec($e[3]);if(We&&(We=We[0],We.includes("%")))try{We=Ke.exec(decodeURIComponent(We))[0]}catch{}return We||xn}class en{constructor(){ir(this,"started",Object.create(null));ir(this,"times",[])}time(xn){xn in this.started&&(0,xe.warn)(`Timer is already running for ${xn}`),this.started[xn]=Date.now()}timeEnd(xn){xn in this.started||(0,xe.warn)(`Timer has not been started for ${xn}`),this.times.push({name:xn,start:this.started[xn],end:Date.now()}),delete this.started[xn]}toString(){const xn=[];let Sn=0;for(const{name:Ke}of this.times)Sn=Math.max(Ke.length,Sn);for(const{name:Ke,start:$e,end:We}of this.times)xn.push(`${Ke.padEnd(Sn)} ${We-$e}ms
`);return xn.join("")}}t.StatTimer=en;function Ue(wn,xn){try{const{protocol:Sn}=xn?new URL(wn,xn):new URL(wn);return Sn==="http:"||Sn==="https:"}catch{return!1}}function Je(wn,xn=!1){return new Promise((Sn,Ke)=>{const $e=document.createElement("script");$e.src=wn,$e.onload=function(We){xn&&$e.remove(),Sn(We)},$e.onerror=function(){Ke(new Error(`Cannot load script at: ${$e.src}`))},(document.head||document.documentElement).append($e)})}function Ge(wn){console.log("Deprecated API usage: "+wn)}let Me;class tn{static toDateObject(xn){if(!xn||typeof xn!="string")return null;Me||(Me=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const Sn=Me.exec(xn);if(!Sn)return null;const Ke=parseInt(Sn[1],10);let $e=parseInt(Sn[2],10);$e=$e>=1&&$e<=12?$e-1:0;let We=parseInt(Sn[3],10);We=We>=1&&We<=31?We:1;let yn=parseInt(Sn[4],10);yn=yn>=0&&yn<=23?yn:0;let bn=parseInt(Sn[5],10);bn=bn>=0&&bn<=59?bn:0;let Ln=parseInt(Sn[6],10);Ln=Ln>=0&&Ln<=59?Ln:0;const Bn=Sn[7]||"Z";let On=parseInt(Sn[8],10);On=On>=0&&On<=23?On:0;let qn=parseInt(Sn[9],10)||0;return qn=qn>=0&&qn<=59?qn:0,Bn==="-"?(yn+=On,bn+=qn):Bn==="+"&&(yn-=On,bn-=qn),new Date(Date.UTC(Ke,$e,We,yn,bn,Ln))}}t.PDFDateString=tn;function dn(wn,{scale:xn=1,rotation:Sn=0}){const{width:Ke,height:$e}=wn.attributes.style,We=[0,0,parseInt(Ke),parseInt($e)];return new qe({viewBox:We,scale:xn,rotation:Sn})}function Re(wn){if(wn.startsWith("#")){const xn=parseInt(wn.slice(1),16);return[(xn&16711680)>>16,(xn&65280)>>8,xn&255]}return wn.startsWith("rgb(")?wn.slice(4,-1).split(",").map(xn=>parseInt(xn)):wn.startsWith("rgba(")?wn.slice(5,-1).split(",").map(xn=>parseInt(xn)).slice(0,3):((0,xe.warn)(`Not a valid color format: "${wn}"`),[0,0,0])}function Qe(wn){const xn=document.createElement("span");xn.style.visibility="hidden",document.body.append(xn);for(const Sn of wn.keys()){xn.style.color=Sn;const Ke=window.getComputedStyle(xn).color;wn.set(Sn,Re(Ke))}xn.remove()}function cn(wn){const{a:xn,b:Sn,c:Ke,d:$e,e:We,f:yn}=wn.getTransform();return[xn,Sn,Ke,$e,We,yn]}function hn(wn){const{a:xn,b:Sn,c:Ke,d:$e,e:We,f:yn}=wn.getTransform().invertSelf();return[xn,Sn,Ke,$e,We,yn]}function Pn(wn,xn,Sn=!1,Ke=!0){if(xn instanceof qe){const{pageWidth:$e,pageHeight:We}=xn.rawDims,{style:yn}=wn,bn=`calc(var(--scale-factor) * ${$e}px)`,Ln=`calc(var(--scale-factor) * ${We}px)`;!Sn||xn.rotation%180===0?(yn.width=bn,yn.height=Ln):(yn.width=Ln,yn.height=bn)}Ke&&wn.setAttribute("data-main-rotation",xn.rotation)}},(e,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var r=St(1);class xe{constructor(){this.constructor===xe&&(0,r.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(Ie){return"none"}addHCMFilter(Ie,Ve){return"none"}destroy(Ie=!1){}}t.BaseFilterFactory=xe;class _e{constructor(){this.constructor===_e&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(Ie,Ve){if(Ie<=0||Ve<=0)throw new Error("Invalid canvas size");const He=this._createCanvas(Ie,Ve);return{canvas:He,context:He.getContext("2d")}}reset(Ie,Ve,He){if(!Ie.canvas)throw new Error("Canvas is not specified");if(Ve<=0||He<=0)throw new Error("Invalid canvas size");Ie.canvas.width=Ve,Ie.canvas.height=He}destroy(Ie){if(!Ie.canvas)throw new Error("Canvas is not specified");Ie.canvas.width=0,Ie.canvas.height=0,Ie.canvas=null,Ie.context=null}_createCanvas(Ie,Ve){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=_e;class Ee{constructor({baseUrl:Ie=null,isCompressed:Ve=!0}){this.constructor===Ee&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=Ie,this.isCompressed=Ve}async fetch({name:Ie}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!Ie)throw new Error("CMap name must be specified.");const Ve=this.baseUrl+Ie+(this.isCompressed?".bcmap":""),He=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(Ve,He).catch(ke=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${Ve}`)})}_fetchData(Ie,Ve){(0,r.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=Ee;class Pe{constructor({baseUrl:Ie=null}){this.constructor===Pe&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=Ie}async fetch({filename:Ie}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!Ie)throw new Error("Font filename must be specified.");const Ve=`${this.baseUrl}${Ie}`;return this._fetchData(Ve).catch(He=>{throw new Error(`Unable to load font data at: ${Ve}`)})}_fetchData(Ie){(0,r.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=Pe;class Ce{constructor(){this.constructor===Ce&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(Ie,Ve,He=!1){if(Ie<=0||Ve<=0)throw new Error("Invalid SVG dimensions");const ke=this._createSVG("svg:svg");return ke.setAttribute("version","1.1"),He||(ke.setAttribute("width",`${Ie}px`),ke.setAttribute("height",`${Ve}px`)),ke.setAttribute("preserveAspectRatio","none"),ke.setAttribute("viewBox",`0 0 ${Ie} ${Ve}`),ke}createElement(Ie){if(typeof Ie!="string")throw new Error("Invalid SVG element type");return this._createSVG(Ie)}_createSVG(Ie){(0,r.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=Ce},(e,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var r=St(1);const xe=3285377520,_e=4294901760,Ee=65535;class Pe{constructor(Te){this.h1=Te?Te&4294967295:xe,this.h2=Te?Te&4294967295:xe}update(Te){let Ie,Ve;if(typeof Te=="string"){Ie=new Uint8Array(Te.length*2),Ve=0;for(let Ge=0,Me=Te.length;Ge<Me;Ge++){const tn=Te.charCodeAt(Ge);tn<=255?Ie[Ve++]=tn:(Ie[Ve++]=tn>>>8,Ie[Ve++]=tn&255)}}else if((0,r.isArrayBuffer)(Te))Ie=Te.slice(),Ve=Ie.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const He=Ve>>2,ke=Ve-He*4,qe=new Uint32Array(Ie.buffer,0,He);let De=0,Oe=0,Be=this.h1,Ye=this.h2;const nn=3432918353,en=461845907,Ue=nn&Ee,Je=en&Ee;for(let Ge=0;Ge<He;Ge++)Ge&1?(De=qe[Ge],De=De*nn&_e|De*Ue&Ee,De=De<<15|De>>>17,De=De*en&_e|De*Je&Ee,Be^=De,Be=Be<<13|Be>>>19,Be=Be*5+3864292196):(Oe=qe[Ge],Oe=Oe*nn&_e|Oe*Ue&Ee,Oe=Oe<<15|Oe>>>17,Oe=Oe*en&_e|Oe*Je&Ee,Ye^=Oe,Ye=Ye<<13|Ye>>>19,Ye=Ye*5+3864292196);switch(De=0,ke){case 3:De^=Ie[He*4+2]<<16;case 2:De^=Ie[He*4+1]<<8;case 1:De^=Ie[He*4],De=De*nn&_e|De*Ue&Ee,De=De<<15|De>>>17,De=De*en&_e|De*Je&Ee,He&1?Be^=De:Ye^=De}this.h1=Be,this.h2=Ye}hexdigest(){let Te=this.h1,Ie=this.h2;return Te^=Ie>>>1,Te=Te*3981806797&_e|Te*36045&Ee,Ie=Ie*4283543511&_e|((Ie<<16|Te>>>16)*2950163797&_e)>>>16,Te^=Ie>>>1,Te=Te*444984403&_e|Te*60499&Ee,Ie=Ie*3301882366&_e|((Ie<<16|Te>>>16)*3120437893&_e)>>>16,Te^=Ie>>>1,(Te>>>0).toString(16).padStart(8,"0")+(Ie>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=Pe},(e,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var r=St(1),xe=St(10);class _e{constructor({ownerDocument:Ce=globalThis.document,styleElement:Te=null}){this._document=Ce,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(Ce){this.nativeFontFaces.push(Ce),this._document.fonts.add(Ce)}insertRule(Ce){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const Te=this.styleElement.sheet;Te.insertRule(Ce,Te.cssRules.length)}clear(){for(const Ce of this.nativeFontFaces)this._document.fonts.delete(Ce);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(Ce){if(Ce.attached||Ce.missingFile)return;if(Ce.attached=!0,this.isFontLoadingAPISupported){const Ie=Ce.createNativeFontFace();if(Ie){this.addNativeFontFace(Ie);try{await Ie.loaded}catch(Ve){throw(0,r.warn)(`Failed to load font '${Ie.family}': '${Ve}'.`),Ce.disableFontFace=!0,Ve}}return}const Te=Ce.createFontFaceRule();if(Te){if(this.insertRule(Te),this.isSyncFontLoadingSupported)return;await new Promise(Ie=>{const Ve=this._queueLoadingCallback(Ie);this._prepareFontLoadEvent(Ce,Ve)})}}get isFontLoadingAPISupported(){var Te;const Ce=!!((Te=this._document)!=null&&Te.fonts);return(0,r.shadow)(this,"isFontLoadingAPISupported",Ce)}get isSyncFontLoadingSupported(){let Ce=!1;return(xe.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(Ce=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",Ce)}_queueLoadingCallback(Ce){function Te(){for((0,r.assert)(!Ve.done,"completeRequest() cannot be called twice."),Ve.done=!0;Ie.length>0&&Ie[0].done;){const He=Ie.shift();setTimeout(He.callback,0)}}const{loadingRequests:Ie}=this,Ve={done:!1,complete:Te,callback:Ce};return Ie.push(Ve),Ve}get _loadTestFont(){const Ce=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,r.shadow)(this,"_loadTestFont",Ce)}_prepareFontLoadEvent(Ce,Te){function Ie(Re,Qe){return Re.charCodeAt(Qe)<<24|Re.charCodeAt(Qe+1)<<16|Re.charCodeAt(Qe+2)<<8|Re.charCodeAt(Qe+3)&255}function Ve(Re,Qe,cn,hn){const Pn=Re.substring(0,Qe),kn=Re.substring(Qe+cn);return Pn+hn+kn}let He,ke;const qe=this._document.createElement("canvas");qe.width=1,qe.height=1;const De=qe.getContext("2d");let Oe=0;function Be(Re,Qe){if(++Oe>30){(0,r.warn)("Load test font never loaded."),Qe();return}if(De.font="30px "+Re,De.fillText(".",0,20),De.getImageData(0,0,1,1).data[3]>0){Qe();return}setTimeout(Be.bind(null,Re,Qe))}const Ye=`lt${Date.now()}${this.loadTestFontId++}`;let nn=this._loadTestFont;nn=Ve(nn,976,Ye.length,Ye);const Ue=16,Je=1482184792;let Ge=Ie(nn,Ue);for(He=0,ke=Ye.length-3;He<ke;He+=4)Ge=Ge-Je+Ie(Ye,He)|0;He<Ye.length&&(Ge=Ge-Je+Ie(Ye+"XXX",He)|0),nn=Ve(nn,Ue,4,(0,r.string32)(Ge));const Me=`url(data:font/opentype;base64,${btoa(nn)});`,tn=`@font-face {font-family:"${Ye}";src:${Me}}`;this.insertRule(tn);const dn=this._document.createElement("div");dn.style.visibility="hidden",dn.style.width=dn.style.height="10px",dn.style.position="absolute",dn.style.top=dn.style.left="0px";for(const Re of[Ce.loadedName,Ye]){const Qe=this._document.createElement("span");Qe.textContent="Hi",Qe.style.fontFamily=Re,dn.append(Qe)}this._document.body.append(dn),Be(Ye,()=>{dn.remove(),Te.complete()})}}t.FontLoader=_e;class Ee{constructor(Ce,{isEvalSupported:Te=!0,disableFontFace:Ie=!1,ignoreErrors:Ve=!1,inspectFont:He=null}){this.compiledGlyphs=Object.create(null);for(const ke in Ce)this[ke]=Ce[ke];this.isEvalSupported=Te!==!1,this.disableFontFace=Ie===!0,this.ignoreErrors=Ve===!0,this._inspectFont=He}createNativeFontFace(){var Te;if(!this.data||this.disableFontFace)return null;let Ce;if(!this.cssFontInfo)Ce=new FontFace(this.loadedName,this.data,{});else{const Ie={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(Ie.style=`oblique ${this.cssFontInfo.italicAngle}deg`),Ce=new FontFace(this.cssFontInfo.fontFamily,this.data,Ie)}return(Te=this._inspectFont)==null||Te.call(this,this),Ce}createFontFaceRule(){var Ve;if(!this.data||this.disableFontFace)return null;const Ce=(0,r.bytesToString)(this.data),Te=`url(data:${this.mimetype};base64,${btoa(Ce)});`;let Ie;if(!this.cssFontInfo)Ie=`@font-face {font-family:"${this.loadedName}";src:${Te}}`;else{let He=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(He+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),Ie=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${He}src:${Te}}`}return(Ve=this._inspectFont)==null||Ve.call(this,this,Te),Ie}getPathGenerator(Ce,Te){if(this.compiledGlyphs[Te]!==void 0)return this.compiledGlyphs[Te];let Ie;try{Ie=Ce.get(this.loadedName+"_path_"+Te)}catch(Ve){if(!this.ignoreErrors)throw Ve;return(0,r.warn)(`getPathGenerator - ignoring character: "${Ve}".`),this.compiledGlyphs[Te]=function(He,ke){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){const Ve=[];for(const He of Ie){const ke=He.args!==void 0?He.args.join(","):"";Ve.push("c.",He.cmd,"(",ke,`);
`)}return this.compiledGlyphs[Te]=new Function("c","size",Ve.join(""))}return this.compiledGlyphs[Te]=function(Ve,He){for(const ke of Ie)ke.cmd==="scale"&&(ke.args=[He,-He]),Ve[ke.cmd].apply(Ve,ke.args)}}}t.FontFaceObject=Ee},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const St=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=St},(e,t,St)=>{var jn,Ul,ii,zl;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var r=St(1),xe=St(6),_e=St(12),Ee=St(13),Pe=St(10);const Ce=16,Te=100,Ie=4096,Ve=15,He=10,ke=1e3,qe=16;function De(sn,ze){if(sn._removeMirroring)throw new Error("Context is already forwarding operations.");sn.__originalSave=sn.save,sn.__originalRestore=sn.restore,sn.__originalRotate=sn.rotate,sn.__originalScale=sn.scale,sn.__originalTranslate=sn.translate,sn.__originalTransform=sn.transform,sn.__originalSetTransform=sn.setTransform,sn.__originalResetTransform=sn.resetTransform,sn.__originalClip=sn.clip,sn.__originalMoveTo=sn.moveTo,sn.__originalLineTo=sn.lineTo,sn.__originalBezierCurveTo=sn.bezierCurveTo,sn.__originalRect=sn.rect,sn.__originalClosePath=sn.closePath,sn.__originalBeginPath=sn.beginPath,sn._removeMirroring=()=>{sn.save=sn.__originalSave,sn.restore=sn.__originalRestore,sn.rotate=sn.__originalRotate,sn.scale=sn.__originalScale,sn.translate=sn.__originalTranslate,sn.transform=sn.__originalTransform,sn.setTransform=sn.__originalSetTransform,sn.resetTransform=sn.__originalResetTransform,sn.clip=sn.__originalClip,sn.moveTo=sn.__originalMoveTo,sn.lineTo=sn.__originalLineTo,sn.bezierCurveTo=sn.__originalBezierCurveTo,sn.rect=sn.__originalRect,sn.closePath=sn.__originalClosePath,sn.beginPath=sn.__originalBeginPath,delete sn._removeMirroring},sn.save=function(){ze.save(),this.__originalSave()},sn.restore=function(){ze.restore(),this.__originalRestore()},sn.translate=function(rn,gn){ze.translate(rn,gn),this.__originalTranslate(rn,gn)},sn.scale=function(rn,gn){ze.scale(rn,gn),this.__originalScale(rn,gn)},sn.transform=function(rn,gn,fn,Nn,wn,xn){ze.transform(rn,gn,fn,Nn,wn,xn),this.__originalTransform(rn,gn,fn,Nn,wn,xn)},sn.setTransform=function(rn,gn,fn,Nn,wn,xn){ze.setTransform(rn,gn,fn,Nn,wn,xn),this.__originalSetTransform(rn,gn,fn,Nn,wn,xn)},sn.resetTransform=function(){ze.resetTransform(),this.__originalResetTransform()},sn.rotate=function(rn){ze.rotate(rn),this.__originalRotate(rn)},sn.clip=function(rn){ze.clip(rn),this.__originalClip(rn)},sn.moveTo=function(Xe,rn){ze.moveTo(Xe,rn),this.__originalMoveTo(Xe,rn)},sn.lineTo=function(Xe,rn){ze.lineTo(Xe,rn),this.__originalLineTo(Xe,rn)},sn.bezierCurveTo=function(Xe,rn,gn,fn,Nn,wn){ze.bezierCurveTo(Xe,rn,gn,fn,Nn,wn),this.__originalBezierCurveTo(Xe,rn,gn,fn,Nn,wn)},sn.rect=function(Xe,rn,gn,fn){ze.rect(Xe,rn,gn,fn),this.__originalRect(Xe,rn,gn,fn)},sn.closePath=function(){ze.closePath(),this.__originalClosePath()},sn.beginPath=function(){ze.beginPath(),this.__originalBeginPath()}}class Oe{constructor(ze){this.canvasFactory=ze,this.cache=Object.create(null)}getCanvas(ze,Xe,rn){let gn;return this.cache[ze]!==void 0?(gn=this.cache[ze],this.canvasFactory.reset(gn,Xe,rn)):(gn=this.canvasFactory.create(Xe,rn),this.cache[ze]=gn),gn}delete(ze){delete this.cache[ze]}clear(){for(const ze in this.cache){const Xe=this.cache[ze];this.canvasFactory.destroy(Xe),delete this.cache[ze]}}}function Be(sn,ze,Xe,rn,gn,fn,Nn,wn,xn,Sn){const[Ke,$e,We,yn,bn,Ln]=(0,xe.getCurrentTransform)(sn);if($e===0&&We===0){const qn=Nn*Ke+bn,Gn=Math.round(qn),$n=wn*yn+Ln,Yn=Math.round($n),ni=(Nn+xn)*Ke+bn,si=Math.abs(Math.round(ni)-Gn)||1,yi=(wn+Sn)*yn+Ln,li=Math.abs(Math.round(yi)-Yn)||1;return sn.setTransform(Math.sign(Ke),0,0,Math.sign(yn),Gn,Yn),sn.drawImage(ze,Xe,rn,gn,fn,0,0,si,li),sn.setTransform(Ke,$e,We,yn,bn,Ln),[si,li]}if(Ke===0&&yn===0){const qn=wn*We+bn,Gn=Math.round(qn),$n=Nn*$e+Ln,Yn=Math.round($n),ni=(wn+Sn)*We+bn,si=Math.abs(Math.round(ni)-Gn)||1,yi=(Nn+xn)*$e+Ln,li=Math.abs(Math.round(yi)-Yn)||1;return sn.setTransform(0,Math.sign($e),Math.sign(We),0,Gn,Yn),sn.drawImage(ze,Xe,rn,gn,fn,0,0,li,si),sn.setTransform(Ke,$e,We,yn,bn,Ln),[li,si]}sn.drawImage(ze,Xe,rn,gn,fn,Nn,wn,xn,Sn);const Bn=Math.hypot(Ke,$e),On=Math.hypot(We,yn);return[Bn*xn,On*Sn]}function Ye(sn){const{width:ze,height:Xe}=sn;if(ze>ke||Xe>ke)return null;const rn=1e3,gn=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),fn=ze+1;let Nn=new Uint8Array(fn*(Xe+1)),wn,xn,Sn;const Ke=ze+7&-8;let $e=new Uint8Array(Ke*Xe),We=0;for(const On of sn.data){let qn=128;for(;qn>0;)$e[We++]=On&qn?0:255,qn>>=1}let yn=0;for(We=0,$e[We]!==0&&(Nn[0]=1,++yn),xn=1;xn<ze;xn++)$e[We]!==$e[We+1]&&(Nn[xn]=$e[We]?2:1,++yn),We++;for($e[We]!==0&&(Nn[xn]=2,++yn),wn=1;wn<Xe;wn++){We=wn*Ke,Sn=wn*fn,$e[We-Ke]!==$e[We]&&(Nn[Sn]=$e[We]?1:8,++yn);let On=($e[We]?4:0)+($e[We-Ke]?8:0);for(xn=1;xn<ze;xn++)On=(On>>2)+($e[We+1]?4:0)+($e[We-Ke+1]?8:0),gn[On]&&(Nn[Sn+xn]=gn[On],++yn),We++;if($e[We-Ke]!==$e[We]&&(Nn[Sn+xn]=$e[We]?2:4,++yn),yn>rn)return null}for(We=Ke*(Xe-1),Sn=wn*fn,$e[We]!==0&&(Nn[Sn]=8,++yn),xn=1;xn<ze;xn++)$e[We]!==$e[We+1]&&(Nn[Sn+xn]=$e[We]?4:8,++yn),We++;if($e[We]!==0&&(Nn[Sn+xn]=4,++yn),yn>rn)return null;const bn=new Int32Array([0,fn,-1,0,-fn,0,0,0,1]),Ln=new Path2D;for(wn=0;yn&&wn<=Xe;wn++){let On=wn*fn;const qn=On+ze;for(;On<qn&&!Nn[On];)On++;if(On===qn)continue;Ln.moveTo(On%fn,wn);const Gn=On;let $n=Nn[On];do{const Yn=bn[$n];do On+=Yn;while(!Nn[On]);const ni=Nn[On];ni!==5&&ni!==10?($n=ni,Nn[On]=0):($n=ni&51*$n>>4,Nn[On]&=$n>>2|$n<<2),Ln.lineTo(On%fn,On/fn|0),Nn[On]||--yn}while(Gn!==On);--wn}return $e=null,Nn=null,function(On){On.save(),On.scale(1/ze,-1/Xe),On.translate(0,-Xe),On.fill(Ln),On.beginPath(),On.restore()}}class nn{constructor(ze,Xe){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,ze,Xe])}clone(){const ze=Object.create(this);return ze.clipBox=this.clipBox.slice(),ze}setCurrentPoint(ze,Xe){this.x=ze,this.y=Xe}updatePathMinMax(ze,Xe,rn){[Xe,rn]=r.Util.applyTransform([Xe,rn],ze),this.minX=Math.min(this.minX,Xe),this.minY=Math.min(this.minY,rn),this.maxX=Math.max(this.maxX,Xe),this.maxY=Math.max(this.maxY,rn)}updateRectMinMax(ze,Xe){const rn=r.Util.applyTransform(Xe,ze),gn=r.Util.applyTransform(Xe.slice(2),ze);this.minX=Math.min(this.minX,rn[0],gn[0]),this.minY=Math.min(this.minY,rn[1],gn[1]),this.maxX=Math.max(this.maxX,rn[0],gn[0]),this.maxY=Math.max(this.maxY,rn[1],gn[1])}updateScalingPathMinMax(ze,Xe){r.Util.scaleMinMax(ze,Xe),this.minX=Math.min(this.minX,Xe[0]),this.maxX=Math.max(this.maxX,Xe[1]),this.minY=Math.min(this.minY,Xe[2]),this.maxY=Math.max(this.maxY,Xe[3])}updateCurvePathMinMax(ze,Xe,rn,gn,fn,Nn,wn,xn,Sn,Ke){const $e=r.Util.bezierBoundingBox(Xe,rn,gn,fn,Nn,wn,xn,Sn);if(Ke){Ke[0]=Math.min(Ke[0],$e[0],$e[2]),Ke[1]=Math.max(Ke[1],$e[0],$e[2]),Ke[2]=Math.min(Ke[2],$e[1],$e[3]),Ke[3]=Math.max(Ke[3],$e[1],$e[3]);return}this.updateRectMinMax(ze,$e)}getPathBoundingBox(ze=_e.PathType.FILL,Xe=null){const rn=[this.minX,this.minY,this.maxX,this.maxY];if(ze===_e.PathType.STROKE){Xe||(0,r.unreachable)("Stroke bounding box must include transform.");const gn=r.Util.singularValueDecompose2dScale(Xe),fn=gn[0]*this.lineWidth/2,Nn=gn[1]*this.lineWidth/2;rn[0]-=fn,rn[1]-=Nn,rn[2]+=fn,rn[3]+=Nn}return rn}updateClipFromPath(){const ze=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(ze||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(ze){this.clipBox=ze,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(ze=_e.PathType.FILL,Xe=null){return r.Util.intersect(this.clipBox,this.getPathBoundingBox(ze,Xe))}}function en(sn,ze){if(typeof ImageData<"u"&&ze instanceof ImageData){sn.putImageData(ze,0,0);return}const Xe=ze.height,rn=ze.width,gn=Xe%qe,fn=(Xe-gn)/qe,Nn=gn===0?fn:fn+1,wn=sn.createImageData(rn,qe);let xn=0,Sn;const Ke=ze.data,$e=wn.data;let We,yn,bn,Ln;if(ze.kind===r.ImageKind.GRAYSCALE_1BPP){const Bn=Ke.byteLength,On=new Uint32Array($e.buffer,0,$e.byteLength>>2),qn=On.length,Gn=rn+7>>3,$n=4294967295,Yn=r.FeatureTest.isLittleEndian?4278190080:255;for(We=0;We<Nn;We++){for(bn=We<fn?qe:gn,Sn=0,yn=0;yn<bn;yn++){const ni=Bn-xn;let si=0;const yi=ni>Gn?rn:ni*8-7,li=yi&-8;let vi=0,Mn=0;for(;si<li;si+=8)Mn=Ke[xn++],On[Sn++]=Mn&128?$n:Yn,On[Sn++]=Mn&64?$n:Yn,On[Sn++]=Mn&32?$n:Yn,On[Sn++]=Mn&16?$n:Yn,On[Sn++]=Mn&8?$n:Yn,On[Sn++]=Mn&4?$n:Yn,On[Sn++]=Mn&2?$n:Yn,On[Sn++]=Mn&1?$n:Yn;for(;si<yi;si++)vi===0&&(Mn=Ke[xn++],vi=128),On[Sn++]=Mn&vi?$n:Yn,vi>>=1}for(;Sn<qn;)On[Sn++]=0;sn.putImageData(wn,0,We*qe)}}else if(ze.kind===r.ImageKind.RGBA_32BPP){for(yn=0,Ln=rn*qe*4,We=0;We<fn;We++)$e.set(Ke.subarray(xn,xn+Ln)),xn+=Ln,sn.putImageData(wn,0,yn),yn+=qe;We<Nn&&(Ln=rn*gn*4,$e.set(Ke.subarray(xn,xn+Ln)),sn.putImageData(wn,0,yn))}else if(ze.kind===r.ImageKind.RGB_24BPP)for(bn=qe,Ln=rn*bn,We=0;We<Nn;We++){for(We>=fn&&(bn=gn,Ln=rn*bn),Sn=0,yn=Ln;yn--;)$e[Sn++]=Ke[xn++],$e[Sn++]=Ke[xn++],$e[Sn++]=Ke[xn++],$e[Sn++]=255;sn.putImageData(wn,0,We*qe)}else throw new Error(`bad image kind: ${ze.kind}`)}function Ue(sn,ze){if(ze.bitmap){sn.drawImage(ze.bitmap,0,0);return}const Xe=ze.height,rn=ze.width,gn=Xe%qe,fn=(Xe-gn)/qe,Nn=gn===0?fn:fn+1,wn=sn.createImageData(rn,qe);let xn=0;const Sn=ze.data,Ke=wn.data;for(let $e=0;$e<Nn;$e++){const We=$e<fn?qe:gn;({srcPos:xn}=(0,Ee.convertBlackAndWhiteToRGBA)({src:Sn,srcPos:xn,dest:Ke,width:rn,height:We,nonBlackColor:0})),sn.putImageData(wn,0,$e*qe)}}function Je(sn,ze){const Xe=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const rn of Xe)sn[rn]!==void 0&&(ze[rn]=sn[rn]);sn.setLineDash!==void 0&&(ze.setLineDash(sn.getLineDash()),ze.lineDashOffset=sn.lineDashOffset)}function Ge(sn){sn.strokeStyle=sn.fillStyle="#000000",sn.fillRule="nonzero",sn.globalAlpha=1,sn.lineWidth=1,sn.lineCap="butt",sn.lineJoin="miter",sn.miterLimit=10,sn.globalCompositeOperation="source-over",sn.font="10px sans-serif",sn.setLineDash!==void 0&&(sn.setLineDash([]),sn.lineDashOffset=0),Pe.isNodeJS||(sn.filter="none")}function Me(sn,ze,Xe,rn){const gn=sn.length;for(let fn=3;fn<gn;fn+=4){const Nn=sn[fn];if(Nn===0)sn[fn-3]=ze,sn[fn-2]=Xe,sn[fn-1]=rn;else if(Nn<255){const wn=255-Nn;sn[fn-3]=sn[fn-3]*Nn+ze*wn>>8,sn[fn-2]=sn[fn-2]*Nn+Xe*wn>>8,sn[fn-1]=sn[fn-1]*Nn+rn*wn>>8}}}function tn(sn,ze,Xe){const rn=sn.length,gn=1/255;for(let fn=3;fn<rn;fn+=4){const Nn=Xe?Xe[sn[fn]]:sn[fn];ze[fn]=ze[fn]*Nn*gn|0}}function dn(sn,ze,Xe){const rn=sn.length;for(let gn=3;gn<rn;gn+=4){const fn=sn[gn-3]*77+sn[gn-2]*152+sn[gn-1]*28;ze[gn]=Xe?ze[gn]*Xe[fn>>8]>>8:ze[gn]*fn>>16}}function Re(sn,ze,Xe,rn,gn,fn,Nn,wn,xn,Sn,Ke){const $e=!!fn,We=$e?fn[0]:0,yn=$e?fn[1]:0,bn=$e?fn[2]:0;let Ln;gn==="Luminosity"?Ln=dn:Ln=tn;const On=Math.min(rn,Math.ceil(1048576/Xe));for(let qn=0;qn<rn;qn+=On){const Gn=Math.min(On,rn-qn),$n=sn.getImageData(wn-Sn,qn+(xn-Ke),Xe,Gn),Yn=ze.getImageData(wn,qn+xn,Xe,Gn);$e&&Me($n.data,We,yn,bn),Ln($n.data,Yn.data,Nn),ze.putImageData(Yn,wn,qn+xn)}}function Qe(sn,ze,Xe,rn){const gn=rn[0],fn=rn[1],Nn=rn[2]-gn,wn=rn[3]-fn;Nn===0||wn===0||(Re(ze.context,Xe,Nn,wn,ze.subtype,ze.backdrop,ze.transferMap,gn,fn,ze.offsetX,ze.offsetY),sn.save(),sn.globalAlpha=1,sn.globalCompositeOperation="source-over",sn.setTransform(1,0,0,1,0,0),sn.drawImage(Xe.canvas,0,0),sn.restore())}function cn(sn,ze){const Xe=r.Util.singularValueDecompose2dScale(sn);Xe[0]=Math.fround(Xe[0]),Xe[1]=Math.fround(Xe[1]);const rn=Math.fround((globalThis.devicePixelRatio||1)*xe.PixelsPerInch.PDF_TO_CSS_UNITS);return ze!==void 0?ze:Xe[0]<=rn||Xe[1]<=rn}const hn=["butt","round","square"],Pn=["miter","round","bevel"],kn={},Dn={},_n=class _n{constructor(ze,Xe,rn,gn,fn,{optionalContentConfig:Nn,markedContentStack:wn=null},xn,Sn){ti(this,jn);ti(this,ii);this.ctx=ze,this.current=new nn(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=Xe,this.objs=rn,this.canvasFactory=gn,this.filterFactory=fn,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=wn||[],this.optionalContentConfig=Nn,this.cachedCanvases=new Oe(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=xn,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=Sn,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(ze,Xe=null){return typeof ze=="string"?ze.startsWith("g_")?this.commonObjs.get(ze):this.objs.get(ze):Xe}beginDrawing({transform:ze,viewport:Xe,transparency:rn=!1,background:gn=null}){const fn=this.ctx.canvas.width,Nn=this.ctx.canvas.height,wn=this.ctx.fillStyle;if(this.ctx.fillStyle=gn||"#ffffff",this.ctx.fillRect(0,0,fn,Nn),this.ctx.fillStyle=wn,rn){const xn=this.cachedCanvases.getCanvas("transparent",fn,Nn);this.compositeCtx=this.ctx,this.transparentCanvas=xn.canvas,this.ctx=xn.context,this.ctx.save(),this.ctx.transform(...(0,xe.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),Ge(this.ctx),ze&&(this.ctx.transform(...ze),this.outputScaleX=ze[0],this.outputScaleY=ze[0]),this.ctx.transform(...Xe.transform),this.viewportScale=Xe.scale,this.baseTransform=(0,xe.getCurrentTransform)(this.ctx)}executeOperatorList(ze,Xe,rn,gn){const fn=ze.argsArray,Nn=ze.fnArray;let wn=Xe||0;const xn=fn.length;if(xn===wn)return wn;const Sn=xn-wn>He&&typeof rn=="function",Ke=Sn?Date.now()+Ve:0;let $e=0;const We=this.commonObjs,yn=this.objs;let bn;for(;;){if(gn!==void 0&&wn===gn.nextBreakPoint)return gn.breakIt(wn,rn),wn;if(bn=Nn[wn],bn!==r.OPS.dependency)this[bn].apply(this,fn[wn]);else for(const Ln of fn[wn]){const Bn=Ln.startsWith("g_")?We:yn;if(!Bn.has(Ln))return Bn.get(Ln,rn),wn}if(wn++,wn===xn)return wn;if(Sn&&++$e>He){if(Date.now()>Ke)return rn(),wn;$e=0}}}endDrawing(){ri(this,jn,Ul).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const ze of this._cachedBitmapsMap.values()){for(const Xe of ze.values())typeof HTMLCanvasElement<"u"&&Xe instanceof HTMLCanvasElement&&(Xe.width=Xe.height=0);ze.clear()}this._cachedBitmapsMap.clear(),ri(this,ii,zl).call(this)}_scaleImage(ze,Xe){const rn=ze.width,gn=ze.height;let fn=Math.max(Math.hypot(Xe[0],Xe[1]),1),Nn=Math.max(Math.hypot(Xe[2],Xe[3]),1),wn=rn,xn=gn,Sn="prescale1",Ke,$e;for(;fn>2&&wn>1||Nn>2&&xn>1;){let We=wn,yn=xn;fn>2&&wn>1&&(We=wn>=16384?Math.floor(wn/2)-1||1:Math.ceil(wn/2),fn/=wn/We),Nn>2&&xn>1&&(yn=xn>=16384?Math.floor(xn/2)-1||1:Math.ceil(xn)/2,Nn/=xn/yn),Ke=this.cachedCanvases.getCanvas(Sn,We,yn),$e=Ke.context,$e.clearRect(0,0,We,yn),$e.drawImage(ze,0,0,wn,xn,0,0,We,yn),ze=Ke.canvas,wn=We,xn=yn,Sn=Sn==="prescale1"?"prescale2":"prescale1"}return{img:ze,paintWidth:wn,paintHeight:xn}}_createMaskCanvas(ze){const Xe=this.ctx,{width:rn,height:gn}=ze,fn=this.current.fillColor,Nn=this.current.patternFill,wn=(0,xe.getCurrentTransform)(Xe);let xn,Sn,Ke,$e;if((ze.bitmap||ze.data)&&ze.count>1){const si=ze.bitmap||ze.data.buffer;Sn=JSON.stringify(Nn?wn:[wn.slice(0,4),fn]),xn=this._cachedBitmapsMap.get(si),xn||(xn=new Map,this._cachedBitmapsMap.set(si,xn));const yi=xn.get(Sn);if(yi&&!Nn){const li=Math.round(Math.min(wn[0],wn[2])+wn[4]),vi=Math.round(Math.min(wn[1],wn[3])+wn[5]);return{canvas:yi,offsetX:li,offsetY:vi}}Ke=yi}Ke||($e=this.cachedCanvases.getCanvas("maskCanvas",rn,gn),Ue($e.context,ze));let We=r.Util.transform(wn,[1/rn,0,0,-1/gn,0,0]);We=r.Util.transform(We,[1,0,0,1,0,-gn]);const yn=r.Util.applyTransform([0,0],We),bn=r.Util.applyTransform([rn,gn],We),Ln=r.Util.normalizeRect([yn[0],yn[1],bn[0],bn[1]]),Bn=Math.round(Ln[2]-Ln[0])||1,On=Math.round(Ln[3]-Ln[1])||1,qn=this.cachedCanvases.getCanvas("fillCanvas",Bn,On),Gn=qn.context,$n=Math.min(yn[0],bn[0]),Yn=Math.min(yn[1],bn[1]);Gn.translate(-$n,-Yn),Gn.transform(...We),Ke||(Ke=this._scaleImage($e.canvas,(0,xe.getCurrentTransformInverse)(Gn)),Ke=Ke.img,xn&&Nn&&xn.set(Sn,Ke)),Gn.imageSmoothingEnabled=cn((0,xe.getCurrentTransform)(Gn),ze.interpolate),Be(Gn,Ke,0,0,Ke.width,Ke.height,0,0,rn,gn),Gn.globalCompositeOperation="source-in";const ni=r.Util.transform((0,xe.getCurrentTransformInverse)(Gn),[1,0,0,1,-$n,-Yn]);return Gn.fillStyle=Nn?fn.getPattern(Xe,this,ni,_e.PathType.FILL):fn,Gn.fillRect(0,0,rn,gn),xn&&!Nn&&(this.cachedCanvases.delete("fillCanvas"),xn.set(Sn,qn.canvas)),{canvas:qn.canvas,offsetX:Math.round($n),offsetY:Math.round(Yn)}}setLineWidth(ze){ze!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=ze,this.ctx.lineWidth=ze}setLineCap(ze){this.ctx.lineCap=hn[ze]}setLineJoin(ze){this.ctx.lineJoin=Pn[ze]}setMiterLimit(ze){this.ctx.miterLimit=ze}setDash(ze,Xe){const rn=this.ctx;rn.setLineDash!==void 0&&(rn.setLineDash(ze),rn.lineDashOffset=Xe)}setRenderingIntent(ze){}setFlatness(ze){}setGState(ze){for(const[Xe,rn]of ze)switch(Xe){case"LW":this.setLineWidth(rn);break;case"LC":this.setLineCap(rn);break;case"LJ":this.setLineJoin(rn);break;case"ML":this.setMiterLimit(rn);break;case"D":this.setDash(rn[0],rn[1]);break;case"RI":this.setRenderingIntent(rn);break;case"FL":this.setFlatness(rn);break;case"Font":this.setFont(rn[0],rn[1]);break;case"CA":this.current.strokeAlpha=rn;break;case"ca":this.current.fillAlpha=rn,this.ctx.globalAlpha=rn;break;case"BM":this.ctx.globalCompositeOperation=rn;break;case"SMask":this.current.activeSMask=rn?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(rn);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const ze=this.inSMaskMode;this.current.activeSMask&&!ze?this.beginSMaskMode():!this.current.activeSMask&&ze&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const ze=this.ctx.canvas.width,Xe=this.ctx.canvas.height,rn="smaskGroupAt"+this.groupLevel,gn=this.cachedCanvases.getCanvas(rn,ze,Xe);this.suspendedCtx=this.ctx,this.ctx=gn.context;const fn=this.ctx;fn.setTransform(...(0,xe.getCurrentTransform)(this.suspendedCtx)),Je(this.suspendedCtx,fn),De(fn,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Je(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(ze){if(!this.current.activeSMask)return;ze?(ze[0]=Math.floor(ze[0]),ze[1]=Math.floor(ze[1]),ze[2]=Math.ceil(ze[2]),ze[3]=Math.ceil(ze[3])):ze=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const Xe=this.current.activeSMask,rn=this.suspendedCtx;Qe(rn,Xe,this.ctx,ze),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(Je(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const ze=this.current;this.stateStack.push(ze),this.current=ze.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Je(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(ze,Xe,rn,gn,fn,Nn){this.ctx.transform(ze,Xe,rn,gn,fn,Nn),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(ze,Xe,rn){const gn=this.ctx,fn=this.current;let Nn=fn.x,wn=fn.y,xn,Sn;const Ke=(0,xe.getCurrentTransform)(gn),$e=Ke[0]===0&&Ke[3]===0||Ke[1]===0&&Ke[2]===0,We=$e?rn.slice(0):null;for(let yn=0,bn=0,Ln=ze.length;yn<Ln;yn++)switch(ze[yn]|0){case r.OPS.rectangle:Nn=Xe[bn++],wn=Xe[bn++];const Bn=Xe[bn++],On=Xe[bn++],qn=Nn+Bn,Gn=wn+On;gn.moveTo(Nn,wn),Bn===0||On===0?gn.lineTo(qn,Gn):(gn.lineTo(qn,wn),gn.lineTo(qn,Gn),gn.lineTo(Nn,Gn)),$e||fn.updateRectMinMax(Ke,[Nn,wn,qn,Gn]),gn.closePath();break;case r.OPS.moveTo:Nn=Xe[bn++],wn=Xe[bn++],gn.moveTo(Nn,wn),$e||fn.updatePathMinMax(Ke,Nn,wn);break;case r.OPS.lineTo:Nn=Xe[bn++],wn=Xe[bn++],gn.lineTo(Nn,wn),$e||fn.updatePathMinMax(Ke,Nn,wn);break;case r.OPS.curveTo:xn=Nn,Sn=wn,Nn=Xe[bn+4],wn=Xe[bn+5],gn.bezierCurveTo(Xe[bn],Xe[bn+1],Xe[bn+2],Xe[bn+3],Nn,wn),fn.updateCurvePathMinMax(Ke,xn,Sn,Xe[bn],Xe[bn+1],Xe[bn+2],Xe[bn+3],Nn,wn,We),bn+=6;break;case r.OPS.curveTo2:xn=Nn,Sn=wn,gn.bezierCurveTo(Nn,wn,Xe[bn],Xe[bn+1],Xe[bn+2],Xe[bn+3]),fn.updateCurvePathMinMax(Ke,xn,Sn,Nn,wn,Xe[bn],Xe[bn+1],Xe[bn+2],Xe[bn+3],We),Nn=Xe[bn+2],wn=Xe[bn+3],bn+=4;break;case r.OPS.curveTo3:xn=Nn,Sn=wn,Nn=Xe[bn+2],wn=Xe[bn+3],gn.bezierCurveTo(Xe[bn],Xe[bn+1],Nn,wn,Nn,wn),fn.updateCurvePathMinMax(Ke,xn,Sn,Xe[bn],Xe[bn+1],Nn,wn,Nn,wn,We),bn+=4;break;case r.OPS.closePath:gn.closePath();break}$e&&fn.updateScalingPathMinMax(Ke,We),fn.setCurrentPoint(Nn,wn)}closePath(){this.ctx.closePath()}stroke(ze=!0){const Xe=this.ctx,rn=this.current.strokeColor;Xe.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof rn=="object"&&(rn!=null&&rn.getPattern)?(Xe.save(),Xe.strokeStyle=rn.getPattern(Xe,this,(0,xe.getCurrentTransformInverse)(Xe),_e.PathType.STROKE),this.rescaleAndStroke(!1),Xe.restore()):this.rescaleAndStroke(!0)),ze&&this.consumePath(this.current.getClippedPathBoundingBox()),Xe.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(ze=!0){const Xe=this.ctx,rn=this.current.fillColor,gn=this.current.patternFill;let fn=!1;gn&&(Xe.save(),Xe.fillStyle=rn.getPattern(Xe,this,(0,xe.getCurrentTransformInverse)(Xe),_e.PathType.FILL),fn=!0);const Nn=this.current.getClippedPathBoundingBox();this.contentVisible&&Nn!==null&&(this.pendingEOFill?(Xe.fill("evenodd"),this.pendingEOFill=!1):Xe.fill()),fn&&Xe.restore(),ze&&this.consumePath(Nn)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=kn}eoClip(){this.pendingClip=Dn}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const ze=this.pendingTextPaths,Xe=this.ctx;if(ze===void 0){Xe.beginPath();return}Xe.save(),Xe.beginPath();for(const rn of ze)Xe.setTransform(...rn.transform),Xe.translate(rn.x,rn.y),rn.addToPath(Xe,rn.fontSize);Xe.restore(),Xe.clip(),Xe.beginPath(),delete this.pendingTextPaths}setCharSpacing(ze){this.current.charSpacing=ze}setWordSpacing(ze){this.current.wordSpacing=ze}setHScale(ze){this.current.textHScale=ze/100}setLeading(ze){this.current.leading=-ze}setFont(ze,Xe){const rn=this.commonObjs.get(ze),gn=this.current;if(!rn)throw new Error(`Can't find font for ${ze}`);if(gn.fontMatrix=rn.fontMatrix||r.FONT_IDENTITY_MATRIX,(gn.fontMatrix[0]===0||gn.fontMatrix[3]===0)&&(0,r.warn)("Invalid font matrix for font "+ze),Xe<0?(Xe=-Xe,gn.fontDirection=-1):gn.fontDirection=1,this.current.font=rn,this.current.fontSize=Xe,rn.isType3Font)return;const fn=rn.loadedName||"sans-serif";let Nn="normal";rn.black?Nn="900":rn.bold&&(Nn="bold");const wn=rn.italic?"italic":"normal",xn=`"${fn}", ${rn.fallbackName}`;let Sn=Xe;Xe<Ce?Sn=Ce:Xe>Te&&(Sn=Te),this.current.fontSizeScale=Xe/Sn,this.ctx.font=`${wn} ${Nn} ${Sn}px ${xn}`}setTextRenderingMode(ze){this.current.textRenderingMode=ze}setTextRise(ze){this.current.textRise=ze}moveText(ze,Xe){this.current.x=this.current.lineX+=ze,this.current.y=this.current.lineY+=Xe}setLeadingMoveText(ze,Xe){this.setLeading(-Xe),this.moveText(ze,Xe)}setTextMatrix(ze,Xe,rn,gn,fn,Nn){this.current.textMatrix=[ze,Xe,rn,gn,fn,Nn],this.current.textMatrixScale=Math.hypot(ze,Xe),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(ze,Xe,rn,gn){const fn=this.ctx,Nn=this.current,wn=Nn.font,xn=Nn.textRenderingMode,Sn=Nn.fontSize/Nn.fontSizeScale,Ke=xn&r.TextRenderingMode.FILL_STROKE_MASK,$e=!!(xn&r.TextRenderingMode.ADD_TO_PATH_FLAG),We=Nn.patternFill&&!wn.missingFile;let yn;(wn.disableFontFace||$e||We)&&(yn=wn.getPathGenerator(this.commonObjs,ze)),wn.disableFontFace||We?(fn.save(),fn.translate(Xe,rn),fn.beginPath(),yn(fn,Sn),gn&&fn.setTransform(...gn),(Ke===r.TextRenderingMode.FILL||Ke===r.TextRenderingMode.FILL_STROKE)&&fn.fill(),(Ke===r.TextRenderingMode.STROKE||Ke===r.TextRenderingMode.FILL_STROKE)&&fn.stroke(),fn.restore()):((Ke===r.TextRenderingMode.FILL||Ke===r.TextRenderingMode.FILL_STROKE)&&fn.fillText(ze,Xe,rn),(Ke===r.TextRenderingMode.STROKE||Ke===r.TextRenderingMode.FILL_STROKE)&&fn.strokeText(ze,Xe,rn)),$e&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,xe.getCurrentTransform)(fn),x:Xe,y:rn,fontSize:Sn,addToPath:yn})}get isFontSubpixelAAEnabled(){const{context:ze}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);ze.scale(1.5,1),ze.fillText("I",0,10);const Xe=ze.getImageData(0,0,10,10).data;let rn=!1;for(let gn=3;gn<Xe.length;gn+=4)if(Xe[gn]>0&&Xe[gn]<255){rn=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",rn)}showText(ze){const Xe=this.current,rn=Xe.font;if(rn.isType3Font)return this.showType3Text(ze);const gn=Xe.fontSize;if(gn===0)return;const fn=this.ctx,Nn=Xe.fontSizeScale,wn=Xe.charSpacing,xn=Xe.wordSpacing,Sn=Xe.fontDirection,Ke=Xe.textHScale*Sn,$e=ze.length,We=rn.vertical,yn=We?1:-1,bn=rn.defaultVMetrics,Ln=gn*Xe.fontMatrix[0],Bn=Xe.textRenderingMode===r.TextRenderingMode.FILL&&!rn.disableFontFace&&!Xe.patternFill;fn.save(),fn.transform(...Xe.textMatrix),fn.translate(Xe.x,Xe.y+Xe.textRise),Sn>0?fn.scale(Ke,-1):fn.scale(Ke,1);let On;if(Xe.patternFill){fn.save();const ni=Xe.fillColor.getPattern(fn,this,(0,xe.getCurrentTransformInverse)(fn),_e.PathType.FILL);On=(0,xe.getCurrentTransform)(fn),fn.restore(),fn.fillStyle=ni}let qn=Xe.lineWidth;const Gn=Xe.textMatrixScale;if(Gn===0||qn===0){const ni=Xe.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;(ni===r.TextRenderingMode.STROKE||ni===r.TextRenderingMode.FILL_STROKE)&&(qn=this.getSinglePixelWidth())}else qn/=Gn;if(Nn!==1&&(fn.scale(Nn,Nn),qn/=Nn),fn.lineWidth=qn,rn.isInvalidPDFjsFont){const ni=[];let si=0;for(const yi of ze)ni.push(yi.unicode),si+=yi.width;fn.fillText(ni.join(""),0,0),Xe.x+=si*Ln*Ke,fn.restore(),this.compose();return}let $n=0,Yn;for(Yn=0;Yn<$e;++Yn){const ni=ze[Yn];if(typeof ni=="number"){$n+=yn*ni*gn/1e3;continue}let si=!1;const yi=(ni.isSpace?xn:0)+wn,li=ni.fontChar,vi=ni.accent;let Mn,bi,fi=ni.width;if(We){const ei=ni.vmetric||bn,Cn=-(ni.vmetric?ei[1]:fi*.5)*Ln,Tn=ei[2]*Ln;fi=ei?-ei[0]:fi,Mn=Cn/Nn,bi=($n+Tn)/Nn}else Mn=$n/Nn,bi=0;if(rn.remeasure&&fi>0){const ei=fn.measureText(li).width*1e3/gn*Nn;if(fi<ei&&this.isFontSubpixelAAEnabled){const Cn=fi/ei;si=!0,fn.save(),fn.scale(Cn,1),Mn/=Cn}else fi!==ei&&(Mn+=(fi-ei)/2e3*gn/Nn)}if(this.contentVisible&&(ni.isInFont||rn.missingFile)){if(Bn&&!vi)fn.fillText(li,Mn,bi);else if(this.paintChar(li,Mn,bi,On),vi){const ei=Mn+gn*vi.offset.x/Nn,Cn=bi-gn*vi.offset.y/Nn;this.paintChar(vi.fontChar,ei,Cn,On)}}let Mi;We?Mi=fi*Ln-yi*Sn:Mi=fi*Ln+yi*Sn,$n+=Mi,si&&fn.restore()}We?Xe.y-=$n:Xe.x+=$n*Ke,fn.restore(),this.compose()}showType3Text(ze){const Xe=this.ctx,rn=this.current,gn=rn.font,fn=rn.fontSize,Nn=rn.fontDirection,wn=gn.vertical?1:-1,xn=rn.charSpacing,Sn=rn.wordSpacing,Ke=rn.textHScale*Nn,$e=rn.fontMatrix||r.FONT_IDENTITY_MATRIX,We=ze.length,yn=rn.textRenderingMode===r.TextRenderingMode.INVISIBLE;let bn,Ln,Bn,On;if(!(yn||fn===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,Xe.save(),Xe.transform(...rn.textMatrix),Xe.translate(rn.x,rn.y),Xe.scale(Ke,Nn),bn=0;bn<We;++bn){if(Ln=ze[bn],typeof Ln=="number"){On=wn*Ln*fn/1e3,this.ctx.translate(On,0),rn.x+=On*Ke;continue}const qn=(Ln.isSpace?Sn:0)+xn,Gn=gn.charProcOperatorList[Ln.operatorListId];if(!Gn){(0,r.warn)(`Type3 character "${Ln.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Ln,this.save(),Xe.scale(fn,fn),Xe.transform(...$e),this.executeOperatorList(Gn),this.restore()),Bn=r.Util.applyTransform([Ln.width,0],$e)[0]*fn+qn,Xe.translate(Bn,0),rn.x+=Bn*Ke}Xe.restore(),this.processingType3=null}}setCharWidth(ze,Xe){}setCharWidthAndBounds(ze,Xe,rn,gn,fn,Nn){this.ctx.rect(rn,gn,fn-rn,Nn-gn),this.ctx.clip(),this.endPath()}getColorN_Pattern(ze){let Xe;if(ze[0]==="TilingPattern"){const rn=ze[1],gn=this.baseTransform||(0,xe.getCurrentTransform)(this.ctx),fn={createCanvasGraphics:Nn=>new _n(Nn,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};Xe=new _e.TilingPattern(ze,rn,this.ctx,fn,gn)}else Xe=this._getPattern(ze[1],ze[2]);return Xe}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(ze,Xe,rn){const gn=r.Util.makeHexColor(ze,Xe,rn);this.ctx.strokeStyle=gn,this.current.strokeColor=gn}setFillRGBColor(ze,Xe,rn){const gn=r.Util.makeHexColor(ze,Xe,rn);this.ctx.fillStyle=gn,this.current.fillColor=gn,this.current.patternFill=!1}_getPattern(ze,Xe=null){let rn;return this.cachedPatterns.has(ze)?rn=this.cachedPatterns.get(ze):(rn=(0,_e.getShadingPattern)(this.getObject(ze)),this.cachedPatterns.set(ze,rn)),Xe&&(rn.matrix=Xe),rn}shadingFill(ze){if(!this.contentVisible)return;const Xe=this.ctx;this.save();const rn=this._getPattern(ze);Xe.fillStyle=rn.getPattern(Xe,this,(0,xe.getCurrentTransformInverse)(Xe),_e.PathType.SHADING);const gn=(0,xe.getCurrentTransformInverse)(Xe);if(gn){const fn=Xe.canvas,Nn=fn.width,wn=fn.height,xn=r.Util.applyTransform([0,0],gn),Sn=r.Util.applyTransform([0,wn],gn),Ke=r.Util.applyTransform([Nn,0],gn),$e=r.Util.applyTransform([Nn,wn],gn),We=Math.min(xn[0],Sn[0],Ke[0],$e[0]),yn=Math.min(xn[1],Sn[1],Ke[1],$e[1]),bn=Math.max(xn[0],Sn[0],Ke[0],$e[0]),Ln=Math.max(xn[1],Sn[1],Ke[1],$e[1]);this.ctx.fillRect(We,yn,bn-We,Ln-yn)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(ze,Xe){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(ze)&&ze.length===6&&this.transform(...ze),this.baseTransform=(0,xe.getCurrentTransform)(this.ctx),Xe)){const rn=Xe[2]-Xe[0],gn=Xe[3]-Xe[1];this.ctx.rect(Xe[0],Xe[1],rn,gn),this.current.updateRectMinMax((0,xe.getCurrentTransform)(this.ctx),Xe),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(ze){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const Xe=this.ctx;ze.isolated||(0,r.info)("TODO: Support non-isolated groups."),ze.knockout&&(0,r.warn)("Knockout groups not supported.");const rn=(0,xe.getCurrentTransform)(Xe);if(ze.matrix&&Xe.transform(...ze.matrix),!ze.bbox)throw new Error("Bounding box is required.");let gn=r.Util.getAxialAlignedBoundingBox(ze.bbox,(0,xe.getCurrentTransform)(Xe));const fn=[0,0,Xe.canvas.width,Xe.canvas.height];gn=r.Util.intersect(gn,fn)||[0,0,0,0];const Nn=Math.floor(gn[0]),wn=Math.floor(gn[1]);let xn=Math.max(Math.ceil(gn[2])-Nn,1),Sn=Math.max(Math.ceil(gn[3])-wn,1),Ke=1,$e=1;xn>Ie&&(Ke=xn/Ie,xn=Ie),Sn>Ie&&($e=Sn/Ie,Sn=Ie),this.current.startNewPathAndClipBox([0,0,xn,Sn]);let We="groupAt"+this.groupLevel;ze.smask&&(We+="_smask_"+this.smaskCounter++%2);const yn=this.cachedCanvases.getCanvas(We,xn,Sn),bn=yn.context;bn.scale(1/Ke,1/$e),bn.translate(-Nn,-wn),bn.transform(...rn),ze.smask?this.smaskStack.push({canvas:yn.canvas,context:bn,offsetX:Nn,offsetY:wn,scaleX:Ke,scaleY:$e,subtype:ze.smask.subtype,backdrop:ze.smask.backdrop,transferMap:ze.smask.transferMap||null,startTransformInverse:null}):(Xe.setTransform(1,0,0,1,0,0),Xe.translate(Nn,wn),Xe.scale(Ke,$e),Xe.save()),Je(Xe,bn),this.ctx=bn,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(Xe),this.groupLevel++}endGroup(ze){if(!this.contentVisible)return;this.groupLevel--;const Xe=this.ctx,rn=this.groupStack.pop();if(this.ctx=rn,this.ctx.imageSmoothingEnabled=!1,ze.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const gn=(0,xe.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...gn);const fn=r.Util.getAxialAlignedBoundingBox([0,0,Xe.canvas.width,Xe.canvas.height],gn);this.ctx.drawImage(Xe.canvas,0,0),this.ctx.restore(),this.compose(fn)}}beginAnnotation(ze,Xe,rn,gn,fn){if(ri(this,jn,Ul).call(this),Ge(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(Xe)&&Xe.length===4){const Nn=Xe[2]-Xe[0],wn=Xe[3]-Xe[1];if(fn&&this.annotationCanvasMap){rn=rn.slice(),rn[4]-=Xe[0],rn[5]-=Xe[1],Xe=Xe.slice(),Xe[0]=Xe[1]=0,Xe[2]=Nn,Xe[3]=wn;const[xn,Sn]=r.Util.singularValueDecompose2dScale((0,xe.getCurrentTransform)(this.ctx)),{viewportScale:Ke}=this,$e=Math.ceil(Nn*this.outputScaleX*Ke),We=Math.ceil(wn*this.outputScaleY*Ke);this.annotationCanvas=this.canvasFactory.create($e,We);const{canvas:yn,context:bn}=this.annotationCanvas;this.annotationCanvasMap.set(ze,yn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=bn,this.ctx.save(),this.ctx.setTransform(xn,0,0,-Sn,0,wn*Sn),Ge(this.ctx)}else Ge(this.ctx),this.ctx.rect(Xe[0],Xe[1],Nn,wn),this.ctx.clip(),this.endPath()}this.current=new nn(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...rn),this.transform(...gn)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),ri(this,ii,zl).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(ze){if(!this.contentVisible)return;const Xe=ze.count;ze=this.getObject(ze.data,ze),ze.count=Xe;const rn=this.ctx,gn=this.processingType3;if(gn&&(gn.compiled===void 0&&(gn.compiled=Ye(ze)),gn.compiled)){gn.compiled(rn);return}const fn=this._createMaskCanvas(ze),Nn=fn.canvas;rn.save(),rn.setTransform(1,0,0,1,0,0),rn.drawImage(Nn,fn.offsetX,fn.offsetY),rn.restore(),this.compose()}paintImageMaskXObjectRepeat(ze,Xe,rn=0,gn=0,fn,Nn){if(!this.contentVisible)return;ze=this.getObject(ze.data,ze);const wn=this.ctx;wn.save();const xn=(0,xe.getCurrentTransform)(wn);wn.transform(Xe,rn,gn,fn,0,0);const Sn=this._createMaskCanvas(ze);wn.setTransform(1,0,0,1,Sn.offsetX-xn[4],Sn.offsetY-xn[5]);for(let Ke=0,$e=Nn.length;Ke<$e;Ke+=2){const We=r.Util.transform(xn,[Xe,rn,gn,fn,Nn[Ke],Nn[Ke+1]]),[yn,bn]=r.Util.applyTransform([0,0],We);wn.drawImage(Sn.canvas,yn,bn)}wn.restore(),this.compose()}paintImageMaskXObjectGroup(ze){if(!this.contentVisible)return;const Xe=this.ctx,rn=this.current.fillColor,gn=this.current.patternFill;for(const fn of ze){const{data:Nn,width:wn,height:xn,transform:Sn}=fn,Ke=this.cachedCanvases.getCanvas("maskCanvas",wn,xn),$e=Ke.context;$e.save();const We=this.getObject(Nn,fn);Ue($e,We),$e.globalCompositeOperation="source-in",$e.fillStyle=gn?rn.getPattern($e,this,(0,xe.getCurrentTransformInverse)(Xe),_e.PathType.FILL):rn,$e.fillRect(0,0,wn,xn),$e.restore(),Xe.save(),Xe.transform(...Sn),Xe.scale(1,-1),Be(Xe,Ke.canvas,0,0,wn,xn,0,-1,1,1),Xe.restore()}this.compose()}paintImageXObject(ze){if(!this.contentVisible)return;const Xe=this.getObject(ze);if(!Xe){(0,r.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(Xe)}paintImageXObjectRepeat(ze,Xe,rn,gn){if(!this.contentVisible)return;const fn=this.getObject(ze);if(!fn){(0,r.warn)("Dependent image isn't ready yet");return}const Nn=fn.width,wn=fn.height,xn=[];for(let Sn=0,Ke=gn.length;Sn<Ke;Sn+=2)xn.push({transform:[Xe,0,0,rn,gn[Sn],gn[Sn+1]],x:0,y:0,w:Nn,h:wn});this.paintInlineImageXObjectGroup(fn,xn)}applyTransferMapsToCanvas(ze){return this.current.transferMaps!=="none"&&(ze.filter=this.current.transferMaps,ze.drawImage(ze.canvas,0,0),ze.filter="none"),ze.canvas}applyTransferMapsToBitmap(ze){if(this.current.transferMaps==="none")return ze.bitmap;const{bitmap:Xe,width:rn,height:gn}=ze,fn=this.cachedCanvases.getCanvas("inlineImage",rn,gn),Nn=fn.context;return Nn.filter=this.current.transferMaps,Nn.drawImage(Xe,0,0),Nn.filter="none",fn.canvas}paintInlineImageXObject(ze){if(!this.contentVisible)return;const Xe=ze.width,rn=ze.height,gn=this.ctx;this.save(),Pe.isNodeJS||(gn.filter="none"),gn.scale(1/Xe,-1/rn);let fn;if(ze.bitmap)fn=this.applyTransferMapsToBitmap(ze);else if(typeof HTMLElement=="function"&&ze instanceof HTMLElement||!ze.data)fn=ze;else{const xn=this.cachedCanvases.getCanvas("inlineImage",Xe,rn).context;en(xn,ze),fn=this.applyTransferMapsToCanvas(xn)}const Nn=this._scaleImage(fn,(0,xe.getCurrentTransformInverse)(gn));gn.imageSmoothingEnabled=cn((0,xe.getCurrentTransform)(gn),ze.interpolate),Be(gn,Nn.img,0,0,Nn.paintWidth,Nn.paintHeight,0,-rn,Xe,rn),this.compose(),this.restore()}paintInlineImageXObjectGroup(ze,Xe){if(!this.contentVisible)return;const rn=this.ctx;let gn;if(ze.bitmap)gn=ze.bitmap;else{const fn=ze.width,Nn=ze.height,xn=this.cachedCanvases.getCanvas("inlineImage",fn,Nn).context;en(xn,ze),gn=this.applyTransferMapsToCanvas(xn)}for(const fn of Xe)rn.save(),rn.transform(...fn.transform),rn.scale(1,-1),Be(rn,gn,fn.x,fn.y,fn.w,fn.h,0,-1,1,1),rn.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(ze){}markPointProps(ze,Xe){}beginMarkedContent(ze){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(ze,Xe){ze==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(Xe)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(ze){const Xe=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(ze);const rn=this.ctx;this.pendingClip&&(Xe||(this.pendingClip===Dn?rn.clip("evenodd"):rn.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),rn.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const ze=(0,xe.getCurrentTransform)(this.ctx);if(ze[1]===0&&ze[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(ze[0]),Math.abs(ze[3]));else{const Xe=Math.abs(ze[0]*ze[3]-ze[2]*ze[1]),rn=Math.hypot(ze[0],ze[2]),gn=Math.hypot(ze[1],ze[3]);this._cachedGetSinglePixelWidth=Math.max(rn,gn)/Xe}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:ze}=this.current,Xe=(0,xe.getCurrentTransform)(this.ctx);let rn,gn;if(Xe[1]===0&&Xe[2]===0){const fn=Math.abs(Xe[0]),Nn=Math.abs(Xe[3]);if(ze===0)rn=1/fn,gn=1/Nn;else{const wn=fn*ze,xn=Nn*ze;rn=wn<1?1/wn:1,gn=xn<1?1/xn:1}}else{const fn=Math.abs(Xe[0]*Xe[3]-Xe[2]*Xe[1]),Nn=Math.hypot(Xe[0],Xe[1]),wn=Math.hypot(Xe[2],Xe[3]);if(ze===0)rn=wn/fn,gn=Nn/fn;else{const xn=ze*fn;rn=wn>xn?wn/xn:1,gn=Nn>xn?Nn/xn:1}}this._cachedScaleForStroking=[rn,gn]}return this._cachedScaleForStroking}rescaleAndStroke(ze){const{ctx:Xe}=this,{lineWidth:rn}=this.current,[gn,fn]=this.getScaleForStroking();if(Xe.lineWidth=rn||1,gn===1&&fn===1){Xe.stroke();return}let Nn,wn,xn;ze&&(Nn=(0,xe.getCurrentTransform)(Xe),wn=Xe.getLineDash().slice(),xn=Xe.lineDashOffset),Xe.scale(gn,fn);const Sn=Math.max(gn,fn);Xe.setLineDash(Xe.getLineDash().map(Ke=>Ke/Sn)),Xe.lineDashOffset/=Sn,Xe.stroke(),ze&&(Xe.setTransform(...Nn),Xe.setLineDash(wn),Xe.lineDashOffset=xn)}isContentVisible(){for(let ze=this.markedContentStack.length-1;ze>=0;ze--)if(!this.markedContentStack[ze].visible)return!1;return!0}};jn=new WeakSet,Ul=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ii=new WeakSet,zl=function(){if(this.pageColors){const ze=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(ze!=="none"){const Xe=this.ctx.filter;this.ctx.filter=ze,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=Xe}}};let Rn=_n;t.CanvasGraphics=Rn;for(const sn in r.OPS)Rn.prototype[sn]!==void 0&&(Rn.prototype[r.OPS[sn]]=Rn.prototype[sn])},(e,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=ke;var r=St(1),xe=St(6);const _e={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=_e;function Ee(Be,Ye){if(!Ye)return;const nn=Ye[2]-Ye[0],en=Ye[3]-Ye[1],Ue=new Path2D;Ue.rect(Ye[0],Ye[1],nn,en),Be.clip(Ue)}class Pe{constructor(){this.constructor===Pe&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class Ce extends Pe{constructor(Ye){super(),this._type=Ye[1],this._bbox=Ye[2],this._colorStops=Ye[3],this._p0=Ye[4],this._p1=Ye[5],this._r0=Ye[6],this._r1=Ye[7],this.matrix=null}_createGradient(Ye){let nn;this._type==="axial"?nn=Ye.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(nn=Ye.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const en of this._colorStops)nn.addColorStop(en[0],en[1]);return nn}getPattern(Ye,nn,en,Ue){let Je;if(Ue===_e.STROKE||Ue===_e.FILL){const Ge=nn.current.getClippedPathBoundingBox(Ue,(0,xe.getCurrentTransform)(Ye))||[0,0,0,0],Me=Math.ceil(Ge[2]-Ge[0])||1,tn=Math.ceil(Ge[3]-Ge[1])||1,dn=nn.cachedCanvases.getCanvas("pattern",Me,tn,!0),Re=dn.context;Re.clearRect(0,0,Re.canvas.width,Re.canvas.height),Re.beginPath(),Re.rect(0,0,Re.canvas.width,Re.canvas.height),Re.translate(-Ge[0],-Ge[1]),en=r.Util.transform(en,[1,0,0,1,Ge[0],Ge[1]]),Re.transform(...nn.baseTransform),this.matrix&&Re.transform(...this.matrix),Ee(Re,this._bbox),Re.fillStyle=this._createGradient(Re),Re.fill(),Je=Ye.createPattern(dn.canvas,"no-repeat");const Qe=new DOMMatrix(en);Je.setTransform(Qe)}else Ee(Ye,this._bbox),Je=this._createGradient(Ye);return Je}}function Te(Be,Ye,nn,en,Ue,Je,Ge,Me){const tn=Ye.coords,dn=Ye.colors,Re=Be.data,Qe=Be.width*4;let cn;tn[nn+1]>tn[en+1]&&(cn=nn,nn=en,en=cn,cn=Je,Je=Ge,Ge=cn),tn[en+1]>tn[Ue+1]&&(cn=en,en=Ue,Ue=cn,cn=Ge,Ge=Me,Me=cn),tn[nn+1]>tn[en+1]&&(cn=nn,nn=en,en=cn,cn=Je,Je=Ge,Ge=cn);const hn=(tn[nn]+Ye.offsetX)*Ye.scaleX,Pn=(tn[nn+1]+Ye.offsetY)*Ye.scaleY,kn=(tn[en]+Ye.offsetX)*Ye.scaleX,Dn=(tn[en+1]+Ye.offsetY)*Ye.scaleY,Rn=(tn[Ue]+Ye.offsetX)*Ye.scaleX,jn=(tn[Ue+1]+Ye.offsetY)*Ye.scaleY;if(Pn>=jn)return;const zn=dn[Je],ii=dn[Je+1],an=dn[Je+2],_n=dn[Ge],sn=dn[Ge+1],ze=dn[Ge+2],Xe=dn[Me],rn=dn[Me+1],gn=dn[Me+2],fn=Math.round(Pn),Nn=Math.round(jn);let wn,xn,Sn,Ke,$e,We,yn,bn;for(let Ln=fn;Ln<=Nn;Ln++){if(Ln<Dn){let $n;Ln<Pn?$n=0:$n=(Pn-Ln)/(Pn-Dn),wn=hn-(hn-kn)*$n,xn=zn-(zn-_n)*$n,Sn=ii-(ii-sn)*$n,Ke=an-(an-ze)*$n}else{let $n;Ln>jn?$n=1:Dn===jn?$n=0:$n=(Dn-Ln)/(Dn-jn),wn=kn-(kn-Rn)*$n,xn=_n-(_n-Xe)*$n,Sn=sn-(sn-rn)*$n,Ke=ze-(ze-gn)*$n}let Bn;Ln<Pn?Bn=0:Ln>jn?Bn=1:Bn=(Pn-Ln)/(Pn-jn),$e=hn-(hn-Rn)*Bn,We=zn-(zn-Xe)*Bn,yn=ii-(ii-rn)*Bn,bn=an-(an-gn)*Bn;const On=Math.round(Math.min(wn,$e)),qn=Math.round(Math.max(wn,$e));let Gn=Qe*Ln+On*4;for(let $n=On;$n<=qn;$n++)Bn=(wn-$n)/(wn-$e),Bn<0?Bn=0:Bn>1&&(Bn=1),Re[Gn++]=xn-(xn-We)*Bn|0,Re[Gn++]=Sn-(Sn-yn)*Bn|0,Re[Gn++]=Ke-(Ke-bn)*Bn|0,Re[Gn++]=255}}function Ie(Be,Ye,nn){const en=Ye.coords,Ue=Ye.colors;let Je,Ge;switch(Ye.type){case"lattice":const Me=Ye.verticesPerRow,tn=Math.floor(en.length/Me)-1,dn=Me-1;for(Je=0;Je<tn;Je++){let Re=Je*Me;for(let Qe=0;Qe<dn;Qe++,Re++)Te(Be,nn,en[Re],en[Re+1],en[Re+Me],Ue[Re],Ue[Re+1],Ue[Re+Me]),Te(Be,nn,en[Re+Me+1],en[Re+1],en[Re+Me],Ue[Re+Me+1],Ue[Re+1],Ue[Re+Me])}break;case"triangles":for(Je=0,Ge=en.length;Je<Ge;Je+=3)Te(Be,nn,en[Je],en[Je+1],en[Je+2],Ue[Je],Ue[Je+1],Ue[Je+2]);break;default:throw new Error("illegal figure")}}class Ve extends Pe{constructor(Ye){super(),this._coords=Ye[2],this._colors=Ye[3],this._figures=Ye[4],this._bounds=Ye[5],this._bbox=Ye[7],this._background=Ye[8],this.matrix=null}_createMeshCanvas(Ye,nn,en){const Me=Math.floor(this._bounds[0]),tn=Math.floor(this._bounds[1]),dn=Math.ceil(this._bounds[2])-Me,Re=Math.ceil(this._bounds[3])-tn,Qe=Math.min(Math.ceil(Math.abs(dn*Ye[0]*1.1)),3e3),cn=Math.min(Math.ceil(Math.abs(Re*Ye[1]*1.1)),3e3),hn=dn/Qe,Pn=Re/cn,kn={coords:this._coords,colors:this._colors,offsetX:-Me,offsetY:-tn,scaleX:1/hn,scaleY:1/Pn},Dn=Qe+2*2,Rn=cn+2*2,jn=en.getCanvas("mesh",Dn,Rn,!1),zn=jn.context,ii=zn.createImageData(Qe,cn);if(nn){const _n=ii.data;for(let sn=0,ze=_n.length;sn<ze;sn+=4)_n[sn]=nn[0],_n[sn+1]=nn[1],_n[sn+2]=nn[2],_n[sn+3]=255}for(const _n of this._figures)Ie(ii,_n,kn);return zn.putImageData(ii,2,2),{canvas:jn.canvas,offsetX:Me-2*hn,offsetY:tn-2*Pn,scaleX:hn,scaleY:Pn}}getPattern(Ye,nn,en,Ue){Ee(Ye,this._bbox);let Je;if(Ue===_e.SHADING)Je=r.Util.singularValueDecompose2dScale((0,xe.getCurrentTransform)(Ye));else if(Je=r.Util.singularValueDecompose2dScale(nn.baseTransform),this.matrix){const Me=r.Util.singularValueDecompose2dScale(this.matrix);Je=[Je[0]*Me[0],Je[1]*Me[1]]}const Ge=this._createMeshCanvas(Je,Ue===_e.SHADING?null:this._background,nn.cachedCanvases);return Ue!==_e.SHADING&&(Ye.setTransform(...nn.baseTransform),this.matrix&&Ye.transform(...this.matrix)),Ye.translate(Ge.offsetX,Ge.offsetY),Ye.scale(Ge.scaleX,Ge.scaleY),Ye.createPattern(Ge.canvas,"no-repeat")}}class He extends Pe{getPattern(){return"hotpink"}}function ke(Be){switch(Be[0]){case"RadialAxial":return new Ce(Be);case"Mesh":return new Ve(Be);case"Dummy":return new He}throw new Error(`Unknown IR type: ${Be[0]}`)}const qe={COLORED:1,UNCOLORED:2},Oe=class Oe{constructor(Ye,nn,en,Ue,Je){this.operatorList=Ye[2],this.matrix=Ye[3]||[1,0,0,1,0,0],this.bbox=Ye[4],this.xstep=Ye[5],this.ystep=Ye[6],this.paintType=Ye[7],this.tilingType=Ye[8],this.color=nn,this.ctx=en,this.canvasGraphicsFactory=Ue,this.baseTransform=Je}createPatternCanvas(Ye){const nn=this.operatorList,en=this.bbox,Ue=this.xstep,Je=this.ystep,Ge=this.paintType,Me=this.tilingType,tn=this.color,dn=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+Me);const Re=en[0],Qe=en[1],cn=en[2],hn=en[3],Pn=r.Util.singularValueDecompose2dScale(this.matrix),kn=r.Util.singularValueDecompose2dScale(this.baseTransform),Dn=[Pn[0]*kn[0],Pn[1]*kn[1]],Rn=this.getSizeAndScale(Ue,this.ctx.canvas.width,Dn[0]),jn=this.getSizeAndScale(Je,this.ctx.canvas.height,Dn[1]),zn=Ye.cachedCanvases.getCanvas("pattern",Rn.size,jn.size,!0),ii=zn.context,an=dn.createCanvasGraphics(ii);an.groupLevel=Ye.groupLevel,this.setFillAndStrokeStyleToContext(an,Ge,tn);let _n=Re,sn=Qe,ze=cn,Xe=hn;return Re<0&&(_n=0,ze+=Math.abs(Re)),Qe<0&&(sn=0,Xe+=Math.abs(Qe)),ii.translate(-(Rn.scale*_n),-(jn.scale*sn)),an.transform(Rn.scale,0,0,jn.scale,0,0),ii.save(),this.clipBbox(an,_n,sn,ze,Xe),an.baseTransform=(0,xe.getCurrentTransform)(an.ctx),an.executeOperatorList(nn),an.endDrawing(),{canvas:zn.canvas,scaleX:Rn.scale,scaleY:jn.scale,offsetX:_n,offsetY:sn}}getSizeAndScale(Ye,nn,en){Ye=Math.abs(Ye);const Ue=Math.max(Oe.MAX_PATTERN_SIZE,nn);let Je=Math.ceil(Ye*en);return Je>=Ue?Je=Ue:en=Je/Ye,{scale:en,size:Je}}clipBbox(Ye,nn,en,Ue,Je){const Ge=Ue-nn,Me=Je-en;Ye.ctx.rect(nn,en,Ge,Me),Ye.current.updateRectMinMax((0,xe.getCurrentTransform)(Ye.ctx),[nn,en,Ue,Je]),Ye.clip(),Ye.endPath()}setFillAndStrokeStyleToContext(Ye,nn,en){const Ue=Ye.ctx,Je=Ye.current;switch(nn){case qe.COLORED:const Ge=this.ctx;Ue.fillStyle=Ge.fillStyle,Ue.strokeStyle=Ge.strokeStyle,Je.fillColor=Ge.fillStyle,Je.strokeColor=Ge.strokeStyle;break;case qe.UNCOLORED:const Me=r.Util.makeHexColor(en[0],en[1],en[2]);Ue.fillStyle=Me,Ue.strokeStyle=Me,Je.fillColor=Me,Je.strokeColor=Me;break;default:throw new r.FormatError(`Unsupported paint type: ${nn}`)}}getPattern(Ye,nn,en,Ue){let Je=en;Ue!==_e.SHADING&&(Je=r.Util.transform(Je,nn.baseTransform),this.matrix&&(Je=r.Util.transform(Je,this.matrix)));const Ge=this.createPatternCanvas(nn);let Me=new DOMMatrix(Je);Me=Me.translate(Ge.offsetX,Ge.offsetY),Me=Me.scale(1/Ge.scaleX,1/Ge.scaleY);const tn=Ye.createPattern(Ge.canvas,"repeat");return tn.setTransform(Me),tn}};ir(Oe,"MAX_PATTERN_SIZE",3e3);let De=Oe;t.TilingPattern=De},(e,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=_e,t.convertToRGBA=xe,t.grayToRGBA=Pe;var r=St(1);function xe(Ce){switch(Ce.kind){case r.ImageKind.GRAYSCALE_1BPP:return _e(Ce);case r.ImageKind.RGB_24BPP:return Ee(Ce)}return null}function _e({src:Ce,srcPos:Te=0,dest:Ie,width:Ve,height:He,nonBlackColor:ke=4294967295,inverseDecode:qe=!1}){const De=r.FeatureTest.isLittleEndian?4278190080:255,[Oe,Be]=qe?[ke,De]:[De,ke],Ye=Ve>>3,nn=Ve&7,en=Ce.length;Ie=new Uint32Array(Ie.buffer);let Ue=0;for(let Je=0;Je<He;Je++){for(const Me=Te+Ye;Te<Me;Te++){const tn=Te<en?Ce[Te]:255;Ie[Ue++]=tn&128?Be:Oe,Ie[Ue++]=tn&64?Be:Oe,Ie[Ue++]=tn&32?Be:Oe,Ie[Ue++]=tn&16?Be:Oe,Ie[Ue++]=tn&8?Be:Oe,Ie[Ue++]=tn&4?Be:Oe,Ie[Ue++]=tn&2?Be:Oe,Ie[Ue++]=tn&1?Be:Oe}if(nn===0)continue;const Ge=Te<en?Ce[Te++]:255;for(let Me=0;Me<nn;Me++)Ie[Ue++]=Ge&1<<7-Me?Be:Oe}return{srcPos:Te,destPos:Ue}}function Ee({src:Ce,srcPos:Te=0,dest:Ie,destPos:Ve=0,width:He,height:ke}){let qe=0;const De=Ce.length>>2,Oe=new Uint32Array(Ce.buffer,Te,De);if(r.FeatureTest.isLittleEndian){for(;qe<De-2;qe+=3,Ve+=4){const Be=Oe[qe],Ye=Oe[qe+1],nn=Oe[qe+2];Ie[Ve]=Be|4278190080,Ie[Ve+1]=Be>>>24|Ye<<8|4278190080,Ie[Ve+2]=Ye>>>16|nn<<16|4278190080,Ie[Ve+3]=nn>>>8|4278190080}for(let Be=qe*4,Ye=Ce.length;Be<Ye;Be+=3)Ie[Ve++]=Ce[Be]|Ce[Be+1]<<8|Ce[Be+2]<<16|4278190080}else{for(;qe<De-2;qe+=3,Ve+=4){const Be=Oe[qe],Ye=Oe[qe+1],nn=Oe[qe+2];Ie[Ve]=Be|255,Ie[Ve+1]=Be<<24|Ye>>>8|255,Ie[Ve+2]=Ye<<16|nn>>>16|255,Ie[Ve+3]=nn<<8|255}for(let Be=qe*4,Ye=Ce.length;Be<Ye;Be+=3)Ie[Ve++]=Ce[Be]<<24|Ce[Be+1]<<16|Ce[Be+2]<<8|255}return{srcPos:Te,destPos:Ve}}function Pe(Ce,Te){if(r.FeatureTest.isLittleEndian)for(let Ie=0,Ve=Ce.length;Ie<Ve;Ie++)Te[Ie]=Ce[Ie]*65793|4278190080;else for(let Ie=0,Ve=Ce.length;Ie<Ve;Ie++)Te[Ie]=Ce[Ie]*16843008|255}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const St=Object.create(null);t.GlobalWorkerOptions=St,St.workerPort=null,St.workerSrc=""},(e,t,St)=>{var Ce,Wc,Ie,Vc,He,Bo;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var r=St(1);const xe={UNKNOWN:0,DATA:1,ERROR:2},_e={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Ee(qe){switch(qe instanceof Error||typeof qe=="object"&&qe!==null||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),qe.name){case"AbortException":return new r.AbortException(qe.message);case"MissingPDFException":return new r.MissingPDFException(qe.message);case"PasswordException":return new r.PasswordException(qe.message,qe.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(qe.message,qe.status);case"UnknownErrorException":return new r.UnknownErrorException(qe.message,qe.details);default:return new r.UnknownErrorException(qe.message,qe.toString())}}class Pe{constructor(De,Oe,Be){ti(this,Ce);ti(this,Ie);ti(this,He);this.sourceName=De,this.targetName=Oe,this.comObj=Be,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=Ye=>{const nn=Ye.data;if(nn.targetName!==this.sourceName)return;if(nn.stream){ri(this,Ie,Vc).call(this,nn);return}if(nn.callback){const Ue=nn.callbackId,Je=this.callbackCapabilities[Ue];if(!Je)throw new Error(`Cannot resolve callback ${Ue}`);if(delete this.callbackCapabilities[Ue],nn.callback===xe.DATA)Je.resolve(nn.data);else if(nn.callback===xe.ERROR)Je.reject(Ee(nn.reason));else throw new Error("Unexpected callback case");return}const en=this.actionHandler[nn.action];if(!en)throw new Error(`Unknown action from worker: ${nn.action}`);if(nn.callbackId){const Ue=this.sourceName,Je=nn.sourceName;new Promise(function(Ge){Ge(en(nn.data))}).then(function(Ge){Be.postMessage({sourceName:Ue,targetName:Je,callback:xe.DATA,callbackId:nn.callbackId,data:Ge})},function(Ge){Be.postMessage({sourceName:Ue,targetName:Je,callback:xe.ERROR,callbackId:nn.callbackId,reason:Ee(Ge)})});return}if(nn.streamId){ri(this,Ce,Wc).call(this,nn);return}en(nn.data)},Be.addEventListener("message",this._onComObjOnMessage)}on(De,Oe){const Be=this.actionHandler;if(Be[De])throw new Error(`There is already an actionName called "${De}"`);Be[De]=Oe}send(De,Oe,Be){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:De,data:Oe},Be)}sendWithPromise(De,Oe,Be){const Ye=this.callbackId++,nn=new r.PromiseCapability;this.callbackCapabilities[Ye]=nn;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:De,callbackId:Ye,data:Oe},Be)}catch(en){nn.reject(en)}return nn.promise}sendWithStream(De,Oe,Be,Ye){const nn=this.streamId++,en=this.sourceName,Ue=this.targetName,Je=this.comObj;return new ReadableStream({start:Ge=>{const Me=new r.PromiseCapability;return this.streamControllers[nn]={controller:Ge,startCall:Me,pullCall:null,cancelCall:null,isClosed:!1},Je.postMessage({sourceName:en,targetName:Ue,action:De,streamId:nn,data:Oe,desiredSize:Ge.desiredSize},Ye),Me.promise},pull:Ge=>{const Me=new r.PromiseCapability;return this.streamControllers[nn].pullCall=Me,Je.postMessage({sourceName:en,targetName:Ue,stream:_e.PULL,streamId:nn,desiredSize:Ge.desiredSize}),Me.promise},cancel:Ge=>{(0,r.assert)(Ge instanceof Error,"cancel must have a valid reason");const Me=new r.PromiseCapability;return this.streamControllers[nn].cancelCall=Me,this.streamControllers[nn].isClosed=!0,Je.postMessage({sourceName:en,targetName:Ue,stream:_e.CANCEL,streamId:nn,reason:Ee(Ge)}),Me.promise}},Be)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}Ce=new WeakSet,Wc=function(De){const Oe=De.streamId,Be=this.sourceName,Ye=De.sourceName,nn=this.comObj,en=this,Ue=this.actionHandler[De.action],Je={enqueue(Ge,Me=1,tn){if(this.isCancelled)return;const dn=this.desiredSize;this.desiredSize-=Me,dn>0&&this.desiredSize<=0&&(this.sinkCapability=new r.PromiseCapability,this.ready=this.sinkCapability.promise),nn.postMessage({sourceName:Be,targetName:Ye,stream:_e.ENQUEUE,streamId:Oe,chunk:Ge},tn)},close(){this.isCancelled||(this.isCancelled=!0,nn.postMessage({sourceName:Be,targetName:Ye,stream:_e.CLOSE,streamId:Oe}),delete en.streamSinks[Oe])},error(Ge){(0,r.assert)(Ge instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,nn.postMessage({sourceName:Be,targetName:Ye,stream:_e.ERROR,streamId:Oe,reason:Ee(Ge)}))},sinkCapability:new r.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:De.desiredSize,ready:null};Je.sinkCapability.resolve(),Je.ready=Je.sinkCapability.promise,this.streamSinks[Oe]=Je,new Promise(function(Ge){Ge(Ue(De.data,Je))}).then(function(){nn.postMessage({sourceName:Be,targetName:Ye,stream:_e.START_COMPLETE,streamId:Oe,success:!0})},function(Ge){nn.postMessage({sourceName:Be,targetName:Ye,stream:_e.START_COMPLETE,streamId:Oe,reason:Ee(Ge)})})},Ie=new WeakSet,Vc=function(De){const Oe=De.streamId,Be=this.sourceName,Ye=De.sourceName,nn=this.comObj,en=this.streamControllers[Oe],Ue=this.streamSinks[Oe];switch(De.stream){case _e.START_COMPLETE:De.success?en.startCall.resolve():en.startCall.reject(Ee(De.reason));break;case _e.PULL_COMPLETE:De.success?en.pullCall.resolve():en.pullCall.reject(Ee(De.reason));break;case _e.PULL:if(!Ue){nn.postMessage({sourceName:Be,targetName:Ye,stream:_e.PULL_COMPLETE,streamId:Oe,success:!0});break}Ue.desiredSize<=0&&De.desiredSize>0&&Ue.sinkCapability.resolve(),Ue.desiredSize=De.desiredSize,new Promise(function(Je){var Ge;Je((Ge=Ue.onPull)==null?void 0:Ge.call(Ue))}).then(function(){nn.postMessage({sourceName:Be,targetName:Ye,stream:_e.PULL_COMPLETE,streamId:Oe,success:!0})},function(Je){nn.postMessage({sourceName:Be,targetName:Ye,stream:_e.PULL_COMPLETE,streamId:Oe,reason:Ee(Je)})});break;case _e.ENQUEUE:if((0,r.assert)(en,"enqueue should have stream controller"),en.isClosed)break;en.controller.enqueue(De.chunk);break;case _e.CLOSE:if((0,r.assert)(en,"close should have stream controller"),en.isClosed)break;en.isClosed=!0,en.controller.close(),ri(this,He,Bo).call(this,en,Oe);break;case _e.ERROR:(0,r.assert)(en,"error should have stream controller"),en.controller.error(Ee(De.reason)),ri(this,He,Bo).call(this,en,Oe);break;case _e.CANCEL_COMPLETE:De.success?en.cancelCall.resolve():en.cancelCall.reject(Ee(De.reason)),ri(this,He,Bo).call(this,en,Oe);break;case _e.CANCEL:if(!Ue)break;new Promise(function(Je){var Ge;Je((Ge=Ue.onCancel)==null?void 0:Ge.call(Ue,Ee(De.reason)))}).then(function(){nn.postMessage({sourceName:Be,targetName:Ye,stream:_e.CANCEL_COMPLETE,streamId:Oe,success:!0})},function(Je){nn.postMessage({sourceName:Be,targetName:Ye,stream:_e.CANCEL_COMPLETE,streamId:Oe,reason:Ee(Je)})}),Ue.sinkCapability.reject(Ee(De.reason)),Ue.isCancelled=!0,delete this.streamSinks[Oe];break;default:throw new Error("Unexpected stream case")}},He=new WeakSet,Bo=async function(De,Oe){var Be,Ye,nn;await Promise.allSettled([(Be=De.startCall)==null?void 0:Be.promise,(Ye=De.pullCall)==null?void 0:Ye.promise,(nn=De.cancelCall)==null?void 0:nn.promise]),delete this.streamControllers[Oe]},t.MessageHandler=Pe},(e,t,St)=>{var _e,Ee;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var r=St(1);class xe{constructor({parsedData:Ce,rawData:Te}){ti(this,_e,void 0);ti(this,Ee,void 0);pi(this,_e,Ce),pi(this,Ee,Te)}getRaw(){return pn(this,Ee)}get(Ce){return pn(this,_e).get(Ce)??null}getAll(){return(0,r.objectFromMap)(pn(this,_e))}has(Ce){return pn(this,_e).has(Ce)}}_e=new WeakMap,Ee=new WeakMap,t.Metadata=xe},(e,t,St)=>{var Ce,Te,Ie,Ve,He,ke,Hl;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var r=St(1),xe=St(8);const _e=Symbol("INTERNAL");class Ee{constructor(Oe,Be){ti(this,Ce,!0);this.name=Oe,this.intent=Be}get visible(){return pn(this,Ce)}_setVisible(Oe,Be){Oe!==_e&&(0,r.unreachable)("Internal method `_setVisible` called."),pi(this,Ce,Be)}}Ce=new WeakMap;class Pe{constructor(Oe){ti(this,ke);ti(this,Te,null);ti(this,Ie,new Map);ti(this,Ve,null);ti(this,He,null);if(this.name=null,this.creator=null,Oe!==null){this.name=Oe.name,this.creator=Oe.creator,pi(this,He,Oe.order);for(const Be of Oe.groups)pn(this,Ie).set(Be.id,new Ee(Be.name,Be.intent));if(Oe.baseState==="OFF")for(const Be of pn(this,Ie).values())Be._setVisible(_e,!1);for(const Be of Oe.on)pn(this,Ie).get(Be)._setVisible(_e,!0);for(const Be of Oe.off)pn(this,Ie).get(Be)._setVisible(_e,!1);pi(this,Ve,this.getHash())}}isVisible(Oe){if(pn(this,Ie).size===0)return!0;if(!Oe)return(0,r.warn)("Optional content group not defined."),!0;if(Oe.type==="OCG")return pn(this,Ie).has(Oe.id)?pn(this,Ie).get(Oe.id).visible:((0,r.warn)(`Optional content group not found: ${Oe.id}`),!0);if(Oe.type==="OCMD"){if(Oe.expression)return ri(this,ke,Hl).call(this,Oe.expression);if(!Oe.policy||Oe.policy==="AnyOn"){for(const Be of Oe.ids){if(!pn(this,Ie).has(Be))return(0,r.warn)(`Optional content group not found: ${Be}`),!0;if(pn(this,Ie).get(Be).visible)return!0}return!1}else if(Oe.policy==="AllOn"){for(const Be of Oe.ids){if(!pn(this,Ie).has(Be))return(0,r.warn)(`Optional content group not found: ${Be}`),!0;if(!pn(this,Ie).get(Be).visible)return!1}return!0}else if(Oe.policy==="AnyOff"){for(const Be of Oe.ids){if(!pn(this,Ie).has(Be))return(0,r.warn)(`Optional content group not found: ${Be}`),!0;if(!pn(this,Ie).get(Be).visible)return!0}return!1}else if(Oe.policy==="AllOff"){for(const Be of Oe.ids){if(!pn(this,Ie).has(Be))return(0,r.warn)(`Optional content group not found: ${Be}`),!0;if(pn(this,Ie).get(Be).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${Oe.policy}.`),!0}return(0,r.warn)(`Unknown group type ${Oe.type}.`),!0}setVisibility(Oe,Be=!0){if(!pn(this,Ie).has(Oe)){(0,r.warn)(`Optional content group not found: ${Oe}`);return}pn(this,Ie).get(Oe)._setVisible(_e,!!Be),pi(this,Te,null)}get hasInitialVisibility(){return this.getHash()===pn(this,Ve)}getOrder(){return pn(this,Ie).size?pn(this,He)?pn(this,He).slice():[...pn(this,Ie).keys()]:null}getGroups(){return pn(this,Ie).size>0?(0,r.objectFromMap)(pn(this,Ie)):null}getGroup(Oe){return pn(this,Ie).get(Oe)||null}getHash(){if(pn(this,Te)!==null)return pn(this,Te);const Oe=new xe.MurmurHash3_64;for(const[Be,Ye]of pn(this,Ie))Oe.update(`${Be}:${Ye.visible}`);return pi(this,Te,Oe.hexdigest())}}Te=new WeakMap,Ie=new WeakMap,Ve=new WeakMap,He=new WeakMap,ke=new WeakSet,Hl=function(Oe){const Be=Oe.length;if(Be<2)return!0;const Ye=Oe[0];for(let nn=1;nn<Be;nn++){const en=Oe[nn];let Ue;if(Array.isArray(en))Ue=ri(this,ke,Hl).call(this,en);else if(pn(this,Ie).has(en))Ue=pn(this,Ie).get(en).visible;else return(0,r.warn)(`Optional content group not found: ${en}`),!0;switch(Ye){case"And":if(!Ue)return!1;break;case"Or":if(Ue)return!0;break;case"Not":return!Ue;default:return!0}}return Ye==="And"},t.OptionalContentConfig=Pe},(e,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var r=St(1),xe=St(6);class _e{constructor({length:Te,initialData:Ie,progressiveDone:Ve=!1,contentDispositionFilename:He=null,disableRange:ke=!1,disableStream:qe=!1},De){if((0,r.assert)(De,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=Ve,this._contentDispositionFilename=He,(Ie==null?void 0:Ie.length)>0){const Oe=Ie instanceof Uint8Array&&Ie.byteLength===Ie.buffer.byteLength?Ie.buffer:new Uint8Array(Ie).buffer;this._queuedChunks.push(Oe)}this._pdfDataRangeTransport=De,this._isStreamingSupported=!qe,this._isRangeSupported=!ke,this._contentLength=Te,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((Oe,Be)=>{this._onReceiveData({begin:Oe,chunk:Be})}),this._pdfDataRangeTransport.addProgressListener((Oe,Be)=>{this._onProgress({loaded:Oe,total:Be})}),this._pdfDataRangeTransport.addProgressiveReadListener(Oe=>{this._onReceiveData({chunk:Oe})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:Te,chunk:Ie}){const Ve=Ie instanceof Uint8Array&&Ie.byteLength===Ie.buffer.byteLength?Ie.buffer:new Uint8Array(Ie).buffer;if(Te===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(Ve):this._queuedChunks.push(Ve);else{const He=this._rangeReaders.some(function(ke){return ke._begin!==Te?!1:(ke._enqueue(Ve),!0)});(0,r.assert)(He,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var Te;return((Te=this._fullRequestReader)==null?void 0:Te._loaded)??0}_onProgress(Te){var Ie,Ve,He,ke;Te.total===void 0?(Ve=(Ie=this._rangeReaders[0])==null?void 0:Ie.onProgress)==null||Ve.call(Ie,{loaded:Te.loaded}):(ke=(He=this._fullRequestReader)==null?void 0:He.onProgress)==null||ke.call(He,{loaded:Te.loaded,total:Te.total})}_onProgressiveDone(){var Te;(Te=this._fullRequestReader)==null||Te.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(Te){const Ie=this._rangeReaders.indexOf(Te);Ie>=0&&this._rangeReaders.splice(Ie,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const Te=this._queuedChunks;return this._queuedChunks=null,new Ee(this,Te,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(Te,Ie){if(Ie<=this._progressiveDataLength)return null;const Ve=new Pe(this,Te,Ie);return this._pdfDataRangeTransport.requestDataRange(Te,Ie),this._rangeReaders.push(Ve),Ve}cancelAllRequests(Te){var Ie;(Ie=this._fullRequestReader)==null||Ie.cancel(Te);for(const Ve of this._rangeReaders.slice(0))Ve.cancel(Te);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=_e;class Ee{constructor(Te,Ie,Ve=!1,He=null){this._stream=Te,this._done=Ve||!1,this._filename=(0,xe.isPdfFile)(He)?He:null,this._queuedChunks=Ie||[],this._loaded=0;for(const ke of this._queuedChunks)this._loaded+=ke.byteLength;this._requests=[],this._headersReady=Promise.resolve(),Te._fullRequestReader=this,this.onProgress=null}_enqueue(Te){this._done||(this._requests.length>0?this._requests.shift().resolve({value:Te,done:!1}):this._queuedChunks.push(Te),this._loaded+=Te.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const Te=new r.PromiseCapability;return this._requests.push(Te),Te.promise}cancel(Te){this._done=!0;for(const Ie of this._requests)Ie.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Pe{constructor(Te,Ie,Ve){this._stream=Te,this._begin=Ie,this._end=Ve,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(Te){if(!this._done){if(this._requests.length===0)this._queuedChunk=Te;else{this._requests.shift().resolve({value:Te,done:!1});for(const Ve of this._requests)Ve.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const Ie=this._queuedChunk;return this._queuedChunk=null,{value:Ie,done:!1}}if(this._done)return{value:void 0,done:!0};const Te=new r.PromiseCapability;return this._requests.push(Te),Te.promise}cancel(Te){this._done=!0;for(const Ie of this._requests)Ie.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class St{static textContent(xe){const _e=[],Ee={items:_e,styles:Object.create(null)};function Pe(Ce){var Ve;if(!Ce)return;let Te=null;const Ie=Ce.name;if(Ie==="#text")Te=Ce.value;else if(St.shouldBuildText(Ie))(Ve=Ce==null?void 0:Ce.attributes)!=null&&Ve.textContent?Te=Ce.attributes.textContent:Ce.value&&(Te=Ce.value);else return;if(Te!==null&&_e.push({str:Te}),!!Ce.children)for(const He of Ce.children)Pe(He)}return Pe(xe),Ee}static shouldBuildText(xe){return!(xe==="textarea"||xe==="input"||xe==="option"||xe==="select")}}t.XfaText=St},(e,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var r=St(7);const xe=function(Te){return new Promise((Ie,Ve)=>{require$$5.readFile(Te,(ke,qe)=>{if(ke||!qe){Ve(new Error(ke));return}Ie(new Uint8Array(qe))})})};class _e extends r.BaseFilterFactory{}t.NodeFilterFactory=_e;class Ee extends r.BaseCanvasFactory{_createCanvas(Ie,Ve){return require$$5.createCanvas(Ie,Ve)}}t.NodeCanvasFactory=Ee;class Pe extends r.BaseCMapReaderFactory{_fetchData(Ie,Ve){return xe(Ie).then(He=>({cMapData:He,compressionType:Ve}))}}t.NodeCMapReaderFactory=Pe;class Ce extends r.BaseStandardFontDataFactory{_fetchData(Ie){return xe(Ie)}}t.NodeStandardFontDataFactory=Ce},(e,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var r=St(1),xe=St(22);const _e=require$$5,Ee=require$$5,Pe=require$$5,Ce=require$$5,Te=/^file:\/\/\/[a-zA-Z]:\//;function Ie(nn){const en=Ce.parse(nn);return en.protocol==="file:"||en.host?en:/^[a-z]:[/\\]/i.test(nn)?Ce.parse(`file:///${nn}`):(en.host||(en.protocol="file:"),en)}class Ve{constructor(en){this.source=en,this.url=Ie(en.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&en.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var en;return((en=this._fullRequestReader)==null?void 0:en._loaded)??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new Be(this):new De(this),this._fullRequestReader}getRangeReader(en,Ue){if(Ue<=this._progressiveDataLength)return null;const Je=this.isFsUrl?new Ye(this,en,Ue):new Oe(this,en,Ue);return this._rangeRequestReaders.push(Je),Je}cancelAllRequests(en){var Ue;(Ue=this._fullRequestReader)==null||Ue.cancel(en);for(const Je of this._rangeRequestReaders.slice(0))Je.cancel(en)}}t.PDFNodeStream=Ve;class He{constructor(en){this._url=en.url,this._done=!1,this._storedError=null,this.onProgress=null;const Ue=en.source;this._contentLength=Ue.length,this._loaded=0,this._filename=null,this._disableRange=Ue.disableRange||!1,this._rangeChunkSize=Ue.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!Ue.disableStream,this._isRangeSupported=!Ue.disableRange,this._readableStream=null,this._readCapability=new r.PromiseCapability,this._headersCapability=new r.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Je;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const en=this._readableStream.read();return en===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=en.length,(Je=this.onProgress)==null||Je.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(en).buffer,done:!1})}cancel(en){if(!this._readableStream){this._error(en);return}this._readableStream.destroy(en)}_error(en){this._storedError=en,this._readCapability.resolve()}_setReadableStream(en){this._readableStream=en,en.on("readable",()=>{this._readCapability.resolve()}),en.on("end",()=>{en.destroy(),this._done=!0,this._readCapability.resolve()}),en.on("error",Ue=>{this._error(Ue)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class ke{constructor(en){this._url=en.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new r.PromiseCapability;const Ue=en.source;this._isStreamingSupported=!Ue.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Je;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const en=this._readableStream.read();return en===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=en.length,(Je=this.onProgress)==null||Je.call(this,{loaded:this._loaded}),{value:new Uint8Array(en).buffer,done:!1})}cancel(en){if(!this._readableStream){this._error(en);return}this._readableStream.destroy(en)}_error(en){this._storedError=en,this._readCapability.resolve()}_setReadableStream(en){this._readableStream=en,en.on("readable",()=>{this._readCapability.resolve()}),en.on("end",()=>{en.destroy(),this._done=!0,this._readCapability.resolve()}),en.on("error",Ue=>{this._error(Ue)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function qe(nn,en){return{protocol:nn.protocol,auth:nn.auth,host:nn.hostname,port:nn.port,path:nn.path,method:"GET",headers:en}}class De extends He{constructor(en){super(en);const Ue=Je=>{if(Je.statusCode===404){const dn=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=dn,this._headersCapability.reject(dn);return}this._headersCapability.resolve(),this._setReadableStream(Je);const Ge=dn=>this._readableStream.headers[dn.toLowerCase()],{allowRangeRequests:Me,suggestedLength:tn}=(0,xe.validateRangeRequestCapabilities)({getResponseHeader:Ge,isHttp:en.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Me,this._contentLength=tn||this._contentLength,this._filename=(0,xe.extractFilenameFromHeader)(Ge)};this._request=null,this._url.protocol==="http:"?this._request=Ee.request(qe(this._url,en.httpHeaders),Ue):this._request=Pe.request(qe(this._url,en.httpHeaders),Ue),this._request.on("error",Je=>{this._storedError=Je,this._headersCapability.reject(Je)}),this._request.end()}}class Oe extends ke{constructor(en,Ue,Je){super(en),this._httpHeaders={};for(const Me in en.httpHeaders){const tn=en.httpHeaders[Me];tn!==void 0&&(this._httpHeaders[Me]=tn)}this._httpHeaders.Range=`bytes=${Ue}-${Je-1}`;const Ge=Me=>{if(Me.statusCode===404){const tn=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=tn;return}this._setReadableStream(Me)};this._request=null,this._url.protocol==="http:"?this._request=Ee.request(qe(this._url,this._httpHeaders),Ge):this._request=Pe.request(qe(this._url,this._httpHeaders),Ge),this._request.on("error",Me=>{this._storedError=Me}),this._request.end()}}class Be extends He{constructor(en){super(en);let Ue=decodeURIComponent(this._url.path);Te.test(this._url.href)&&(Ue=Ue.replace(/^\//,"")),_e.lstat(Ue,(Je,Ge)=>{if(Je){Je.code==="ENOENT"&&(Je=new r.MissingPDFException(`Missing PDF "${Ue}".`)),this._storedError=Je,this._headersCapability.reject(Je);return}this._contentLength=Ge.size,this._setReadableStream(_e.createReadStream(Ue)),this._headersCapability.resolve()})}}class Ye extends ke{constructor(en,Ue,Je){super(en);let Ge=decodeURIComponent(this._url.path);Te.test(this._url.href)&&(Ge=Ge.replace(/^\//,"")),this._setReadableStream(_e.createReadStream(Ge,{start:Ue,end:Je-1}))}}},(e,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=Ce,t.extractFilenameFromHeader=Pe,t.validateRangeRequestCapabilities=Ee,t.validateResponseStatus=Te;var r=St(1),xe=St(23),_e=St(6);function Ee({getResponseHeader:Ie,isHttp:Ve,rangeChunkSize:He,disableRange:ke}){const qe={allowRangeRequests:!1,suggestedLength:void 0},De=parseInt(Ie("Content-Length"),10);return!Number.isInteger(De)||(qe.suggestedLength=De,De<=2*He)||ke||!Ve||Ie("Accept-Ranges")!=="bytes"||(Ie("Content-Encoding")||"identity")!=="identity"||(qe.allowRangeRequests=!0),qe}function Pe(Ie){const Ve=Ie("Content-Disposition");if(Ve){let He=(0,xe.getFilenameFromContentDispositionHeader)(Ve);if(He.includes("%"))try{He=decodeURIComponent(He)}catch{}if((0,_e.isPdfFile)(He))return He}return null}function Ce(Ie,Ve){return Ie===404||Ie===0&&Ve.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+Ve+'".'):new r.UnexpectedResponseException(`Unexpected server response (${Ie}) while retrieving PDF "${Ve}".`,Ie)}function Te(Ie){return Ie===200||Ie===206}},(e,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=xe;var r=St(1);function xe(_e){let Ee=!0,Pe=Ce("filename\\*","i").exec(_e);if(Pe){Pe=Pe[1];let De=He(Pe);return De=unescape(De),De=ke(De),De=qe(De),Ie(De)}if(Pe=Ve(_e),Pe){const De=qe(Pe);return Ie(De)}if(Pe=Ce("filename","i").exec(_e),Pe){Pe=Pe[1];let De=He(Pe);return De=qe(De),Ie(De)}function Ce(De,Oe){return new RegExp("(?:^|;)\\s*"+De+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Oe)}function Te(De,Oe){if(De){if(!/^[\x00-\xFF]+$/.test(Oe))return Oe;try{const Be=new TextDecoder(De,{fatal:!0}),Ye=(0,r.stringToBytes)(Oe);Oe=Be.decode(Ye),Ee=!1}catch{}}return Oe}function Ie(De){return Ee&&/[\x80-\xff]/.test(De)&&(De=Te("utf-8",De),Ee&&(De=Te("iso-8859-1",De))),De}function Ve(De){const Oe=[];let Be;const Ye=Ce("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(Be=Ye.exec(De))!==null;){let[,en,Ue,Je]=Be;if(en=parseInt(en,10),en in Oe){if(en===0)break;continue}Oe[en]=[Ue,Je]}const nn=[];for(let en=0;en<Oe.length&&en in Oe;++en){let[Ue,Je]=Oe[en];Je=He(Je),Ue&&(Je=unescape(Je),en===0&&(Je=ke(Je))),nn.push(Je)}return nn.join("")}function He(De){if(De.startsWith('"')){const Oe=De.slice(1).split('\\"');for(let Be=0;Be<Oe.length;++Be){const Ye=Oe[Be].indexOf('"');Ye!==-1&&(Oe[Be]=Oe[Be].slice(0,Ye),Oe.length=Be+1),Oe[Be]=Oe[Be].replaceAll(/\\(.)/g,"$1")}De=Oe.join('"')}return De}function ke(De){const Oe=De.indexOf("'");if(Oe===-1)return De;const Be=De.slice(0,Oe),nn=De.slice(Oe+1).replace(/^[^']*'/,"");return Te(Be,nn)}function qe(De){return!De.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(De)?De:De.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Oe,Be,Ye,nn){if(Ye==="q"||Ye==="Q")return nn=nn.replaceAll("_"," "),nn=nn.replaceAll(/=([0-9a-fA-F]{2})/g,function(en,Ue){return String.fromCharCode(parseInt(Ue,16))}),Te(Be,nn);try{nn=atob(nn)}catch{}return Te(Be,nn)})}return""}},(e,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var r=St(1),xe=St(22);const _e=200,Ee=206;function Pe(He){const ke=He.response;return typeof ke!="string"?ke:(0,r.stringToBytes)(ke).buffer}class Ce{constructor(ke,qe={}){this.url=ke,this.isHttp=/^https?:/i.test(ke),this.httpHeaders=this.isHttp&&qe.httpHeaders||Object.create(null),this.withCredentials=qe.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(ke,qe,De){const Oe={begin:ke,end:qe};for(const Be in De)Oe[Be]=De[Be];return this.request(Oe)}requestFull(ke){return this.request(ke)}request(ke){const qe=new XMLHttpRequest,De=this.currXhrId++,Oe=this.pendingRequests[De]={xhr:qe};qe.open("GET",this.url),qe.withCredentials=this.withCredentials;for(const Be in this.httpHeaders){const Ye=this.httpHeaders[Be];Ye!==void 0&&qe.setRequestHeader(Be,Ye)}return this.isHttp&&"begin"in ke&&"end"in ke?(qe.setRequestHeader("Range",`bytes=${ke.begin}-${ke.end-1}`),Oe.expectedStatus=Ee):Oe.expectedStatus=_e,qe.responseType="arraybuffer",ke.onError&&(qe.onerror=function(Be){ke.onError(qe.status)}),qe.onreadystatechange=this.onStateChange.bind(this,De),qe.onprogress=this.onProgress.bind(this,De),Oe.onHeadersReceived=ke.onHeadersReceived,Oe.onDone=ke.onDone,Oe.onError=ke.onError,Oe.onProgress=ke.onProgress,qe.send(null),De}onProgress(ke,qe){var Oe;const De=this.pendingRequests[ke];De&&((Oe=De.onProgress)==null||Oe.call(De,qe))}onStateChange(ke,qe){var en,Ue,Je;const De=this.pendingRequests[ke];if(!De)return;const Oe=De.xhr;if(Oe.readyState>=2&&De.onHeadersReceived&&(De.onHeadersReceived(),delete De.onHeadersReceived),Oe.readyState!==4||!(ke in this.pendingRequests))return;if(delete this.pendingRequests[ke],Oe.status===0&&this.isHttp){(en=De.onError)==null||en.call(De,Oe.status);return}const Be=Oe.status||_e;if(!(Be===_e&&De.expectedStatus===Ee)&&Be!==De.expectedStatus){(Ue=De.onError)==null||Ue.call(De,Oe.status);return}const nn=Pe(Oe);if(Be===Ee){const Ge=Oe.getResponseHeader("Content-Range"),Me=/bytes (\d+)-(\d+)\/(\d+)/.exec(Ge);De.onDone({begin:parseInt(Me[1],10),chunk:nn})}else nn?De.onDone({begin:0,chunk:nn}):(Je=De.onError)==null||Je.call(De,Oe.status)}getRequestXhr(ke){return this.pendingRequests[ke].xhr}isPendingRequest(ke){return ke in this.pendingRequests}abortRequest(ke){const qe=this.pendingRequests[ke].xhr;delete this.pendingRequests[ke],qe.abort()}}class Te{constructor(ke){this._source=ke,this._manager=new Ce(ke.url,{httpHeaders:ke.httpHeaders,withCredentials:ke.withCredentials}),this._rangeChunkSize=ke.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(ke){const qe=this._rangeRequestReaders.indexOf(ke);qe>=0&&this._rangeRequestReaders.splice(qe,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Ie(this._manager,this._source),this._fullRequestReader}getRangeReader(ke,qe){const De=new Ve(this._manager,ke,qe);return De.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(De),De}cancelAllRequests(ke){var qe;(qe=this._fullRequestReader)==null||qe.cancel(ke);for(const De of this._rangeRequestReaders.slice(0))De.cancel(ke)}}t.PDFNetworkStream=Te;class Ie{constructor(ke,qe){this._manager=ke;const De={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=qe.url,this._fullRequestId=ke.requestFull(De),this._headersReceivedCapability=new r.PromiseCapability,this._disableRange=qe.disableRange||!1,this._contentLength=qe.length,this._rangeChunkSize=qe.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const ke=this._fullRequestId,qe=this._manager.getRequestXhr(ke),De=Ye=>qe.getResponseHeader(Ye),{allowRangeRequests:Oe,suggestedLength:Be}=(0,xe.validateRangeRequestCapabilities)({getResponseHeader:De,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});Oe&&(this._isRangeSupported=!0),this._contentLength=Be||this._contentLength,this._filename=(0,xe.extractFilenameFromHeader)(De),this._isRangeSupported&&this._manager.abortRequest(ke),this._headersReceivedCapability.resolve()}_onDone(ke){if(ke&&(this._requests.length>0?this._requests.shift().resolve({value:ke.chunk,done:!1}):this._cachedChunks.push(ke.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const qe of this._requests)qe.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(ke){this._storedError=(0,xe.createResponseStatusError)(ke,this._url),this._headersReceivedCapability.reject(this._storedError);for(const qe of this._requests)qe.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(ke){var qe;(qe=this.onProgress)==null||qe.call(this,{loaded:ke.loaded,total:ke.lengthComputable?ke.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const ke=new r.PromiseCapability;return this._requests.push(ke),ke.promise}cancel(ke){this._done=!0,this._headersReceivedCapability.reject(ke);for(const qe of this._requests)qe.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Ve{constructor(ke,qe,De){this._manager=ke;const Oe={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=ke.url,this._requestId=ke.requestRange(qe,De,Oe),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var ke;(ke=this.onClosed)==null||ke.call(this,this)}_onDone(ke){const qe=ke.chunk;this._requests.length>0?this._requests.shift().resolve({value:qe,done:!1}):this._queuedChunk=qe,this._done=!0;for(const De of this._requests)De.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(ke){this._storedError=(0,xe.createResponseStatusError)(ke,this._url);for(const qe of this._requests)qe.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(ke){var qe;this.isStreamingSupported||(qe=this.onProgress)==null||qe.call(this,{loaded:ke.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const qe=this._queuedChunk;return this._queuedChunk=null,{value:qe,done:!1}}if(this._done)return{value:void 0,done:!0};const ke=new r.PromiseCapability;return this._requests.push(ke),ke.promise}cancel(ke){this._done=!0;for(const qe of this._requests)qe.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var r=St(1),xe=St(22);function _e(Ve,He,ke){return{method:"GET",headers:Ve,signal:ke.signal,mode:"cors",credentials:He?"include":"same-origin",redirect:"follow"}}function Ee(Ve){const He=new Headers;for(const ke in Ve){const qe=Ve[ke];qe!==void 0&&He.append(ke,qe)}return He}function Pe(Ve){return Ve instanceof Uint8Array?Ve.buffer:Ve instanceof ArrayBuffer?Ve:((0,r.warn)(`getArrayBuffer - unexpected data format: ${Ve}`),new Uint8Array(Ve).buffer)}class Ce{constructor(He){this.source=He,this.isHttp=/^https?:/i.test(He.url),this.httpHeaders=this.isHttp&&He.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var He;return((He=this._fullRequestReader)==null?void 0:He._loaded)??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Te(this),this._fullRequestReader}getRangeReader(He,ke){if(ke<=this._progressiveDataLength)return null;const qe=new Ie(this,He,ke);return this._rangeRequestReaders.push(qe),qe}cancelAllRequests(He){var ke;(ke=this._fullRequestReader)==null||ke.cancel(He);for(const qe of this._rangeRequestReaders.slice(0))qe.cancel(He)}}t.PDFFetchStream=Ce;class Te{constructor(He){this._stream=He,this._reader=null,this._loaded=0,this._filename=null;const ke=He.source;this._withCredentials=ke.withCredentials||!1,this._contentLength=ke.length,this._headersCapability=new r.PromiseCapability,this._disableRange=ke.disableRange||!1,this._rangeChunkSize=ke.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!ke.disableStream,this._isRangeSupported=!ke.disableRange,this._headers=Ee(this._stream.httpHeaders);const qe=ke.url;fetch(qe,_e(this._headers,this._withCredentials,this._abortController)).then(De=>{if(!(0,xe.validateResponseStatus)(De.status))throw(0,xe.createResponseStatusError)(De.status,qe);this._reader=De.body.getReader(),this._headersCapability.resolve();const Oe=nn=>De.headers.get(nn),{allowRangeRequests:Be,suggestedLength:Ye}=(0,xe.validateRangeRequestCapabilities)({getResponseHeader:Oe,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Be,this._contentLength=Ye||this._contentLength,this._filename=(0,xe.extractFilenameFromHeader)(Oe),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var qe;await this._headersCapability.promise;const{value:He,done:ke}=await this._reader.read();return ke?{value:He,done:ke}:(this._loaded+=He.byteLength,(qe=this.onProgress)==null||qe.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Pe(He),done:!1})}cancel(He){var ke;(ke=this._reader)==null||ke.cancel(He),this._abortController.abort()}}class Ie{constructor(He,ke,qe){this._stream=He,this._reader=null,this._loaded=0;const De=He.source;this._withCredentials=De.withCredentials||!1,this._readCapability=new r.PromiseCapability,this._isStreamingSupported=!De.disableStream,this._abortController=new AbortController,this._headers=Ee(this._stream.httpHeaders),this._headers.append("Range",`bytes=${ke}-${qe-1}`);const Oe=De.url;fetch(Oe,_e(this._headers,this._withCredentials,this._abortController)).then(Be=>{if(!(0,xe.validateResponseStatus)(Be.status))throw(0,xe.createResponseStatusError)(Be.status,Oe);this._readCapability.resolve(),this._reader=Be.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var qe;await this._readCapability.promise;const{value:He,done:ke}=await this._reader.read();return ke?{value:He,done:ke}:(this._loaded+=He.byteLength,(qe=this.onProgress)==null||qe.call(this,{loaded:this._loaded}),{value:Pe(He),done:!1})}cancel(He){var ke;(ke=this._reader)==null||ke.cancel(He),this._abortController.abort()}}},(e,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=De,t.updateTextLayer=Oe;var r=St(1),xe=St(6);const _e=1e5,Ee=30,Pe=.8,Ce=new Map;function Te(Be,Ye){let nn;if(Ye&&r.FeatureTest.isOffscreenCanvasSupported)nn=new OffscreenCanvas(Be,Be).getContext("2d",{alpha:!1});else{const en=document.createElement("canvas");en.width=en.height=Be,nn=en.getContext("2d",{alpha:!1})}return nn}function Ie(Be,Ye){const nn=Ce.get(Be);if(nn)return nn;const en=Te(Ee,Ye);en.font=`${Ee}px ${Be}`;const Ue=en.measureText("");let Je=Ue.fontBoundingBoxAscent,Ge=Math.abs(Ue.fontBoundingBoxDescent);if(Je){const tn=Je/(Je+Ge);return Ce.set(Be,tn),en.canvas.width=en.canvas.height=0,tn}en.strokeStyle="red",en.clearRect(0,0,Ee,Ee),en.strokeText("g",0,0);let Me=en.getImageData(0,0,Ee,Ee).data;Ge=0;for(let tn=Me.length-1-3;tn>=0;tn-=4)if(Me[tn]>0){Ge=Math.ceil(tn/4/Ee);break}en.clearRect(0,0,Ee,Ee),en.strokeText("A",0,Ee),Me=en.getImageData(0,0,Ee,Ee).data,Je=0;for(let tn=0,dn=Me.length;tn<dn;tn+=4)if(Me[tn]>0){Je=Ee-Math.floor(tn/4/Ee);break}if(en.canvas.width=en.canvas.height=0,Je){const tn=Je/(Je+Ge);return Ce.set(Be,tn),tn}return Ce.set(Be,Pe),Pe}function Ve(Be,Ye,nn){const en=document.createElement("span"),Ue={angle:0,canvasWidth:0,hasText:Ye.str!=="",hasEOL:Ye.hasEOL,fontSize:0};Be._textDivs.push(en);const Je=r.Util.transform(Be._transform,Ye.transform);let Ge=Math.atan2(Je[1],Je[0]);const Me=nn[Ye.fontName];Me.vertical&&(Ge+=Math.PI/2);const tn=Math.hypot(Je[2],Je[3]),dn=tn*Ie(Me.fontFamily,Be._isOffscreenCanvasSupported);let Re,Qe;Ge===0?(Re=Je[4],Qe=Je[5]-dn):(Re=Je[4]+dn*Math.sin(Ge),Qe=Je[5]-dn*Math.cos(Ge));const cn="calc(var(--scale-factor)*",hn=en.style;Be._container===Be._rootContainer?(hn.left=`${(100*Re/Be._pageWidth).toFixed(2)}%`,hn.top=`${(100*Qe/Be._pageHeight).toFixed(2)}%`):(hn.left=`${cn}${Re.toFixed(2)}px)`,hn.top=`${cn}${Qe.toFixed(2)}px)`),hn.fontSize=`${cn}${tn.toFixed(2)}px)`,hn.fontFamily=Me.fontFamily,Ue.fontSize=tn,en.setAttribute("role","presentation"),en.textContent=Ye.str,en.dir=Ye.dir,Be._fontInspectorEnabled&&(en.dataset.fontName=Ye.fontName),Ge!==0&&(Ue.angle=Ge*(180/Math.PI));let Pn=!1;if(Ye.str.length>1)Pn=!0;else if(Ye.str!==" "&&Ye.transform[0]!==Ye.transform[3]){const kn=Math.abs(Ye.transform[0]),Dn=Math.abs(Ye.transform[3]);kn!==Dn&&Math.max(kn,Dn)/Math.min(kn,Dn)>1.5&&(Pn=!0)}Pn&&(Ue.canvasWidth=Me.vertical?Ye.height:Ye.width),Be._textDivProperties.set(en,Ue),Be._isReadableStream&&Be._layoutText(en)}function He(Be){const{div:Ye,scale:nn,properties:en,ctx:Ue,prevFontSize:Je,prevFontFamily:Ge}=Be,{style:Me}=Ye;let tn="";if(en.canvasWidth!==0&&en.hasText){const{fontFamily:dn}=Me,{canvasWidth:Re,fontSize:Qe}=en;(Je!==Qe||Ge!==dn)&&(Ue.font=`${Qe*nn}px ${dn}`,Be.prevFontSize=Qe,Be.prevFontFamily=dn);const{width:cn}=Ue.measureText(Ye.textContent);cn>0&&(tn=`scaleX(${Re*nn/cn})`)}en.angle!==0&&(tn=`rotate(${en.angle}deg) ${tn}`),tn.length>0&&(Me.transform=tn)}function ke(Be){if(Be._canceled)return;const Ye=Be._textDivs,nn=Be._capability;if(Ye.length>_e){nn.resolve();return}if(!Be._isReadableStream)for(const Ue of Ye)Be._layoutText(Ue);nn.resolve()}class qe{constructor({textContentSource:Ye,container:nn,viewport:en,textDivs:Ue,textDivProperties:Je,textContentItemsStr:Ge,isOffscreenCanvasSupported:Me}){var cn;this._textContentSource=Ye,this._isReadableStream=Ye instanceof ReadableStream,this._container=this._rootContainer=nn,this._textDivs=Ue||[],this._textContentItemsStr=Ge||[],this._isOffscreenCanvasSupported=Me,this._fontInspectorEnabled=!!((cn=globalThis.FontInspector)!=null&&cn.enabled),this._reader=null,this._textDivProperties=Je||new WeakMap,this._canceled=!1,this._capability=new r.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:en.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:Te(0,Me)};const{pageWidth:tn,pageHeight:dn,pageX:Re,pageY:Qe}=en.rawDims;this._transform=[1,0,0,-1,-Re,Qe+dn],this._pageWidth=tn,this._pageHeight=dn,(0,xe.setLayerDimensions)(nn,en),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new r.AbortException("TextLayer task cancelled."))}_processItems(Ye,nn){for(const en of Ye){if(en.str===void 0){if(en.type==="beginMarkedContentProps"||en.type==="beginMarkedContent"){const Ue=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),en.id!==null&&this._container.setAttribute("id",`${en.id}`),Ue.append(this._container)}else en.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(en.str),Ve(this,en,nn)}}_layoutText(Ye){const nn=this._layoutTextParams.properties=this._textDivProperties.get(Ye);if(this._layoutTextParams.div=Ye,He(this._layoutTextParams),nn.hasText&&this._container.append(Ye),nn.hasEOL){const en=document.createElement("br");en.setAttribute("role","presentation"),this._container.append(en)}}_render(){const Ye=new r.PromiseCapability;let nn=Object.create(null);if(this._isReadableStream){const en=()=>{this._reader.read().then(({value:Ue,done:Je})=>{if(Je){Ye.resolve();return}Object.assign(nn,Ue.styles),this._processItems(Ue.items,nn),en()},Ye.reject)};this._reader=this._textContentSource.getReader(),en()}else if(this._textContentSource){const{items:en,styles:Ue}=this._textContentSource;this._processItems(en,Ue),Ye.resolve()}else throw new Error('No "textContentSource" parameter specified.');Ye.promise.then(()=>{nn=null,ke(this)},this._capability.reject)}}t.TextLayerRenderTask=qe;function De(Be){!Be.textContentSource&&(Be.textContent||Be.textContentStream)&&((0,xe.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),Be.textContentSource=Be.textContent||Be.textContentStream);const{container:Ye,viewport:nn}=Be,en=getComputedStyle(Ye),Ue=en.getPropertyValue("visibility"),Je=parseFloat(en.getPropertyValue("--scale-factor"));Ue==="visible"&&(!Je||Math.abs(Je-nn.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const Ge=new qe(Be);return Ge._render(),Ge}function Oe({container:Be,viewport:Ye,textDivs:nn,textDivProperties:en,isOffscreenCanvasSupported:Ue,mustRotate:Je=!0,mustRescale:Ge=!0}){if(Je&&(0,xe.setLayerDimensions)(Be,{rotation:Ye.rotation}),Ge){const Me=Te(0,Ue),dn={prevFontSize:null,prevFontFamily:null,div:null,scale:Ye.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:Me};for(const Re of nn)dn.properties=en.get(Re),dn.div=Re,He(dn)}}},(e,t,St)=>{var Te,Ie,Ve,He,ke,qe,De,Oe,Be,Wl,nn,Gc,Ue,Vl,Ge,Gl;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var r=St(1),xe=St(5),_e=St(28),Ee=St(29),Pe=St(6);const tn=class tn{constructor(Re){ti(this,Be);ti(this,nn);ti(this,Ue);ti(this,Ge);ti(this,Te,void 0);ti(this,Ie,!1);ti(this,Ve,this.pointerup.bind(this));ti(this,He,this.pointerdown.bind(this));ti(this,ke,new Map);ti(this,qe,!1);ti(this,De,!1);ti(this,Oe,void 0);tn._initialized||(tn._initialized=!0,_e.FreeTextEditor.initialize(Re.l10n),Ee.InkEditor.initialize(Re.l10n)),Re.uiManager.registerEditorTypes([_e.FreeTextEditor,Ee.InkEditor]),pi(this,Oe,Re.uiManager),this.pageIndex=Re.pageIndex,this.div=Re.div,pi(this,Te,Re.accessibilityManager),pn(this,Oe).addLayer(this)}get isEmpty(){return pn(this,ke).size===0}updateToolbar(Re){pn(this,Oe).updateToolbar(Re)}updateMode(Re=pn(this,Oe).getMode()){ri(this,Ge,Gl).call(this),Re===r.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),pn(this,Oe).unselectAll(),Re!==r.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",Re===r.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",Re===r.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(Re){if(!Re&&pn(this,Oe).getMode()!==r.AnnotationEditorType.INK)return;if(!Re){for(const cn of pn(this,ke).values())if(cn.isEmpty()){cn.setInBackground();return}}ri(this,Ue,Vl).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(Re){pn(this,Oe).setEditingState(Re)}addCommands(Re){pn(this,Oe).addCommands(Re)}enable(){this.div.style.pointerEvents="auto";for(const Re of pn(this,ke).values())Re.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const Re of pn(this,ke).values())Re.disableEditing();ri(this,Ge,Gl).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(Re){pn(this,Oe).getActive()!==Re&&pn(this,Oe).setActiveEditor(Re)}enableClick(){this.div.addEventListener("pointerdown",pn(this,He)),this.div.addEventListener("pointerup",pn(this,Ve))}disableClick(){this.div.removeEventListener("pointerdown",pn(this,He)),this.div.removeEventListener("pointerup",pn(this,Ve))}attach(Re){pn(this,ke).set(Re.id,Re)}detach(Re){var Qe;pn(this,ke).delete(Re.id),(Qe=pn(this,Te))==null||Qe.removePointerInTextLayer(Re.contentDiv)}remove(Re){pn(this,Oe).removeEditor(Re),this.detach(Re),Re.div.style.display="none",setTimeout(()=>{Re.div.style.display="",Re.div.remove(),Re.isAttachedToDOM=!1,document.activeElement===document.body&&pn(this,Oe).focusMainContainer()},0),pn(this,De)||this.addInkEditorIfNeeded(!1)}add(Re){if(ri(this,Be,Wl).call(this,Re),pn(this,Oe).addEditor(Re),this.attach(Re),!Re.isAttachedToDOM){const Qe=Re.render();this.div.append(Qe),Re.isAttachedToDOM=!0}this.moveEditorInDOM(Re),Re.onceAdded(),pn(this,Oe).addToAnnotationStorage(Re)}moveEditorInDOM(Re){var Qe;(Qe=pn(this,Te))==null||Qe.moveElementInDOM(this.div,Re.div,Re.contentDiv,!0)}addOrRebuild(Re){Re.needsToBeRebuilt()?Re.rebuild():this.add(Re)}addANewEditor(Re){const Qe=()=>{this.addOrRebuild(Re)},cn=()=>{Re.remove()};this.addCommands({cmd:Qe,undo:cn,mustExec:!0})}addUndoableEditor(Re){const Qe=()=>{this.addOrRebuild(Re)},cn=()=>{Re.remove()};this.addCommands({cmd:Qe,undo:cn,mustExec:!1})}getNextId(){return pn(this,Oe).getId()}deserialize(Re){switch(Re.annotationType){case r.AnnotationEditorType.FREETEXT:return _e.FreeTextEditor.deserialize(Re,this,pn(this,Oe));case r.AnnotationEditorType.INK:return Ee.InkEditor.deserialize(Re,this,pn(this,Oe))}return null}setSelected(Re){pn(this,Oe).setSelected(Re)}toggleSelected(Re){pn(this,Oe).toggleSelected(Re)}isSelected(Re){return pn(this,Oe).isSelected(Re)}unselect(Re){pn(this,Oe).unselect(Re)}pointerup(Re){const{isMac:Qe}=r.FeatureTest.platform;if(!(Re.button!==0||Re.ctrlKey&&Qe)&&Re.target===this.div&&pn(this,qe)){if(pi(this,qe,!1),!pn(this,Ie)){pi(this,Ie,!0);return}ri(this,Ue,Vl).call(this,Re)}}pointerdown(Re){const{isMac:Qe}=r.FeatureTest.platform;if(Re.button!==0||Re.ctrlKey&&Qe||Re.target!==this.div)return;pi(this,qe,!0);const cn=pn(this,Oe).getActive();pi(this,Ie,!cn||cn.isEmpty())}drop(Re){const Qe=Re.dataTransfer.getData("text/plain"),cn=pn(this,Oe).getEditor(Qe);if(!cn)return;Re.preventDefault(),Re.dataTransfer.dropEffect="move",ri(this,Be,Wl).call(this,cn);const hn=this.div.getBoundingClientRect(),Pn=Re.clientX-hn.x,kn=Re.clientY-hn.y;cn.translate(Pn-cn.startX,kn-cn.startY),this.moveEditorInDOM(cn),cn.div.focus()}dragover(Re){Re.preventDefault()}destroy(){var Re,Qe;((Re=pn(this,Oe).getActive())==null?void 0:Re.parent)===this&&pn(this,Oe).setActiveEditor(null);for(const cn of pn(this,ke).values())(Qe=pn(this,Te))==null||Qe.removePointerInTextLayer(cn.contentDiv),cn.setParent(null),cn.isAttachedToDOM=!1,cn.div.remove();this.div=null,pn(this,ke).clear(),pn(this,Oe).removeLayer(this)}render({viewport:Re}){this.viewport=Re,(0,Pe.setLayerDimensions)(this.div,Re),(0,xe.bindEvents)(this,this.div,["dragover","drop"]);for(const Qe of pn(this,Oe).getEditors(this.pageIndex))this.add(Qe);this.updateMode()}update({viewport:Re}){pn(this,Oe).commitOrRemove(),this.viewport=Re,(0,Pe.setLayerDimensions)(this.div,{rotation:Re.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:Re,pageHeight:Qe}=this.viewport.rawDims;return[Re,Qe]}};Te=new WeakMap,Ie=new WeakMap,Ve=new WeakMap,He=new WeakMap,ke=new WeakMap,qe=new WeakMap,De=new WeakMap,Oe=new WeakMap,Be=new WeakSet,Wl=function(Re){var Qe;Re.parent!==this&&(this.attach(Re),(Qe=Re.parent)==null||Qe.detach(Re),Re.setParent(this),Re.div&&Re.isAttachedToDOM&&(Re.div.remove(),this.div.append(Re.div)))},nn=new WeakSet,Gc=function(Re){switch(pn(this,Oe).getMode()){case r.AnnotationEditorType.FREETEXT:return new _e.FreeTextEditor(Re);case r.AnnotationEditorType.INK:return new Ee.InkEditor(Re)}return null},Ue=new WeakSet,Vl=function(Re){const Qe=this.getNextId(),cn=ri(this,nn,Gc).call(this,{parent:this,id:Qe,x:Re.offsetX,y:Re.offsetY,uiManager:pn(this,Oe)});return cn&&this.add(cn),cn},Ge=new WeakSet,Gl=function(){pi(this,De,!0);for(const Re of pn(this,ke).values())Re.isEmpty()&&Re.remove();pi(this,De,!1)},ir(tn,"_initialized",!1);let Ce=tn;t.AnnotationEditorLayer=Ce},(e,t,St)=>{var Pe,Ce,Te,Ie,Ve,He,ke,qe,De,Oe,$c,Ye,Xc,en,Yc,Je,$l;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var r=St(1),xe=St(5),_e=St(4);const Me=class Me extends _e.AnnotationEditor{constructor(Re){super({...Re,name:"freeTextEditor"});ti(this,Oe);ti(this,Ye);ti(this,en);ti(this,Je);ti(this,Pe,this.editorDivBlur.bind(this));ti(this,Ce,this.editorDivFocus.bind(this));ti(this,Te,this.editorDivInput.bind(this));ti(this,Ie,this.editorDivKeydown.bind(this));ti(this,Ve,void 0);ti(this,He,"");ti(this,ke,`${this.id}-editor`);ti(this,qe,!1);ti(this,De,void 0);pi(this,Ve,Re.color||Me._defaultColor||_e.AnnotationEditor._defaultLineColor),pi(this,De,Re.fontSize||Me._defaultFontSize)}static initialize(Re){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(cn=>[cn,Re.get(cn)]));const Qe=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Qe.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Re,Qe){switch(Re){case r.AnnotationEditorParamsType.FREETEXT_SIZE:Me._defaultFontSize=Qe;break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:Me._defaultColor=Qe;break}}updateParams(Re,Qe){switch(Re){case r.AnnotationEditorParamsType.FREETEXT_SIZE:ri(this,Oe,$c).call(this,Qe);break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:ri(this,Ye,Xc).call(this,Qe);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,Me._defaultFontSize],[r.AnnotationEditorParamsType.FREETEXT_COLOR,Me._defaultColor||_e.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,pn(this,De)],[r.AnnotationEditorParamsType.FREETEXT_COLOR,pn(this,Ve)]]}getInitialTranslation(){const Re=this.parentScale;return[-Me._internalPadding*Re,-(Me._internalPadding+pn(this,De))*Re]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(r.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",pn(this,Ie)),this.editorDiv.addEventListener("focus",pn(this,Ce)),this.editorDiv.addEventListener("blur",pn(this,Pe)),this.editorDiv.addEventListener("input",pn(this,Te)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",pn(this,ke)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",pn(this,Ie)),this.editorDiv.removeEventListener("focus",pn(this,Ce)),this.editorDiv.removeEventListener("blur",pn(this,Pe)),this.editorDiv.removeEventListener("input",pn(this,Te)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Re){super.focusin(Re),Re.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),pn(this,qe)||(pi(this,qe,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),pi(this,He,ri(this,en,Yc).call(this).trimEnd()),ri(this,Je,$l).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(Re){this.enableEditMode(),this.editorDiv.focus()}keydown(Re){Re.target===this.div&&Re.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(Re){Me._keyboardManager.exec(this,Re)}editorDivFocus(Re){this.isEditing=!0}editorDivBlur(Re){this.isEditing=!1}editorDivInput(Re){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Re,Qe;this.width&&(Re=this.x,Qe=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",pn(this,ke)),this.enableEditing(),Me._l10nPromise.get("editor_free_text2_aria_label").then(hn=>{var Pn;return(Pn=this.editorDiv)==null?void 0:Pn.setAttribute("aria-label",hn)}),Me._l10nPromise.get("free_text2_default_content").then(hn=>{var Pn;return(Pn=this.editorDiv)==null?void 0:Pn.setAttribute("default-content",hn)}),this.editorDiv.contentEditable=!0;const{style:cn}=this.editorDiv;if(cn.fontSize=`calc(${pn(this,De)}px * var(--scale-factor))`,cn.color=pn(this,Ve),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,xe.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[hn,Pn]=this.parentDimensions;this.setAt(Re*hn,Qe*Pn,this.width*hn,this.height*Pn);for(const kn of pn(this,He).split(`
`)){const Dn=document.createElement("div");Dn.append(kn?document.createTextNode(kn):document.createElement("br")),this.editorDiv.append(Dn)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Re,Qe,cn){const hn=super.deserialize(Re,Qe,cn);return pi(hn,De,Re.fontSize),pi(hn,Ve,r.Util.makeHexColor(...Re.color)),pi(hn,He,Re.value),hn}serialize(){if(this.isEmpty())return null;const Re=Me._internalPadding*this.parentScale,Qe=this.getRect(Re,Re),cn=_e.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:pn(this,Ve));return{annotationType:r.AnnotationEditorType.FREETEXT,color:cn,fontSize:pn(this,De),value:pn(this,He),pageIndex:this.pageIndex,rect:Qe,rotation:this.rotation}}};Pe=new WeakMap,Ce=new WeakMap,Te=new WeakMap,Ie=new WeakMap,Ve=new WeakMap,He=new WeakMap,ke=new WeakMap,qe=new WeakMap,De=new WeakMap,Oe=new WeakSet,$c=function(Re){const Qe=hn=>{this.editorDiv.style.fontSize=`calc(${hn}px * var(--scale-factor))`,this.translate(0,-(hn-pn(this,De))*this.parentScale),pi(this,De,hn),ri(this,Je,$l).call(this)},cn=pn(this,De);this.addCommands({cmd:()=>{Qe(Re)},undo:()=>{Qe(cn)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Ye=new WeakSet,Xc=function(Re){const Qe=pn(this,Ve);this.addCommands({cmd:()=>{pi(this,Ve,this.editorDiv.style.color=Re)},undo:()=>{pi(this,Ve,this.editorDiv.style.color=Qe)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},en=new WeakSet,Yc=function(){const Re=this.editorDiv.getElementsByTagName("div");if(Re.length===0)return this.editorDiv.innerText;const Qe=[];for(const cn of Re)Qe.push(cn.innerText.replace(/\r\n?|\n/,""));return Qe.join(`
`)},Je=new WeakSet,$l=function(){const[Re,Qe]=this.parentDimensions;let cn;if(this.isAttachedToDOM)cn=this.div.getBoundingClientRect();else{const{currentLayer:hn,div:Pn}=this,kn=Pn.style.display;Pn.style.display="hidden",hn.div.append(this.div),cn=Pn.getBoundingClientRect(),Pn.remove(),Pn.style.display=kn}this.width=cn.width/Re,this.height=cn.height/Qe},ir(Me,"_freeTextDefaultContent",""),ir(Me,"_l10nPromise"),ir(Me,"_internalPadding",0),ir(Me,"_defaultColor",null),ir(Me,"_defaultFontSize",10),ir(Me,"_keyboardManager",new xe.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Me.prototype.commitOrRemove]])),ir(Me,"_type","freetext");let Ee=Me;t.FreeTextEditor=Ee},(e,t,St)=>{var Te,Ie,Ve,He,ke,qe,De,Oe,Be,Ye,nn,en,Ue,Je,Ge,Kc,tn,Jc,Re,Qc,cn,Zc,Pn,Xl,Dn,th,jn,eh,ii,nh,_n,is,ze,Yl,rn,qo,fn,Uo,wn,ga,Sn,Kl,$e,zo,yn,Jl,Ln,ih,On,rh,Gn,sh,Yn,Ql,si,Ho,li,ma,Mn,Zl;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0,Object.defineProperty(t,"fitCurve",{enumerable:!0,get:function(){return _e.fitCurve}});var r=St(1),xe=St(4),_e=St(30),Ee=St(5);const Pe=16,fi=class fi extends xe.AnnotationEditor{constructor(Cn){super({...Cn,name:"inkEditor"});ti(this,Ge);ti(this,tn);ti(this,Re);ti(this,cn);ti(this,Pn);ti(this,Dn);ti(this,jn);ti(this,ii);ti(this,_n);ti(this,ze);ti(this,rn);ti(this,fn);ti(this,wn);ti(this,Sn);ti(this,$e);ti(this,Ln);ti(this,On);ti(this,Gn);ti(this,Yn);ti(this,si);ti(this,li);ti(this,Mn);ti(this,Te,0);ti(this,Ie,0);ti(this,Ve,0);ti(this,He,this.canvasPointermove.bind(this));ti(this,ke,this.canvasPointerleave.bind(this));ti(this,qe,this.canvasPointerup.bind(this));ti(this,De,this.canvasPointerdown.bind(this));ti(this,Oe,!1);ti(this,Be,!1);ti(this,Ye,null);ti(this,nn,null);ti(this,en,0);ti(this,Ue,0);ti(this,Je,null);this.color=Cn.color||null,this.thickness=Cn.thickness||null,this.opacity=Cn.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(Cn){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(Tn=>[Tn,Cn.get(Tn)]))}static updateDefaultParams(Cn,Tn){switch(Cn){case r.AnnotationEditorParamsType.INK_THICKNESS:fi._defaultThickness=Tn;break;case r.AnnotationEditorParamsType.INK_COLOR:fi._defaultColor=Tn;break;case r.AnnotationEditorParamsType.INK_OPACITY:fi._defaultOpacity=Tn/100;break}}updateParams(Cn,Tn){switch(Cn){case r.AnnotationEditorParamsType.INK_THICKNESS:ri(this,Ge,Kc).call(this,Tn);break;case r.AnnotationEditorParamsType.INK_COLOR:ri(this,tn,Jc).call(this,Tn);break;case r.AnnotationEditorParamsType.INK_OPACITY:ri(this,Re,Qc).call(this,Tn);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,fi._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,fi._defaultColor||xe.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(fi._defaultOpacity*100)]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||fi._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,this.color||fi._defaultColor||xe.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??fi._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(ri(this,rn,qo).call(this),ri(this,fn,Uo).call(this)),this.isAttachedToDOM||(this.parent.add(this),ri(this,wn,ga).call(this)),ri(this,li,ma).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,pn(this,nn).disconnect(),pi(this,nn,null),super.remove())}setParent(Cn){!this.parent&&Cn?this._uiManager.removeShouldRescale(this):this.parent&&Cn===null&&this._uiManager.addShouldRescale(this),super.setParent(Cn)}onScaleChanging(){const[Cn,Tn]=this.parentDimensions,Jn=this.width*Cn,gi=this.height*Tn;this.setDimensions(Jn,gi)}enableEditMode(){pn(this,Oe)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",pn(this,De)),this.canvas.addEventListener("pointerup",pn(this,qe)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",pn(this,De)),this.canvas.removeEventListener("pointerup",pn(this,qe)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){pn(this,Oe)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),pi(this,Oe,!0),this.div.classList.add("disabled"),ri(this,li,ma).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(Cn){super.focusin(Cn),this.enableEditMode()}canvasPointerdown(Cn){Cn.button!==0||!this.isInEditMode()||pn(this,Oe)||(this.setInForeground(),Cn.type!=="mouse"&&this.div.focus(),Cn.stopPropagation(),this.canvas.addEventListener("pointerleave",pn(this,ke)),this.canvas.addEventListener("pointermove",pn(this,He)),ri(this,Dn,th).call(this,Cn.offsetX,Cn.offsetY))}canvasPointermove(Cn){Cn.stopPropagation(),ri(this,jn,eh).call(this,Cn.offsetX,Cn.offsetY)}canvasPointerup(Cn){Cn.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(Cn.stopPropagation(),ri(this,ze,Yl).call(this,Cn),this.setInBackground())}canvasPointerleave(Cn){ri(this,ze,Yl).call(this,Cn),this.setInBackground()}render(){if(this.div)return this.div;let Cn,Tn;this.width&&(Cn=this.x,Tn=this.y),super.render(),fi._l10nPromise.get("editor_ink2_aria_label").then(Fi=>{var Pi;return(Pi=this.div)==null?void 0:Pi.setAttribute("aria-label",Fi)});const[Jn,gi,Si,Ni]=ri(this,cn,Zc).call(this);if(this.setAt(Jn,gi,0,0),this.setDims(Si,Ni),ri(this,rn,qo).call(this),this.width){const[Fi,Pi]=this.parentDimensions;this.setAt(Cn*Fi,Tn*Pi,this.width*Fi,this.height*Pi),pi(this,Be,!0),ri(this,wn,ga).call(this),this.setDims(this.width*Fi,this.height*Pi),ri(this,_n,is).call(this),ri(this,Mn,Zl).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ri(this,fn,Uo).call(this),this.div}setDimensions(Cn,Tn){const Jn=Math.round(Cn),gi=Math.round(Tn);if(pn(this,en)===Jn&&pn(this,Ue)===gi)return;pi(this,en,Jn),pi(this,Ue,gi),this.canvas.style.visibility="hidden",pn(this,Te)&&Math.abs(pn(this,Te)-Cn/Tn)>.01&&(Tn=Math.ceil(Cn/pn(this,Te)),this.setDims(Cn,Tn));const[Si,Ni]=this.parentDimensions;this.width=Cn/Si,this.height=Tn/Ni,pn(this,Oe)&&ri(this,Sn,Kl).call(this,Cn,Tn),ri(this,wn,ga).call(this),ri(this,_n,is).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(Cn,Tn,Jn){var Ii,zi;const gi=super.deserialize(Cn,Tn,Jn);gi.thickness=Cn.thickness,gi.color=r.Util.makeHexColor(...Cn.color),gi.opacity=Cn.opacity;const[Si,Ni]=gi.pageDimensions,Fi=gi.width*Si,Pi=gi.height*Ni,wi=gi.parentScale,xi=Cn.thickness/2;pi(gi,Te,Fi/Pi),pi(gi,Oe,!0),pi(gi,en,Math.round(Fi)),pi(gi,Ue,Math.round(Pi));for(const{bezier:Ti}of Cn.paths){const Li=[];gi.paths.push(Li);let Ji=wi*(Ti[0]-xi),Zi=wi*(Pi-Ti[1]-xi);for(let qi=2,Ui=Ti.length;qi<Ui;qi+=6){const rr=wi*(Ti[qi]-xi),wr=wi*(Pi-Ti[qi+1]-xi),_r=wi*(Ti[qi+2]-xi),vr=wi*(Pi-Ti[qi+3]-xi),Sr=wi*(Ti[qi+4]-xi),Er=wi*(Pi-Ti[qi+5]-xi);Li.push([[Ji,Zi],[rr,wr],[_r,vr],[Sr,Er]]),Ji=Sr,Zi=Er}const tr=ri(this,yn,Jl).call(this,Li);gi.bezierPath2D.push(tr)}const $i=ri(Ii=gi,Yn,Ql).call(Ii);return pi(gi,Ve,Math.max(Pe,$i[2]-$i[0])),pi(gi,Ie,Math.max(Pe,$i[3]-$i[1])),ri(zi=gi,Sn,Kl).call(zi,Fi,Pi),gi}serialize(){if(this.isEmpty())return null;const Cn=this.getRect(0,0),Tn=this.rotation%180===0?Cn[3]-Cn[1]:Cn[2]-Cn[0],Jn=xe.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:r.AnnotationEditorType.INK,color:Jn,thickness:this.thickness,opacity:this.opacity,paths:ri(this,Ln,ih).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,Tn),pageIndex:this.pageIndex,rect:Cn,rotation:this.rotation}}};Te=new WeakMap,Ie=new WeakMap,Ve=new WeakMap,He=new WeakMap,ke=new WeakMap,qe=new WeakMap,De=new WeakMap,Oe=new WeakMap,Be=new WeakMap,Ye=new WeakMap,nn=new WeakMap,en=new WeakMap,Ue=new WeakMap,Je=new WeakMap,Ge=new WeakSet,Kc=function(Cn){const Tn=this.thickness;this.addCommands({cmd:()=>{this.thickness=Cn,ri(this,li,ma).call(this)},undo:()=>{this.thickness=Tn,ri(this,li,ma).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},tn=new WeakSet,Jc=function(Cn){const Tn=this.color;this.addCommands({cmd:()=>{this.color=Cn,ri(this,_n,is).call(this)},undo:()=>{this.color=Tn,ri(this,_n,is).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Re=new WeakSet,Qc=function(Cn){Cn/=100;const Tn=this.opacity;this.addCommands({cmd:()=>{this.opacity=Cn,ri(this,_n,is).call(this)},undo:()=>{this.opacity=Tn,ri(this,_n,is).call(this)},mustExec:!0,type:r.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},cn=new WeakSet,Zc=function(){const{parentRotation:Cn,parentDimensions:[Tn,Jn]}=this;switch(Cn){case 90:return[0,Jn,Jn,Tn];case 180:return[Tn,Jn,Tn,Jn];case 270:return[Tn,0,Jn,Tn];default:return[0,0,Tn,Jn]}},Pn=new WeakSet,Xl=function(){const{ctx:Cn,color:Tn,opacity:Jn,thickness:gi,parentScale:Si,scaleFactor:Ni}=this;Cn.lineWidth=gi*Si/Ni,Cn.lineCap="round",Cn.lineJoin="round",Cn.miterLimit=10,Cn.strokeStyle=`${Tn}${(0,Ee.opacityToHex)(Jn)}`},Dn=new WeakSet,th=function(Cn,Tn){this.isEditing=!0,pn(this,Be)||(pi(this,Be,!0),ri(this,wn,ga).call(this),this.thickness||(this.thickness=fi._defaultThickness),this.color||(this.color=fi._defaultColor||xe.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=fi._defaultOpacity)),this.currentPath.push([Cn,Tn]),pi(this,Ye,null),ri(this,Pn,Xl).call(this),this.ctx.beginPath(),this.ctx.moveTo(Cn,Tn),pi(this,Je,()=>{pn(this,Je)&&(pn(this,Ye)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):ri(this,_n,is).call(this),this.ctx.lineTo(...pn(this,Ye)),pi(this,Ye,null),this.ctx.stroke()),window.requestAnimationFrame(pn(this,Je)))}),window.requestAnimationFrame(pn(this,Je))},jn=new WeakSet,eh=function(Cn,Tn){const[Jn,gi]=this.currentPath.at(-1);Cn===Jn&&Tn===gi||(this.currentPath.push([Cn,Tn]),pi(this,Ye,[Cn,Tn]))},ii=new WeakSet,nh=function(Cn,Tn){var wi;this.ctx.closePath(),pi(this,Je,null),Cn=Math.min(Math.max(Cn,0),this.canvas.width),Tn=Math.min(Math.max(Tn,0),this.canvas.height);const[Jn,gi]=this.currentPath.at(-1);(Cn!==Jn||Tn!==gi)&&this.currentPath.push([Cn,Tn]);let Si;if(this.currentPath.length!==1)Si=(0,_e.fitCurve)(this.currentPath,30,null);else{const xi=[Cn,Tn];Si=[[xi,xi.slice(),xi.slice(),xi]]}const Ni=ri(wi=fi,yn,Jl).call(wi,Si);this.currentPath.length=0;const Fi=()=>{this.paths.push(Si),this.bezierPath2D.push(Ni),this.rebuild()},Pi=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ri(this,rn,qo).call(this),ri(this,fn,Uo).call(this)),ri(this,li,ma).call(this))};this.addCommands({cmd:Fi,undo:Pi,mustExec:!0})},_n=new WeakSet,is=function(){if(this.isEmpty()){ri(this,$e,zo).call(this);return}ri(this,Pn,Xl).call(this);const{canvas:Cn,ctx:Tn}=this;Tn.setTransform(1,0,0,1,0,0),Tn.clearRect(0,0,Cn.width,Cn.height),ri(this,$e,zo).call(this);for(const Jn of this.bezierPath2D)Tn.stroke(Jn)},ze=new WeakSet,Yl=function(Cn){ri(this,ii,nh).call(this,Cn.offsetX,Cn.offsetY),this.canvas.removeEventListener("pointerleave",pn(this,ke)),this.canvas.removeEventListener("pointermove",pn(this,He)),this.addToAnnotationStorage()},rn=new WeakSet,qo=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",fi._l10nPromise.get("editor_ink_canvas_aria_label").then(Cn=>{var Tn;return(Tn=this.canvas)==null?void 0:Tn.setAttribute("aria-label",Cn)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},fn=new WeakSet,Uo=function(){pi(this,nn,new ResizeObserver(Cn=>{const Tn=Cn[0].contentRect;Tn.width&&Tn.height&&this.setDimensions(Tn.width,Tn.height)})),pn(this,nn).observe(this.div)},wn=new WeakSet,ga=function(){if(!pn(this,Be))return;const[Cn,Tn]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Cn),this.canvas.height=Math.ceil(this.height*Tn),ri(this,$e,zo).call(this)},Sn=new WeakSet,Kl=function(Cn,Tn){const Jn=ri(this,si,Ho).call(this),gi=(Cn-Jn)/pn(this,Ve),Si=(Tn-Jn)/pn(this,Ie);this.scaleFactor=Math.min(gi,Si)},$e=new WeakSet,zo=function(){const Cn=ri(this,si,Ho).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Cn,this.translationY*this.scaleFactor+Cn)},yn=new WeakSet,Jl=function(Cn){const Tn=new Path2D;for(let Jn=0,gi=Cn.length;Jn<gi;Jn++){const[Si,Ni,Fi,Pi]=Cn[Jn];Jn===0&&Tn.moveTo(...Si),Tn.bezierCurveTo(Ni[0],Ni[1],Fi[0],Fi[1],Pi[0],Pi[1])}return Tn},Ln=new WeakSet,ih=function(Cn,Tn,Jn,gi){const Ni=[],Fi=this.thickness/2;let Pi,wi;for(const xi of this.paths){Pi=[],wi=[];for(let $i=0,Ii=xi.length;$i<Ii;$i++){const[zi,Ti,Li,Ji]=xi[$i],Zi=Cn*(zi[0]+Tn)+Fi,tr=gi-Cn*(zi[1]+Jn)-Fi,qi=Cn*(Ti[0]+Tn)+Fi,Ui=gi-Cn*(Ti[1]+Jn)-Fi,rr=Cn*(Li[0]+Tn)+Fi,wr=gi-Cn*(Li[1]+Jn)-Fi,_r=Cn*(Ji[0]+Tn)+Fi,vr=gi-Cn*(Ji[1]+Jn)-Fi;$i===0&&(Pi.push(Zi,tr),wi.push(Zi,tr)),Pi.push(qi,Ui,rr,wr,_r,vr),ri(this,On,rh).call(this,Zi,tr,qi,Ui,rr,wr,_r,vr,4,wi)}Ni.push({bezier:Pi,points:wi})}return Ni},On=new WeakSet,rh=function(Cn,Tn,Jn,gi,Si,Ni,Fi,Pi,wi,xi){if(ri(this,Gn,sh).call(this,Cn,Tn,Jn,gi,Si,Ni,Fi,Pi)){xi.push(Fi,Pi);return}for(let $i=1;$i<wi-1;$i++){const Ii=$i/wi,zi=1-Ii;let Ti=Ii*Cn+zi*Jn,Li=Ii*Tn+zi*gi,Ji=Ii*Jn+zi*Si,Zi=Ii*gi+zi*Ni;const tr=Ii*Si+zi*Fi,qi=Ii*Ni+zi*Pi;Ti=Ii*Ti+zi*Ji,Li=Ii*Li+zi*Zi,Ji=Ii*Ji+zi*tr,Zi=Ii*Zi+zi*qi,Ti=Ii*Ti+zi*Ji,Li=Ii*Li+zi*Zi,xi.push(Ti,Li)}xi.push(Fi,Pi)},Gn=new WeakSet,sh=function(Cn,Tn,Jn,gi,Si,Ni,Fi,Pi){const xi=(3*Jn-2*Cn-Fi)**2,$i=(3*gi-2*Tn-Pi)**2,Ii=(3*Si-Cn-2*Fi)**2,zi=(3*Ni-Tn-2*Pi)**2;return Math.max(xi,Ii)+Math.max($i,zi)<=10},Yn=new WeakSet,Ql=function(){let Cn=1/0,Tn=-1/0,Jn=1/0,gi=-1/0;for(const Si of this.paths)for(const[Ni,Fi,Pi,wi]of Si){const xi=r.Util.bezierBoundingBox(...Ni,...Fi,...Pi,...wi);Cn=Math.min(Cn,xi[0]),Jn=Math.min(Jn,xi[1]),Tn=Math.max(Tn,xi[2]),gi=Math.max(gi,xi[3])}return[Cn,Jn,Tn,gi]},si=new WeakSet,Ho=function(){return pn(this,Oe)?Math.ceil(this.thickness*this.parentScale):0},li=new WeakSet,ma=function(Cn=!1){if(this.isEmpty())return;if(!pn(this,Oe)){ri(this,_n,is).call(this);return}const Tn=ri(this,Yn,Ql).call(this),Jn=ri(this,si,Ho).call(this);pi(this,Ve,Math.max(Pe,Tn[2]-Tn[0])),pi(this,Ie,Math.max(Pe,Tn[3]-Tn[1]));const gi=Math.ceil(Jn+pn(this,Ve)*this.scaleFactor),Si=Math.ceil(Jn+pn(this,Ie)*this.scaleFactor),[Ni,Fi]=this.parentDimensions;this.width=gi/Ni,this.height=Si/Fi,pi(this,Te,gi/Si),ri(this,Mn,Zl).call(this);const Pi=this.translationX,wi=this.translationY;this.translationX=-Tn[0],this.translationY=-Tn[1],ri(this,wn,ga).call(this),ri(this,_n,is).call(this),pi(this,en,gi),pi(this,Ue,Si),this.setDims(gi,Si);const xi=Cn?Jn/this.scaleFactor/2:0;this.translate(Pi-this.translationX-xi,wi-this.translationY-xi)},Mn=new WeakSet,Zl=function(){const{style:Cn}=this.div;pn(this,Te)>=1?(Cn.minHeight=`${Pe}px`,Cn.minWidth=`${Math.round(pn(this,Te)*Pe)}px`):(Cn.minWidth=`${Pe}px`,Cn.minHeight=`${Math.round(Pe/pn(this,Te))}px`)},ti(fi,yn),ir(fi,"_defaultColor",null),ir(fi,"_defaultOpacity",1),ir(fi,"_defaultThickness",1),ir(fi,"_l10nPromise"),ir(fi,"_type","ink");let Ce=fi;t.InkEditor=Ce},(e,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fitCurve=void 0;const r=St(31);t.fitCurve=r},e=>{function t(qe,De,Oe){if(!Array.isArray(qe))throw new TypeError("First argument should be an array");if(qe.forEach(en=>{if(!Array.isArray(en)||en.some(Ue=>typeof Ue!="number")||en.length!==qe[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),qe=qe.filter((en,Ue)=>Ue===0||!en.every((Je,Ge)=>Je===qe[Ue-1][Ge])),qe.length<2)return[];const Be=qe.length,Ye=Ve(qe[1],qe[0]),nn=Ve(qe[Be-2],qe[Be-1]);return St(qe,Ye,nn,De,Oe)}function St(qe,De,Oe,Be,Ye){var en,Ue,Je,Ge,Me,tn,dn,Re,Qe,cn,hn,Pn,kn;if(qe.length===2)return Pn=He.vectorLen(He.subtract(qe[0],qe[1]))/3,en=[qe[0],He.addArrays(qe[0],He.mulItems(De,Pn)),He.addArrays(qe[1],He.mulItems(Oe,Pn)),qe[1]],[en];if(Ue=Pe(qe),[en,Ge,tn]=r(qe,Ue,Ue,De,Oe,Ye),Ge===0||Ge<Be)return[en];if(Ge<Be*Be)for(Je=Ue,Me=Ge,dn=tn,kn=0;kn<20;kn++){if(Je=_e(en,qe,Je),[en,Ge,tn]=r(qe,Ue,Je,De,Oe,Ye),Ge<Be)return[en];if(tn===dn){let Dn=Ge/Me;if(Dn>.9999&&Dn<1.0001)break}Me=Ge,dn=tn}return hn=[],Re=He.subtract(qe[tn-1],qe[tn+1]),Re.every(Dn=>Dn===0)&&(Re=He.subtract(qe[tn-1],qe[tn]),[Re[0],Re[1]]=[-Re[1],Re[0]]),Qe=He.normalize(Re),cn=He.mulItems(Qe,-1),hn=hn.concat(St(qe.slice(0,tn+1),De,Qe,Be,Ye)),hn=hn.concat(St(qe.slice(tn),cn,Oe,Be,Ye)),hn}function r(qe,De,Oe,Be,Ye,nn){var en,Ue,Je;return en=xe(qe,Oe,Be,Ye),[Ue,Je]=Ce(qe,en,De),nn&&nn({bez:en,points:qe,params:De,maxErr:Ue,maxPoint:Je}),[en,Ue,Je]}function xe(qe,De,Oe,Be){var Ye,nn,en,Ue,Je,Ge,Me,tn,dn,Re,Qe,cn,hn,Pn,kn,Dn,Rn,jn=qe[0],zn=qe[qe.length-1];for(Ye=[jn,null,null,zn],nn=He.zeros_Xx2x2(De.length),hn=0,Pn=De.length;hn<Pn;hn++)Dn=De[hn],Rn=1-Dn,en=nn[hn],en[0]=He.mulItems(Oe,3*Dn*(Rn*Rn)),en[1]=He.mulItems(Be,3*Rn*(Dn*Dn));for(Ue=[[0,0],[0,0]],Je=[0,0],hn=0,Pn=qe.length;hn<Pn;hn++)Dn=De[hn],en=nn[hn],Ue[0][0]+=He.dot(en[0],en[0]),Ue[0][1]+=He.dot(en[0],en[1]),Ue[1][0]+=He.dot(en[0],en[1]),Ue[1][1]+=He.dot(en[1],en[1]),kn=He.subtract(qe[hn],ke.q([jn,jn,zn,zn],Dn)),Je[0]+=He.dot(en[0],kn),Je[1]+=He.dot(en[1],kn);return Ge=Ue[0][0]*Ue[1][1]-Ue[1][0]*Ue[0][1],Me=Ue[0][0]*Je[1]-Ue[1][0]*Je[0],tn=Je[0]*Ue[1][1]-Je[1]*Ue[0][1],dn=Ge===0?0:tn/Ge,Re=Ge===0?0:Me/Ge,cn=He.vectorLen(He.subtract(jn,zn)),Qe=1e-6*cn,dn<Qe||Re<Qe?(Ye[1]=He.addArrays(jn,He.mulItems(Oe,cn/3)),Ye[2]=He.addArrays(zn,He.mulItems(Be,cn/3))):(Ye[1]=He.addArrays(jn,He.mulItems(Oe,dn)),Ye[2]=He.addArrays(zn,He.mulItems(Be,Re))),Ye}function _e(qe,De,Oe){return Oe.map((Be,Ye)=>Ee(qe,De[Ye],Be))}function Ee(qe,De,Oe){var Be=He.subtract(ke.q(qe,Oe),De),Ye=ke.qprime(qe,Oe),nn=He.mulMatrix(Be,Ye),en=He.sum(He.squareItems(Ye))+2*He.mulMatrix(Be,ke.qprimeprime(qe,Oe));return en===0?Oe:Oe-nn/en}function Pe(qe){var De=[],Oe,Be,Ye;return qe.forEach((nn,en)=>{Oe=en?Be+He.vectorLen(He.subtract(nn,Ye)):0,De.push(Oe),Be=Oe,Ye=nn}),De=De.map(nn=>nn/Be),De}function Ce(qe,De,Oe){var Be,Ye,nn,en,Ue,Je,Ge,Me;Ye=0,nn=Math.floor(qe.length/2);const tn=Te(De,10);for(Ue=0,Je=qe.length;Ue<Je;Ue++)Ge=qe[Ue],Me=Ie(De,Oe[Ue],tn,10),en=He.subtract(ke.q(De,Me),Ge),Be=en[0]*en[0]+en[1]*en[1],Be>Ye&&(Ye=Be,nn=Ue);return[Ye,nn]}var Te=function(qe,De){for(var Oe,Be=[0],Ye=qe[0],nn=0,en=1;en<=De;en++)Oe=ke.q(qe,en/De),nn+=He.vectorLen(He.subtract(Oe,Ye)),Be.push(nn),Ye=Oe;return Be=Be.map(Ue=>Ue/nn),Be};function Ie(qe,De,Oe,Be){if(De<0)return 0;if(De>1)return 1;for(var Ye,nn,en,Ue,Je,Ge=1;Ge<=Be;Ge++)if(De<=Oe[Ge]){Ue=(Ge-1)/Be,en=Ge/Be,nn=Oe[Ge-1],Ye=Oe[Ge],Je=(De-nn)/(Ye-nn)*(en-Ue)+Ue;break}return Je}function Ve(qe,De){return He.normalize(He.subtract(qe,De))}class He{static zeros_Xx2x2(De){for(var Oe=[];De--;)Oe.push([0,0]);return Oe}static mulItems(De,Oe){return De.map(Be=>Be*Oe)}static mulMatrix(De,Oe){return De.reduce((Be,Ye,nn)=>Be+Ye*Oe[nn],0)}static subtract(De,Oe){return De.map((Be,Ye)=>Be-Oe[Ye])}static addArrays(De,Oe){return De.map((Be,Ye)=>Be+Oe[Ye])}static addItems(De,Oe){return De.map(Be=>Be+Oe)}static sum(De){return De.reduce((Oe,Be)=>Oe+Be)}static dot(De,Oe){return He.mulMatrix(De,Oe)}static vectorLen(De){return Math.hypot(...De)}static divItems(De,Oe){return De.map(Be=>Be/Oe)}static squareItems(De){return De.map(Oe=>Oe*Oe)}static normalize(De){return this.divItems(De,this.vectorLen(De))}}class ke{static q(De,Oe){var Be=1-Oe,Ye=He.mulItems(De[0],Be*Be*Be),nn=He.mulItems(De[1],3*Be*Be*Oe),en=He.mulItems(De[2],3*Be*Oe*Oe),Ue=He.mulItems(De[3],Oe*Oe*Oe);return He.addArrays(He.addArrays(Ye,nn),He.addArrays(en,Ue))}static qprime(De,Oe){var Be=1-Oe,Ye=He.mulItems(He.subtract(De[1],De[0]),3*Be*Be),nn=He.mulItems(He.subtract(De[2],De[1]),6*Be*Oe),en=He.mulItems(He.subtract(De[3],De[2]),3*Oe*Oe);return He.addArrays(He.addArrays(Ye,nn),en)}static qprimeprime(De,Oe){return He.addArrays(He.mulItems(He.addArrays(He.subtract(De[2],He.mulItems(De[1],2)),De[0]),6*(1-Oe)),He.mulItems(He.addArrays(He.subtract(De[3],He.mulItems(De[2],2)),De[1]),6*Oe))}}e.exports=t,e.exports.fitCubic=St,e.exports.createTangent=Ve},(e,t,St)=>{var _n,Bs,ze,ah,gn,tc,Nn,ec;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var r=St(1),xe=St(6),_e=St(3),Ee=St(33),Pe=St(34);const Ce=1e3,Te=9,Ie=new WeakSet;function Ve(Sn){return{width:Sn[2]-Sn[0],height:Sn[3]-Sn[1]}}class He{static create(Ke){switch(Ke.data.annotationType){case r.AnnotationType.LINK:return new qe(Ke);case r.AnnotationType.TEXT:return new De(Ke);case r.AnnotationType.WIDGET:switch(Ke.data.fieldType){case"Tx":return new Be(Ke);case"Btn":return Ke.data.radioButton?new nn(Ke):Ke.data.checkBox?new Ye(Ke):new en(Ke);case"Ch":return new Ue(Ke)}return new Oe(Ke);case r.AnnotationType.POPUP:return new Je(Ke);case r.AnnotationType.FREETEXT:return new Me(Ke);case r.AnnotationType.LINE:return new tn(Ke);case r.AnnotationType.SQUARE:return new dn(Ke);case r.AnnotationType.CIRCLE:return new Re(Ke);case r.AnnotationType.POLYLINE:return new Qe(Ke);case r.AnnotationType.CARET:return new hn(Ke);case r.AnnotationType.INK:return new Pn(Ke);case r.AnnotationType.POLYGON:return new cn(Ke);case r.AnnotationType.HIGHLIGHT:return new kn(Ke);case r.AnnotationType.UNDERLINE:return new Dn(Ke);case r.AnnotationType.SQUIGGLY:return new Rn(Ke);case r.AnnotationType.STRIKEOUT:return new jn(Ke);case r.AnnotationType.STAMP:return new zn(Ke);case r.AnnotationType.FILEATTACHMENT:return new ii(Ke);default:return new ke(Ke)}}}class ke{constructor(Ke,{isRenderable:$e=!1,ignoreBorder:We=!1,createQuadrilaterals:yn=!1}={}){this.isRenderable=$e,this.data=Ke.data,this.layer=Ke.layer,this.page=Ke.page,this.viewport=Ke.viewport,this.linkService=Ke.linkService,this.downloadManager=Ke.downloadManager,this.imageResourcesPath=Ke.imageResourcesPath,this.renderForms=Ke.renderForms,this.svgFactory=Ke.svgFactory,this.annotationStorage=Ke.annotationStorage,this.enableScripting=Ke.enableScripting,this.hasJSActions=Ke.hasJSActions,this._fieldObjects=Ke.fieldObjects,$e&&(this.container=this._createContainer(We)),yn&&(this.quadrilaterals=this._createQuadrilaterals(We))}_createContainer(Ke=!1){const{data:$e,page:We,viewport:yn}=this,bn=document.createElement("section");bn.setAttribute("data-annotation-id",$e.id),$e.noRotate&&bn.classList.add("norotate");const{pageWidth:Ln,pageHeight:Bn,pageX:On,pageY:qn}=yn.rawDims,{width:Gn,height:$n}=Ve($e.rect),Yn=r.Util.normalizeRect([$e.rect[0],We.view[3]-$e.rect[1]+We.view[1],$e.rect[2],We.view[3]-$e.rect[3]+We.view[1]]);if(!Ke&&$e.borderStyle.width>0){bn.style.borderWidth=`${$e.borderStyle.width}px`;const si=$e.borderStyle.horizontalCornerRadius,yi=$e.borderStyle.verticalCornerRadius;if(si>0||yi>0){const vi=`calc(${si}px * var(--scale-factor)) / calc(${yi}px * var(--scale-factor))`;bn.style.borderRadius=vi}else if(this instanceof nn){const vi=`calc(${Gn}px * var(--scale-factor)) / calc(${$n}px * var(--scale-factor))`;bn.style.borderRadius=vi}switch($e.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:bn.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:bn.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:bn.style.borderBottomStyle="solid";break}const li=$e.borderColor||null;li?bn.style.borderColor=r.Util.makeHexColor(li[0]|0,li[1]|0,li[2]|0):bn.style.borderWidth=0}bn.style.left=`${100*(Yn[0]-On)/Ln}%`,bn.style.top=`${100*(Yn[1]-qn)/Bn}%`;const{rotation:ni}=$e;return $e.hasOwnCanvas||ni===0?(bn.style.width=`${100*Gn/Ln}%`,bn.style.height=`${100*$n/Bn}%`):this.setRotation(ni,bn),bn}setRotation(Ke,$e=this.container){const{pageWidth:We,pageHeight:yn}=this.viewport.rawDims,{width:bn,height:Ln}=Ve(this.data.rect);let Bn,On;Ke%180===0?(Bn=100*bn/We,On=100*Ln/yn):(Bn=100*Ln/We,On=100*bn/yn),$e.style.width=`${Bn}%`,$e.style.height=`${On}%`,$e.setAttribute("data-main-rotation",(360-Ke)%360)}get _commonActions(){const Ke=($e,We,yn)=>{const bn=yn.detail[$e];yn.target.style[We]=Ee.ColorConverters[`${bn[0]}_HTML`](bn.slice(1))};return(0,r.shadow)(this,"_commonActions",{display:$e=>{const We=$e.detail.display%2===1;this.container.style.visibility=We?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:We,print:$e.detail.display===0||$e.detail.display===3})},print:$e=>{this.annotationStorage.setValue(this.data.id,{print:$e.detail.print})},hidden:$e=>{this.container.style.visibility=$e.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:$e.detail.hidden})},focus:$e=>{setTimeout(()=>$e.target.focus({preventScroll:!1}),0)},userName:$e=>{$e.target.title=$e.detail.userName},readonly:$e=>{$e.detail.readonly?$e.target.setAttribute("readonly",""):$e.target.removeAttribute("readonly")},required:$e=>{this._setRequired($e.target,$e.detail.required)},bgColor:$e=>{Ke("bgColor","backgroundColor",$e)},fillColor:$e=>{Ke("fillColor","backgroundColor",$e)},fgColor:$e=>{Ke("fgColor","color",$e)},textColor:$e=>{Ke("textColor","color",$e)},borderColor:$e=>{Ke("borderColor","borderColor",$e)},strokeColor:$e=>{Ke("strokeColor","borderColor",$e)},rotation:$e=>{const We=$e.detail.rotation;this.setRotation(We),this.annotationStorage.setValue(this.data.id,{rotation:We})}})}_dispatchEventFromSandbox(Ke,$e){const We=this._commonActions;for(const yn of Object.keys($e.detail)){const bn=Ke[yn]||We[yn];bn==null||bn($e)}}_setDefaultPropertiesFromJS(Ke){if(!this.enableScripting)return;const $e=this.annotationStorage.getRawValue(this.data.id);if(!$e)return;const We=this._commonActions;for(const[yn,bn]of Object.entries($e)){const Ln=We[yn];if(Ln){const Bn={detail:{[yn]:bn},target:Ke};Ln(Bn),delete $e[yn]}}}_createQuadrilaterals(Ke=!1){if(!this.data.quadPoints)return null;const $e=[],We=this.data.rect;for(const yn of this.data.quadPoints)this.data.rect=[yn[2].x,yn[2].y,yn[1].x,yn[1].y],$e.push(this._createContainer(Ke));return this.data.rect=We,$e}_createPopup(Ke,$e){let We=this.container;this.quadrilaterals&&(Ke||(Ke=this.quadrilaterals),We=this.quadrilaterals[0]),Ke||(Ke=document.createElement("div"),Ke.classList.add("popupTriggerArea"),We.append(Ke));const bn=new Ge({container:We,trigger:Ke,color:$e.color,titleObj:$e.titleObj,modificationDate:$e.modificationDate,contentsObj:$e.contentsObj,richText:$e.richText,hideWrapper:!0}).render();bn.style.left="100%",We.append(bn)}_renderQuadrilaterals(Ke){for(const $e of this.quadrilaterals)$e.classList.add(Ke);return this.quadrilaterals}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Ke,$e=null){const We=[];if(this._fieldObjects){const yn=this._fieldObjects[Ke];if(yn)for(const{page:bn,id:Ln,exportValues:Bn}of yn){if(bn===-1||Ln===$e)continue;const On=typeof Bn=="string"?Bn:null,qn=document.querySelector(`[data-element-id="${Ln}"]`);if(qn&&!Ie.has(qn)){(0,r.warn)(`_getElementsByName - element not allowed: ${Ln}`);continue}We.push({id:Ln,exportValue:On,domElement:qn})}return We}for(const yn of document.getElementsByName(Ke)){const{exportValue:bn}=yn,Ln=yn.getAttribute("data-element-id");Ln!==$e&&Ie.has(yn)&&We.push({id:Ln,exportValue:bn,domElement:yn})}return We}}class qe extends ke{constructor($e,We=null){super($e,{isRenderable:!0,ignoreBorder:!!(We!=null&&We.ignoreBorder),createQuadrilaterals:!0});ti(this,_n);ti(this,ze);this.isTooltipOnly=$e.data.isTooltipOnly}render(){const{data:$e,linkService:We}=this,yn=document.createElement("a");yn.setAttribute("data-element-id",$e.id);let bn=!1;return $e.url?(We.addLinkAttributes(yn,$e.url,$e.newWindow),bn=!0):$e.action?(this._bindNamedAction(yn,$e.action),bn=!0):$e.attachment?(this._bindAttachment(yn,$e.attachment),bn=!0):$e.setOCGState?(ri(this,ze,ah).call(this,yn,$e.setOCGState),bn=!0):$e.dest?(this._bindLink(yn,$e.dest),bn=!0):($e.actions&&($e.actions.Action||$e.actions["Mouse Up"]||$e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(yn,$e),bn=!0),$e.resetForm?(this._bindResetFormAction(yn,$e.resetForm),bn=!0):this.isTooltipOnly&&!bn&&(this._bindLink(yn,""),bn=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((Ln,Bn)=>{const On=Bn===0?yn:yn.cloneNode();return Ln.append(On),Ln}):(this.container.classList.add("linkAnnotation"),bn&&this.container.append(yn),this.container)}_bindLink($e,We){$e.href=this.linkService.getDestinationHash(We),$e.onclick=()=>(We&&this.linkService.goToDestination(We),!1),(We||We==="")&&ri(this,_n,Bs).call(this)}_bindNamedAction($e,We){$e.href=this.linkService.getAnchorUrl(""),$e.onclick=()=>(this.linkService.executeNamedAction(We),!1),ri(this,_n,Bs).call(this)}_bindAttachment($e,We){$e.href=this.linkService.getAnchorUrl(""),$e.onclick=()=>{var yn;return(yn=this.downloadManager)==null||yn.openOrDownloadData(this.container,We.content,We.filename),!1},ri(this,_n,Bs).call(this)}_bindJSAction($e,We){$e.href=this.linkService.getAnchorUrl("");const yn=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const bn of Object.keys(We.actions)){const Ln=yn.get(bn);Ln&&($e[Ln]=()=>{var Bn;return(Bn=this.linkService.eventBus)==null||Bn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:We.id,name:bn}}),!1})}$e.onclick||($e.onclick=()=>!1),ri(this,_n,Bs).call(this)}_bindResetFormAction($e,We){const yn=$e.onclick;if(yn||($e.href=this.linkService.getAnchorUrl("")),ri(this,_n,Bs).call(this),!this._fieldObjects){(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),yn||($e.onclick=()=>!1);return}$e.onclick=()=>{var $n;yn==null||yn();const{fields:bn,refs:Ln,include:Bn}=We,On=[];if(bn.length!==0||Ln.length!==0){const Yn=new Set(Ln);for(const ni of bn){const si=this._fieldObjects[ni]||[];for(const{id:yi}of si)Yn.add(yi)}for(const ni of Object.values(this._fieldObjects))for(const si of ni)Yn.has(si.id)===Bn&&On.push(si)}else for(const Yn of Object.values(this._fieldObjects))On.push(...Yn);const qn=this.annotationStorage,Gn=[];for(const Yn of On){const{id:ni}=Yn;switch(Gn.push(ni),Yn.type){case"text":{const yi=Yn.defaultValue||"";qn.setValue(ni,{value:yi});break}case"checkbox":case"radiobutton":{const yi=Yn.defaultValue===Yn.exportValues;qn.setValue(ni,{value:yi});break}case"combobox":case"listbox":{const yi=Yn.defaultValue||"";qn.setValue(ni,{value:yi});break}default:continue}const si=document.querySelector(`[data-element-id="${ni}"]`);if(si){if(!Ie.has(si)){(0,r.warn)(`_bindResetFormAction - element not allowed: ${ni}`);continue}}else continue;si.dispatchEvent(new Event("resetform"))}return this.enableScripting&&(($n=this.linkService.eventBus)==null||$n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Gn,name:"ResetForm"}})),!1}}}_n=new WeakSet,Bs=function(){this.container.setAttribute("data-internal-link","")},ze=new WeakSet,ah=function($e,We){$e.href=this.linkService.getAnchorUrl(""),$e.onclick=()=>(this.linkService.executeSetOCGState(We),!1),ri(this,_n,Bs).call(this)};class De extends ke{constructor(Ke){var We,yn,bn;const $e=!!(Ke.data.hasPopup||(We=Ke.data.titleObj)!=null&&We.str||(yn=Ke.data.contentsObj)!=null&&yn.str||(bn=Ke.data.richText)!=null&&bn.str);super(Ke,{isRenderable:$e})}render(){this.container.classList.add("textAnnotation");const Ke=document.createElement("img");return Ke.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Ke.alt="[{{type}} Annotation]",Ke.dataset.l10nId="text_annotation_type",Ke.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(Ke,this.data),this.container.append(Ke),this.container}}class Oe extends ke{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Ke){var $e;this.data.hasOwnCanvas&&((($e=Ke.previousSibling)==null?void 0:$e.nodeName)==="CANVAS"&&(Ke.previousSibling.hidden=!0),Ke.hidden=!1)}_getKeyModifier(Ke){const{isWin:$e,isMac:We}=r.FeatureTest.platform;return $e&&Ke.ctrlKey||We&&Ke.metaKey}_setEventListener(Ke,$e,We,yn){$e.includes("mouse")?Ke.addEventListener($e,bn=>{var Ln;(Ln=this.linkService.eventBus)==null||Ln.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:We,value:yn(bn),shift:bn.shiftKey,modifier:this._getKeyModifier(bn)}})}):Ke.addEventListener($e,bn=>{var Ln;(Ln=this.linkService.eventBus)==null||Ln.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:We,value:yn(bn)}})})}_setEventListeners(Ke,$e,We){var yn;for(const[bn,Ln]of $e)(Ln==="Action"||(yn=this.data.actions)!=null&&yn[Ln])&&this._setEventListener(Ke,bn,Ln,We)}_setBackgroundColor(Ke){const $e=this.data.backgroundColor||null;Ke.style.backgroundColor=$e===null?"transparent":r.Util.makeHexColor($e[0],$e[1],$e[2])}_setTextStyle(Ke){const $e=["left","center","right"],{fontColor:We}=this.data.defaultAppearanceData,yn=this.data.defaultAppearanceData.fontSize||Te,bn=Ke.style;let Ln;const Bn=2,On=qn=>Math.round(10*qn)/10;if(this.data.multiLine){const qn=Math.abs(this.data.rect[3]-this.data.rect[1]-Bn),Gn=Math.round(qn/(r.LINE_FACTOR*yn))||1,$n=qn/Gn;Ln=Math.min(yn,On($n/r.LINE_FACTOR))}else{const qn=Math.abs(this.data.rect[3]-this.data.rect[1]-Bn);Ln=Math.min(yn,On(qn/r.LINE_FACTOR))}bn.fontSize=`calc(${Ln}px * var(--scale-factor))`,bn.color=r.Util.makeHexColor(We[0],We[1],We[2]),this.data.textAlignment!==null&&(bn.textAlign=$e[this.data.textAlignment])}_setRequired(Ke,$e){$e?Ke.setAttribute("required",!0):Ke.removeAttribute("required"),Ke.setAttribute("aria-required",$e)}}class Be extends Oe{constructor(Ke){const $e=Ke.renderForms||!Ke.data.hasAppearance&&!!Ke.data.fieldValue;super(Ke,{isRenderable:$e})}setPropertyOnSiblings(Ke,$e,We,yn){const bn=this.annotationStorage;for(const Ln of this._getElementsByName(Ke.name,Ke.id))Ln.domElement&&(Ln.domElement[$e]=We),bn.setValue(Ln.id,{[yn]:We})}render(){var yn;const Ke=this.annotationStorage,$e=this.data.id;this.container.classList.add("textWidgetAnnotation");let We=null;if(this.renderForms){const bn=Ke.getValue($e,{value:this.data.fieldValue});let Ln=bn.formattedValue||bn.value||"";const Bn=Ke.getValue($e,{charLimit:this.data.maxLen}).charLimit;Bn&&Ln.length>Bn&&(Ln=Ln.slice(0,Bn));const On={userValue:Ln,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(We=document.createElement("textarea"),We.textContent=Ln,this.data.doNotScroll&&(We.style.overflowY="hidden")):(We=document.createElement("input"),We.type="text",We.setAttribute("value",Ln),this.data.doNotScroll&&(We.style.overflowX="hidden")),this.data.hasOwnCanvas&&(We.hidden=!0),Ie.add(We),We.setAttribute("data-element-id",$e),We.disabled=this.data.readOnly,We.name=this.data.fieldName,We.tabIndex=Ce,this._setRequired(We,this.data.required),Bn&&(We.maxLength=Bn),We.addEventListener("input",Gn=>{Ke.setValue($e,{value:Gn.target.value}),this.setPropertyOnSiblings(We,"value",Gn.target.value,"value")}),We.addEventListener("resetform",Gn=>{const $n=this.data.defaultFieldValue??"";We.value=On.userValue=$n,On.formattedValue=null});let qn=Gn=>{const{formattedValue:$n}=On;$n!=null&&(Gn.target.value=$n),Gn.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){We.addEventListener("focus",$n=>{const{target:Yn}=$n;On.userValue&&(Yn.value=On.userValue),On.lastCommittedValue=Yn.value,On.commitKey=1}),We.addEventListener("updatefromsandbox",$n=>{this.showElementAndHideCanvas($n.target);const Yn={value(ni){On.userValue=ni.detail.value??"",Ke.setValue($e,{value:On.userValue.toString()}),ni.target.value=On.userValue},formattedValue(ni){const{formattedValue:si}=ni.detail;On.formattedValue=si,si!=null&&ni.target!==document.activeElement&&(ni.target.value=si),Ke.setValue($e,{formattedValue:si})},selRange(ni){ni.target.setSelectionRange(...ni.detail.selRange)},charLimit:ni=>{var vi;const{charLimit:si}=ni.detail,{target:yi}=ni;if(si===0){yi.removeAttribute("maxLength");return}yi.setAttribute("maxLength",si);let li=On.userValue;!li||li.length<=si||(li=li.slice(0,si),yi.value=On.userValue=li,Ke.setValue($e,{value:li}),(vi=this.linkService.eventBus)==null||vi.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$e,name:"Keystroke",value:li,willCommit:!0,commitKey:1,selStart:yi.selectionStart,selEnd:yi.selectionEnd}}))}};this._dispatchEventFromSandbox(Yn,$n)}),We.addEventListener("keydown",$n=>{var si;On.commitKey=1;let Yn=-1;if($n.key==="Escape"?Yn=0:$n.key==="Enter"&&!this.data.multiLine?Yn=2:$n.key==="Tab"&&(On.commitKey=3),Yn===-1)return;const{value:ni}=$n.target;On.lastCommittedValue!==ni&&(On.lastCommittedValue=ni,On.userValue=ni,(si=this.linkService.eventBus)==null||si.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$e,name:"Keystroke",value:ni,willCommit:!0,commitKey:Yn,selStart:$n.target.selectionStart,selEnd:$n.target.selectionEnd}}))});const Gn=qn;qn=null,We.addEventListener("blur",$n=>{var ni;if(!$n.relatedTarget)return;const{value:Yn}=$n.target;On.userValue=Yn,On.lastCommittedValue!==Yn&&((ni=this.linkService.eventBus)==null||ni.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$e,name:"Keystroke",value:Yn,willCommit:!0,commitKey:On.commitKey,selStart:$n.target.selectionStart,selEnd:$n.target.selectionEnd}})),Gn($n)}),(yn=this.data.actions)!=null&&yn.Keystroke&&We.addEventListener("beforeinput",$n=>{var bi;On.lastCommittedValue=null;const{data:Yn,target:ni}=$n,{value:si,selectionStart:yi,selectionEnd:li}=ni;let vi=yi,Mn=li;switch($n.inputType){case"deleteWordBackward":{const fi=si.substring(0,yi).match(/\w*[^\w]*$/);fi&&(vi-=fi[0].length);break}case"deleteWordForward":{const fi=si.substring(yi).match(/^[^\w]*\w*/);fi&&(Mn+=fi[0].length);break}case"deleteContentBackward":yi===li&&(vi-=1);break;case"deleteContentForward":yi===li&&(Mn+=1);break}$n.preventDefault(),(bi=this.linkService.eventBus)==null||bi.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$e,name:"Keystroke",value:si,change:Yn||"",willCommit:!1,selStart:vi,selEnd:Mn}})}),this._setEventListeners(We,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],$n=>$n.target.value)}if(qn&&We.addEventListener("blur",qn),this.data.comb){const $n=(this.data.rect[2]-this.data.rect[0])/Bn;We.classList.add("comb"),We.style.letterSpacing=`calc(${$n}px * var(--scale-factor) - 1ch)`}}else We=document.createElement("div"),We.textContent=this.data.fieldValue,We.style.verticalAlign="middle",We.style.display="table-cell";return this._setTextStyle(We),this._setBackgroundColor(We),this._setDefaultPropertiesFromJS(We),this.container.append(We),this.container}}class Ye extends Oe{constructor(Ke){super(Ke,{isRenderable:Ke.renderForms})}render(){const Ke=this.annotationStorage,$e=this.data,We=$e.id;let yn=Ke.getValue(We,{value:$e.exportValue===$e.fieldValue}).value;typeof yn=="string"&&(yn=yn!=="Off",Ke.setValue(We,{value:yn})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const bn=document.createElement("input");return Ie.add(bn),bn.setAttribute("data-element-id",We),bn.disabled=$e.readOnly,this._setRequired(bn,this.data.required),bn.type="checkbox",bn.name=$e.fieldName,yn&&bn.setAttribute("checked",!0),bn.setAttribute("exportValue",$e.exportValue),bn.tabIndex=Ce,bn.addEventListener("change",Ln=>{const{name:Bn,checked:On}=Ln.target;for(const qn of this._getElementsByName(Bn,We)){const Gn=On&&qn.exportValue===$e.exportValue;qn.domElement&&(qn.domElement.checked=Gn),Ke.setValue(qn.id,{value:Gn})}Ke.setValue(We,{value:On})}),bn.addEventListener("resetform",Ln=>{const Bn=$e.defaultFieldValue||"Off";Ln.target.checked=Bn===$e.exportValue}),this.enableScripting&&this.hasJSActions&&(bn.addEventListener("updatefromsandbox",Ln=>{const Bn={value(On){On.target.checked=On.detail.value!=="Off",Ke.setValue(We,{value:On.target.checked})}};this._dispatchEventFromSandbox(Bn,Ln)}),this._setEventListeners(bn,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ln=>Ln.target.checked)),this._setBackgroundColor(bn),this._setDefaultPropertiesFromJS(bn),this.container.append(bn),this.container}}class nn extends Oe{constructor(Ke){super(Ke,{isRenderable:Ke.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Ke=this.annotationStorage,$e=this.data,We=$e.id;let yn=Ke.getValue(We,{value:$e.fieldValue===$e.buttonValue}).value;typeof yn=="string"&&(yn=yn!==$e.buttonValue,Ke.setValue(We,{value:yn}));const bn=document.createElement("input");if(Ie.add(bn),bn.setAttribute("data-element-id",We),bn.disabled=$e.readOnly,this._setRequired(bn,this.data.required),bn.type="radio",bn.name=$e.fieldName,yn&&bn.setAttribute("checked",!0),bn.tabIndex=Ce,bn.addEventListener("change",Ln=>{const{name:Bn,checked:On}=Ln.target;for(const qn of this._getElementsByName(Bn,We))Ke.setValue(qn.id,{value:!1});Ke.setValue(We,{value:On})}),bn.addEventListener("resetform",Ln=>{const Bn=$e.defaultFieldValue;Ln.target.checked=Bn!=null&&Bn===$e.buttonValue}),this.enableScripting&&this.hasJSActions){const Ln=$e.buttonValue;bn.addEventListener("updatefromsandbox",Bn=>{const On={value:qn=>{const Gn=Ln===qn.detail.value;for(const $n of this._getElementsByName(qn.target.name)){const Yn=Gn&&$n.id===We;$n.domElement&&($n.domElement.checked=Yn),Ke.setValue($n.id,{value:Yn})}}};this._dispatchEventFromSandbox(On,Bn)}),this._setEventListeners(bn,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Bn=>Bn.target.checked)}return this._setBackgroundColor(bn),this._setDefaultPropertiesFromJS(bn),this.container.append(bn),this.container}}class en extends qe{constructor(Ke){super(Ke,{ignoreBorder:Ke.data.hasAppearance})}render(){const Ke=super.render();Ke.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Ke.title=this.data.alternativeText);const $e=Ke.lastChild;return this.enableScripting&&this.hasJSActions&&$e&&(this._setDefaultPropertiesFromJS($e),$e.addEventListener("updatefromsandbox",We=>{this._dispatchEventFromSandbox({},We)})),Ke}}class Ue extends Oe{constructor(Ke){super(Ke,{isRenderable:Ke.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Ke=this.annotationStorage,$e=this.data.id,We=Ke.getValue($e,{value:this.data.fieldValue}),yn=document.createElement("select");Ie.add(yn),yn.setAttribute("data-element-id",$e),yn.disabled=this.data.readOnly,this._setRequired(yn,this.data.required),yn.name=this.data.fieldName,yn.tabIndex=Ce;let bn=this.data.combo&&this.data.options.length>0;this.data.combo||(yn.size=this.data.options.length,this.data.multiSelect&&(yn.multiple=!0)),yn.addEventListener("resetform",Gn=>{const $n=this.data.defaultFieldValue;for(const Yn of yn.options)Yn.selected=Yn.value===$n});for(const Gn of this.data.options){const $n=document.createElement("option");$n.textContent=Gn.displayValue,$n.value=Gn.exportValue,We.value.includes(Gn.exportValue)&&($n.setAttribute("selected",!0),bn=!1),yn.append($n)}let Ln=null;if(bn){const Gn=document.createElement("option");Gn.value=" ",Gn.setAttribute("hidden",!0),Gn.setAttribute("selected",!0),yn.prepend(Gn),Ln=()=>{Gn.remove(),yn.removeEventListener("input",Ln),Ln=null},yn.addEventListener("input",Ln)}const Bn=Gn=>{const $n=Gn?"value":"textContent",{options:Yn,multiple:ni}=yn;return ni?Array.prototype.filter.call(Yn,si=>si.selected).map(si=>si[$n]):Yn.selectedIndex===-1?null:Yn[Yn.selectedIndex][$n]};let On=Bn(!1);const qn=Gn=>{const $n=Gn.target.options;return Array.prototype.map.call($n,Yn=>({displayValue:Yn.textContent,exportValue:Yn.value}))};return this.enableScripting&&this.hasJSActions?(yn.addEventListener("updatefromsandbox",Gn=>{const $n={value(Yn){Ln==null||Ln();const ni=Yn.detail.value,si=new Set(Array.isArray(ni)?ni:[ni]);for(const yi of yn.options)yi.selected=si.has(yi.value);Ke.setValue($e,{value:Bn(!0)}),On=Bn(!1)},multipleSelection(Yn){yn.multiple=!0},remove(Yn){const ni=yn.options,si=Yn.detail.remove;ni[si].selected=!1,yn.remove(si),ni.length>0&&Array.prototype.findIndex.call(ni,li=>li.selected)===-1&&(ni[0].selected=!0),Ke.setValue($e,{value:Bn(!0),items:qn(Yn)}),On=Bn(!1)},clear(Yn){for(;yn.length!==0;)yn.remove(0);Ke.setValue($e,{value:null,items:[]}),On=Bn(!1)},insert(Yn){const{index:ni,displayValue:si,exportValue:yi}=Yn.detail.insert,li=yn.children[ni],vi=document.createElement("option");vi.textContent=si,vi.value=yi,li?li.before(vi):yn.append(vi),Ke.setValue($e,{value:Bn(!0),items:qn(Yn)}),On=Bn(!1)},items(Yn){const{items:ni}=Yn.detail;for(;yn.length!==0;)yn.remove(0);for(const si of ni){const{displayValue:yi,exportValue:li}=si,vi=document.createElement("option");vi.textContent=yi,vi.value=li,yn.append(vi)}yn.options.length>0&&(yn.options[0].selected=!0),Ke.setValue($e,{value:Bn(!0),items:qn(Yn)}),On=Bn(!1)},indices(Yn){const ni=new Set(Yn.detail.indices);for(const si of Yn.target.options)si.selected=ni.has(si.index);Ke.setValue($e,{value:Bn(!0)}),On=Bn(!1)},editable(Yn){Yn.target.disabled=!Yn.detail.editable}};this._dispatchEventFromSandbox($n,Gn)}),yn.addEventListener("input",Gn=>{var Yn;const $n=Bn(!0);Ke.setValue($e,{value:$n}),Gn.preventDefault(),(Yn=this.linkService.eventBus)==null||Yn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:$e,name:"Keystroke",value:On,changeEx:$n,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(yn,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Gn=>Gn.target.value)):yn.addEventListener("input",function(Gn){Ke.setValue($e,{value:Bn(!0)})}),this.data.combo&&this._setTextStyle(yn),this._setBackgroundColor(yn),this._setDefaultPropertiesFromJS(yn),this.container.append(yn),this.container}}const rn=class rn extends ke{constructor(Ke){var yn,bn,Ln;const{data:$e}=Ke,We=!rn.IGNORE_TYPES.has($e.parentType)&&!!((yn=$e.titleObj)!=null&&yn.str||(bn=$e.contentsObj)!=null&&bn.str||(Ln=$e.richText)!=null&&Ln.str);super(Ke,{isRenderable:We})}render(){this.container.classList.add("popupAnnotation");const Ke=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(Ke.length===0)return this.container;const $e=new Ge({container:this.container,trigger:Array.from(Ke),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),We=this.page,yn=r.Util.normalizeRect([this.data.parentRect[0],We.view[3]-this.data.parentRect[1]+We.view[1],this.data.parentRect[2],We.view[3]-this.data.parentRect[3]+We.view[1]]),bn=yn[0]+this.data.parentRect[2]-this.data.parentRect[0],Ln=yn[1],{pageWidth:Bn,pageHeight:On,pageX:qn,pageY:Gn}=this.viewport.rawDims;return this.container.style.left=`${100*(bn-qn)/Bn}%`,this.container.style.top=`${100*(Ln-Gn)/On}%`,this.container.append($e.render()),this.container}};ir(rn,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));let Je=rn;class Ge{constructor(Ke){this.container=Ke.container,this.trigger=Ke.trigger,this.color=Ke.color,this.titleObj=Ke.titleObj,this.modificationDate=Ke.modificationDate,this.contentsObj=Ke.contentsObj,this.richText=Ke.richText,this.hideWrapper=Ke.hideWrapper||!1,this.pinned=!1}render(){var Bn,On;const $e=document.createElement("div");$e.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?$e:this.container,this.hideElement.hidden=!0;const We=document.createElement("div");We.classList.add("popup");const yn=this.color;if(yn){const qn=.7*(255-yn[0])+yn[0],Gn=.7*(255-yn[1])+yn[1],$n=.7*(255-yn[2])+yn[2];We.style.backgroundColor=r.Util.makeHexColor(qn|0,Gn|0,$n|0)}const bn=document.createElement("h1");bn.dir=this.titleObj.dir,bn.textContent=this.titleObj.str,We.append(bn);const Ln=xe.PDFDateString.toDateObject(this.modificationDate);if(Ln){const qn=document.createElement("span");qn.classList.add("popupDate"),qn.textContent="{{date}}, {{time}}",qn.dataset.l10nId="annotation_date_string",qn.dataset.l10nArgs=JSON.stringify({date:Ln.toLocaleDateString(),time:Ln.toLocaleTimeString()}),We.append(qn)}if((Bn=this.richText)!=null&&Bn.str&&(!((On=this.contentsObj)!=null&&On.str)||this.contentsObj.str===this.richText.str))Pe.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:We}),We.lastChild.classList.add("richText","popupContent");else{const qn=this._formatContents(this.contentsObj);We.append(qn)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const qn of this.trigger)qn.addEventListener("click",this._toggle.bind(this)),qn.addEventListener("mouseover",this._show.bind(this,!1)),qn.addEventListener("mouseout",this._hide.bind(this,!1));return We.addEventListener("click",this._hide.bind(this,!0)),$e.append(We),$e}_formatContents({str:Ke,dir:$e}){const We=document.createElement("p");We.classList.add("popupContent"),We.dir=$e;const yn=Ke.split(/(?:\r\n?|\n)/);for(let bn=0,Ln=yn.length;bn<Ln;++bn){const Bn=yn[bn];We.append(document.createTextNode(Bn)),bn<Ln-1&&We.append(document.createElement("br"))}return We}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(Ke=!1){Ke&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(Ke=!0){Ke&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class Me extends ke{constructor(Ke){var We,yn,bn;const $e=!!(Ke.data.hasPopup||(We=Ke.data.titleObj)!=null&&We.str||(yn=Ke.data.contentsObj)!=null&&yn.str||(bn=Ke.data.richText)!=null&&bn.str);super(Ke,{isRenderable:$e,ignoreBorder:!0}),this.textContent=Ke.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Ke=document.createElement("div");Ke.classList.add("annotationTextContent"),Ke.setAttribute("role","comment");for(const $e of this.textContent){const We=document.createElement("span");We.textContent=$e,Ke.append(We)}this.container.append(Ke)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class tn extends ke{constructor(Ke){var We,yn,bn;const $e=!!(Ke.data.hasPopup||(We=Ke.data.titleObj)!=null&&We.str||(yn=Ke.data.contentsObj)!=null&&yn.str||(bn=Ke.data.richText)!=null&&bn.str);super(Ke,{isRenderable:$e,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const Ke=this.data,{width:$e,height:We}=Ve(Ke.rect),yn=this.svgFactory.create($e,We,!0),bn=this.svgFactory.createElement("svg:line");return bn.setAttribute("x1",Ke.rect[2]-Ke.lineCoordinates[0]),bn.setAttribute("y1",Ke.rect[3]-Ke.lineCoordinates[1]),bn.setAttribute("x2",Ke.rect[2]-Ke.lineCoordinates[2]),bn.setAttribute("y2",Ke.rect[3]-Ke.lineCoordinates[3]),bn.setAttribute("stroke-width",Ke.borderStyle.width||1),bn.setAttribute("stroke","transparent"),bn.setAttribute("fill","transparent"),yn.append(bn),this.container.append(yn),this._createPopup(bn,Ke),this.container}}class dn extends ke{constructor(Ke){var We,yn,bn;const $e=!!(Ke.data.hasPopup||(We=Ke.data.titleObj)!=null&&We.str||(yn=Ke.data.contentsObj)!=null&&yn.str||(bn=Ke.data.richText)!=null&&bn.str);super(Ke,{isRenderable:$e,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const Ke=this.data,{width:$e,height:We}=Ve(Ke.rect),yn=this.svgFactory.create($e,We,!0),bn=Ke.borderStyle.width,Ln=this.svgFactory.createElement("svg:rect");return Ln.setAttribute("x",bn/2),Ln.setAttribute("y",bn/2),Ln.setAttribute("width",$e-bn),Ln.setAttribute("height",We-bn),Ln.setAttribute("stroke-width",bn||1),Ln.setAttribute("stroke","transparent"),Ln.setAttribute("fill","transparent"),yn.append(Ln),this.container.append(yn),this._createPopup(Ln,Ke),this.container}}class Re extends ke{constructor(Ke){var We,yn,bn;const $e=!!(Ke.data.hasPopup||(We=Ke.data.titleObj)!=null&&We.str||(yn=Ke.data.contentsObj)!=null&&yn.str||(bn=Ke.data.richText)!=null&&bn.str);super(Ke,{isRenderable:$e,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const Ke=this.data,{width:$e,height:We}=Ve(Ke.rect),yn=this.svgFactory.create($e,We,!0),bn=Ke.borderStyle.width,Ln=this.svgFactory.createElement("svg:ellipse");return Ln.setAttribute("cx",$e/2),Ln.setAttribute("cy",We/2),Ln.setAttribute("rx",$e/2-bn/2),Ln.setAttribute("ry",We/2-bn/2),Ln.setAttribute("stroke-width",bn||1),Ln.setAttribute("stroke","transparent"),Ln.setAttribute("fill","transparent"),yn.append(Ln),this.container.append(yn),this._createPopup(Ln,Ke),this.container}}class Qe extends ke{constructor(Ke){var We,yn,bn;const $e=!!(Ke.data.hasPopup||(We=Ke.data.titleObj)!=null&&We.str||(yn=Ke.data.contentsObj)!=null&&yn.str||(bn=Ke.data.richText)!=null&&bn.str);super(Ke,{isRenderable:$e,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const Ke=this.data,{width:$e,height:We}=Ve(Ke.rect),yn=this.svgFactory.create($e,We,!0);let bn=[];for(const Bn of Ke.vertices){const On=Bn.x-Ke.rect[0],qn=Ke.rect[3]-Bn.y;bn.push(On+","+qn)}bn=bn.join(" ");const Ln=this.svgFactory.createElement(this.svgElementName);return Ln.setAttribute("points",bn),Ln.setAttribute("stroke-width",Ke.borderStyle.width||1),Ln.setAttribute("stroke","transparent"),Ln.setAttribute("fill","transparent"),yn.append(Ln),this.container.append(yn),this._createPopup(Ln,Ke),this.container}}class cn extends Qe{constructor(Ke){super(Ke),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class hn extends ke{constructor(Ke){var We,yn,bn;const $e=!!(Ke.data.hasPopup||(We=Ke.data.titleObj)!=null&&We.str||(yn=Ke.data.contentsObj)!=null&&yn.str||(bn=Ke.data.richText)!=null&&bn.str);super(Ke,{isRenderable:$e,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Pn extends ke{constructor(Ke){var We,yn,bn;const $e=!!(Ke.data.hasPopup||(We=Ke.data.titleObj)!=null&&We.str||(yn=Ke.data.contentsObj)!=null&&yn.str||(bn=Ke.data.richText)!=null&&bn.str);super(Ke,{isRenderable:$e,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const Ke=this.data,{width:$e,height:We}=Ve(Ke.rect),yn=this.svgFactory.create($e,We,!0);for(const bn of Ke.inkLists){let Ln=[];for(const On of bn){const qn=On.x-Ke.rect[0],Gn=Ke.rect[3]-On.y;Ln.push(`${qn},${Gn}`)}Ln=Ln.join(" ");const Bn=this.svgFactory.createElement(this.svgElementName);Bn.setAttribute("points",Ln),Bn.setAttribute("stroke-width",Ke.borderStyle.width||1),Bn.setAttribute("stroke","transparent"),Bn.setAttribute("fill","transparent"),this._createPopup(Bn,Ke),yn.append(Bn)}return this.container.append(yn),this.container}}class kn extends ke{constructor(Ke){var We,yn,bn;const $e=!!(Ke.data.hasPopup||(We=Ke.data.titleObj)!=null&&We.str||(yn=Ke.data.contentsObj)!=null&&yn.str||(bn=Ke.data.richText)!=null&&bn.str);super(Ke,{isRenderable:$e,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class Dn extends ke{constructor(Ke){var We,yn,bn;const $e=!!(Ke.data.hasPopup||(We=Ke.data.titleObj)!=null&&We.str||(yn=Ke.data.contentsObj)!=null&&yn.str||(bn=Ke.data.richText)!=null&&bn.str);super(Ke,{isRenderable:$e,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class Rn extends ke{constructor(Ke){var We,yn,bn;const $e=!!(Ke.data.hasPopup||(We=Ke.data.titleObj)!=null&&We.str||(yn=Ke.data.contentsObj)!=null&&yn.str||(bn=Ke.data.richText)!=null&&bn.str);super(Ke,{isRenderable:$e,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class jn extends ke{constructor(Ke){var We,yn,bn;const $e=!!(Ke.data.hasPopup||(We=Ke.data.titleObj)!=null&&We.str||(yn=Ke.data.contentsObj)!=null&&yn.str||(bn=Ke.data.richText)!=null&&bn.str);super(Ke,{isRenderable:$e,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class zn extends ke{constructor(Ke){var We,yn,bn;const $e=!!(Ke.data.hasPopup||(We=Ke.data.titleObj)!=null&&We.str||(yn=Ke.data.contentsObj)!=null&&yn.str||(bn=Ke.data.richText)!=null&&bn.str);super(Ke,{isRenderable:$e,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ii extends ke{constructor(Ke){var yn;super(Ke,{isRenderable:!0});const{filename:$e,content:We}=this.data.file;this.filename=(0,xe.getFilenameFromUrl)($e,!0),this.content=We,(yn=this.linkService.eventBus)==null||yn.dispatch("fileattachmentannotation",{source:this,filename:$e,content:We})}render(){var $e,We;this.container.classList.add("fileAttachmentAnnotation");let Ke;return this.data.hasAppearance?Ke=document.createElement("div"):(Ke=document.createElement("img"),Ke.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),Ke.classList.add("popupTriggerArea"),Ke.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(($e=this.data.titleObj)!=null&&$e.str||(We=this.data.contentsObj)!=null&&We.str||this.data.richText)&&this._createPopup(Ke,this.data),this.container.append(Ke),this.container}_download(){var Ke;(Ke=this.downloadManager)==null||Ke.openOrDownloadData(this.container,this.content,this.filename)}}const xn=class xn{static render(Ke){var On,qn;const{annotations:$e,div:We,viewport:yn,accessibilityManager:bn}=Ke;(0,xe.setLayerDimensions)(We,yn);const Ln={data:null,layer:We,page:Ke.page,viewport:yn,linkService:Ke.linkService,downloadManager:Ke.downloadManager,imageResourcesPath:Ke.imageResourcesPath||"",renderForms:Ke.renderForms!==!1,svgFactory:new xe.DOMSVGFactory,annotationStorage:Ke.annotationStorage||new _e.AnnotationStorage,enableScripting:Ke.enableScripting===!0,hasJSActions:Ke.hasJSActions,fieldObjects:Ke.fieldObjects};let Bn=0;for(const Gn of $e){if(Gn.noHTML)continue;if(Gn.annotationType!==r.AnnotationType.POPUP){const{width:ni,height:si}=Ve(Gn.rect);if(ni<=0||si<=0)continue}Ln.data=Gn;const $n=He.create(Ln);if(!$n.isRenderable)continue;const Yn=$n.render();if(Gn.hidden&&(Yn.style.visibility="hidden"),Array.isArray(Yn))for(const ni of Yn)ni.style.zIndex=Bn++,ri(On=xn,gn,tc).call(On,ni,Gn.id,We,bn);else Yn.style.zIndex=Bn++,$n instanceof Je?We.prepend(Yn):ri(qn=xn,gn,tc).call(qn,Yn,Gn.id,We,bn)}ri(this,Nn,ec).call(this,We,Ke.annotationCanvasMap)}static update(Ke){const{annotationCanvasMap:$e,div:We,viewport:yn}=Ke;(0,xe.setLayerDimensions)(We,{rotation:yn.rotation}),ri(this,Nn,ec).call(this,We,$e),We.hidden=!1}};gn=new WeakSet,tc=function(Ke,$e,We,yn){const bn=Ke.firstChild||Ke;bn.id=`${xe.AnnotationPrefix}${$e}`,We.append(Ke),yn==null||yn.moveElementInDOM(We,Ke,bn,!1)},Nn=new WeakSet,ec=function(Ke,$e){if($e){for(const[We,yn]of $e){const bn=Ke.querySelector(`[data-annotation-id="${We}"]`);if(!bn)continue;const{firstChild:Ln}=bn;Ln?Ln.nodeName==="CANVAS"?Ln.replaceWith(yn):Ln.before(yn):bn.append(yn)}$e.clear()}},ti(xn,gn),ti(xn,Nn);let an=xn;t.AnnotationLayer=an},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function St(xe){return Math.floor(Math.max(0,Math.min(1,xe))*255).toString(16).padStart(2,"0")}class r{static CMYK_G([_e,Ee,Pe,Ce]){return["G",1-Math.min(1,.3*_e+.59*Pe+.11*Ee+Ce)]}static G_CMYK([_e]){return["CMYK",0,0,0,1-_e]}static G_RGB([_e]){return["RGB",_e,_e,_e]}static G_HTML([_e]){const Ee=St(_e);return`#${Ee}${Ee}${Ee}`}static RGB_G([_e,Ee,Pe]){return["G",.3*_e+.59*Ee+.11*Pe]}static RGB_HTML([_e,Ee,Pe]){const Ce=St(_e),Te=St(Ee),Ie=St(Pe);return`#${Ce}${Te}${Ie}`}static T_HTML(){return"#00000000"}static CMYK_RGB([_e,Ee,Pe,Ce]){return["RGB",1-Math.min(1,_e+Ce),1-Math.min(1,Pe+Ce),1-Math.min(1,Ee+Ce)]}static CMYK_HTML(_e){const Ee=this.CMYK_RGB(_e).slice(1);return this.RGB_HTML(Ee)}static RGB_CMYK([_e,Ee,Pe]){const Ce=1-_e,Te=1-Ee,Ie=1-Pe,Ve=Math.min(Ce,Te,Ie);return["CMYK",Ce,Te,Ie,Ve]}}t.ColorConverters=r},(e,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var r=St(19);class xe{static setupStorage(Ee,Pe,Ce,Te,Ie){const Ve=Te.getValue(Pe,{value:null});switch(Ce.name){case"textarea":if(Ve.value!==null&&(Ee.textContent=Ve.value),Ie==="print")break;Ee.addEventListener("input",He=>{Te.setValue(Pe,{value:He.target.value})});break;case"input":if(Ce.attributes.type==="radio"||Ce.attributes.type==="checkbox"){if(Ve.value===Ce.attributes.xfaOn?Ee.setAttribute("checked",!0):Ve.value===Ce.attributes.xfaOff&&Ee.removeAttribute("checked"),Ie==="print")break;Ee.addEventListener("change",He=>{Te.setValue(Pe,{value:He.target.checked?He.target.getAttribute("xfaOn"):He.target.getAttribute("xfaOff")})})}else{if(Ve.value!==null&&Ee.setAttribute("value",Ve.value),Ie==="print")break;Ee.addEventListener("input",He=>{Te.setValue(Pe,{value:He.target.value})})}break;case"select":if(Ve.value!==null)for(const He of Ce.children)He.attributes.value===Ve.value&&(He.attributes.selected=!0);Ee.addEventListener("input",He=>{const ke=He.target.options,qe=ke.selectedIndex===-1?"":ke[ke.selectedIndex].value;Te.setValue(Pe,{value:qe})});break}}static setAttributes({html:Ee,element:Pe,storage:Ce=null,intent:Te,linkService:Ie}){const{attributes:Ve}=Pe,He=Ee instanceof HTMLAnchorElement;Ve.type==="radio"&&(Ve.name=`${Ve.name}-${Te}`);for(const[ke,qe]of Object.entries(Ve))if(qe!=null)switch(ke){case"class":qe.length&&Ee.setAttribute(ke,qe.join(" "));break;case"dataId":break;case"id":Ee.setAttribute("data-element-id",qe);break;case"style":Object.assign(Ee.style,qe);break;case"textContent":Ee.textContent=qe;break;default:(!He||ke!=="href"&&ke!=="newWindow")&&Ee.setAttribute(ke,qe)}He&&Ie.addLinkAttributes(Ee,Ve.href,Ve.newWindow),Ce&&Ve.dataId&&this.setupStorage(Ee,Ve.dataId,Pe,Ce)}static render(Ee){var De;const Pe=Ee.annotationStorage,Ce=Ee.linkService,Te=Ee.xfaHtml,Ie=Ee.intent||"display",Ve=document.createElement(Te.name);Te.attributes&&this.setAttributes({html:Ve,element:Te,intent:Ie,linkService:Ce});const He=[[Te,-1,Ve]],ke=Ee.div;if(ke.append(Ve),Ee.viewport){const Oe=`matrix(${Ee.viewport.transform.join(",")})`;ke.style.transform=Oe}Ie!=="richText"&&ke.setAttribute("class","xfaLayer xfaFont");const qe=[];for(;He.length>0;){const[Oe,Be,Ye]=He.at(-1);if(Be+1===Oe.children.length){He.pop();continue}const nn=Oe.children[++He.at(-1)[1]];if(nn===null)continue;const{name:en}=nn;if(en==="#text"){const Je=document.createTextNode(nn.value);qe.push(Je),Ye.append(Je);continue}let Ue;if((De=nn==null?void 0:nn.attributes)!=null&&De.xmlns?Ue=document.createElementNS(nn.attributes.xmlns,en):Ue=document.createElement(en),Ye.append(Ue),nn.attributes&&this.setAttributes({html:Ue,element:nn,storage:Pe,intent:Ie,linkService:Ce}),nn.children&&nn.children.length>0)He.push([nn,-1,Ue]);else if(nn.value){const Je=document.createTextNode(nn.value);r.XfaText.shouldBuildText(en)&&qe.push(Je),Ue.append(Je)}}for(const Oe of ke.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))Oe.setAttribute("readOnly",!0);return{textDivs:qe}}static update(Ee){const Pe=`matrix(${Ee.viewport.transform.join(",")})`;Ee.div.style.transform=Pe,Ee.div.hidden=!1}}t.XfaLayer=xe},(e,t,St)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var r=St(6),xe=St(1),_e=St(10);let Ee=class{constructor(){(0,xe.unreachable)("Not implemented: SVGGraphics")}};t.SVGGraphics=Ee;{let De=function(Ue){let Je=[];const Ge=[];for(const Me of Ue){if(Me.fn==="save"){Je.push({fnId:92,fn:"group",items:[]}),Ge.push(Je),Je=Je.at(-1).items;continue}Me.fn==="restore"?Je=Ge.pop():Je.push(Me)}return Je},Oe=function(Ue){if(Number.isInteger(Ue))return Ue.toString();const Je=Ue.toFixed(10);let Ge=Je.length-1;if(Je[Ge]!=="0")return Je;do Ge--;while(Je[Ge]==="0");return Je.substring(0,Je[Ge]==="."?Ge:Ge+1)},Be=function(Ue){if(Ue[4]===0&&Ue[5]===0){if(Ue[1]===0&&Ue[2]===0)return Ue[0]===1&&Ue[3]===1?"":`scale(${Oe(Ue[0])} ${Oe(Ue[3])})`;if(Ue[0]===Ue[3]&&Ue[1]===-Ue[2]){const Je=Math.acos(Ue[0])*180/Math.PI;return`rotate(${Oe(Je)})`}}else if(Ue[0]===1&&Ue[1]===0&&Ue[2]===0&&Ue[3]===1)return`translate(${Oe(Ue[4])} ${Oe(Ue[5])})`;return`matrix(${Oe(Ue[0])} ${Oe(Ue[1])} ${Oe(Ue[2])} ${Oe(Ue[3])} ${Oe(Ue[4])} ${Oe(Ue[5])})`};const Pe={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},Ce="http://www.w3.org/XML/1998/namespace",Te="http://www.w3.org/1999/xlink",Ie=["butt","round","square"],Ve=["miter","round","bevel"],He=function(Ue,Je="",Ge=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!Ge)return URL.createObjectURL(new Blob([Ue],{type:Je}));const Me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let tn=`data:${Je};base64,`;for(let dn=0,Re=Ue.length;dn<Re;dn+=3){const Qe=Ue[dn]&255,cn=Ue[dn+1]&255,hn=Ue[dn+2]&255,Pn=Qe>>2,kn=(Qe&3)<<4|cn>>4,Dn=dn+1<Re?(cn&15)<<2|hn>>6:64,Rn=dn+2<Re?hn&63:64;tn+=Me[Pn]+Me[kn]+Me[Dn]+Me[Rn]}return tn},ke=function(){const Ue=new Uint8Array([137,80,78,71,13,10,26,10]),Je=12,Ge=new Int32Array(256);for(let hn=0;hn<256;hn++){let Pn=hn;for(let kn=0;kn<8;kn++)Pn&1?Pn=3988292384^Pn>>1&2147483647:Pn=Pn>>1&2147483647;Ge[hn]=Pn}function Me(hn,Pn,kn){let Dn=-1;for(let Rn=Pn;Rn<kn;Rn++){const jn=(Dn^hn[Rn])&255,zn=Ge[jn];Dn=Dn>>>8^zn}return Dn^-1}function tn(hn,Pn,kn,Dn){let Rn=Dn;const jn=Pn.length;kn[Rn]=jn>>24&255,kn[Rn+1]=jn>>16&255,kn[Rn+2]=jn>>8&255,kn[Rn+3]=jn&255,Rn+=4,kn[Rn]=hn.charCodeAt(0)&255,kn[Rn+1]=hn.charCodeAt(1)&255,kn[Rn+2]=hn.charCodeAt(2)&255,kn[Rn+3]=hn.charCodeAt(3)&255,Rn+=4,kn.set(Pn,Rn),Rn+=Pn.length;const zn=Me(kn,Dn+4,Rn);kn[Rn]=zn>>24&255,kn[Rn+1]=zn>>16&255,kn[Rn+2]=zn>>8&255,kn[Rn+3]=zn&255}function dn(hn,Pn,kn){let Dn=1,Rn=0;for(let jn=Pn;jn<kn;++jn)Dn=(Dn+(hn[jn]&255))%65521,Rn=(Rn+Dn)%65521;return Rn<<16|Dn}function Re(hn){if(!_e.isNodeJS)return Qe(hn);try{let Pn;parseInt(process.versions.node)>=8?Pn=hn:Pn=Buffer.from(hn);const kn=require$$5.deflateSync(Pn,{level:9});return kn instanceof Uint8Array?kn:new Uint8Array(kn)}catch(Pn){(0,xe.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Pn)}return Qe(hn)}function Qe(hn){let Pn=hn.length;const kn=65535,Dn=Math.ceil(Pn/kn),Rn=new Uint8Array(2+Pn+Dn*5+4);let jn=0;Rn[jn++]=120,Rn[jn++]=156;let zn=0;for(;Pn>kn;)Rn[jn++]=0,Rn[jn++]=255,Rn[jn++]=255,Rn[jn++]=0,Rn[jn++]=0,Rn.set(hn.subarray(zn,zn+kn),jn),jn+=kn,zn+=kn,Pn-=kn;Rn[jn++]=1,Rn[jn++]=Pn&255,Rn[jn++]=Pn>>8&255,Rn[jn++]=~Pn&65535&255,Rn[jn++]=(~Pn&65535)>>8&255,Rn.set(hn.subarray(zn),jn),jn+=hn.length-zn;const ii=dn(hn,0,hn.length);return Rn[jn++]=ii>>24&255,Rn[jn++]=ii>>16&255,Rn[jn++]=ii>>8&255,Rn[jn++]=ii&255,Rn}function cn(hn,Pn,kn,Dn){const Rn=hn.width,jn=hn.height;let zn,ii,an;const _n=hn.data;switch(Pn){case xe.ImageKind.GRAYSCALE_1BPP:ii=0,zn=1,an=Rn+7>>3;break;case xe.ImageKind.RGB_24BPP:ii=2,zn=8,an=Rn*3;break;case xe.ImageKind.RGBA_32BPP:ii=6,zn=8,an=Rn*4;break;default:throw new Error("invalid format")}const sn=new Uint8Array((1+an)*jn);let ze=0,Xe=0;for(let xn=0;xn<jn;++xn)sn[ze++]=0,sn.set(_n.subarray(Xe,Xe+an),ze),Xe+=an,ze+=an;if(Pn===xe.ImageKind.GRAYSCALE_1BPP&&Dn){ze=0;for(let xn=0;xn<jn;xn++){ze++;for(let Sn=0;Sn<an;Sn++)sn[ze++]^=255}}const rn=new Uint8Array([Rn>>24&255,Rn>>16&255,Rn>>8&255,Rn&255,jn>>24&255,jn>>16&255,jn>>8&255,jn&255,zn,ii,0,0,0]),gn=Re(sn),fn=Ue.length+Je*3+rn.length+gn.length,Nn=new Uint8Array(fn);let wn=0;return Nn.set(Ue,wn),wn+=Ue.length,tn("IHDR",rn,Nn,wn),wn+=Je+rn.length,tn("IDATA",gn,Nn,wn),wn+=Je+gn.length,tn("IEND",new Uint8Array(0),Nn,wn),He(Nn,"image/png",kn)}return function(Pn,kn,Dn){const Rn=Pn.kind===void 0?xe.ImageKind.GRAYSCALE_1BPP:Pn.kind;return cn(Pn,Rn,kn,Dn)}}();class qe{constructor(){this.fontSizeScale=1,this.fontWeight=Pe.fontWeight,this.fontSize=0,this.textMatrix=xe.IDENTITY_MATRIX,this.fontMatrix=xe.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=xe.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=Pe.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(Je,Ge){this.x=Je,this.y=Ge}}let Ye=0,nn=0,en=0;t.SVGGraphics=Ee=class{constructor(Ue,Je,Ge=!1){(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new qe,this.transformMatrix=xe.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=Ue,this.objs=Je,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!Ge,this._operatorIdMapping=[];for(const Me in xe.OPS)this._operatorIdMapping[xe.OPS[Me]]=Me}getObject(Ue,Je=null){return typeof Ue=="string"?Ue.startsWith("g_")?this.commonObjs.get(Ue):this.objs.get(Ue):Je}save(){this.transformStack.push(this.transformMatrix);const Ue=this.current;this.extraStack.push(Ue),this.current=Ue.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(Ue){this.save(),this.executeOpTree(Ue),this.restore()}loadDependencies(Ue){const Je=Ue.fnArray,Ge=Ue.argsArray;for(let Me=0,tn=Je.length;Me<tn;Me++)if(Je[Me]===xe.OPS.dependency)for(const dn of Ge[Me]){const Re=dn.startsWith("g_")?this.commonObjs:this.objs,Qe=new Promise(cn=>{Re.get(dn,cn)});this.current.dependencies.push(Qe)}return Promise.all(this.current.dependencies)}transform(Ue,Je,Ge,Me,tn,dn){const Re=[Ue,Je,Ge,Me,tn,dn];this.transformMatrix=xe.Util.transform(this.transformMatrix,Re),this.tgrp=null}getSVG(Ue,Je){this.viewport=Je;const Ge=this._initialize(Je);return this.loadDependencies(Ue).then(()=>(this.transformMatrix=xe.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(Ue)),Ge))}convertOpList(Ue){const Je=this._operatorIdMapping,Ge=Ue.argsArray,Me=Ue.fnArray,tn=[];for(let dn=0,Re=Me.length;dn<Re;dn++){const Qe=Me[dn];tn.push({fnId:Qe,fn:Je[Qe],args:Ge[dn]})}return De(tn)}executeOpTree(Ue){for(const Je of Ue){const Ge=Je.fn,Me=Je.fnId,tn=Je.args;switch(Me|0){case xe.OPS.beginText:this.beginText();break;case xe.OPS.dependency:break;case xe.OPS.setLeading:this.setLeading(tn);break;case xe.OPS.setLeadingMoveText:this.setLeadingMoveText(tn[0],tn[1]);break;case xe.OPS.setFont:this.setFont(tn);break;case xe.OPS.showText:this.showText(tn[0]);break;case xe.OPS.showSpacedText:this.showText(tn[0]);break;case xe.OPS.endText:this.endText();break;case xe.OPS.moveText:this.moveText(tn[0],tn[1]);break;case xe.OPS.setCharSpacing:this.setCharSpacing(tn[0]);break;case xe.OPS.setWordSpacing:this.setWordSpacing(tn[0]);break;case xe.OPS.setHScale:this.setHScale(tn[0]);break;case xe.OPS.setTextMatrix:this.setTextMatrix(tn[0],tn[1],tn[2],tn[3],tn[4],tn[5]);break;case xe.OPS.setTextRise:this.setTextRise(tn[0]);break;case xe.OPS.setTextRenderingMode:this.setTextRenderingMode(tn[0]);break;case xe.OPS.setLineWidth:this.setLineWidth(tn[0]);break;case xe.OPS.setLineJoin:this.setLineJoin(tn[0]);break;case xe.OPS.setLineCap:this.setLineCap(tn[0]);break;case xe.OPS.setMiterLimit:this.setMiterLimit(tn[0]);break;case xe.OPS.setFillRGBColor:this.setFillRGBColor(tn[0],tn[1],tn[2]);break;case xe.OPS.setStrokeRGBColor:this.setStrokeRGBColor(tn[0],tn[1],tn[2]);break;case xe.OPS.setStrokeColorN:this.setStrokeColorN(tn);break;case xe.OPS.setFillColorN:this.setFillColorN(tn);break;case xe.OPS.shadingFill:this.shadingFill(tn[0]);break;case xe.OPS.setDash:this.setDash(tn[0],tn[1]);break;case xe.OPS.setRenderingIntent:this.setRenderingIntent(tn[0]);break;case xe.OPS.setFlatness:this.setFlatness(tn[0]);break;case xe.OPS.setGState:this.setGState(tn[0]);break;case xe.OPS.fill:this.fill();break;case xe.OPS.eoFill:this.eoFill();break;case xe.OPS.stroke:this.stroke();break;case xe.OPS.fillStroke:this.fillStroke();break;case xe.OPS.eoFillStroke:this.eoFillStroke();break;case xe.OPS.clip:this.clip("nonzero");break;case xe.OPS.eoClip:this.clip("evenodd");break;case xe.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case xe.OPS.paintImageXObject:this.paintImageXObject(tn[0]);break;case xe.OPS.paintInlineImageXObject:this.paintInlineImageXObject(tn[0]);break;case xe.OPS.paintImageMaskXObject:this.paintImageMaskXObject(tn[0]);break;case xe.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(tn[0],tn[1]);break;case xe.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case xe.OPS.closePath:this.closePath();break;case xe.OPS.closeStroke:this.closeStroke();break;case xe.OPS.closeFillStroke:this.closeFillStroke();break;case xe.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case xe.OPS.nextLine:this.nextLine();break;case xe.OPS.transform:this.transform(tn[0],tn[1],tn[2],tn[3],tn[4],tn[5]);break;case xe.OPS.constructPath:this.constructPath(tn[0],tn[1]);break;case xe.OPS.endPath:this.endPath();break;case 92:this.group(Je.items);break;default:(0,xe.warn)(`Unimplemented operator ${Ge}`);break}}}setWordSpacing(Ue){this.current.wordSpacing=Ue}setCharSpacing(Ue){this.current.charSpacing=Ue}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(Ue,Je,Ge,Me,tn,dn){const Re=this.current;Re.textMatrix=Re.lineMatrix=[Ue,Je,Ge,Me,tn,dn],Re.textMatrixScale=Math.hypot(Ue,Je),Re.x=Re.lineX=0,Re.y=Re.lineY=0,Re.xcoords=[],Re.ycoords=[],Re.tspan=this.svgFactory.createElement("svg:tspan"),Re.tspan.setAttributeNS(null,"font-family",Re.fontFamily),Re.tspan.setAttributeNS(null,"font-size",`${Oe(Re.fontSize)}px`),Re.tspan.setAttributeNS(null,"y",Oe(-Re.y)),Re.txtElement=this.svgFactory.createElement("svg:text"),Re.txtElement.append(Re.tspan)}beginText(){const Ue=this.current;Ue.x=Ue.lineX=0,Ue.y=Ue.lineY=0,Ue.textMatrix=xe.IDENTITY_MATRIX,Ue.lineMatrix=xe.IDENTITY_MATRIX,Ue.textMatrixScale=1,Ue.tspan=this.svgFactory.createElement("svg:tspan"),Ue.txtElement=this.svgFactory.createElement("svg:text"),Ue.txtgrp=this.svgFactory.createElement("svg:g"),Ue.xcoords=[],Ue.ycoords=[]}moveText(Ue,Je){const Ge=this.current;Ge.x=Ge.lineX+=Ue,Ge.y=Ge.lineY+=Je,Ge.xcoords=[],Ge.ycoords=[],Ge.tspan=this.svgFactory.createElement("svg:tspan"),Ge.tspan.setAttributeNS(null,"font-family",Ge.fontFamily),Ge.tspan.setAttributeNS(null,"font-size",`${Oe(Ge.fontSize)}px`),Ge.tspan.setAttributeNS(null,"y",Oe(-Ge.y))}showText(Ue){const Je=this.current,Ge=Je.font,Me=Je.fontSize;if(Me===0)return;const tn=Je.fontSizeScale,dn=Je.charSpacing,Re=Je.wordSpacing,Qe=Je.fontDirection,cn=Je.textHScale*Qe,hn=Ge.vertical,Pn=hn?1:-1,kn=Ge.defaultVMetrics,Dn=Me*Je.fontMatrix[0];let Rn=0;for(const ii of Ue){if(ii===null){Rn+=Qe*Re;continue}else if(typeof ii=="number"){Rn+=Pn*ii*Me/1e3;continue}const an=(ii.isSpace?Re:0)+dn,_n=ii.fontChar;let sn,ze,Xe=ii.width;if(hn){let gn;const fn=ii.vmetric||kn;gn=ii.vmetric?fn[1]:Xe*.5,gn=-gn*Dn;const Nn=fn[2]*Dn;Xe=fn?-fn[0]:Xe,sn=gn/tn,ze=(Rn+Nn)/tn}else sn=Rn/tn,ze=0;(ii.isInFont||Ge.missingFile)&&(Je.xcoords.push(Je.x+sn),hn&&Je.ycoords.push(-Je.y+ze),Je.tspan.textContent+=_n);let rn;hn?rn=Xe*Dn-an*Qe:rn=Xe*Dn+an*Qe,Rn+=rn}Je.tspan.setAttributeNS(null,"x",Je.xcoords.map(Oe).join(" ")),hn?Je.tspan.setAttributeNS(null,"y",Je.ycoords.map(Oe).join(" ")):Je.tspan.setAttributeNS(null,"y",Oe(-Je.y)),hn?Je.y-=Rn:Je.x+=Rn*cn,Je.tspan.setAttributeNS(null,"font-family",Je.fontFamily),Je.tspan.setAttributeNS(null,"font-size",`${Oe(Je.fontSize)}px`),Je.fontStyle!==Pe.fontStyle&&Je.tspan.setAttributeNS(null,"font-style",Je.fontStyle),Je.fontWeight!==Pe.fontWeight&&Je.tspan.setAttributeNS(null,"font-weight",Je.fontWeight);const jn=Je.textRenderingMode&xe.TextRenderingMode.FILL_STROKE_MASK;if(jn===xe.TextRenderingMode.FILL||jn===xe.TextRenderingMode.FILL_STROKE?(Je.fillColor!==Pe.fillColor&&Je.tspan.setAttributeNS(null,"fill",Je.fillColor),Je.fillAlpha<1&&Je.tspan.setAttributeNS(null,"fill-opacity",Je.fillAlpha)):Je.textRenderingMode===xe.TextRenderingMode.ADD_TO_PATH?Je.tspan.setAttributeNS(null,"fill","transparent"):Je.tspan.setAttributeNS(null,"fill","none"),jn===xe.TextRenderingMode.STROKE||jn===xe.TextRenderingMode.FILL_STROKE){const ii=1/(Je.textMatrixScale||1);this._setStrokeAttributes(Je.tspan,ii)}let zn=Je.textMatrix;Je.textRise!==0&&(zn=zn.slice(),zn[5]+=Je.textRise),Je.txtElement.setAttributeNS(null,"transform",`${Be(zn)} scale(${Oe(cn)}, -1)`),Je.txtElement.setAttributeNS(Ce,"xml:space","preserve"),Je.txtElement.append(Je.tspan),Je.txtgrp.append(Je.txtElement),this._ensureTransformGroup().append(Je.txtElement)}setLeadingMoveText(Ue,Je){this.setLeading(-Je),this.moveText(Ue,Je)}addFontStyle(Ue){if(!Ue.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const Je=He(Ue.data,Ue.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${Ue.loadedName}"; src: url(${Je}); }
`}setFont(Ue){const Je=this.current,Ge=this.commonObjs.get(Ue[0]);let Me=Ue[1];Je.font=Ge,this.embedFonts&&!Ge.missingFile&&!this.embeddedFonts[Ge.loadedName]&&(this.addFontStyle(Ge),this.embeddedFonts[Ge.loadedName]=Ge),Je.fontMatrix=Ge.fontMatrix||xe.FONT_IDENTITY_MATRIX;let tn="normal";Ge.black?tn="900":Ge.bold&&(tn="bold");const dn=Ge.italic?"italic":"normal";Me<0?(Me=-Me,Je.fontDirection=-1):Je.fontDirection=1,Je.fontSize=Me,Je.fontFamily=Ge.loadedName,Je.fontWeight=tn,Je.fontStyle=dn,Je.tspan=this.svgFactory.createElement("svg:tspan"),Je.tspan.setAttributeNS(null,"y",Oe(-Je.y)),Je.xcoords=[],Je.ycoords=[]}endText(){var Je;const Ue=this.current;Ue.textRenderingMode&xe.TextRenderingMode.ADD_TO_PATH_FLAG&&((Je=Ue.txtElement)!=null&&Je.hasChildNodes())&&(Ue.element=Ue.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(Ue){Ue>0&&(this.current.lineWidth=Ue)}setLineCap(Ue){this.current.lineCap=Ie[Ue]}setLineJoin(Ue){this.current.lineJoin=Ve[Ue]}setMiterLimit(Ue){this.current.miterLimit=Ue}setStrokeAlpha(Ue){this.current.strokeAlpha=Ue}setStrokeRGBColor(Ue,Je,Ge){this.current.strokeColor=xe.Util.makeHexColor(Ue,Je,Ge)}setFillAlpha(Ue){this.current.fillAlpha=Ue}setFillRGBColor(Ue,Je,Ge){this.current.fillColor=xe.Util.makeHexColor(Ue,Je,Ge),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(Ue){this.current.strokeColor=this._makeColorN_Pattern(Ue)}setFillColorN(Ue){this.current.fillColor=this._makeColorN_Pattern(Ue)}shadingFill(Ue){const Je=this.viewport.width,Ge=this.viewport.height,Me=xe.Util.inverseTransform(this.transformMatrix),tn=xe.Util.applyTransform([0,0],Me),dn=xe.Util.applyTransform([0,Ge],Me),Re=xe.Util.applyTransform([Je,0],Me),Qe=xe.Util.applyTransform([Je,Ge],Me),cn=Math.min(tn[0],dn[0],Re[0],Qe[0]),hn=Math.min(tn[1],dn[1],Re[1],Qe[1]),Pn=Math.max(tn[0],dn[0],Re[0],Qe[0]),kn=Math.max(tn[1],dn[1],Re[1],Qe[1]),Dn=this.svgFactory.createElement("svg:rect");Dn.setAttributeNS(null,"x",cn),Dn.setAttributeNS(null,"y",hn),Dn.setAttributeNS(null,"width",Pn-cn),Dn.setAttributeNS(null,"height",kn-hn),Dn.setAttributeNS(null,"fill",this._makeShadingPattern(Ue)),this.current.fillAlpha<1&&Dn.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Dn)}_makeColorN_Pattern(Ue){return Ue[0]==="TilingPattern"?this._makeTilingPattern(Ue):this._makeShadingPattern(Ue)}_makeTilingPattern(Ue){const Je=Ue[1],Ge=Ue[2],Me=Ue[3]||xe.IDENTITY_MATRIX,[tn,dn,Re,Qe]=Ue[4],cn=Ue[5],hn=Ue[6],Pn=Ue[7],kn=`shading${en++}`,[Dn,Rn,jn,zn]=xe.Util.normalizeRect([...xe.Util.applyTransform([tn,dn],Me),...xe.Util.applyTransform([Re,Qe],Me)]),[ii,an]=xe.Util.singularValueDecompose2dScale(Me),_n=cn*ii,sn=hn*an,ze=this.svgFactory.createElement("svg:pattern");ze.setAttributeNS(null,"id",kn),ze.setAttributeNS(null,"patternUnits","userSpaceOnUse"),ze.setAttributeNS(null,"width",_n),ze.setAttributeNS(null,"height",sn),ze.setAttributeNS(null,"x",`${Dn}`),ze.setAttributeNS(null,"y",`${Rn}`);const Xe=this.svg,rn=this.transformMatrix,gn=this.current.fillColor,fn=this.current.strokeColor,Nn=this.svgFactory.create(jn-Dn,zn-Rn);if(this.svg=Nn,this.transformMatrix=Me,Pn===2){const wn=xe.Util.makeHexColor(...Je);this.current.fillColor=wn,this.current.strokeColor=wn}return this.executeOpTree(this.convertOpList(Ge)),this.svg=Xe,this.transformMatrix=rn,this.current.fillColor=gn,this.current.strokeColor=fn,ze.append(Nn.childNodes[0]),this.defs.append(ze),`url(#${kn})`}_makeShadingPattern(Ue){switch(typeof Ue=="string"&&(Ue=this.objs.get(Ue)),Ue[0]){case"RadialAxial":const Je=`shading${en++}`,Ge=Ue[3];let Me;switch(Ue[1]){case"axial":const tn=Ue[4],dn=Ue[5];Me=this.svgFactory.createElement("svg:linearGradient"),Me.setAttributeNS(null,"id",Je),Me.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Me.setAttributeNS(null,"x1",tn[0]),Me.setAttributeNS(null,"y1",tn[1]),Me.setAttributeNS(null,"x2",dn[0]),Me.setAttributeNS(null,"y2",dn[1]);break;case"radial":const Re=Ue[4],Qe=Ue[5],cn=Ue[6],hn=Ue[7];Me=this.svgFactory.createElement("svg:radialGradient"),Me.setAttributeNS(null,"id",Je),Me.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Me.setAttributeNS(null,"cx",Qe[0]),Me.setAttributeNS(null,"cy",Qe[1]),Me.setAttributeNS(null,"r",hn),Me.setAttributeNS(null,"fx",Re[0]),Me.setAttributeNS(null,"fy",Re[1]),Me.setAttributeNS(null,"fr",cn);break;default:throw new Error(`Unknown RadialAxial type: ${Ue[1]}`)}for(const tn of Ge){const dn=this.svgFactory.createElement("svg:stop");dn.setAttributeNS(null,"offset",tn[0]),dn.setAttributeNS(null,"stop-color",tn[1]),Me.append(dn)}return this.defs.append(Me),`url(#${Je})`;case"Mesh":return(0,xe.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${Ue[0]}`)}}setDash(Ue,Je){this.current.dashArray=Ue,this.current.dashPhase=Je}constructPath(Ue,Je){const Ge=this.current;let Me=Ge.x,tn=Ge.y,dn=[],Re=0;for(const Qe of Ue)switch(Qe|0){case xe.OPS.rectangle:Me=Je[Re++],tn=Je[Re++];const cn=Je[Re++],hn=Je[Re++],Pn=Me+cn,kn=tn+hn;dn.push("M",Oe(Me),Oe(tn),"L",Oe(Pn),Oe(tn),"L",Oe(Pn),Oe(kn),"L",Oe(Me),Oe(kn),"Z");break;case xe.OPS.moveTo:Me=Je[Re++],tn=Je[Re++],dn.push("M",Oe(Me),Oe(tn));break;case xe.OPS.lineTo:Me=Je[Re++],tn=Je[Re++],dn.push("L",Oe(Me),Oe(tn));break;case xe.OPS.curveTo:Me=Je[Re+4],tn=Je[Re+5],dn.push("C",Oe(Je[Re]),Oe(Je[Re+1]),Oe(Je[Re+2]),Oe(Je[Re+3]),Oe(Me),Oe(tn)),Re+=6;break;case xe.OPS.curveTo2:dn.push("C",Oe(Me),Oe(tn),Oe(Je[Re]),Oe(Je[Re+1]),Oe(Je[Re+2]),Oe(Je[Re+3])),Me=Je[Re+2],tn=Je[Re+3],Re+=4;break;case xe.OPS.curveTo3:Me=Je[Re+2],tn=Je[Re+3],dn.push("C",Oe(Je[Re]),Oe(Je[Re+1]),Oe(Me),Oe(tn),Oe(Me),Oe(tn)),Re+=4;break;case xe.OPS.closePath:dn.push("Z");break}dn=dn.join(" "),Ge.path&&Ue.length>0&&Ue[0]!==xe.OPS.rectangle&&Ue[0]!==xe.OPS.moveTo?dn=Ge.path.getAttributeNS(null,"d")+dn:(Ge.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(Ge.path)),Ge.path.setAttributeNS(null,"d",dn),Ge.path.setAttributeNS(null,"fill","none"),Ge.element=Ge.path,Ge.setCurrentPoint(Me,tn)}endPath(){const Ue=this.current;if(Ue.path=null,!this.pendingClip)return;if(!Ue.element){this.pendingClip=null;return}const Je=`clippath${Ye++}`,Ge=this.svgFactory.createElement("svg:clipPath");Ge.setAttributeNS(null,"id",Je),Ge.setAttributeNS(null,"transform",Be(this.transformMatrix));const Me=Ue.element.cloneNode(!0);if(this.pendingClip==="evenodd"?Me.setAttributeNS(null,"clip-rule","evenodd"):Me.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,Ge.append(Me),this.defs.append(Ge),Ue.activeClipUrl){Ue.clipGroup=null;for(const tn of this.extraStack)tn.clipGroup=null;Ge.setAttributeNS(null,"clip-path",Ue.activeClipUrl)}Ue.activeClipUrl=`url(#${Je})`,this.tgrp=null}clip(Ue){this.pendingClip=Ue}closePath(){const Ue=this.current;if(Ue.path){const Je=`${Ue.path.getAttributeNS(null,"d")}Z`;Ue.path.setAttributeNS(null,"d",Je)}}setLeading(Ue){this.current.leading=-Ue}setTextRise(Ue){this.current.textRise=Ue}setTextRenderingMode(Ue){this.current.textRenderingMode=Ue}setHScale(Ue){this.current.textHScale=Ue/100}setRenderingIntent(Ue){}setFlatness(Ue){}setGState(Ue){for(const[Je,Ge]of Ue)switch(Je){case"LW":this.setLineWidth(Ge);break;case"LC":this.setLineCap(Ge);break;case"LJ":this.setLineJoin(Ge);break;case"ML":this.setMiterLimit(Ge);break;case"D":this.setDash(Ge[0],Ge[1]);break;case"RI":this.setRenderingIntent(Ge);break;case"FL":this.setFlatness(Ge);break;case"Font":this.setFont(Ge);break;case"CA":this.setStrokeAlpha(Ge);break;case"ca":this.setFillAlpha(Ge);break;default:(0,xe.warn)(`Unimplemented graphic state operator ${Je}`);break}}fill(){const Ue=this.current;Ue.element&&(Ue.element.setAttributeNS(null,"fill",Ue.fillColor),Ue.element.setAttributeNS(null,"fill-opacity",Ue.fillAlpha),this.endPath())}stroke(){const Ue=this.current;Ue.element&&(this._setStrokeAttributes(Ue.element),Ue.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(Ue,Je=1){const Ge=this.current;let Me=Ge.dashArray;Je!==1&&Me.length>0&&(Me=Me.map(function(tn){return Je*tn})),Ue.setAttributeNS(null,"stroke",Ge.strokeColor),Ue.setAttributeNS(null,"stroke-opacity",Ge.strokeAlpha),Ue.setAttributeNS(null,"stroke-miterlimit",Oe(Ge.miterLimit)),Ue.setAttributeNS(null,"stroke-linecap",Ge.lineCap),Ue.setAttributeNS(null,"stroke-linejoin",Ge.lineJoin),Ue.setAttributeNS(null,"stroke-width",Oe(Je*Ge.lineWidth)+"px"),Ue.setAttributeNS(null,"stroke-dasharray",Me.map(Oe).join(" ")),Ue.setAttributeNS(null,"stroke-dashoffset",Oe(Je*Ge.dashPhase)+"px")}eoFill(){var Ue;(Ue=this.current.element)==null||Ue.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var Ue;(Ue=this.current.element)==null||Ue.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const Ue=this.svgFactory.createElement("svg:rect");Ue.setAttributeNS(null,"x","0"),Ue.setAttributeNS(null,"y","0"),Ue.setAttributeNS(null,"width","1px"),Ue.setAttributeNS(null,"height","1px"),Ue.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(Ue)}paintImageXObject(Ue){const Je=this.getObject(Ue);if(!Je){(0,xe.warn)(`Dependent image with object ID ${Ue} is not ready yet`);return}this.paintInlineImageXObject(Je)}paintInlineImageXObject(Ue,Je){const Ge=Ue.width,Me=Ue.height,tn=ke(Ue,this.forceDataSchema,!!Je),dn=this.svgFactory.createElement("svg:rect");dn.setAttributeNS(null,"x","0"),dn.setAttributeNS(null,"y","0"),dn.setAttributeNS(null,"width",Oe(Ge)),dn.setAttributeNS(null,"height",Oe(Me)),this.current.element=dn,this.clip("nonzero");const Re=this.svgFactory.createElement("svg:image");Re.setAttributeNS(Te,"xlink:href",tn),Re.setAttributeNS(null,"x","0"),Re.setAttributeNS(null,"y",Oe(-Me)),Re.setAttributeNS(null,"width",Oe(Ge)+"px"),Re.setAttributeNS(null,"height",Oe(Me)+"px"),Re.setAttributeNS(null,"transform",`scale(${Oe(1/Ge)} ${Oe(-1/Me)})`),Je?Je.append(Re):this._ensureTransformGroup().append(Re)}paintImageMaskXObject(Ue){const Je=this.getObject(Ue.data,Ue);if(Je.bitmap){(0,xe.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const Ge=this.current,Me=Je.width,tn=Je.height,dn=Ge.fillColor;Ge.maskId=`mask${nn++}`;const Re=this.svgFactory.createElement("svg:mask");Re.setAttributeNS(null,"id",Ge.maskId);const Qe=this.svgFactory.createElement("svg:rect");Qe.setAttributeNS(null,"x","0"),Qe.setAttributeNS(null,"y","0"),Qe.setAttributeNS(null,"width",Oe(Me)),Qe.setAttributeNS(null,"height",Oe(tn)),Qe.setAttributeNS(null,"fill",dn),Qe.setAttributeNS(null,"mask",`url(#${Ge.maskId})`),this.defs.append(Re),this._ensureTransformGroup().append(Qe),this.paintInlineImageXObject(Je,Re)}paintFormXObjectBegin(Ue,Je){if(Array.isArray(Ue)&&Ue.length===6&&this.transform(Ue[0],Ue[1],Ue[2],Ue[3],Ue[4],Ue[5]),Je){const Ge=Je[2]-Je[0],Me=Je[3]-Je[1],tn=this.svgFactory.createElement("svg:rect");tn.setAttributeNS(null,"x",Je[0]),tn.setAttributeNS(null,"y",Je[1]),tn.setAttributeNS(null,"width",Oe(Ge)),tn.setAttributeNS(null,"height",Oe(Me)),this.current.element=tn,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(Ue){const Je=this.svgFactory.create(Ue.width,Ue.height),Ge=this.svgFactory.createElement("svg:defs");Je.append(Ge),this.defs=Ge;const Me=this.svgFactory.createElement("svg:g");return Me.setAttributeNS(null,"transform",Be(Ue.transform)),Je.append(Me),this.svg=Me,Je}_ensureClipGroup(){if(!this.current.clipGroup){const Ue=this.svgFactory.createElement("svg:g");Ue.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(Ue),this.current.clipGroup=Ue}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",Be(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var St=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](St,St.exports,__w_pdfjs_require__),St.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return _e.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return Ee.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return Pe.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return Ce.GlobalWorkerOptions}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return St.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return St.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return Te.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return Ie.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return St.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return St.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return r.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return xe.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return r.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return xe.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return St.version}});var t=__w_pdfjs_require__(1),St=__w_pdfjs_require__(2),r=__w_pdfjs_require__(6),xe=__w_pdfjs_require__(26),_e=__w_pdfjs_require__(27),Ee=__w_pdfjs_require__(5),Pe=__w_pdfjs_require__(32),Ce=__w_pdfjs_require__(14),Te=__w_pdfjs_require__(35),Ie=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const AnnotationLayer="",TextLayer="";pdfExports.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfExports.version}/pdf.worker.js`;dayjs.extend(calendar);const Messages=({isOwner:e,sender:t,receiver:St})=>{const r=useDispatch(),xe=reactExports.useRef(),{imagePath:_e}=appConfig,[Ee,Pe]=reactExports.useState(null),[Ce,Te]=reactExports.useState(1),{messages:Ie,deleteMessageStatus:Ve}=useSelector(ke=>ke.chat.data),{profile:He}=useSelector(ke=>ke.auth.user);return console.log(Ee),console.log(Ce),reactExports.useEffect(()=>{Ve!=="idle"&&(()=>{toast.push(jsxRuntimeExports.jsx(Notification,{title:`${Ve==="success"?"Success":"Error"}`,type:`${Ve==="success"?"success":"danger"}`,duration:3e3,children:Ve==="success"?"Message deleted successfully!":"Looks like something went wrong, please try again."}),{placement:"top-center"})})(),r(setDeleteMessageStatus("idle"))},[Ve,r]),reactExports.useEffect(()=>{var ke;(ke=xe.current)==null||ke.scrollIntoView({behavior:"smooth"})},[Ie]),jsxRuntimeExports.jsx(AnimatePresence,{className:"",children:Ie==null?void 0:Ie.map(ke=>{var De,Oe;const qe=e(ke);return jsxRuntimeExports.jsxs(motion.div,{ref:xe,initial:{opacity:0,visibility:"hidden"},animate:{opacity:1,visibility:"visible"},transition:{duration:.3,type:"tween"},exit:{opacity:0,visibility:"hidden"},layoutId:ke.id,className:classNames("flex gap-2 items-start",qe?"justify-end":"justify-start"),children:[!qe&&jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Avatar,{src:`${_e}/${((De=St==null?void 0:St.service)==null?void 0:De.banner)||(St==null?void 0:St.image)}`,size:"sm",shape:"circle"})}),jsxRuntimeExports.jsxs("div",{className:"mb-4 max-w-[80%] w-fit",children:[jsxRuntimeExports.jsx(Card,{className:classNames("max-w-[100%] w-full",qe?"bg-primary-500 text-white":""),children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[ke.message&&jsxRuntimeExports.jsx("p",{children:ke.message}),ke.file&&jsxRuntimeExports.jsx(Image$1,{src:`${_e}/${ke.file}`,alt:""})]})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("p",{className:"text-left",children:dayjs(ke.created_at).format("DD MMM, YYYY - h:mm A")})})]}),qe&&jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Avatar,{src:`${_e}/${((Oe=He==null?void 0:He.service)==null?void 0:Oe.banner)||(He==null?void 0:He.image)}`,size:"sm",shape:"circle"})})]},ke.id)})})},useFocus=()=>{const e=reactExports.useRef(null);return[e,()=>{e.current&&e.current.focus()}]},useCompressFile=()=>{const[e,t]=reactExports.useState(null),[St,r]=reactExports.useState(null);return{compressFile:async(Ee,Pe)=>{const Ce={maxSizeMB:Pe||.1,maxWidthOrHeight:800,useWebWorker:!0};try{const Te=await imageCompression(Ee,Ce);t(Te)}catch(Te){r(Te)}},compressedFile:e,compressedFileError:St,resetCompressedFile:()=>{t(null),r(null)}}},MessageBox=({receiver:e,onCreateInvoice:t})=>{const St=useDispatch(),{compressFile:r,compressedFile:xe,resetCompressedFile:_e}=useCompressFile(),[Ee,Pe]=reactExports.useState(null),[Ce,Te]=reactExports.useState(""),[Ie,Ve]=useFocus(),He=useDropdownMenuContext(),{file:ke,invoice:qe}=useSelector(Me=>Me.chat.state),{chat:De,messageStatus:Oe,sentMessage:Be}=useSelector(Me=>Me.chat.data),{userType:Ye,profile:nn,onlineUsers:en}=useSelector(Me=>Me.auth.user),Ue=Me=>{Pe(URL.createObjectURL(Me[0])),r(Me[0],.15)},Je=Me=>{var tn;Te((tn=Me.target)==null?void 0:tn.value)},Ge=()=>{const Me=()=>{toast.push(jsxRuntimeExports.jsx(Notification,{title:"Error",type:"warning",duration:3e3,children:"Please enter a message..."}),{placement:"top-center"})};if(Ce.length<1){Me(),Ve();return}St(sendMessage({chat_id:De==null?void 0:De.id,sender_id:nn==null?void 0:nn.id,file:xe,message:Ce,invoice:qe})),St(setFile({})),Te(""),St(setInvoice({})),_e()};return reactExports.useEffect(()=>{const Me=en==null?void 0:en.some(tn=>tn.userId===(e==null?void 0:e.id));console.log(Me)},[Oe,en]),reactExports.useEffect(()=>{Oe==="sent"&&(St(sendNewMessageEmail({sender_id:nn==null?void 0:nn.id,receiver_id:e==null?void 0:e.id})),sendPushNotification({app_id:"9749386f-0c3b-417c-b986-3447a73296cd",channel_for_external_user_ids:"push",include_external_user_ids:[`${e==null?void 0:e.id}`],url:`${appConfig.appURL}/requests`,contents:{en:`Hello ${e==null?void 0:e.username}, you have a new message. ${nn==null?void 0:nn.username} is waiting for your reply.`},content_available:!0}))},[St,Oe,Be]),reactExports.useEffect(()=>{Oe!=="idle"&&St(setMessageStatus("idle"))},[St,Oe]),reactExports.useEffect(()=>{xe!==null&&(St(setFile(xe)),ke!=={}&&St(sendMessage({chat_id:De==null?void 0:De.id,sender_id:nn==null?void 0:nn.id,file:xe})),St(setFile({})),_e()),He.closeMenu()},[xe,St]),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(index,{className:"w-full block text-sm outline-none p-3 bg-gray-100 overflow-auto resize-none rounded-md border-0 active:border-0",onChange:Je,value:Ce,placeholder:"Type here...",maxRows:6,minRows:1,ref:Ie}),jsxRuntimeExports.jsx("div",{className:"hover:bg-emerald-50 hover:shadow-md cursor-pointer transition duration-300 w-8 h-8 flex items-center justify-center rounded-full",children:jsxRuntimeExports.jsx(BsEmojiSmile,{className:"text-2xl"})}),jsxRuntimeExports.jsx("div",{className:"hover:bg-emerald-50 hover:shadow-md cursor-pointer transition duration-300 w-8 h-8 flex items-center justify-center rounded-full",children:jsxRuntimeExports.jsxs(Dropdown,{customToggleClass:"flex",placement:"top-end",renderTitle:jsxRuntimeExports.jsx(EllipsisButton,{icon:jsxRuntimeExports.jsx(IoIosAddCircleOutline,{className:"text-3xl text-gray-600"}),variant:"twoTone",shape:"round"}),children:[jsxRuntimeExports.jsx(Dropdown.Item,{style:{justifyContent:"flex-start"},children:jsxRuntimeExports.jsxs(Upload,{className:"flex items-center gap-2 w-full h-full",onChange:Ue,showList:!1,uploadLimit:1,accept:"image/*",children:[jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(FaFileImage,{className:"text-lg"})}),jsxRuntimeExports.jsx("span",{children:"File"})]})}),Ye==="Provider"&&jsxRuntimeExports.jsxs(Dropdown.Item,{eventKey:"Invoice",onClick:t,style:{justifyContent:"flex-start"},children:[jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(FaFileInvoiceDollar,{className:"text-lg"})}),jsxRuntimeExports.jsx("span",{children:"Invoice"})]})]})}),jsxRuntimeExports.jsx("div",{className:"w-fit",children:jsxRuntimeExports.jsx("div",{onClick:Ge,className:"bg-blue-500 hover:bg-blue-600 text-white hover:shadow-md cursor-pointer transition duration-300 w-12 h-12 flex items-center justify-center rounded-full",children:jsxRuntimeExports.jsx(IoIosSend,{className:"text-3xl"})})})]})};function resolveUrl(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const St=document.implementation.createHTMLDocument(),r=St.createElement("base"),xe=St.createElement("a");return St.head.appendChild(r),St.body.appendChild(xe),t&&(r.href=t),xe.href=e,xe.href}const uuid=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function toArray(e){const t=[];for(let St=0,r=e.length;St<r;St++)t.push(e[St]);return t}function px(e,t){const r=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return r?parseFloat(r.replace("px","")):0}function getNodeWidth(e){const t=px(e,"border-left-width"),St=px(e,"border-right-width");return e.clientWidth+t+St}function getNodeHeight(e){const t=px(e,"border-top-width"),St=px(e,"border-bottom-width");return e.clientHeight+t+St}function getImageSize(e,t={}){const St=t.width||getNodeWidth(e),r=t.height||getNodeHeight(e);return{width:St,height:r}}function getPixelRatio(){let e,t;try{t=process}catch{}const St=t&&t.env?t.env.devicePixelRatio:null;return St&&(e=parseInt(St,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const canvasDimensionLimit=16384;function checkCanvasDimensions(e){(e.width>canvasDimensionLimit||e.height>canvasDimensionLimit)&&(e.width>canvasDimensionLimit&&e.height>canvasDimensionLimit?e.width>e.height?(e.height*=canvasDimensionLimit/e.width,e.width=canvasDimensionLimit):(e.width*=canvasDimensionLimit/e.height,e.height=canvasDimensionLimit):e.width>canvasDimensionLimit?(e.height*=canvasDimensionLimit/e.width,e.width=canvasDimensionLimit):(e.width*=canvasDimensionLimit/e.height,e.height=canvasDimensionLimit))}function createImage(e){return new Promise((t,St)=>{const r=new Image;r.decode=()=>t(r),r.onload=()=>t(r),r.onerror=St,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function svgToDataURL(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function nodeToDataURL(e,t,St){const r="http://www.w3.org/2000/svg",xe=document.createElementNS(r,"svg"),_e=document.createElementNS(r,"foreignObject");return xe.setAttribute("width",`${t}`),xe.setAttribute("height",`${St}`),xe.setAttribute("viewBox",`0 0 ${t} ${St}`),_e.setAttribute("width","100%"),_e.setAttribute("height","100%"),_e.setAttribute("x","0"),_e.setAttribute("y","0"),_e.setAttribute("externalResourcesRequired","true"),xe.appendChild(_e),_e.appendChild(e),svgToDataURL(xe)}const isInstanceOfElement=(e,t)=>{if(e instanceof t)return!0;const St=Object.getPrototypeOf(e);return St===null?!1:St.constructor.name===t.name||isInstanceOfElement(St,t)};function formatCSSText(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function formatCSSProperties(e){return toArray(e).map(t=>{const St=e.getPropertyValue(t),r=e.getPropertyPriority(t);return`${t}: ${St}${r?" !important":""};`}).join(" ")}function getPseudoElementStyle(e,t,St){const r=`.${e}:${t}`,xe=St.cssText?formatCSSText(St):formatCSSProperties(St);return document.createTextNode(`${r}{${xe}}`)}function clonePseudoElement(e,t,St){const r=window.getComputedStyle(e,St),xe=r.getPropertyValue("content");if(xe===""||xe==="none")return;const _e=uuid();try{t.className=`${t.className} ${_e}`}catch{return}const Ee=document.createElement("style");Ee.appendChild(getPseudoElementStyle(_e,St,r)),t.appendChild(Ee)}function clonePseudoElements(e,t){clonePseudoElement(e,t,":before"),clonePseudoElement(e,t,":after")}const WOFF="application/font-woff",JPEG="image/jpeg",mimes={woff:WOFF,woff2:WOFF,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:JPEG,jpeg:JPEG,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function getExtension(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function getMimeType(e){const t=getExtension(e).toLowerCase();return mimes[t]||""}function getContentFromDataUrl(e){return e.split(/,/)[1]}function isDataUrl(e){return e.search(/^(data:)/)!==-1}function makeDataUrl(e,t){return`data:${t};base64,${e}`}async function fetchAsDataURL(e,t,St){const r=await fetch(e,t);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const xe=await r.blob();return new Promise((_e,Ee)=>{const Pe=new FileReader;Pe.onerror=Ee,Pe.onloadend=()=>{try{_e(St({res:r,result:Pe.result}))}catch(Ce){Ee(Ce)}},Pe.readAsDataURL(xe)})}const cache={};function getCacheKey(e,t,St){let r=e.replace(/\?.*/,"");return St&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}async function resourceToDataURL(e,t,St){const r=getCacheKey(e,t,St.includeQueryParams);if(cache[r]!=null)return cache[r];St.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let xe;try{const _e=await fetchAsDataURL(e,St.fetchRequestInit,({res:Ee,result:Pe})=>(t||(t=Ee.headers.get("Content-Type")||""),getContentFromDataUrl(Pe)));xe=makeDataUrl(_e,t)}catch(_e){xe=St.imagePlaceholder||"";let Ee=`Failed to fetch resource: ${e}`;_e&&(Ee=typeof _e=="string"?_e:_e.message),Ee&&console.warn(Ee)}return cache[r]=xe,xe}async function cloneCanvasElement(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):createImage(t)}async function cloneVideoElement(e,t){if(e.currentSrc){const _e=document.createElement("canvas"),Ee=_e.getContext("2d");_e.width=e.clientWidth,_e.height=e.clientHeight,Ee==null||Ee.drawImage(e,0,0,_e.width,_e.height);const Pe=_e.toDataURL();return createImage(Pe)}const St=e.poster,r=getMimeType(St),xe=await resourceToDataURL(St,r,t);return createImage(xe)}async function cloneIFrameElement(e){var t;try{if(!((t=e==null?void 0:e.contentDocument)===null||t===void 0)&&t.body)return await cloneNode(e.contentDocument.body,{},!0)}catch{}return e.cloneNode(!1)}async function cloneSingleNode(e,t){return isInstanceOfElement(e,HTMLCanvasElement)?cloneCanvasElement(e):isInstanceOfElement(e,HTMLVideoElement)?cloneVideoElement(e,t):isInstanceOfElement(e,HTMLIFrameElement)?cloneIFrameElement(e):e.cloneNode(!1)}const isSlotElement=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT";async function cloneChildren(e,t,St){var r,xe;let _e=[];return isSlotElement(e)&&e.assignedNodes?_e=toArray(e.assignedNodes()):isInstanceOfElement(e,HTMLIFrameElement)&&(!((r=e.contentDocument)===null||r===void 0)&&r.body)?_e=toArray(e.contentDocument.body.childNodes):_e=toArray(((xe=e.shadowRoot)!==null&&xe!==void 0?xe:e).childNodes),_e.length===0||isInstanceOfElement(e,HTMLVideoElement)||await _e.reduce((Ee,Pe)=>Ee.then(()=>cloneNode(Pe,St)).then(Ce=>{Ce&&t.appendChild(Ce)}),Promise.resolve()),t}function cloneCSSStyle(e,t){const St=t.style;if(!St)return;const r=window.getComputedStyle(e);r.cssText?(St.cssText=r.cssText,St.transformOrigin=r.transformOrigin):toArray(r).forEach(xe=>{let _e=r.getPropertyValue(xe);xe==="font-size"&&_e.endsWith("px")&&(_e=`${Math.floor(parseFloat(_e.substring(0,_e.length-2)))-.1}px`),isInstanceOfElement(e,HTMLIFrameElement)&&xe==="display"&&_e==="inline"&&(_e="block"),xe==="d"&&t.getAttribute("d")&&(_e=`path(${t.getAttribute("d")})`),St.setProperty(xe,_e,r.getPropertyPriority(xe))})}function cloneInputValue(e,t){isInstanceOfElement(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),isInstanceOfElement(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function cloneSelectValue(e,t){if(isInstanceOfElement(e,HTMLSelectElement)){const St=t,r=Array.from(St.children).find(xe=>e.value===xe.getAttribute("value"));r&&r.setAttribute("selected","")}}function decorate(e,t){return isInstanceOfElement(t,Element)&&(cloneCSSStyle(e,t),clonePseudoElements(e,t),cloneInputValue(e,t),cloneSelectValue(e,t)),t}async function ensureSVGSymbols(e,t){const St=e.querySelectorAll?e.querySelectorAll("use"):[];if(St.length===0)return e;const r={};for(let _e=0;_e<St.length;_e++){const Pe=St[_e].getAttribute("xlink:href");if(Pe){const Ce=e.querySelector(Pe),Te=document.querySelector(Pe);!Ce&&Te&&!r[Pe]&&(r[Pe]=await cloneNode(Te,t,!0))}}const xe=Object.values(r);if(xe.length){const _e="http://www.w3.org/1999/xhtml",Ee=document.createElementNS(_e,"svg");Ee.setAttribute("xmlns",_e),Ee.style.position="absolute",Ee.style.width="0",Ee.style.height="0",Ee.style.overflow="hidden",Ee.style.display="none";const Pe=document.createElementNS(_e,"defs");Ee.appendChild(Pe);for(let Ce=0;Ce<xe.length;Ce++)Pe.appendChild(xe[Ce]);e.appendChild(Ee)}return e}async function cloneNode(e,t,St){return!St&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(r=>cloneSingleNode(r,t)).then(r=>cloneChildren(e,r,t)).then(r=>decorate(e,r)).then(r=>ensureSVGSymbols(r,t))}const URL_REGEX=/url\((['"]?)([^'"]+?)\1\)/g,URL_WITH_FORMAT_REGEX=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,FONT_SRC_REGEX=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function toRegex(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function parseURLs(e){const t=[];return e.replace(URL_REGEX,(St,r,xe)=>(t.push(xe),St)),t.filter(St=>!isDataUrl(St))}async function embed(e,t,St,r,xe){try{const _e=St?resolveUrl(t,St):t,Ee=getMimeType(t);let Pe;if(xe){const Ce=await xe(_e);Pe=makeDataUrl(Ce,Ee)}else Pe=await resourceToDataURL(_e,Ee,r);return e.replace(toRegex(t),`$1${Pe}$3`)}catch{}return e}function filterPreferredFontFormat(e,{preferredFontFormat:t}){return t?e.replace(FONT_SRC_REGEX,St=>{for(;;){const[r,,xe]=URL_WITH_FORMAT_REGEX.exec(St)||[];if(!xe)return"";if(xe===t)return`src: ${r};`}}):e}function shouldEmbed(e){return e.search(URL_REGEX)!==-1}async function embedResources(e,t,St){if(!shouldEmbed(e))return e;const r=filterPreferredFontFormat(e,St);return parseURLs(r).reduce((_e,Ee)=>_e.then(Pe=>embed(Pe,Ee,t,St)),Promise.resolve(r))}async function embedProp(e,t,St){var r;const xe=(r=t.style)===null||r===void 0?void 0:r.getPropertyValue(e);if(xe){const _e=await embedResources(xe,null,St);return t.style.setProperty(e,_e,t.style.getPropertyPriority(e)),!0}return!1}async function embedBackground(e,t){await embedProp("background",e,t)||await embedProp("background-image",e,t),await embedProp("mask",e,t)||await embedProp("mask-image",e,t)}async function embedImageNode(e,t){const St=isInstanceOfElement(e,HTMLImageElement);if(!(St&&!isDataUrl(e.src))&&!(isInstanceOfElement(e,SVGImageElement)&&!isDataUrl(e.href.baseVal)))return;const r=St?e.src:e.href.baseVal,xe=await resourceToDataURL(r,getMimeType(r),t);await new Promise((_e,Ee)=>{e.onload=_e,e.onerror=Ee;const Pe=e;Pe.decode&&(Pe.decode=_e),Pe.loading==="lazy"&&(Pe.loading="eager"),St?(e.srcset="",e.src=xe):e.href.baseVal=xe})}async function embedChildren(e,t){const r=toArray(e.childNodes).map(xe=>embedImages(xe,t));await Promise.all(r).then(()=>e)}async function embedImages(e,t){isInstanceOfElement(e,Element)&&(await embedBackground(e,t),await embedImageNode(e,t),await embedChildren(e,t))}function applyStyle(e,t){const{style:St}=e;t.backgroundColor&&(St.backgroundColor=t.backgroundColor),t.width&&(St.width=`${t.width}px`),t.height&&(St.height=`${t.height}px`);const r=t.style;return r!=null&&Object.keys(r).forEach(xe=>{St[xe]=r[xe]}),e}const cssFetchCache={};async function fetchCSS(e){let t=cssFetchCache[e];if(t!=null)return t;const r=await(await fetch(e)).text();return t={url:e,cssText:r},cssFetchCache[e]=t,t}async function embedFonts(e,t){let St=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,_e=(St.match(/url\([^)]+\)/g)||[]).map(async Ee=>{let Pe=Ee.replace(r,"$1");return Pe.startsWith("https://")||(Pe=new URL(Pe,e.url).href),fetchAsDataURL(Pe,t.fetchRequestInit,({result:Ce})=>(St=St.replace(Ee,`url(${Ce})`),[Ee,Ce]))});return Promise.all(_e).then(()=>St)}function parseCSS(e){if(e==null)return[];const t=[],St=/(\/\*[\s\S]*?\*\/)/gi;let r=e.replace(St,"");const xe=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const Ce=xe.exec(r);if(Ce===null)break;t.push(Ce[0])}r=r.replace(xe,"");const _e=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,Ee="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",Pe=new RegExp(Ee,"gi");for(;;){let Ce=_e.exec(r);if(Ce===null){if(Ce=Pe.exec(r),Ce===null)break;_e.lastIndex=Pe.lastIndex}else Pe.lastIndex=_e.lastIndex;t.push(Ce[0])}return t}async function getCSSRules(e,t){const St=[],r=[];return e.forEach(xe=>{if("cssRules"in xe)try{toArray(xe.cssRules||[]).forEach((_e,Ee)=>{if(_e.type===CSSRule.IMPORT_RULE){let Pe=Ee+1;const Ce=_e.href,Te=fetchCSS(Ce).then(Ie=>embedFonts(Ie,t)).then(Ie=>parseCSS(Ie).forEach(Ve=>{try{xe.insertRule(Ve,Ve.startsWith("@import")?Pe+=1:xe.cssRules.length)}catch(He){console.error("Error inserting rule from remote css",{rule:Ve,error:He})}})).catch(Ie=>{console.error("Error loading remote css",Ie.toString())});r.push(Te)}})}catch(_e){const Ee=e.find(Pe=>Pe.href==null)||document.styleSheets[0];xe.href!=null&&r.push(fetchCSS(xe.href).then(Pe=>embedFonts(Pe,t)).then(Pe=>parseCSS(Pe).forEach(Ce=>{Ee.insertRule(Ce,xe.cssRules.length)})).catch(Pe=>{console.error("Error loading remote stylesheet",Pe)})),console.error("Error inlining remote css file",_e)}}),Promise.all(r).then(()=>(e.forEach(xe=>{if("cssRules"in xe)try{toArray(xe.cssRules||[]).forEach(_e=>{St.push(_e)})}catch(_e){console.error(`Error while reading CSS rules from ${xe.href}`,_e)}}),St))}function getWebFontRules(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>shouldEmbed(t.style.getPropertyValue("src")))}async function parseWebFontRules(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const St=toArray(e.ownerDocument.styleSheets),r=await getCSSRules(St,t);return getWebFontRules(r)}async function getWebFontCSS(e,t){const St=await parseWebFontRules(e,t);return(await Promise.all(St.map(xe=>{const _e=xe.parentStyleSheet?xe.parentStyleSheet.href:null;return embedResources(xe.cssText,_e,t)}))).join(`
`)}async function embedWebFonts(e,t){const St=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await getWebFontCSS(e,t);if(St){const r=document.createElement("style"),xe=document.createTextNode(St);r.appendChild(xe),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}}async function toSvg(e,t={}){const{width:St,height:r}=getImageSize(e,t),xe=await cloneNode(e,t,!0);return await embedWebFonts(xe,t),await embedImages(xe,t),applyStyle(xe,t),await nodeToDataURL(xe,St,r)}async function toCanvas(e,t={}){const{width:St,height:r}=getImageSize(e,t),xe=await toSvg(e,t),_e=await createImage(xe),Ee=document.createElement("canvas"),Pe=Ee.getContext("2d"),Ce=t.pixelRatio||getPixelRatio(),Te=t.canvasWidth||St,Ie=t.canvasHeight||r;return Ee.width=Te*Ce,Ee.height=Ie*Ce,t.skipAutoScale||checkCanvasDimensions(Ee),Ee.style.width=`${Te}`,Ee.style.height=`${Ie}`,t.backgroundColor&&(Pe.fillStyle=t.backgroundColor,Pe.fillRect(0,0,Ee.width,Ee.height)),Pe.drawImage(_e,0,0,Ee.width,Ee.height),Ee}async function toPng(e,t={}){return(await toCanvas(e,t)).toDataURL()}var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(e,t){for(var St=new u16(31),r=0;r<31;++r)St[r]=t+=1<<e[r-1];for(var xe=new u32(St[30]),r=1;r<30;++r)for(var _e=St[r];_e<St[r+1];++_e)xe[_e]=_e-St[r]<<5|r;return[St,xe]},_a=freb(fleb,2),fl=_a[0],revfl=_a[1];fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b[0],revfd=_b[1],rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>>8|(x$1&255)<<8)>>>1}var hMap=function(e,t,St){for(var r=e.length,xe=0,_e=new u16(t);xe<r;++xe)++_e[e[xe]-1];var Ee=new u16(t);for(xe=0;xe<t;++xe)Ee[xe]=Ee[xe-1]+_e[xe-1]<<1;var Pe;if(St){Pe=new u16(1<<t);var Ce=15-t;for(xe=0;xe<r;++xe)if(e[xe])for(var Te=xe<<4|e[xe],Ie=t-e[xe],Ve=Ee[e[xe]-1]++<<Ie,He=Ve|(1<<Ie)-1;Ve<=He;++Ve)Pe[rev[Ve]>>>Ce]=Te}else for(Pe=new u16(r),xe=0;xe<r;++xe)Pe[xe]=rev[Ee[e[xe]-1]++]>>>15-e[xe];return Pe},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(e){for(var t=e[0],St=1;St<e.length;++St)e[St]>t&&(t=e[St]);return t},bits=function(e,t,St){var r=t/8>>0;return(e[r]|e[r+1]<<8)>>>(t&7)&St},bits16=function(e,t){var St=t/8>>0;return(e[St]|e[St+1]<<8|e[St+2]<<16)>>>(t&7)},shft=function(e){return(e/8>>0)+(e&7&&1)},slc=function(e,t,St){(t==null||t<0)&&(t=0),(St==null||St>e.length)&&(St=e.length);var r=new(e instanceof u16?u16:e instanceof u32?u32:u8)(St-t);return r.set(e.subarray(t,St)),r},inflt=function(e,t,St){var r=e.length,xe=!t||St,_e=!St||St.i;St||(St={}),t||(t=new u8(r*3));var Ee=function(Xe){var rn=t.length;if(Xe>rn){var gn=new u8(Math.max(rn*2,Xe));gn.set(t),t=gn}},Pe=St.f||0,Ce=St.p||0,Te=St.b||0,Ie=St.l,Ve=St.d,He=St.m,ke=St.n,qe=r*8;do{if(!Ie){St.f=Pe=bits(e,Ce,1);var De=bits(e,Ce+1,3);if(Ce+=3,De)if(De==1)Ie=flrm,Ve=fdrm,He=9,ke=5;else if(De==2){var nn=bits(e,Ce,31)+257,en=bits(e,Ce+10,15)+4,Ue=nn+bits(e,Ce+5,31)+1;Ce+=14;for(var Je=new u8(Ue),Ge=new u8(19),Me=0;Me<en;++Me)Ge[clim[Me]]=bits(e,Ce+Me*3,7);Ce+=en*3;var tn=max(Ge),dn=(1<<tn)-1;if(!_e&&Ce+Ue*(tn+7)>qe)break;for(var Re=hMap(Ge,tn,1),Me=0;Me<Ue;){var Qe=Re[bits(e,Ce,dn)];Ce+=Qe&15;var Oe=Qe>>>4;if(Oe<16)Je[Me++]=Oe;else{var cn=0,hn=0;for(Oe==16?(hn=3+bits(e,Ce,3),Ce+=2,cn=Je[Me-1]):Oe==17?(hn=3+bits(e,Ce,7),Ce+=3):Oe==18&&(hn=11+bits(e,Ce,127),Ce+=7);hn--;)Je[Me++]=cn}}var Pn=Je.subarray(0,nn),kn=Je.subarray(nn);He=max(Pn),ke=max(kn),Ie=hMap(Pn,He,1),Ve=hMap(kn,ke,1)}else throw"invalid block type";else{var Oe=shft(Ce)+4,Be=e[Oe-4]|e[Oe-3]<<8,Ye=Oe+Be;if(Ye>r){if(_e)throw"unexpected EOF";break}xe&&Ee(Te+Be),t.set(e.subarray(Oe,Ye),Te),St.b=Te+=Be,St.p=Ce=Ye*8;continue}if(Ce>qe)throw"unexpected EOF"}xe&&Ee(Te+131072);for(var Dn=(1<<He)-1,Rn=(1<<ke)-1,jn=He+ke+18;_e||Ce+jn<qe;){var cn=Ie[bits16(e,Ce)&Dn],zn=cn>>>4;if(Ce+=cn&15,Ce>qe)throw"unexpected EOF";if(!cn)throw"invalid length/literal";if(zn<256)t[Te++]=zn;else if(zn==256){Ie=null;break}else{var ii=zn-254;if(zn>264){var Me=zn-257,an=fleb[Me];ii=bits(e,Ce,(1<<an)-1)+fl[Me],Ce+=an}var _n=Ve[bits16(e,Ce)&Rn],sn=_n>>>4;if(!_n)throw"invalid distance";Ce+=_n&15;var kn=fd[sn];if(sn>3){var an=fdeb[sn];kn+=bits16(e,Ce)&(1<<an)-1,Ce+=an}if(Ce>qe)throw"unexpected EOF";xe&&Ee(Te+131072);for(var ze=Te+ii;Te<ze;Te+=4)t[Te]=t[Te-kn],t[Te+1]=t[Te+1-kn],t[Te+2]=t[Te+2-kn],t[Te+3]=t[Te+3-kn];Te=ze}}St.l=Ie,St.p=Ce,St.b=Te,Ie&&(Pe=1,St.m=He,St.d=Ve,St.n=ke)}while(!Pe);return Te==t.length?t:slc(t,0,Te)},wbits=function(e,t,St){St<<=t&7;var r=t/8>>0;e[r]|=St,e[r+1]|=St>>>8},wbits16=function(e,t,St){St<<=t&7;var r=t/8>>0;e[r]|=St,e[r+1]|=St>>>8,e[r+2]|=St>>>16},hTree=function(e,t){for(var St=[],r=0;r<e.length;++r)e[r]&&St.push({s:r,f:e[r]});var xe=St.length,_e=St.slice();if(!xe)return[new u8(0),0];if(xe==1){var Ee=new u8(St[0].s+1);return Ee[St[0].s]=1,[Ee,1]}St.sort(function(Ue,Je){return Ue.f-Je.f}),St.push({s:-1,f:25001});var Pe=St[0],Ce=St[1],Te=0,Ie=1,Ve=2;for(St[0]={s:-1,f:Pe.f+Ce.f,l:Pe,r:Ce};Ie!=xe-1;)Pe=St[St[Te].f<St[Ve].f?Te++:Ve++],Ce=St[Te!=Ie&&St[Te].f<St[Ve].f?Te++:Ve++],St[Ie++]={s:-1,f:Pe.f+Ce.f,l:Pe,r:Ce};for(var He=_e[0].s,r=1;r<xe;++r)_e[r].s>He&&(He=_e[r].s);var ke=new u16(He+1),qe=ln(St[Ie-1],ke,0);if(qe>t){var r=0,De=0,Oe=qe-t,Be=1<<Oe;for(_e.sort(function(Je,Ge){return ke[Ge.s]-ke[Je.s]||Je.f-Ge.f});r<xe;++r){var Ye=_e[r].s;if(ke[Ye]>t)De+=Be-(1<<qe-ke[Ye]),ke[Ye]=t;else break}for(De>>>=Oe;De>0;){var nn=_e[r].s;ke[nn]<t?De-=1<<t-ke[nn]++-1:++r}for(;r>=0&&De;--r){var en=_e[r].s;ke[en]==t&&(--ke[en],++De)}qe=t}return[new u8(ke),qe]},ln=function(e,t,St){return e.s==-1?Math.max(ln(e.l,t,St+1),ln(e.r,t,St+1)):t[e.s]=St},lc=function(e){for(var t=e.length;t&&!e[--t];);for(var St=new u16(++t),r=0,xe=e[0],_e=1,Ee=function(Ce){St[r++]=Ce},Pe=1;Pe<=t;++Pe)if(e[Pe]==xe&&Pe!=t)++_e;else{if(!xe&&_e>2){for(;_e>138;_e-=138)Ee(32754);_e>2&&(Ee(_e>10?_e-11<<5|28690:_e-3<<5|12305),_e=0)}else if(_e>3){for(Ee(xe),--_e;_e>6;_e-=6)Ee(8304);_e>2&&(Ee(_e-3<<5|8208),_e=0)}for(;_e--;)Ee(xe);_e=1,xe=e[Pe]}return[St.subarray(0,r),t]},clen=function(e,t){for(var St=0,r=0;r<t.length;++r)St+=e[r]*t[r];return St},wfblk=function(e,t,St){var r=St.length,xe=shft(t+2);e[xe]=r&255,e[xe+1]=r>>>8,e[xe+2]=e[xe]^255,e[xe+3]=e[xe+1]^255;for(var _e=0;_e<r;++_e)e[xe+_e+4]=St[_e];return(xe+4+r)*8},wblk=function(e,t,St,r,xe,_e,Ee,Pe,Ce,Te,Ie){wbits(t,Ie++,St),++xe[256];for(var Ve=hTree(xe,15),He=Ve[0],ke=Ve[1],qe=hTree(_e,15),De=qe[0],Oe=qe[1],Be=lc(He),Ye=Be[0],nn=Be[1],en=lc(De),Ue=en[0],Je=en[1],Ge=new u16(19),Me=0;Me<Ye.length;++Me)Ge[Ye[Me]&31]++;for(var Me=0;Me<Ue.length;++Me)Ge[Ue[Me]&31]++;for(var tn=hTree(Ge,7),dn=tn[0],Re=tn[1],Qe=19;Qe>4&&!dn[clim[Qe-1]];--Qe);var cn=Te+5<<3,hn=clen(xe,flt)+clen(_e,fdt)+Ee,Pn=clen(xe,He)+clen(_e,De)+Ee+14+3*Qe+clen(Ge,dn)+(2*Ge[16]+3*Ge[17]+7*Ge[18]);if(cn<=hn&&cn<=Pn)return wfblk(t,Ie,e.subarray(Ce,Ce+Te));var kn,Dn,Rn,jn;if(wbits(t,Ie,1+(Pn<hn)),Ie+=2,Pn<hn){kn=hMap(He,ke,0),Dn=He,Rn=hMap(De,Oe,0),jn=De;var zn=hMap(dn,Re,0);wbits(t,Ie,nn-257),wbits(t,Ie+5,Je-1),wbits(t,Ie+10,Qe-4),Ie+=14;for(var Me=0;Me<Qe;++Me)wbits(t,Ie+3*Me,dn[clim[Me]]);Ie+=3*Qe;for(var ii=[Ye,Ue],an=0;an<2;++an)for(var _n=ii[an],Me=0;Me<_n.length;++Me){var sn=_n[Me]&31;wbits(t,Ie,zn[sn]),Ie+=dn[sn],sn>15&&(wbits(t,Ie,_n[Me]>>>5&127),Ie+=_n[Me]>>>12)}}else kn=flm,Dn=flt,Rn=fdm,jn=fdt;for(var Me=0;Me<Pe;++Me)if(r[Me]>255){var sn=r[Me]>>>18&31;wbits16(t,Ie,kn[sn+257]),Ie+=Dn[sn+257],sn>7&&(wbits(t,Ie,r[Me]>>>23&31),Ie+=fleb[sn]);var ze=r[Me]&31;wbits16(t,Ie,Rn[ze]),Ie+=jn[ze],ze>3&&(wbits16(t,Ie,r[Me]>>>5&8191),Ie+=fdeb[ze])}else wbits16(t,Ie,kn[r[Me]]),Ie+=Dn[r[Me]];return wbits16(t,Ie,kn[256]),Ie+Dn[256]},deo=new u32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(e,t,St,r,xe,_e){var Ee=e.length,Pe=new u8(r+Ee+5*(1+Math.floor(Ee/7e3))+xe),Ce=Pe.subarray(r,Pe.length-xe),Te=0;if(!t||Ee<8)for(var Ie=0;Ie<=Ee;Ie+=65535){var Ve=Ie+65535;Ve<Ee?Te=wfblk(Ce,Te,e.subarray(Ie,Ve)):(Ce[Ie]=_e,Te=wfblk(Ce,Te,e.subarray(Ie,Ee)))}else{for(var He=deo[t-1],ke=He>>>13,qe=He&8191,De=(1<<St)-1,Oe=new u16(32768),Be=new u16(De+1),Ye=Math.ceil(St/3),nn=2*Ye,en=function(Ke){return(e[Ke]^e[Ke+1]<<Ye^e[Ke+2]<<nn)&De},Ue=new u32(25e3),Je=new u16(288),Ge=new u16(32),Me=0,tn=0,Ie=0,dn=0,Re=0,Qe=0;Ie<Ee;++Ie){var cn=en(Ie),hn=Ie&32767,Pn=Be[cn];if(Oe[hn]=Pn,Be[cn]=hn,Re<=Ie){var kn=Ee-Ie;if((Me>7e3||dn>24576)&&kn>423){Te=wblk(e,Ce,0,Ue,Je,Ge,tn,dn,Qe,Ie-Qe,Te),dn=Me=tn=0,Qe=Ie;for(var Dn=0;Dn<286;++Dn)Je[Dn]=0;for(var Dn=0;Dn<30;++Dn)Ge[Dn]=0}var Rn=2,jn=0,zn=qe,ii=hn-Pn&32767;if(kn>2&&cn==en(Ie-ii))for(var an=Math.min(ke,kn)-1,_n=Math.min(32767,Ie),sn=Math.min(258,kn);ii<=_n&&--zn&&hn!=Pn;){if(e[Ie+Rn]==e[Ie+Rn-ii]){for(var ze=0;ze<sn&&e[Ie+ze]==e[Ie+ze-ii];++ze);if(ze>Rn){if(Rn=ze,jn=ii,ze>an)break;for(var Xe=Math.min(ii,ze-2),rn=0,Dn=0;Dn<Xe;++Dn){var gn=Ie-ii+Dn+32768&32767,fn=Oe[gn],Nn=gn-fn+32768&32767;Nn>rn&&(rn=Nn,Pn=gn)}}}hn=Pn,Pn=Oe[hn],ii+=hn-Pn+32768&32767}if(jn){Ue[dn++]=268435456|revfl[Rn]<<18|revfd[jn];var wn=revfl[Rn]&31,xn=revfd[jn]&31;tn+=fleb[wn]+fdeb[xn],++Je[257+wn],++Ge[xn],Re=Ie+Rn,++Me}else Ue[dn++]=e[Ie],++Je[e[Ie]]}}Te=wblk(e,Ce,_e,Ue,Je,Ge,tn,dn,Qe,Ie-Qe,Te),_e||(Te=wfblk(Ce,Te,et$1))}return slc(Pe,0,r+shft(Te)+xe)},adler=function(){var e=1,t=0;return{p:function(St){for(var r=e,xe=t,_e=St.length,Ee=0;Ee!=_e;){for(var Pe=Math.min(Ee+5552,_e);Ee<Pe;++Ee)r+=St[Ee],xe+=r;r%=65521,xe%=65521}e=r,t=xe},d:function(){return(e>>>8<<16|(t&255)<<8|t>>>8)+((e&255)<<23)*2}}},dopt=function(e,t,St,r,xe){return dflt(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,St,r,!xe)},wbytes=function(e,t,St){for(;St;++t)e[t]=St,St>>>=8},zlh=function(e,t){var St=t.level,r=St==0?0:St<6?1:St==9?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)},zlv=function(e){if((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function zlibSync(e,t){t===void 0&&(t={});var St=adler();St.p(e);var r=dopt(e,t,2,4);return zlh(r,t),wbytes(r,r.length-4,St.d()),r}function unzlibSync(e,t){return inflt((zlv(e),e.subarray(2,-4)),t)}var n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i(){n.console&&typeof n.console.log=="function"&&n.console.log.apply(n.console,arguments)}var a={log:i,warn:function(e){n.console&&(typeof n.console.warn=="function"?n.console.warn.apply(n.console,arguments):i.call(null,arguments))},error:function(e){n.console&&(typeof n.console.error=="function"?n.console.error.apply(n.console,arguments):i(e))}};function o(e,t,St){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){l(r.response,t,St)},r.onerror=function(){a.error("could not download file")},r.send()}function s(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function c(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var u,h,l=n.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,St){var r=n.URL||n.webkitURL,xe=document.createElement("a");t=t||e.name||"download",xe.download=t,xe.rel="noopener",typeof e=="string"?(xe.href=e,xe.origin!==location.origin?s(xe.href)?o(e,t,St):c(xe,xe.target="_blank"):c(xe)):(xe.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(xe.href)},4e4),setTimeout(function(){c(xe)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,St){if(t=t||e.name||"download",typeof e=="string")if(s(e))o(e,t,St);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){c(r)})}else navigator.msSaveOrOpenBlob(function(xe,_e){return _e===void 0?_e={autoBom:!1}:_typeof(_e)!=="object"&&(a.warn("Deprecated: Expected third argument to be a object"),_e={autoBom:!_e}),_e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(xe.type)?new Blob([String.fromCharCode(65279),xe],{type:xe.type}):xe}(e,St),t)}:function(e,t,St,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return o(e,t,St);var xe=e.type==="application/octet-stream",_e=/constructor/i.test(n.HTMLElement)||n.safari,Ee=/CriOS\/[\d]+/.test(navigator.userAgent);if((Ee||xe&&_e)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var Pe=new FileReader;Pe.onloadend=function(){var Ie=Pe.result;Ie=Ee?Ie:Ie.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=Ie:location=Ie,r=null},Pe.readAsDataURL(e)}else{var Ce=n.URL||n.webkitURL,Te=Ce.createObjectURL(e);r?r.location=Te:location.href=Te,r=null,setTimeout(function(){Ce.revokeObjectURL(Te)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function f(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var St=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(Pe){return[parseInt(Pe[1]),parseInt(Pe[2]),parseInt(Pe[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(Pe){return[parseInt(Pe[1],16),parseInt(Pe[2],16),parseInt(Pe[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(Pe){return[parseInt(Pe[1]+Pe[1],16),parseInt(Pe[2]+Pe[2],16),parseInt(Pe[3]+Pe[3],16)]}}],r=0;r<St.length;r++){var xe=St[r].re,_e=St[r].process,Ee=xe.exec(e);Ee&&(t=_e(Ee),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var Pe=this.r.toString(16),Ce=this.g.toString(16),Te=this.b.toString(16);return Pe.length==1&&(Pe="0"+Pe),Ce.length==1&&(Ce="0"+Ce),Te.length==1&&(Te="0"+Te),"#"+Pe+Ce+Te}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function d(e,t){var St=e[0],r=e[1],xe=e[2],_e=e[3];St=g(St,r,xe,_e,t[0],7,-680876936),_e=g(_e,St,r,xe,t[1],12,-389564586),xe=g(xe,_e,St,r,t[2],17,606105819),r=g(r,xe,_e,St,t[3],22,-1044525330),St=g(St,r,xe,_e,t[4],7,-176418897),_e=g(_e,St,r,xe,t[5],12,1200080426),xe=g(xe,_e,St,r,t[6],17,-1473231341),r=g(r,xe,_e,St,t[7],22,-45705983),St=g(St,r,xe,_e,t[8],7,1770035416),_e=g(_e,St,r,xe,t[9],12,-1958414417),xe=g(xe,_e,St,r,t[10],17,-42063),r=g(r,xe,_e,St,t[11],22,-1990404162),St=g(St,r,xe,_e,t[12],7,1804603682),_e=g(_e,St,r,xe,t[13],12,-40341101),xe=g(xe,_e,St,r,t[14],17,-1502002290),St=m(St,r=g(r,xe,_e,St,t[15],22,1236535329),xe,_e,t[1],5,-165796510),_e=m(_e,St,r,xe,t[6],9,-1069501632),xe=m(xe,_e,St,r,t[11],14,643717713),r=m(r,xe,_e,St,t[0],20,-373897302),St=m(St,r,xe,_e,t[5],5,-701558691),_e=m(_e,St,r,xe,t[10],9,38016083),xe=m(xe,_e,St,r,t[15],14,-660478335),r=m(r,xe,_e,St,t[4],20,-405537848),St=m(St,r,xe,_e,t[9],5,568446438),_e=m(_e,St,r,xe,t[14],9,-1019803690),xe=m(xe,_e,St,r,t[3],14,-187363961),r=m(r,xe,_e,St,t[8],20,1163531501),St=m(St,r,xe,_e,t[13],5,-1444681467),_e=m(_e,St,r,xe,t[2],9,-51403784),xe=m(xe,_e,St,r,t[7],14,1735328473),St=v(St,r=m(r,xe,_e,St,t[12],20,-1926607734),xe,_e,t[5],4,-378558),_e=v(_e,St,r,xe,t[8],11,-2022574463),xe=v(xe,_e,St,r,t[11],16,1839030562),r=v(r,xe,_e,St,t[14],23,-35309556),St=v(St,r,xe,_e,t[1],4,-1530992060),_e=v(_e,St,r,xe,t[4],11,1272893353),xe=v(xe,_e,St,r,t[7],16,-155497632),r=v(r,xe,_e,St,t[10],23,-1094730640),St=v(St,r,xe,_e,t[13],4,681279174),_e=v(_e,St,r,xe,t[0],11,-358537222),xe=v(xe,_e,St,r,t[3],16,-722521979),r=v(r,xe,_e,St,t[6],23,76029189),St=v(St,r,xe,_e,t[9],4,-640364487),_e=v(_e,St,r,xe,t[12],11,-421815835),xe=v(xe,_e,St,r,t[15],16,530742520),St=b(St,r=v(r,xe,_e,St,t[2],23,-995338651),xe,_e,t[0],6,-198630844),_e=b(_e,St,r,xe,t[7],10,1126891415),xe=b(xe,_e,St,r,t[14],15,-1416354905),r=b(r,xe,_e,St,t[5],21,-57434055),St=b(St,r,xe,_e,t[12],6,1700485571),_e=b(_e,St,r,xe,t[3],10,-1894986606),xe=b(xe,_e,St,r,t[10],15,-1051523),r=b(r,xe,_e,St,t[1],21,-2054922799),St=b(St,r,xe,_e,t[8],6,1873313359),_e=b(_e,St,r,xe,t[15],10,-30611744),xe=b(xe,_e,St,r,t[6],15,-1560198380),r=b(r,xe,_e,St,t[13],21,1309151649),St=b(St,r,xe,_e,t[4],6,-145523070),_e=b(_e,St,r,xe,t[11],10,-1120210379),xe=b(xe,_e,St,r,t[2],15,718787259),r=b(r,xe,_e,St,t[9],21,-343485551),e[0]=_(St,e[0]),e[1]=_(r,e[1]),e[2]=_(xe,e[2]),e[3]=_(_e,e[3])}function p(e,t,St,r,xe,_e){return t=_(_(t,e),_(r,_e)),_(t<<xe|t>>>32-xe,St)}function g(e,t,St,r,xe,_e,Ee){return p(t&St|~t&r,e,t,xe,_e,Ee)}function m(e,t,St,r,xe,_e,Ee){return p(t&r|St&~r,e,t,xe,_e,Ee)}function v(e,t,St,r,xe,_e,Ee){return p(t^St^r,e,t,xe,_e,Ee)}function b(e,t,St,r,xe,_e,Ee){return p(St^(t|~r),e,t,xe,_e,Ee)}function y(e){var t,St=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)d(r,w(e.substring(t-64,t)));e=e.substring(t-64);var xe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)xe[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(xe[t>>2]|=128<<(t%4<<3),t>55)for(d(r,xe),t=0;t<16;t++)xe[t]=0;return xe[14]=8*St,d(r,xe),r}function w(e){var t,St=[];for(t=0;t<64;t+=4)St[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return St}u=n.atob.bind(n),h=n.btoa.bind(n);var N="0123456789abcdef".split("");function L(e){for(var t="",St=0;St<4;St++)t+=N[e>>8*St+4&15]+N[e>>8*St&15];return t}function A(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function x(e){return y(e).map(A).join("")}var S=function(e){for(var t=0;t<e.length;t++)e[t]=L(e[t]);return e.join("")}(y("hello"))!="5d41402abc4b2a76b9719d911017c592";function _(e,t){if(S){var St=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(St>>16)<<16|65535&St}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P(e,t){var St,r,xe,_e;if(e!==St){for(var Ee=(xe=e,_e=1+(256/e.length>>0),new Array(_e+1).join(xe)),Pe=[],Ce=0;Ce<256;Ce++)Pe[Ce]=Ce;var Te=0;for(Ce=0;Ce<256;Ce++){var Ie=Pe[Ce];Te=(Te+Ie+Ee.charCodeAt(Ce))%256,Pe[Ce]=Pe[Te],Pe[Te]=Ie}St=e,r=Pe}else Pe=r;var Ve=t.length,He=0,ke=0,qe="";for(Ce=0;Ce<Ve;Ce++)ke=(ke+(Ie=Pe[He=(He+1)%256]))%256,Pe[He]=Pe[ke],Pe[ke]=Ie,Ee=Pe[(Pe[He]+Pe[ke])%256],qe+=String.fromCharCode(t.charCodeAt(Ce)^Ee);return qe}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k={print:4,modify:8,copy:16,"annot-forms":32};function I(e,t,St,r){this.v=1,this.r=2;var xe=192;e.forEach(function(Pe){if(k.perm!==void 0)throw new Error("Invalid permission: "+Pe);xe+=k[Pe]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var _e=(t+this.padding).substr(0,32),Ee=(St+this.padding).substr(0,32);this.O=this.processOwnerPassword(_e,Ee),this.P=-(1+(255^xe)),this.encryptionKey=x(_e+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=P(this.encryptionKey,this.padding)}function F(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",St=e.length,r=0;r<St;r++){var xe=e.charCodeAt(r);xe<33||xe===35||xe===37||xe===40||xe===41||xe===47||xe===60||xe===62||xe===91||xe===93||xe===123||xe===125||xe>126?t+="#"+("0"+xe.toString(16)).slice(-2):t+=e[r]}return t}function C(e){if(_typeof(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(St,r,xe){if(xe=xe||!1,typeof St!="string"||typeof r!="function"||typeof xe!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(St)||(t[St]={});var _e=Math.random().toString(35);return t[St][_e]=[r,!!xe],_e},this.unsubscribe=function(St){for(var r in t)if(t[r][St])return delete t[r][St],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(St){if(t.hasOwnProperty(St)){var r=Array.prototype.slice.call(arguments,1),xe=[];for(var _e in t[St]){var Ee=t[St][_e];try{Ee[0].apply(e,r)}catch(Pe){n.console&&a.error("jsPDF PubSub Error",Pe.message,Pe)}Ee[1]&&xe.push(_e)}xe.length&&xe.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function j(e){if(!(this instanceof j))return new j(e);var t="opacity,stroke-opacity".split(",");for(var St in e)e.hasOwnProperty(St)&&t.indexOf(St)>=0&&(this[St]=e[St]);this.id="",this.objectNumber=-1}function O(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function B(e,t,St,r,xe){if(!(this instanceof B))return new B(e,t,St,r,xe);this.type=e==="axial"?2:3,this.coords=t,this.colors=St,O.call(this,r,xe)}function M(e,t,St,r,xe){if(!(this instanceof M))return new M(e,t,St,r,xe);this.boundingBox=e,this.xStep=t,this.yStep=St,this.stream="",this.cloneIndex=0,O.call(this,r,xe)}function E(e){var t,St=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],xe=arguments[2],_e=arguments[3],Ee=[],Pe=1,Ce=16,Te="S",Ie=null;_typeof(e=e||{})==="object"&&(St=e.orientation,r=e.unit||r,xe=e.format||xe,_e=e.compress||e.compressPdf||_e,(Ie=e.encryption||null)!==null&&(Ie.userPassword=Ie.userPassword||"",Ie.ownerPassword=Ie.ownerPassword||"",Ie.userPermissions=Ie.userPermissions||[]),Pe=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(Ce=e.floatPrecision),Te=e.defaultPathOperation||"S"),Ee=e.filters||(_e===!0?["FlateEncode"]:Ee),r=r||"mm",St=(""+(St||"P")).toLowerCase();var Ve=e.putOnlyUsedFonts||!1,He={},ke={internal:{},__private__:{}};ke.__private__.PubSub=C;var qe="1.3",De=ke.__private__.getPdfVersion=function(){return qe};ke.__private__.setPdfVersion=function(Fe){qe=Fe};var Oe={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};ke.__private__.getPageFormats=function(){return Oe};var Be=ke.__private__.getPageFormat=function(Fe){return Oe[Fe]};xe=xe||"a4";var Ye={COMPAT:"compat",ADVANCED:"advanced"},nn=Ye.COMPAT;function en(){this.saveGraphicsState(),We(new Li(Mn,0,0,-Mn,0,bs()*Mn).toString()+" cm"),this.setFontSize(this.getFontSize()/Mn),Te="n",nn=Ye.ADVANCED}function Ue(){this.restoreGraphicsState(),Te="S",nn=Ye.COMPAT}var Je=ke.__private__.combineFontStyleAndFontWeight=function(Fe,un){if(Fe=="bold"&&un=="normal"||Fe=="bold"&&un==400||Fe=="normal"&&un=="italic"||Fe=="bold"&&un=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return un&&(Fe=un==400||un==="normal"?Fe==="italic"?"italic":"normal":un!=700&&un!=="bold"||Fe!=="normal"?(un==700?"bold":un)+""+Fe:"bold"),Fe};ke.advancedAPI=function(Fe){var un=nn===Ye.COMPAT;return un&&en.call(this),typeof Fe!="function"||(Fe(this),un&&Ue.call(this)),this},ke.compatAPI=function(Fe){var un=nn===Ye.ADVANCED;return un&&Ue.call(this),typeof Fe!="function"||(Fe(this),un&&en.call(this)),this},ke.isAdvancedAPI=function(){return nn===Ye.ADVANCED};var Ge,Me=function(Fe){if(nn!==Ye.ADVANCED)throw new Error(Fe+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},tn=ke.roundToPrecision=ke.__private__.roundToPrecision=function(Fe,un){var In=t||un;if(isNaN(Fe)||isNaN(In))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Fe.toFixed(In).replace(/0+$/,"")};Ge=ke.hpf=ke.__private__.hpf=typeof Ce=="number"?function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.hpf");return tn(Fe,Ce)}:Ce==="smart"?function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.hpf");return tn(Fe,Fe>-1&&Fe<1?16:5)}:function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.hpf");return tn(Fe,16)};var dn=ke.f2=ke.__private__.f2=function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.f2");return tn(Fe,2)},Re=ke.__private__.f3=function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.f3");return tn(Fe,3)},Qe=ke.scale=ke.__private__.scale=function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.scale");return nn===Ye.COMPAT?Fe*Mn:nn===Ye.ADVANCED?Fe:void 0},cn=function(Fe){return nn===Ye.COMPAT?bs()-Fe:nn===Ye.ADVANCED?Fe:void 0},hn=function(Fe){return Qe(cn(Fe))};ke.__private__.setPrecision=ke.setPrecision=function(Fe){typeof parseInt(Fe,10)=="number"&&(t=parseInt(Fe,10))};var Pn,kn="00000000000000000000000000000000",Dn=ke.__private__.getFileId=function(){return kn},Rn=ke.__private__.setFileId=function(Fe){return kn=Fe!==void 0&&/^[a-fA-F0-9]{32}$/.test(Fe)?Fe.toUpperCase():kn.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),Ie!==null&&(yr=new I(Ie.userPermissions,Ie.userPassword,Ie.ownerPassword,kn)),kn};ke.setFileId=function(Fe){return Rn(Fe),this},ke.getFileId=function(){return Dn()};var jn=ke.__private__.convertDateToPDFDate=function(Fe){var un=Fe.getTimezoneOffset(),In=un<0?"+":"-",Un=Math.floor(Math.abs(un/60)),Kn=Math.abs(un%60),oi=[In,sn(Un),"'",sn(Kn),"'"].join("");return["D:",Fe.getFullYear(),sn(Fe.getMonth()+1),sn(Fe.getDate()),sn(Fe.getHours()),sn(Fe.getMinutes()),sn(Fe.getSeconds()),oi].join("")},zn=ke.__private__.convertPDFDateToDate=function(Fe){var un=parseInt(Fe.substr(2,4),10),In=parseInt(Fe.substr(6,2),10)-1,Un=parseInt(Fe.substr(8,2),10),Kn=parseInt(Fe.substr(10,2),10),oi=parseInt(Fe.substr(12,2),10),mi=parseInt(Fe.substr(14,2),10);return new Date(un,In,Un,Kn,oi,mi,0)},ii=ke.__private__.setCreationDate=function(Fe){var un;if(Fe===void 0&&(Fe=new Date),Fe instanceof Date)un=jn(Fe);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Fe))throw new Error("Invalid argument passed to jsPDF.setCreationDate");un=Fe}return Pn=un},an=ke.__private__.getCreationDate=function(Fe){var un=Pn;return Fe==="jsDate"&&(un=zn(Pn)),un};ke.setCreationDate=function(Fe){return ii(Fe),this},ke.getCreationDate=function(Fe){return an(Fe)};var _n,sn=ke.__private__.padd2=function(Fe){return("0"+parseInt(Fe)).slice(-2)},ze=ke.__private__.padd2Hex=function(Fe){return("00"+(Fe=Fe.toString())).substr(Fe.length)},Xe=0,rn=[],gn=[],fn=0,Nn=[],wn=[],xn=!1,Sn=gn,Ke=function(){Xe=0,fn=0,gn=[],rn=[],Nn=[],_r=Ui(),vr=Ui()};ke.__private__.setCustomOutputDestination=function(Fe){xn=!0,Sn=Fe};var $e=function(Fe){xn||(Sn=Fe)};ke.__private__.resetCustomOutputDestination=function(){xn=!1,Sn=gn};var We=ke.__private__.out=function(Fe){return Fe=Fe.toString(),fn+=Fe.length+1,Sn.push(Fe),Sn},yn=ke.__private__.write=function(Fe){return We(arguments.length===1?Fe.toString():Array.prototype.join.call(arguments," "))},bn=ke.__private__.getArrayBuffer=function(Fe){for(var un=Fe.length,In=new ArrayBuffer(un),Un=new Uint8Array(In);un--;)Un[un]=Fe.charCodeAt(un);return In},Ln=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];ke.__private__.getStandardFonts=function(){return Ln};var Bn=e.fontSize||16;ke.__private__.setFontSize=ke.setFontSize=function(Fe){return Bn=nn===Ye.ADVANCED?Fe/Mn:Fe,this};var On,qn=ke.__private__.getFontSize=ke.getFontSize=function(){return nn===Ye.COMPAT?Bn:Bn*Mn},Gn=e.R2L||!1;ke.__private__.setR2L=ke.setR2L=function(Fe){return Gn=Fe,this},ke.__private__.getR2L=ke.getR2L=function(){return Gn};var $n,Yn=ke.__private__.setZoomMode=function(Fe){var un=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Fe))On=Fe;else if(isNaN(Fe)){if(un.indexOf(Fe)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Fe+'" is not recognized.');On=Fe}else On=parseInt(Fe,10)};ke.__private__.getZoomMode=function(){return On};var ni,si=ke.__private__.setPageMode=function(Fe){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Fe)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Fe+'" is not recognized.');$n=Fe};ke.__private__.getPageMode=function(){return $n};var yi=ke.__private__.setLayoutMode=function(Fe){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Fe)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Fe+'" is not recognized.');ni=Fe};ke.__private__.getLayoutMode=function(){return ni},ke.__private__.setDisplayMode=ke.setDisplayMode=function(Fe,un,In){return Yn(Fe),yi(un),si(In),this};var li={title:"",subject:"",author:"",keywords:"",creator:""};ke.__private__.getDocumentProperty=function(Fe){if(Object.keys(li).indexOf(Fe)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return li[Fe]},ke.__private__.getDocumentProperties=function(){return li},ke.__private__.setDocumentProperties=ke.setProperties=ke.setDocumentProperties=function(Fe){for(var un in li)li.hasOwnProperty(un)&&Fe[un]&&(li[un]=Fe[un]);return this},ke.__private__.setDocumentProperty=function(Fe,un){if(Object.keys(li).indexOf(Fe)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return li[Fe]=un};var vi,Mn,bi,fi,Mi,ei={},Cn={},Tn=[],Jn={},gi={},Si={},Ni={},Fi=null,Pi=0,wi=[],xi=new C(ke),$i=e.hotfixes||[],Ii={},zi={},Ti=[],Li=function Fe(un,In,Un,Kn,oi,mi){if(!(this instanceof Fe))return new Fe(un,In,Un,Kn,oi,mi);isNaN(un)&&(un=1),isNaN(In)&&(In=0),isNaN(Un)&&(Un=0),isNaN(Kn)&&(Kn=1),isNaN(oi)&&(oi=0),isNaN(mi)&&(mi=0),this._matrix=[un,In,Un,Kn,oi,mi]};Object.defineProperty(Li.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Fe){this._matrix[0]=Fe}}),Object.defineProperty(Li.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Fe){this._matrix[1]=Fe}}),Object.defineProperty(Li.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Fe){this._matrix[2]=Fe}}),Object.defineProperty(Li.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Fe){this._matrix[3]=Fe}}),Object.defineProperty(Li.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Fe){this._matrix[4]=Fe}}),Object.defineProperty(Li.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Fe){this._matrix[5]=Fe}}),Object.defineProperty(Li.prototype,"a",{get:function(){return this._matrix[0]},set:function(Fe){this._matrix[0]=Fe}}),Object.defineProperty(Li.prototype,"b",{get:function(){return this._matrix[1]},set:function(Fe){this._matrix[1]=Fe}}),Object.defineProperty(Li.prototype,"c",{get:function(){return this._matrix[2]},set:function(Fe){this._matrix[2]=Fe}}),Object.defineProperty(Li.prototype,"d",{get:function(){return this._matrix[3]},set:function(Fe){this._matrix[3]=Fe}}),Object.defineProperty(Li.prototype,"e",{get:function(){return this._matrix[4]},set:function(Fe){this._matrix[4]=Fe}}),Object.defineProperty(Li.prototype,"f",{get:function(){return this._matrix[5]},set:function(Fe){this._matrix[5]=Fe}}),Object.defineProperty(Li.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Li.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Li.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Li.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Li.prototype.join=function(Fe){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Ge).join(Fe)},Li.prototype.multiply=function(Fe){var un=Fe.sx*this.sx+Fe.shy*this.shx,In=Fe.sx*this.shy+Fe.shy*this.sy,Un=Fe.shx*this.sx+Fe.sy*this.shx,Kn=Fe.shx*this.shy+Fe.sy*this.sy,oi=Fe.tx*this.sx+Fe.ty*this.shx+this.tx,mi=Fe.tx*this.shy+Fe.ty*this.sy+this.ty;return new Li(un,In,Un,Kn,oi,mi)},Li.prototype.decompose=function(){var Fe=this.sx,un=this.shy,In=this.shx,Un=this.sy,Kn=this.tx,oi=this.ty,mi=Math.sqrt(Fe*Fe+un*un),Ei=(Fe/=mi)*In+(un/=mi)*Un;In-=Fe*Ei,Un-=un*Ei;var ki=Math.sqrt(In*In+Un*Un);return Ei/=ki,Fe*(Un/=ki)<un*(In/=ki)&&(Fe=-Fe,un=-un,Ei=-Ei,mi=-mi),{scale:new Li(mi,0,0,ki,0,0),translate:new Li(1,0,0,1,Kn,oi),rotate:new Li(Fe,un,-un,Fe,0,0),skew:new Li(1,0,Ei,1,0,0)}},Li.prototype.toString=function(Fe){return this.join(" ")},Li.prototype.inversed=function(){var Fe=this.sx,un=this.shy,In=this.shx,Un=this.sy,Kn=this.tx,oi=this.ty,mi=1/(Fe*Un-un*In),Ei=Un*mi,ki=-un*mi,Di=-In*mi,Bi=Fe*mi;return new Li(Ei,ki,Di,Bi,-Ei*Kn-Di*oi,-ki*Kn-Bi*oi)},Li.prototype.applyToPoint=function(Fe){var un=Fe.x*this.sx+Fe.y*this.shx+this.tx,In=Fe.x*this.shy+Fe.y*this.sy+this.ty;return new Qs(un,In)},Li.prototype.applyToRectangle=function(Fe){var un=this.applyToPoint(Fe),In=this.applyToPoint(new Qs(Fe.x+Fe.w,Fe.y+Fe.h));return new Pa(un.x,un.y,In.x-un.x,In.y-un.y)},Li.prototype.clone=function(){var Fe=this.sx,un=this.shy,In=this.shx,Un=this.sy,Kn=this.tx,oi=this.ty;return new Li(Fe,un,In,Un,Kn,oi)},ke.Matrix=Li;var Ji=ke.matrixMult=function(Fe,un){return un.multiply(Fe)},Zi=new Li(1,0,0,1,0,0);ke.unitMatrix=ke.identityMatrix=Zi;var tr=function(Fe,un){if(!gi[Fe]){var In=(un instanceof B?"Sh":"P")+(Object.keys(Jn).length+1).toString(10);un.id=In,gi[Fe]=In,Jn[In]=un,xi.publish("addPattern",un)}};ke.ShadingPattern=B,ke.TilingPattern=M,ke.addShadingPattern=function(Fe,un){return Me("addShadingPattern()"),tr(Fe,un),this},ke.beginTilingPattern=function(Fe){Me("beginTilingPattern()"),po(Fe.boundingBox[0],Fe.boundingBox[1],Fe.boundingBox[2]-Fe.boundingBox[0],Fe.boundingBox[3]-Fe.boundingBox[1],Fe.matrix)},ke.endTilingPattern=function(Fe,un){Me("endTilingPattern()"),un.stream=wn[_n].join(`
`),tr(Fe,un),xi.publish("endTilingPattern",un),Ti.pop().restore()};var qi=ke.__private__.newObject=function(){var Fe=Ui();return rr(Fe,!0),Fe},Ui=ke.__private__.newObjectDeferred=function(){return Xe++,rn[Xe]=function(){return fn},Xe},rr=function(Fe,un){return un=typeof un=="boolean"&&un,rn[Fe]=fn,un&&We(Fe+" 0 obj"),Fe},wr=ke.__private__.newAdditionalObject=function(){var Fe={objId:Ui(),content:""};return Nn.push(Fe),Fe},_r=Ui(),vr=Ui(),Sr=ke.__private__.decodeColorString=function(Fe){var un=Fe.split(" ");if(un.length!==2||un[1]!=="g"&&un[1]!=="G")un.length===5&&(un[4]==="k"||un[4]==="K")&&(un=[(1-un[0])*(1-un[3]),(1-un[1])*(1-un[3]),(1-un[2])*(1-un[3]),"r"]);else{var In=parseFloat(un[0]);un=[In,In,In,"r"]}for(var Un="#",Kn=0;Kn<3;Kn++)Un+=("0"+Math.floor(255*parseFloat(un[Kn])).toString(16)).slice(-2);return Un},Er=ke.__private__.encodeColorString=function(Fe){var un;typeof Fe=="string"&&(Fe={ch1:Fe});var In=Fe.ch1,Un=Fe.ch2,Kn=Fe.ch3,oi=Fe.ch4,mi=Fe.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof In=="string"&&In.charAt(0)!=="#"){var Ei=new f(In);if(Ei.ok)In=Ei.toHex();else if(!/^\d*\.?\d*$/.test(In))throw new Error('Invalid color "'+In+'" passed to jsPDF.encodeColorString.')}if(typeof In=="string"&&/^#[0-9A-Fa-f]{3}$/.test(In)&&(In="#"+In[1]+In[1]+In[2]+In[2]+In[3]+In[3]),typeof In=="string"&&/^#[0-9A-Fa-f]{6}$/.test(In)){var ki=parseInt(In.substr(1),16);In=ki>>16&255,Un=ki>>8&255,Kn=255&ki}if(Un===void 0||oi===void 0&&In===Un&&Un===Kn)if(typeof In=="string")un=In+" "+mi[0];else switch(Fe.precision){case 2:un=dn(In/255)+" "+mi[0];break;case 3:default:un=Re(In/255)+" "+mi[0]}else if(oi===void 0||_typeof(oi)==="object"){if(oi&&!isNaN(oi.a)&&oi.a===0)return un=["1.","1.","1.",mi[1]].join(" ");if(typeof In=="string")un=[In,Un,Kn,mi[1]].join(" ");else switch(Fe.precision){case 2:un=[dn(In/255),dn(Un/255),dn(Kn/255),mi[1]].join(" ");break;default:case 3:un=[Re(In/255),Re(Un/255),Re(Kn/255),mi[1]].join(" ")}}else if(typeof In=="string")un=[In,Un,Kn,oi,mi[2]].join(" ");else switch(Fe.precision){case 2:un=[dn(In),dn(Un),dn(Kn),dn(oi),mi[2]].join(" ");break;case 3:default:un=[Re(In),Re(Un),Re(Kn),Re(oi),mi[2]].join(" ")}return un},Jr=ke.__private__.getFilters=function(){return Ee},Mr=ke.__private__.putStream=function(Fe){var un=(Fe=Fe||{}).data||"",In=Fe.filters||Jr(),Un=Fe.alreadyAppliedFilters||[],Kn=Fe.addLength1||!1,oi=un.length,mi=Fe.objectId,Ei=function(Ar){return Ar};if(Ie!==null&&mi===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");Ie!==null&&(Ei=yr.encryptor(mi,0));var ki={};In===!0&&(In=["FlateEncode"]);var Di=Fe.additionalKeyValues||[],Bi=(ki=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(un,In):{data:un,reverseChain:[]}).reverseChain+(Array.isArray(Un)?Un.join(" "):Un.toString());if(ki.data.length!==0&&(Di.push({key:"Length",value:ki.data.length}),Kn===!0&&Di.push({key:"Length1",value:oi})),Bi.length!=0)if(Bi.split("/").length-1==1)Di.push({key:"Filter",value:Bi});else{Di.push({key:"Filter",value:"["+Bi+"]"});for(var Wi=0;Wi<Di.length;Wi+=1)if(Di[Wi].key==="DecodeParms"){for(var sr=[],ar=0;ar<ki.reverseChain.split("/").length-1;ar+=1)sr.push("null");sr.push(Di[Wi].value),Di[Wi].value="["+sr.join(" ")+"]"}}We("<<");for(var hr=0;hr<Di.length;hr++)We("/"+Di[hr].key+" "+Di[hr].value);We(">>"),ki.data.length!==0&&(We("stream"),We(Ei(ki.data)),We("endstream"))},Qr=ke.__private__.putPage=function(Fe){var un=Fe.number,In=Fe.data,Un=Fe.objId,Kn=Fe.contentsObjId;rr(Un,!0),We("<</Type /Page"),We("/Parent "+Fe.rootDictionaryObjId+" 0 R"),We("/Resources "+Fe.resourceDictionaryObjId+" 0 R"),We("/MediaBox ["+parseFloat(Ge(Fe.mediaBox.bottomLeftX))+" "+parseFloat(Ge(Fe.mediaBox.bottomLeftY))+" "+Ge(Fe.mediaBox.topRightX)+" "+Ge(Fe.mediaBox.topRightY)+"]"),Fe.cropBox!==null&&We("/CropBox ["+Ge(Fe.cropBox.bottomLeftX)+" "+Ge(Fe.cropBox.bottomLeftY)+" "+Ge(Fe.cropBox.topRightX)+" "+Ge(Fe.cropBox.topRightY)+"]"),Fe.bleedBox!==null&&We("/BleedBox ["+Ge(Fe.bleedBox.bottomLeftX)+" "+Ge(Fe.bleedBox.bottomLeftY)+" "+Ge(Fe.bleedBox.topRightX)+" "+Ge(Fe.bleedBox.topRightY)+"]"),Fe.trimBox!==null&&We("/TrimBox ["+Ge(Fe.trimBox.bottomLeftX)+" "+Ge(Fe.trimBox.bottomLeftY)+" "+Ge(Fe.trimBox.topRightX)+" "+Ge(Fe.trimBox.topRightY)+"]"),Fe.artBox!==null&&We("/ArtBox ["+Ge(Fe.artBox.bottomLeftX)+" "+Ge(Fe.artBox.bottomLeftY)+" "+Ge(Fe.artBox.topRightX)+" "+Ge(Fe.artBox.topRightY)+"]"),typeof Fe.userUnit=="number"&&Fe.userUnit!==1&&We("/UserUnit "+Fe.userUnit),xi.publish("putPage",{objId:Un,pageContext:wi[un],pageNumber:un,page:In}),We("/Contents "+Kn+" 0 R"),We(">>"),We("endobj");var oi=In.join(`
`);return nn===Ye.ADVANCED&&(oi+=`
Q`),rr(Kn,!0),Mr({data:oi,filters:Jr(),objectId:Kn}),We("endobj"),Un},Fs=ke.__private__.putPages=function(){var Fe,un,In=[];for(Fe=1;Fe<=Pi;Fe++)wi[Fe].objId=Ui(),wi[Fe].contentsObjId=Ui();for(Fe=1;Fe<=Pi;Fe++)In.push(Qr({number:Fe,data:wn[Fe],objId:wi[Fe].objId,contentsObjId:wi[Fe].contentsObjId,mediaBox:wi[Fe].mediaBox,cropBox:wi[Fe].cropBox,bleedBox:wi[Fe].bleedBox,trimBox:wi[Fe].trimBox,artBox:wi[Fe].artBox,userUnit:wi[Fe].userUnit,rootDictionaryObjId:_r,resourceDictionaryObjId:vr}));rr(_r,!0),We("<</Type /Pages");var Un="/Kids [";for(un=0;un<Pi;un++)Un+=In[un]+" 0 R ";We(Un+"]"),We("/Count "+Pi),We(">>"),We("endobj"),xi.publish("postPutPages")},qs=function(Fe){xi.publish("putFont",{font:Fe,out:We,newObject:qi,putStream:Mr}),Fe.isAlreadyPutted!==!0&&(Fe.objectNumber=qi(),We("<<"),We("/Type /Font"),We("/BaseFont /"+F(Fe.postScriptName)),We("/Subtype /Type1"),typeof Fe.encoding=="string"&&We("/Encoding /"+Fe.encoding),We("/FirstChar 32"),We("/LastChar 255"),We(">>"),We("endobj"))},Us=function(){for(var Fe in ei)ei.hasOwnProperty(Fe)&&(Ve===!1||Ve===!0&&He.hasOwnProperty(Fe))&&qs(ei[Fe])},zs=function(Fe){Fe.objectNumber=qi();var un=[];un.push({key:"Type",value:"/XObject"}),un.push({key:"Subtype",value:"/Form"}),un.push({key:"BBox",value:"["+[Ge(Fe.x),Ge(Fe.y),Ge(Fe.x+Fe.width),Ge(Fe.y+Fe.height)].join(" ")+"]"}),un.push({key:"Matrix",value:"["+Fe.matrix.toString()+"]"});var In=Fe.pages[1].join(`
`);Mr({data:In,additionalKeyValues:un,objectId:Fe.objectNumber}),We("endobj")},Hs=function(){for(var Fe in Ii)Ii.hasOwnProperty(Fe)&&zs(Ii[Fe])},Ya=function(Fe,un){var In,Un=[],Kn=1/(un-1);for(In=0;In<1;In+=Kn)Un.push(In);if(Un.push(1),Fe[0].offset!=0){var oi={offset:0,color:Fe[0].color};Fe.unshift(oi)}if(Fe[Fe.length-1].offset!=1){var mi={offset:1,color:Fe[Fe.length-1].color};Fe.push(mi)}for(var Ei="",ki=0,Di=0;Di<Un.length;Di++){for(In=Un[Di];In>Fe[ki+1].offset;)ki++;var Bi=Fe[ki].offset,Wi=(In-Bi)/(Fe[ki+1].offset-Bi),sr=Fe[ki].color,ar=Fe[ki+1].color;Ei+=ze(Math.round((1-Wi)*sr[0]+Wi*ar[0]).toString(16))+ze(Math.round((1-Wi)*sr[1]+Wi*ar[1]).toString(16))+ze(Math.round((1-Wi)*sr[2]+Wi*ar[2]).toString(16))}return Ei.trim()},Wo=function(Fe,un){un||(un=21);var In=qi(),Un=Ya(Fe.colors,un),Kn=[];Kn.push({key:"FunctionType",value:"0"}),Kn.push({key:"Domain",value:"[0.0 1.0]"}),Kn.push({key:"Size",value:"["+un+"]"}),Kn.push({key:"BitsPerSample",value:"8"}),Kn.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Kn.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Mr({data:Un,additionalKeyValues:Kn,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:In}),We("endobj"),Fe.objectNumber=qi(),We("<< /ShadingType "+Fe.type),We("/ColorSpace /DeviceRGB");var oi="/Coords ["+Ge(parseFloat(Fe.coords[0]))+" "+Ge(parseFloat(Fe.coords[1]))+" ";Fe.type===2?oi+=Ge(parseFloat(Fe.coords[2]))+" "+Ge(parseFloat(Fe.coords[3])):oi+=Ge(parseFloat(Fe.coords[2]))+" "+Ge(parseFloat(Fe.coords[3]))+" "+Ge(parseFloat(Fe.coords[4]))+" "+Ge(parseFloat(Fe.coords[5])),We(oi+="]"),Fe.matrix&&We("/Matrix ["+Fe.matrix.toString()+"]"),We("/Function "+In+" 0 R"),We("/Extend [true true]"),We(">>"),We("endobj")},Vo=function(Fe,un){var In=Ui(),Un=qi();un.push({resourcesOid:In,objectOid:Un}),Fe.objectNumber=Un;var Kn=[];Kn.push({key:"Type",value:"/Pattern"}),Kn.push({key:"PatternType",value:"1"}),Kn.push({key:"PaintType",value:"1"}),Kn.push({key:"TilingType",value:"1"}),Kn.push({key:"BBox",value:"["+Fe.boundingBox.map(Ge).join(" ")+"]"}),Kn.push({key:"XStep",value:Ge(Fe.xStep)}),Kn.push({key:"YStep",value:Ge(Fe.yStep)}),Kn.push({key:"Resources",value:In+" 0 R"}),Fe.matrix&&Kn.push({key:"Matrix",value:"["+Fe.matrix.toString()+"]"}),Mr({data:Fe.stream,additionalKeyValues:Kn,objectId:Fe.objectNumber}),We("endobj")},Ws=function(Fe){var un;for(un in Jn)Jn.hasOwnProperty(un)&&(Jn[un]instanceof B?Wo(Jn[un]):Jn[un]instanceof M&&Vo(Jn[un],Fe))},Ka=function(Fe){for(var un in Fe.objectNumber=qi(),We("<<"),Fe)switch(un){case"opacity":We("/ca "+dn(Fe[un]));break;case"stroke-opacity":We("/CA "+dn(Fe[un]))}We(">>"),We("endobj")},Go=function(){var Fe;for(Fe in Si)Si.hasOwnProperty(Fe)&&Ka(Si[Fe])},ba=function(){for(var Fe in We("/XObject <<"),Ii)Ii.hasOwnProperty(Fe)&&Ii[Fe].objectNumber>=0&&We("/"+Fe+" "+Ii[Fe].objectNumber+" 0 R");xi.publish("putXobjectDict"),We(">>")},$o=function(){yr.oid=qi(),We("<<"),We("/Filter /Standard"),We("/V "+yr.v),We("/R "+yr.r),We("/U <"+yr.toHexString(yr.U)+">"),We("/O <"+yr.toHexString(yr.O)+">"),We("/P "+yr.P),We(">>"),We("endobj")},Ja=function(){for(var Fe in We("/Font <<"),ei)ei.hasOwnProperty(Fe)&&(Ve===!1||Ve===!0&&He.hasOwnProperty(Fe))&&We("/"+Fe+" "+ei[Fe].objectNumber+" 0 R");We(">>")},Xo=function(){if(Object.keys(Jn).length>0){for(var Fe in We("/Shading <<"),Jn)Jn.hasOwnProperty(Fe)&&Jn[Fe]instanceof B&&Jn[Fe].objectNumber>=0&&We("/"+Fe+" "+Jn[Fe].objectNumber+" 0 R");xi.publish("putShadingPatternDict"),We(">>")}},Vs=function(Fe){if(Object.keys(Jn).length>0){for(var un in We("/Pattern <<"),Jn)Jn.hasOwnProperty(un)&&Jn[un]instanceof ke.TilingPattern&&Jn[un].objectNumber>=0&&Jn[un].objectNumber<Fe&&We("/"+un+" "+Jn[un].objectNumber+" 0 R");xi.publish("putTilingPatternDict"),We(">>")}},Yo=function(){if(Object.keys(Si).length>0){var Fe;for(Fe in We("/ExtGState <<"),Si)Si.hasOwnProperty(Fe)&&Si[Fe].objectNumber>=0&&We("/"+Fe+" "+Si[Fe].objectNumber+" 0 R");xi.publish("putGStateDict"),We(">>")}},lr=function(Fe){rr(Fe.resourcesOid,!0),We("<<"),We("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ja(),Xo(),Vs(Fe.objectOid),Yo(),ba(),We(">>"),We("endobj")},Qa=function(){var Fe=[];Us(),Go(),Hs(),Ws(Fe),xi.publish("putResources"),Fe.forEach(lr),lr({resourcesOid:vr,objectOid:Number.MAX_SAFE_INTEGER}),xi.publish("postPutResources")},Za=function(){xi.publish("putAdditionalObjects");for(var Fe=0;Fe<Nn.length;Fe++){var un=Nn[Fe];rr(un.objId,!0),We(un.content),We("endobj")}xi.publish("postPutAdditionalObjects")},to=function(Fe){Cn[Fe.fontName]=Cn[Fe.fontName]||{},Cn[Fe.fontName][Fe.fontStyle]=Fe.id},va=function(Fe,un,In,Un,Kn){var oi={id:"F"+(Object.keys(ei).length+1).toString(10),postScriptName:Fe,fontName:un,fontStyle:In,encoding:Un,isStandardFont:Kn||!1,metadata:{}};return xi.publish("addFont",{font:oi,instance:this}),ei[oi.id]=oi,to(oi),oi.id},Ko=function(Fe){for(var un=0,In=Ln.length;un<In;un++){var Un=va.call(this,Fe[un][0],Fe[un][1],Fe[un][2],Ln[un][3],!0);Ve===!1&&(He[Un]=!0);var Kn=Fe[un][0].split("-");to({id:Un,fontName:Kn[0],fontStyle:Kn[1]||""})}xi.publish("addFonts",{fonts:ei,dictionary:Cn})},zr=function(Fe){return Fe.foo=function(){try{return Fe.apply(this,arguments)}catch(Un){var un=Un.stack||"";~un.indexOf(" at ")&&(un=un.split(" at ")[1]);var In="Error in function "+un.split(`
`)[0].split("<")[0]+": "+Un.message;if(!n.console)throw new Error(In);n.console.error(In,Un),n.alert&&alert(In)}},Fe.foo.bar=Fe,Fe.foo},Gs=function(Fe,un){var In,Un,Kn,oi,mi,Ei,ki,Di,Bi;if(Kn=(un=un||{}).sourceEncoding||"Unicode",mi=un.outputEncoding,(un.autoencode||mi)&&ei[vi].metadata&&ei[vi].metadata[Kn]&&ei[vi].metadata[Kn].encoding&&(oi=ei[vi].metadata[Kn].encoding,!mi&&ei[vi].encoding&&(mi=ei[vi].encoding),!mi&&oi.codePages&&(mi=oi.codePages[0]),typeof mi=="string"&&(mi=oi[mi]),mi)){for(ki=!1,Ei=[],In=0,Un=Fe.length;In<Un;In++)(Di=mi[Fe.charCodeAt(In)])?Ei.push(String.fromCharCode(Di)):Ei.push(Fe[In]),Ei[In].charCodeAt(0)>>8&&(ki=!0);Fe=Ei.join("")}for(In=Fe.length;ki===void 0&&In!==0;)Fe.charCodeAt(In-1)>>8&&(ki=!0),In--;if(!ki)return Fe;for(Ei=un.noBOM?[]:[254,255],In=0,Un=Fe.length;In<Un;In++){if((Bi=(Di=Fe.charCodeAt(In))>>8)>>8)throw new Error("Character at position "+In+" of string '"+Fe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ei.push(Bi),Ei.push(Di-(Bi<<8))}return String.fromCharCode.apply(void 0,Ei)},Cr=ke.__private__.pdfEscape=ke.pdfEscape=function(Fe,un){return Gs(Fe,un).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ya=ke.__private__.beginPage=function(Fe){wn[++Pi]=[],wi[Pi]={objId:0,contentsObjId:0,userUnit:Number(Pe),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Fe[0]),topRightY:Number(Fe[1])}},no(Pi),$e(wn[_n])},eo=function(Fe,un){var In,Un,Kn;switch(St=un||St,typeof Fe=="string"&&(In=Be(Fe.toLowerCase()),Array.isArray(In)&&(Un=In[0],Kn=In[1])),Array.isArray(Fe)&&(Un=Fe[0]*Mn,Kn=Fe[1]*Mn),isNaN(Un)&&(Un=xe[0],Kn=xe[1]),(Un>14400||Kn>14400)&&(a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Un=Math.min(14400,Un),Kn=Math.min(14400,Kn)),xe=[Un,Kn],St.substr(0,1)){case"l":Kn>Un&&(xe=[Kn,Un]);break;case"p":Un>Kn&&(xe=[Kn,Un])}ya(xe),lo(Sa),We(Hr),Ca!==0&&We(Ca+" J"),La!==0&&We(La+" j"),xi.publish("addPage",{pageNumber:Pi})},Jo=function(Fe){Fe>0&&Fe<=Pi&&(wn.splice(Fe,1),wi.splice(Fe,1),Pi--,_n>Pi&&(_n=Pi),this.setPage(_n))},no=function(Fe){Fe>0&&Fe<=Pi&&(_n=Fe)},Qo=ke.__private__.getNumberOfPages=ke.getNumberOfPages=function(){return wn.length-1},io=function(Fe,un,In){var Un,Kn=void 0;return In=In||{},Fe=Fe!==void 0?Fe:ei[vi].fontName,un=un!==void 0?un:ei[vi].fontStyle,Un=Fe.toLowerCase(),Cn[Un]!==void 0&&Cn[Un][un]!==void 0?Kn=Cn[Un][un]:Cn[Fe]!==void 0&&Cn[Fe][un]!==void 0?Kn=Cn[Fe][un]:In.disableWarning===!1&&a.warn("Unable to look up font label for font '"+Fe+"', '"+un+"'. Refer to getFontList() for available fonts."),Kn||In.noFallback||(Kn=Cn.times[un])==null&&(Kn=Cn.times.normal),Kn},Zo=ke.__private__.putInfo=function(){var Fe=qi(),un=function(Un){return Un};for(var In in Ie!==null&&(un=yr.encryptor(Fe,0)),We("<<"),We("/Producer ("+Cr(un("jsPDF "+E.version))+")"),li)li.hasOwnProperty(In)&&li[In]&&We("/"+In.substr(0,1).toUpperCase()+In.substr(1)+" ("+Cr(un(li[In]))+")");We("/CreationDate ("+Cr(un(Pn))+")"),We(">>"),We("endobj")},Aa=ke.__private__.putCatalog=function(Fe){var un=(Fe=Fe||{}).rootDictionaryObjId||_r;switch(qi(),We("<<"),We("/Type /Catalog"),We("/Pages "+un+" 0 R"),On||(On="fullwidth"),On){case"fullwidth":We("/OpenAction [3 0 R /FitH null]");break;case"fullheight":We("/OpenAction [3 0 R /FitV null]");break;case"fullpage":We("/OpenAction [3 0 R /Fit]");break;case"original":We("/OpenAction [3 0 R /XYZ null null 1]");break;default:var In=""+On;In.substr(In.length-1)==="%"&&(On=parseInt(On)/100),typeof On=="number"&&We("/OpenAction [3 0 R /XYZ null null "+dn(On)+"]")}switch(ni||(ni="continuous"),ni){case"continuous":We("/PageLayout /OneColumn");break;case"single":We("/PageLayout /SinglePage");break;case"two":case"twoleft":We("/PageLayout /TwoColumnLeft");break;case"tworight":We("/PageLayout /TwoColumnRight")}$n&&We("/PageMode /"+$n),xi.publish("putCatalog"),We(">>"),We("endobj")},tl=ke.__private__.putTrailer=function(){We("trailer"),We("<<"),We("/Size "+(Xe+1)),We("/Root "+Xe+" 0 R"),We("/Info "+(Xe-1)+" 0 R"),Ie!==null&&We("/Encrypt "+yr.oid+" 0 R"),We("/ID [ <"+kn+"> <"+kn+"> ]"),We(">>")},el=ke.__private__.putHeader=function(){We("%PDF-"+qe),We("%ºß¬à")},nl=ke.__private__.putXRef=function(){var Fe="0000000000";We("xref"),We("0 "+(Xe+1)),We("0000000000 65535 f ");for(var un=1;un<=Xe;un++)typeof rn[un]=="function"?We((Fe+rn[un]()).slice(-10)+" 00000 n "):rn[un]!==void 0?We((Fe+rn[un]).slice(-10)+" 00000 n "):We("0000000000 00000 n ")},rs=ke.__private__.buildDocument=function(){Ke(),$e(gn),xi.publish("buildDocument"),el(),Fs(),Za(),Qa(),Ie!==null&&$o(),Zo(),Aa();var Fe=fn;return nl(),tl(),We("startxref"),We(""+Fe),We("%%EOF"),$e(wn[_n]),gn.join(`
`)},$s=ke.__private__.getBlob=function(Fe){return new Blob([bn(Fe)],{type:"application/pdf"})},Xs=ke.output=ke.__private__.output=zr(function(Fe,un){switch(typeof(un=un||{})=="string"?un={filename:un}:un.filename=un.filename||"generated.pdf",Fe){case void 0:return rs();case"save":ke.save(un.filename);break;case"arraybuffer":return bn(rs());case"blob":return $s(rs());case"bloburi":case"bloburl":if(n.URL!==void 0&&typeof n.URL.createObjectURL=="function")return n.URL&&n.URL.createObjectURL($s(rs()))||void 0;a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var In="",Un=rs();try{In=h(Un)}catch{In=h(unescape(encodeURIComponent(Un)))}return"data:application/pdf;filename="+un.filename+";base64,"+In;case"pdfobjectnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var Kn="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",oi=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';un.pdfObjectUrl&&(Kn=un.pdfObjectUrl,oi="");var mi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Kn+'"'+oi+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(un)+");<\/script></body></html>",Ei=n.open();return Ei!==null&&Ei.document.write(mi),Ei}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var ki='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(un.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+un.filename+'" width="500px" height="400px" /></body></html>',Di=n.open();if(Di!==null){Di.document.write(ki);var Bi=this;Di.document.documentElement.querySelector("#pdfViewer").onload=function(){Di.document.title=un.filename,Di.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Bi.output("bloburl"))}}return Di}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Wi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",un)+'"></iframe></body></html>',sr=n.open();if(sr!==null&&(sr.document.write(Wi),sr.document.title=un.filename),sr||typeof safari>"u")return sr;break;case"datauri":case"dataurl":return n.document.location.href=this.output("datauristring",un);default:return null}}),ro=function(Fe){return Array.isArray($i)===!0&&$i.indexOf(Fe)>-1};switch(r){case"pt":Mn=1;break;case"mm":Mn=72/25.4;break;case"cm":Mn=72/2.54;break;case"in":Mn=72;break;case"px":Mn=ro("px_scaling")==1?.75:96/72;break;case"pc":case"em":Mn=12;break;case"ex":Mn=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Mn=r}var yr=null;ii(),Rn();var il=function(Fe){return Ie!==null?yr.encryptor(Fe,0):function(un){return un}},so=ke.__private__.getPageInfo=ke.getPageInfo=function(Fe){if(isNaN(Fe)||Fe%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:wi[Fe].objId,pageNumber:Fe,pageContext:wi[Fe]}},Oi=ke.__private__.getPageInfoByObjId=function(Fe){if(isNaN(Fe)||Fe%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var un in wi)if(wi[un].objId===Fe)break;return so(un)},rl=ke.__private__.getCurrentPageInfo=ke.getCurrentPageInfo=function(){return{objId:wi[_n].objId,pageNumber:_n,pageContext:wi[_n]}};ke.addPage=function(){return eo.apply(this,arguments),this},ke.setPage=function(){return no.apply(this,arguments),$e.call(this,wn[_n]),this},ke.insertPage=function(Fe){return this.addPage(),this.movePage(_n,Fe),this},ke.movePage=function(Fe,un){var In,Un;if(Fe>un){In=wn[Fe],Un=wi[Fe];for(var Kn=Fe;Kn>un;Kn--)wn[Kn]=wn[Kn-1],wi[Kn]=wi[Kn-1];wn[un]=In,wi[un]=Un,this.setPage(un)}else if(Fe<un){In=wn[Fe],Un=wi[Fe];for(var oi=Fe;oi<un;oi++)wn[oi]=wn[oi+1],wi[oi]=wi[oi+1];wn[un]=In,wi[un]=Un,this.setPage(un)}return this},ke.deletePage=function(){return Jo.apply(this,arguments),this},ke.__private__.text=ke.text=function(Fe,un,In,Un,Kn){var oi,mi,Ei,ki,Di,Bi,Wi,sr,ar,hr=(Un=Un||{}).scope||this;if(typeof Fe=="number"&&typeof un=="number"&&(typeof In=="string"||Array.isArray(In))){var Ar=In;In=un,un=Fe,Fe=Ar}if(arguments[3]instanceof Li?(Me("The transform parameter of text() with a Matrix value"),ar=Kn):(Ei=arguments[4],ki=arguments[5],_typeof(Wi=arguments[3])==="object"&&Wi!==null||(typeof Ei=="string"&&(ki=Ei,Ei=null),typeof Wi=="string"&&(ki=Wi,Wi=null),typeof Wi=="number"&&(Ei=Wi,Wi=null),Un={flags:Wi,angle:Ei,align:ki})),isNaN(un)||isNaN(In)||Fe==null)throw new Error("Invalid arguments passed to jsPDF.text");if(Fe.length===0)return hr;var pr="",Wr=!1,Fr=typeof Un.lineHeightFactor=="number"?Un.lineHeightFactor:Ts,as=hr.internal.scaleFactor;function go(er){return er=er.split("	").join(Array(Un.TabLen||9).join(" ")),Cr(er,Wi)}function Ra(er){for(var nr,cr=er.concat(),fr=[],hs=cr.length;hs--;)typeof(nr=cr.shift())=="string"?fr.push(nr):Array.isArray(er)&&(nr.length===1||nr[1]===void 0&&nr[2]===void 0)?fr.push(nr[0]):fr.push([nr[0],nr[1],nr[2]]);return fr}function Ta(er,nr){var cr;if(typeof er=="string")cr=nr(er)[0];else if(Array.isArray(er)){for(var fr,hs,xs=er.concat(),la=[],bo=xs.length;bo--;)typeof(fr=xs.shift())=="string"?la.push(nr(fr)[0]):Array.isArray(fr)&&typeof fr[0]=="string"&&(hs=nr(fr[0],fr[1],fr[2]),la.push([hs[0],hs[1],hs[2]]));cr=la}return cr}var ta=!1,Ia=!0;if(typeof Fe=="string")ta=!0;else if(Array.isArray(Fe)){var Ma=Fe.concat();mi=[];for(var ea,Lr=Ma.length;Lr--;)(typeof(ea=Ma.shift())!="string"||Array.isArray(ea)&&typeof ea[0]!="string")&&(Ia=!1);ta=Ia}if(ta===!1)throw new Error('Type of text must be string or Array. "'+Fe+'" is not recognized.');typeof Fe=="string"&&(Fe=Fe.match(/[\r?\n]/)?Fe.split(/\r\n|\r|\n/g):[Fe]);var na=Bn/hr.internal.scaleFactor,ia=na*(Fr-1);switch(Un.baseline){case"bottom":In-=ia;break;case"top":In+=na-ia;break;case"hanging":In+=na-2*ia;break;case"middle":In+=na/2-ia}if((Bi=Un.maxWidth||0)>0&&(typeof Fe=="string"?Fe=hr.splitTextToSize(Fe,Bi):Object.prototype.toString.call(Fe)==="[object Array]"&&(Fe=Fe.reduce(function(er,nr){return er.concat(hr.splitTextToSize(nr,Bi))},[]))),oi={text:Fe,x:un,y:In,options:Un,mutex:{pdfEscape:Cr,activeFontKey:vi,fonts:ei,activeFontSize:Bn}},xi.publish("preProcessText",oi),Fe=oi.text,Ei=(Un=oi.options).angle,!(ar instanceof Li)&&Ei&&typeof Ei=="number"){Ei*=Math.PI/180,Un.rotationDirection===0&&(Ei=-Ei),nn===Ye.ADVANCED&&(Ei=-Ei);var ra=Math.cos(Ei),Oa=Math.sin(Ei);ar=new Li(ra,Oa,-Oa,ra,0,0)}else Ei&&Ei instanceof Li&&(ar=Ei);nn!==Ye.ADVANCED||ar||(ar=Zi),(Di=Un.charSpace||Js)!==void 0&&(pr+=Ge(Qe(Di))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(sr=Un.horizontalScale)!==void 0&&(pr+=Ge(100*sr)+` Tz
`),Un.lang;var Pr=-1,gl=Un.renderingMode!==void 0?Un.renderingMode:Un.stroke,Da=hr.internal.getCurrentPageInfo().pageContext;switch(gl){case 0:case!1:case"fill":Pr=0;break;case 1:case!0:case"stroke":Pr=1;break;case 2:case"fillThenStroke":Pr=2;break;case 3:case"invisible":Pr=3;break;case 4:case"fillAndAddForClipping":Pr=4;break;case 5:case"strokeAndAddPathForClipping":Pr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Pr=6;break;case 7:case"addToPathForClipping":Pr=7}var mo=Da.usedRenderingMode!==void 0?Da.usedRenderingMode:-1;Pr!==-1?pr+=Pr+` Tr
`:mo!==-1&&(pr+=`0 Tr
`),Pr!==-1&&(Da.usedRenderingMode=Pr),ki=Un.align||"left";var Vr,ja=Bn*Fr,ml=hr.internal.pageSize.getWidth(),bl=ei[vi];Di=Un.charSpace||Js,Bi=Un.maxWidth||0,Wi=Object.assign({autoencode:!0,noBOM:!0},Un.flags);var vs=[];if(Object.prototype.toString.call(Fe)==="[object Array]"){var Or;mi=Ra(Fe),ki!=="left"&&(Vr=mi.map(function(er){return hr.getStringUnitWidth(er,{font:bl,charSpace:Di,fontSize:Bn,doKerning:!1})*Bn/as}));var Gr,ys=0;if(ki==="right"){un-=Vr[0],Fe=[],Lr=mi.length;for(var ts=0;ts<Lr;ts++)ts===0?(Gr=ss(un),Or=gs(In)):(Gr=Qe(ys-Vr[ts]),Or=-ja),Fe.push([mi[ts],Gr,Or]),ys=Vr[ts]}else if(ki==="center"){un-=Vr[0]/2,Fe=[],Lr=mi.length;for(var os=0;os<Lr;os++)os===0?(Gr=ss(un),Or=gs(In)):(Gr=Qe((ys-Vr[os])/2),Or=-ja),Fe.push([mi[os],Gr,Or]),ys=Vr[os]}else if(ki==="left"){Fe=[],Lr=mi.length;for(var sa=0;sa<Lr;sa++)Fe.push(mi[sa])}else{if(ki!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');Fe=[],Lr=mi.length,Bi=Bi!==0?Bi:ml;for(var $r=0;$r<Lr;$r++)Or=$r===0?gs(In):-ja,Gr=$r===0?ss(un):0,$r<Lr-1?vs.push(Ge(Qe((Bi-Vr[$r])/(mi[$r].split(" ").length-1)))):vs.push(0),Fe.push([mi[$r],Gr,Or])}}var aa=typeof Un.R2L=="boolean"?Un.R2L:Gn;aa===!0&&(Fe=Ta(Fe,function(er,nr,cr){return[er.split("").reverse().join(""),nr,cr]})),oi={text:Fe,x:un,y:In,options:Un,mutex:{pdfEscape:Cr,activeFontKey:vi,fonts:ei,activeFontSize:Bn}},xi.publish("postProcessText",oi),Fe=oi.text,Wr=oi.mutex.isHex||!1;var Ba=ei[vi].encoding;Ba!=="WinAnsiEncoding"&&Ba!=="StandardEncoding"||(Fe=Ta(Fe,function(er,nr,cr){return[go(er),nr,cr]})),mi=Ra(Fe),Fe=[];for(var As,Xr,ls,Os=0,oa=1,Ds=Array.isArray(mi[0])?oa:Os,ws="",qa=function(er,nr,cr){var fr="";return cr instanceof Li?(cr=typeof Un.angle=="number"?Ji(cr,new Li(1,0,0,1,er,nr)):Ji(new Li(1,0,0,1,er,nr),cr),nn===Ye.ADVANCED&&(cr=Ji(new Li(1,0,0,-1,0,0),cr)),fr=cr.join(" ")+` Tm
`):fr=Ge(er)+" "+Ge(nr)+` Td
`,fr},Dr=0;Dr<mi.length;Dr++){switch(ws="",Ds){case oa:ls=(Wr?"<":"(")+mi[Dr][0]+(Wr?">":")"),As=parseFloat(mi[Dr][1]),Xr=parseFloat(mi[Dr][2]);break;case Os:ls=(Wr?"<":"(")+mi[Dr]+(Wr?">":")"),As=ss(un),Xr=gs(In)}vs!==void 0&&vs[Dr]!==void 0&&(ws=vs[Dr]+` Tw
`),Dr===0?Fe.push(ws+qa(As,Xr,ar)+ls):Ds===Os?Fe.push(ws+ls):Ds===oa&&Fe.push(ws+qa(As,Xr,ar)+ls)}Fe=Ds===Os?Fe.join(` Tj
T* `):Fe.join(` Tj
`),Fe+=` Tj
`;var cs=`BT
/`;return cs+=vi+" "+Bn+` Tf
`,cs+=Ge(Bn*Fr)+` TL
`,cs+=Is+`
`,cs+=pr,cs+=Fe,We(cs+="ET"),He[vi]=!0,hr};var sl=ke.__private__.clip=ke.clip=function(Fe){return We(Fe==="evenodd"?"W*":"W"),this};ke.clipEvenOdd=function(){return sl("evenodd")},ke.__private__.discardPath=ke.discardPath=function(){return We("n"),this};var Zr=ke.__private__.isValidStyle=function(Fe){var un=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Fe)!==-1&&(un=!0),un};ke.__private__.setDefaultPathOperation=ke.setDefaultPathOperation=function(Fe){return Zr(Fe)&&(Te=Fe),this};var ao=ke.__private__.getStyle=ke.getStyle=function(Fe){var un=Te;switch(Fe){case"D":case"S":un="S";break;case"F":un="f";break;case"FD":case"DF":un="B";break;case"f":case"f*":case"B":case"B*":un=Fe}return un},oo=ke.close=function(){return We("h"),this};ke.stroke=function(){return We("S"),this},ke.fill=function(Fe){return Ys("f",Fe),this},ke.fillEvenOdd=function(Fe){return Ys("f*",Fe),this},ke.fillStroke=function(Fe){return Ys("B",Fe),this},ke.fillStrokeEvenOdd=function(Fe){return Ys("B*",Fe),this};var Ys=function(Fe,un){_typeof(un)==="object"?ol(un,Fe):We(Fe)},wa=function(Fe){Fe===null||nn===Ye.ADVANCED&&Fe===void 0||(Fe=ao(Fe),We(Fe))};function al(Fe,un,In,Un,Kn){var oi=new M(un||this.boundingBox,In||this.xStep,Un||this.yStep,this.gState,Kn||this.matrix);oi.stream=this.stream;var mi=Fe+"$$"+this.cloneIndex+++"$$";return tr(mi,oi),oi}var ol=function(Fe,un){var In=gi[Fe.key],Un=Jn[In];if(Un instanceof B)We("q"),We(ll(un)),Un.gState&&ke.setGState(Un.gState),We(Fe.matrix.toString()+" cm"),We("/"+In+" sh"),We("Q");else if(Un instanceof M){var Kn=new Li(1,0,0,-1,0,bs());Fe.matrix&&(Kn=Kn.multiply(Fe.matrix||Zi),In=al.call(Un,Fe.key,Fe.boundingBox,Fe.xStep,Fe.yStep,Kn).id),We("q"),We("/Pattern cs"),We("/"+In+" scn"),Un.gState&&ke.setGState(Un.gState),We(un),We("Q")}},ll=function(Fe){switch(Fe){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},xa=ke.moveTo=function(Fe,un){return We(Ge(Qe(Fe))+" "+Ge(hn(un))+" m"),this},Rs=ke.lineTo=function(Fe,un){return We(Ge(Qe(Fe))+" "+Ge(hn(un))+" l"),this},ps=ke.curveTo=function(Fe,un,In,Un,Kn,oi){return We([Ge(Qe(Fe)),Ge(hn(un)),Ge(Qe(In)),Ge(hn(Un)),Ge(Qe(Kn)),Ge(hn(oi)),"c"].join(" ")),this};ke.__private__.line=ke.line=function(Fe,un,In,Un,Kn){if(isNaN(Fe)||isNaN(un)||isNaN(In)||isNaN(Un)||!Zr(Kn))throw new Error("Invalid arguments passed to jsPDF.line");return nn===Ye.COMPAT?this.lines([[In-Fe,Un-un]],Fe,un,[1,1],Kn||"S"):this.lines([[In-Fe,Un-un]],Fe,un,[1,1]).stroke()},ke.__private__.lines=ke.lines=function(Fe,un,In,Un,Kn,oi){var mi,Ei,ki,Di,Bi,Wi,sr,ar,hr,Ar,pr,Wr;if(typeof Fe=="number"&&(Wr=In,In=un,un=Fe,Fe=Wr),Un=Un||[1,1],oi=oi||!1,isNaN(un)||isNaN(In)||!Array.isArray(Fe)||!Array.isArray(Un)||!Zr(Kn)||typeof oi!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(xa(un,In),mi=Un[0],Ei=Un[1],Di=Fe.length,Ar=un,pr=In,ki=0;ki<Di;ki++)(Bi=Fe[ki]).length===2?(Ar=Bi[0]*mi+Ar,pr=Bi[1]*Ei+pr,Rs(Ar,pr)):(Wi=Bi[0]*mi+Ar,sr=Bi[1]*Ei+pr,ar=Bi[2]*mi+Ar,hr=Bi[3]*Ei+pr,Ar=Bi[4]*mi+Ar,pr=Bi[5]*Ei+pr,ps(Wi,sr,ar,hr,Ar,pr));return oi&&oo(),wa(Kn),this},ke.path=function(Fe){for(var un=0;un<Fe.length;un++){var In=Fe[un],Un=In.c;switch(In.op){case"m":xa(Un[0],Un[1]);break;case"l":Rs(Un[0],Un[1]);break;case"c":ps.apply(this,Un);break;case"h":oo()}}return this},ke.__private__.rect=ke.rect=function(Fe,un,In,Un,Kn){if(isNaN(Fe)||isNaN(un)||isNaN(In)||isNaN(Un)||!Zr(Kn))throw new Error("Invalid arguments passed to jsPDF.rect");return nn===Ye.COMPAT&&(Un=-Un),We([Ge(Qe(Fe)),Ge(hn(un)),Ge(Qe(In)),Ge(Qe(Un)),"re"].join(" ")),wa(Kn),this},ke.__private__.triangle=ke.triangle=function(Fe,un,In,Un,Kn,oi,mi){if(isNaN(Fe)||isNaN(un)||isNaN(In)||isNaN(Un)||isNaN(Kn)||isNaN(oi)||!Zr(mi))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[In-Fe,Un-un],[Kn-In,oi-Un],[Fe-Kn,un-oi]],Fe,un,[1,1],mi,!0),this},ke.__private__.roundedRect=ke.roundedRect=function(Fe,un,In,Un,Kn,oi,mi){if(isNaN(Fe)||isNaN(un)||isNaN(In)||isNaN(Un)||isNaN(Kn)||isNaN(oi)||!Zr(mi))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ei=4/3*(Math.SQRT2-1);return Kn=Math.min(Kn,.5*In),oi=Math.min(oi,.5*Un),this.lines([[In-2*Kn,0],[Kn*Ei,0,Kn,oi-oi*Ei,Kn,oi],[0,Un-2*oi],[0,oi*Ei,-Kn*Ei,oi,-Kn,oi],[2*Kn-In,0],[-Kn*Ei,0,-Kn,-oi*Ei,-Kn,-oi],[0,2*oi-Un],[0,-oi*Ei,Kn*Ei,-oi,Kn,-oi]],Fe+Kn,un,[1,1],mi,!0),this},ke.__private__.ellipse=ke.ellipse=function(Fe,un,In,Un,Kn){if(isNaN(Fe)||isNaN(un)||isNaN(In)||isNaN(Un)||!Zr(Kn))throw new Error("Invalid arguments passed to jsPDF.ellipse");var oi=4/3*(Math.SQRT2-1)*In,mi=4/3*(Math.SQRT2-1)*Un;return xa(Fe+In,un),ps(Fe+In,un-mi,Fe+oi,un-Un,Fe,un-Un),ps(Fe-oi,un-Un,Fe-In,un-mi,Fe-In,un),ps(Fe-In,un+mi,Fe-oi,un+Un,Fe,un+Un),ps(Fe+oi,un+Un,Fe+In,un+mi,Fe+In,un),wa(Kn),this},ke.__private__.circle=ke.circle=function(Fe,un,In,Un){if(isNaN(Fe)||isNaN(un)||isNaN(In)||!Zr(Un))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Fe,un,In,In,Un)},ke.setFont=function(Fe,un,In){return In&&(un=Je(un,In)),vi=io(Fe,un,{disableWarning:!1}),this};var cl=ke.__private__.getFont=ke.getFont=function(){return ei[io.apply(ke,arguments)]};ke.__private__.getFontList=ke.getFontList=function(){var Fe,un,In={};for(Fe in Cn)if(Cn.hasOwnProperty(Fe))for(un in In[Fe]=[],Cn[Fe])Cn[Fe].hasOwnProperty(un)&&In[Fe].push(un);return In},ke.addFont=function(Fe,un,In,Un,Kn){var oi=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&oi.indexOf(arguments[3])!==-1?Kn=arguments[3]:arguments[3]&&oi.indexOf(arguments[3])==-1&&(In=Je(In,Un)),Kn=Kn||"Identity-H",va.call(this,Fe,un,In,Kn)};var Ts,Sa=e.lineWidth||.200025,Ks=ke.__private__.getLineWidth=ke.getLineWidth=function(){return Sa},lo=ke.__private__.setLineWidth=ke.setLineWidth=function(Fe){return Sa=Fe,We(Ge(Qe(Fe))+" w"),this};ke.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(Fe,un){if(Fe=Fe||[],un=un||0,isNaN(un)||!Array.isArray(Fe))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Fe=Fe.map(function(In){return Ge(Qe(In))}).join(" "),un=Ge(Qe(un)),We("["+Fe+"] "+un+" d"),this};var co=ke.__private__.getLineHeight=ke.getLineHeight=function(){return Bn*Ts};ke.__private__.getLineHeight=ke.getLineHeight=function(){return Bn*Ts};var ho=ke.__private__.setLineHeightFactor=ke.setLineHeightFactor=function(Fe){return typeof(Fe=Fe||1.15)=="number"&&(Ts=Fe),this},uo=ke.__private__.getLineHeightFactor=ke.getLineHeightFactor=function(){return Ts};ho(e.lineHeight);var ss=ke.__private__.getHorizontalCoordinate=function(Fe){return Qe(Fe)},gs=ke.__private__.getVerticalCoordinate=function(Fe){return nn===Ye.ADVANCED?Fe:wi[_n].mediaBox.topRightY-wi[_n].mediaBox.bottomLeftY-Qe(Fe)},hl=ke.__private__.getHorizontalCoordinateString=ke.getHorizontalCoordinateString=function(Fe){return Ge(ss(Fe))},ms=ke.__private__.getVerticalCoordinateString=ke.getVerticalCoordinateString=function(Fe){return Ge(gs(Fe))},Hr=e.strokeColor||"0 G";ke.__private__.getStrokeColor=ke.getDrawColor=function(){return Sr(Hr)},ke.__private__.setStrokeColor=ke.setDrawColor=function(Fe,un,In,Un){return Hr=Er({ch1:Fe,ch2:un,ch3:In,ch4:Un,pdfColorType:"draw",precision:2}),We(Hr),this};var Ea=e.fillColor||"0 g";ke.__private__.getFillColor=ke.getFillColor=function(){return Sr(Ea)},ke.__private__.setFillColor=ke.setFillColor=function(Fe,un,In,Un){return Ea=Er({ch1:Fe,ch2:un,ch3:In,ch4:Un,pdfColorType:"fill",precision:2}),We(Ea),this};var Is=e.textColor||"0 g",ul=ke.__private__.getTextColor=ke.getTextColor=function(){return Sr(Is)};ke.__private__.setTextColor=ke.setTextColor=function(Fe,un,In,Un){return Is=Er({ch1:Fe,ch2:un,ch3:In,ch4:Un,pdfColorType:"text",precision:3}),this};var Js=e.charSpace,dl=ke.__private__.getCharSpace=ke.getCharSpace=function(){return parseFloat(Js||0)};ke.__private__.setCharSpace=ke.setCharSpace=function(Fe){if(isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Js=Fe,this};var Ca=0;ke.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},ke.__private__.setLineCap=ke.setLineCap=function(Fe){var un=ke.CapJoinStyles[Fe];if(un===void 0)throw new Error("Line cap style of '"+Fe+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ca=un,We(un+" J"),this};var La=0;ke.__private__.setLineJoin=ke.setLineJoin=function(Fe){var un=ke.CapJoinStyles[Fe];if(un===void 0)throw new Error("Line join style of '"+Fe+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return La=un,We(un+" j"),this},ke.__private__.setLineMiterLimit=ke.__private__.setMiterLimit=ke.setLineMiterLimit=ke.setMiterLimit=function(Fe){if(Fe=Fe||0,isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return We(Ge(Qe(Fe))+" M"),this},ke.GState=j,ke.setGState=function(Fe){(Fe=typeof Fe=="string"?Si[Ni[Fe]]:fo(null,Fe)).equals(Fi)||(We("/"+Fe.id+" gs"),Fi=Fe)};var fo=function(Fe,un){if(!Fe||!Ni[Fe]){var In=!1;for(var Un in Si)if(Si.hasOwnProperty(Un)&&Si[Un].equals(un)){In=!0;break}if(In)un=Si[Un];else{var Kn="GS"+(Object.keys(Si).length+1).toString(10);Si[Kn]=un,un.id=Kn}return Fe&&(Ni[Fe]=un.id),xi.publish("addGState",un),un}};ke.addGState=function(Fe,un){return fo(Fe,un),this},ke.saveGraphicsState=function(){return We("q"),Tn.push({key:vi,size:Bn,color:Is}),this},ke.restoreGraphicsState=function(){We("Q");var Fe=Tn.pop();return vi=Fe.key,Bn=Fe.size,Is=Fe.color,Fi=null,this},ke.setCurrentTransformationMatrix=function(Fe){return We(Fe.toString()+" cm"),this},ke.comment=function(Fe){return We("#"+Fe),this};var Qs=function(Fe,un){var In=Fe||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return In},set:function(oi){isNaN(oi)||(In=parseFloat(oi))}});var Un=un||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Un},set:function(oi){isNaN(oi)||(Un=parseFloat(oi))}});var Kn="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Kn},set:function(oi){Kn=oi.toString()}}),this},Pa=function(Fe,un,In,Un){Qs.call(this,Fe,un),this.type="rect";var Kn=In||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Kn},set:function(mi){isNaN(mi)||(Kn=parseFloat(mi))}});var oi=Un||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return oi},set:function(mi){isNaN(mi)||(oi=parseFloat(mi))}}),this},Na=function(){this.page=Pi,this.currentPage=_n,this.pages=wn.slice(0),this.pagesContext=wi.slice(0),this.x=bi,this.y=fi,this.matrix=Mi,this.width=Ms(_n),this.height=bs(_n),this.outputDestination=Sn,this.id="",this.objectNumber=-1};Na.prototype.restore=function(){Pi=this.page,_n=this.currentPage,wi=this.pagesContext,wn=this.pages,bi=this.x,fi=this.y,Mi=this.matrix,ka(_n,this.width),Fa(_n,this.height),Sn=this.outputDestination};var po=function(Fe,un,In,Un,Kn){Ti.push(new Na),Pi=_n=0,wn=[],bi=Fe,fi=un,Mi=Kn,ya([In,Un])},pl=function(Fe){if(zi[Fe])Ti.pop().restore();else{var un=new Na,In="Xo"+(Object.keys(Ii).length+1).toString(10);un.id=In,zi[Fe]=In,Ii[In]=un,xi.publish("addFormObject",un),Ti.pop().restore()}};for(var Zs in ke.beginFormObject=function(Fe,un,In,Un,Kn){return po(Fe,un,In,Un,Kn),this},ke.endFormObject=function(Fe){return pl(Fe),this},ke.doFormObject=function(Fe,un){var In=Ii[zi[Fe]];return We("q"),We(un.toString()+" cm"),We("/"+In.id+" Do"),We("Q"),this},ke.getFormObject=function(Fe){var un=Ii[zi[Fe]];return{x:un.x,y:un.y,width:un.width,height:un.height,matrix:un.matrix}},ke.save=function(Fe,un){return Fe=Fe||"generated.pdf",(un=un||{}).returnPromise=un.returnPromise||!1,un.returnPromise===!1?(l($s(rs()),Fe),typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(In,Un){try{var Kn=l($s(rs()),Fe);typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),In(Kn)}catch(oi){Un(oi.message)}})},E.API)E.API.hasOwnProperty(Zs)&&(Zs==="events"&&E.API.events.length?function(Fe,un){var In,Un,Kn;for(Kn=un.length-1;Kn!==-1;Kn--)In=un[Kn][0],Un=un[Kn][1],Fe.subscribe.apply(Fe,[In].concat(typeof Un=="function"?[Un]:Un))}(xi,E.API.events):ke[Zs]=E.API[Zs]);var Ms=ke.getPageWidth=function(Fe){return(wi[Fe=Fe||_n].mediaBox.topRightX-wi[Fe].mediaBox.bottomLeftX)/Mn},ka=ke.setPageWidth=function(Fe,un){wi[Fe].mediaBox.topRightX=un*Mn+wi[Fe].mediaBox.bottomLeftX},bs=ke.getPageHeight=function(Fe){return(wi[Fe=Fe||_n].mediaBox.topRightY-wi[Fe].mediaBox.bottomLeftY)/Mn},Fa=ke.setPageHeight=function(Fe,un){wi[Fe].mediaBox.topRightY=un*Mn+wi[Fe].mediaBox.bottomLeftY};return ke.internal={pdfEscape:Cr,getStyle:ao,getFont:cl,getFontSize:qn,getCharSpace:dl,getTextColor:ul,getLineHeight:co,getLineHeightFactor:uo,getLineWidth:Ks,write:yn,getHorizontalCoordinate:ss,getVerticalCoordinate:gs,getCoordinateString:hl,getVerticalCoordinateString:ms,collections:{},newObject:qi,newAdditionalObject:wr,newObjectDeferred:Ui,newObjectDeferredBegin:rr,getFilters:Jr,putStream:Mr,events:xi,scaleFactor:Mn,pageSize:{getWidth:function(){return Ms(_n)},setWidth:function(Fe){ka(_n,Fe)},getHeight:function(){return bs(_n)},setHeight:function(Fe){Fa(_n,Fe)}},encryptionOptions:Ie,encryption:yr,getEncryptor:il,output:Xs,getNumberOfPages:Qo,pages:wn,out:We,f2:dn,f3:Re,getPageInfo:so,getPageInfoByObjId:Oi,getCurrentPageInfo:rl,getPDFVersion:De,Point:Qs,Rectangle:Pa,Matrix:Li,hasHotfix:ro},Object.defineProperty(ke.internal.pageSize,"width",{get:function(){return Ms(_n)},set:function(Fe){ka(_n,Fe)},enumerable:!0,configurable:!0}),Object.defineProperty(ke.internal.pageSize,"height",{get:function(){return bs(_n)},set:function(Fe){Fa(_n,Fe)},enumerable:!0,configurable:!0}),Ko.call(ke,Ln),vi="F1",eo(xe,St),xi.publish("initialized"),ke}I.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},I.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(e){for(var t=[],St=0;St<e.length;St+=2)t.push(String.fromCharCode(parseInt(e.substr(St,2),16)));return t.join("")},I.prototype.processOwnerPassword=function(e,t){return P(x(t).substr(0,5),e)},I.prototype.encryptor=function(e,t){var St=x(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return P(St,r)}},j.prototype.equals=function(e){var t,St="id,objectNumber,equals";if(!e||_typeof(e)!==_typeof(this))return!1;var r=0;for(t in this)if(!(St.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&St.indexOf(t)<0&&r--;return r===0},E.API={events:[]},E.version="2.5.1";var q=E.API,D=1,R=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},T=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(e){return e.toFixed(2)},z=function(e){return e.toFixed(5)};q.__acroform__={};var H=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},W=function(e){return e*D},V=function(e){var t=new ut,St=At.internal.getHeight(e)||0,r=At.internal.getWidth(e)||0;return t.BBox=[0,0,Number(U(r)),Number(U(St))],t},G=q.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Y=q.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},J=q.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},X=q.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J(e,t-1)},K=q.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G(e,t-1)},Z=q.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Y(e,t-1)},$=q.__acroform__.calculateCoordinates=function(e,t){var St=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,xe=e[0],_e=e[1],Ee=e[2],Pe=e[3],Ce={};return Ce.lowerLeft_X=St(xe)||0,Ce.lowerLeft_Y=r(_e+Pe)||0,Ce.upperRight_X=St(xe+Ee)||0,Ce.upperRight_Y=r(_e)||0,[Number(U(Ce.lowerLeft_X)),Number(U(Ce.lowerLeft_Y)),Number(U(Ce.upperRight_X)),Number(U(Ce.upperRight_Y))]},Q=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],St=e._V||e.DV,r=tt(e,St),xe=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+xe+" "+U(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var _e=V(e);return _e.scope=e.scope,_e.stream=t.join(`
`),_e}},tt=function(e,t){var St=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},xe=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");xe=e.multiline?xe.map(function(Re){return Re.split(`
`)}):xe.map(function(Re){return[Re]});var _e=St,Ee=At.internal.getHeight(e)||0;Ee=Ee<0?-Ee:Ee;var Pe=At.internal.getWidth(e)||0;Pe=Pe<0?-Pe:Pe;var Ce=function(Re,Qe,cn){if(Re+1<xe.length){var hn=Qe+" "+xe[Re+1][0];return et(hn,e,cn).width<=Pe-4}return!1};_e++;t:for(;_e>0;){t="",_e--;var Te,Ie,Ve=et("3",e,_e).height,He=e.multiline?Ee-_e:(Ee-Ve)/2,ke=He+=2,qe=0,De=0,Oe=0;if(_e<=0){t=`(...) Tj
`,t+="% Width of Text: "+et(t,e,_e=12).width+", FieldWidth:"+Pe+`
`;break}for(var Be="",Ye=0,nn=0;nn<xe.length;nn++)if(xe.hasOwnProperty(nn)){var en=!1;if(xe[nn].length!==1&&Oe!==xe[nn].length-1){if((Ve+2)*(Ye+2)+2>Ee)continue t;Be+=xe[nn][Oe],en=!0,De=nn,nn--}else{Be=(Be+=xe[nn][Oe]+" ").substr(Be.length-1)==" "?Be.substr(0,Be.length-1):Be;var Ue=parseInt(nn),Je=Ce(Ue,Be,_e),Ge=nn>=xe.length-1;if(Je&&!Ge){Be+=" ",Oe=0;continue}if(Je||Ge){if(Ge)De=Ue;else if(e.multiline&&(Ve+2)*(Ye+2)+2>Ee)continue t}else{if(!e.multiline||(Ve+2)*(Ye+2)+2>Ee)continue t;De=Ue}}for(var Me="",tn=qe;tn<=De;tn++){var dn=xe[tn];if(e.multiline){if(tn===De){Me+=dn[Oe]+" ",Oe=(Oe+1)%dn.length;continue}if(tn===qe){Me+=dn[dn.length-1]+" ";continue}}Me+=dn[0]+" "}switch(Me=Me.substr(Me.length-1)==" "?Me.substr(0,Me.length-1):Me,Ie=et(Me,e,_e).width,e.textAlign){case"right":Te=Pe-Ie-2;break;case"center":Te=(Pe-Ie)/2;break;case"left":default:Te=2}t+=U(Te)+" "+U(ke)+` Td
`,t+="("+R(Me)+`) Tj
`,t+=-U(Te)+` 0 Td
`,ke=-(_e+2),Ie=0,qe=en?De:De+1,Ye++,Be=""}break}return r.text=t,r.fontSize=_e,r},et=function(e,t,St){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),xe=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(St),charSpace:0})*parseFloat(St);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(St),charSpace:0})*parseFloat(St)*1.5,width:xe}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nt=function(e,t){var St={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===St.type&&r.object===St.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(St)},it=function(e,t){for(var St in e)if(e.hasOwnProperty(St)){var r=St,xe=e[St];t.internal.newObjectDeferredBegin(xe.objId,!0),_typeof(xe)==="object"&&typeof xe.putStream=="function"&&xe.putStream(),delete e[r]}},at=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(lt.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new ht,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(St){St.internal.events.unsubscribe(St.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete St.internal.acroformPlugin.acroFormDictionaryRoot._eventID,St.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(St){St.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=St.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var xe in r)if(r.hasOwnProperty(xe)){var _e=r[xe];_e.objId=void 0,_e.hasAnnotation&&nt(_e,St)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(St){if(St.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");St.internal.write("/AcroForm "+St.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(St){(function(r,xe){var _e=!r;for(var Ee in r||(xe.internal.newObjectDeferredBegin(xe.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),xe.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||xe.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(Ee)){var Pe=r[Ee],Ce=[],Te=Pe.Rect;if(Pe.Rect&&(Pe.Rect=$(Pe.Rect,xe)),xe.internal.newObjectDeferredBegin(Pe.objId,!0),Pe.DA=At.createDefaultAppearanceStream(Pe),_typeof(Pe)==="object"&&typeof Pe.getKeyValueListForStream=="function"&&(Ce=Pe.getKeyValueListForStream()),Pe.Rect=Te,Pe.hasAppearanceStream&&!Pe.appearanceStreamContent){var Ie=Q(Pe);Ce.push({key:"AP",value:"<</N "+Ie+">>"}),xe.internal.acroformPlugin.xForms.push(Ie)}if(Pe.appearanceStreamContent){var Ve="";for(var He in Pe.appearanceStreamContent)if(Pe.appearanceStreamContent.hasOwnProperty(He)){var ke=Pe.appearanceStreamContent[He];if(Ve+="/"+He+" ",Ve+="<<",Object.keys(ke).length>=1||Array.isArray(ke)){for(var Ee in ke)if(ke.hasOwnProperty(Ee)){var qe=ke[Ee];typeof qe=="function"&&(qe=qe.call(xe,Pe)),Ve+="/"+Ee+" "+qe+" ",xe.internal.acroformPlugin.xForms.indexOf(qe)>=0||xe.internal.acroformPlugin.xForms.push(qe)}}else typeof(qe=ke)=="function"&&(qe=qe.call(xe,Pe)),Ve+="/"+Ee+" "+qe,xe.internal.acroformPlugin.xForms.indexOf(qe)>=0||xe.internal.acroformPlugin.xForms.push(qe);Ve+=">>"}Ce.push({key:"AP",value:`<<
`+Ve+">>"})}xe.internal.putStream({additionalKeyValues:Ce,objectId:Pe.objId}),xe.internal.out("endobj")}_e&&it(xe.internal.acroformPlugin.xForms,xe)})(St,e)}),e.internal.acroformPlugin.isInitialized=!0}},ot=q.__acroform__.arrayToPdfArray=function(e,t,St){var r=function(Ee){return Ee};if(Array.isArray(e)){for(var xe="[",_e=0;_e<e.length;_e++)switch(_e!==0&&(xe+=" "),_typeof(e[_e])){case"boolean":case"number":case"object":xe+=e[_e].toString();break;case"string":e[_e].substr(0,1)!=="/"?(t!==void 0&&St&&(r=St.internal.getEncryptor(t)),xe+="("+R(r(e[_e].toString()))+")"):xe+=e[_e].toString()}return xe+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(e,t,St){var r=function(xe){return xe};return t!==void 0&&St&&(r=St.internal.getEncryptor(t)),(e=e||"").toString(),e="("+R(r(e))+")"},ct=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ct.prototype.toString=function(){return this.objId+" 0 R"},ct.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},ct.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(_e){return _e!="content"&&_e!="appearanceStreamContent"&&_e!="scope"&&_e!="objId"&&_e.substring(0,1)!="_"});for(var St in t)if(Object.getOwnPropertyDescriptor(this,t[St]).configurable===!1){var r=t[St],xe=this[r];xe&&(Array.isArray(xe)?e.push({key:r,value:ot(xe,this.objId,this.scope)}):xe instanceof ct?(xe.scope=this.scope,e.push({key:r,value:xe.objId+" 0 R"})):typeof xe!="function"&&e.push({key:r,value:xe}))}return e};var ut=function(){ct.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(St){t=St}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(St){e=St.trim()},get:function(){return e||null}})};H(ut,ct);var ht=function(){ct.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var St=function(r){return r};return this.scope&&(St=this.scope.internal.getEncryptor(this.objId)),"("+R(St(e))+")"}},set:function(St){e=St}})};H(ht,ct);var lt=function e(){ct.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(Be){if(isNaN(Be))throw new Error('Invalid value "'+Be+'" for attribute F supplied.');t=Be}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!X(t,3)},set:function(Be){Be?this.F=K(t,3):this.F=Z(t,3)}});var St=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return St},set:function(Be){if(isNaN(Be))throw new Error('Invalid value "'+Be+'" for attribute Ff supplied.');St=Be}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(Be){r=Be!==void 0?Be:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(Be){r[0]=Be}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(Be){r[1]=Be}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(Be){r[2]=Be}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(Be){r[3]=Be}});var xe="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return xe},set:function(Be){switch(Be){case"/Btn":case"/Tx":case"/Ch":case"/Sig":xe=Be;break;default:throw new Error('Invalid value "'+Be+'" for attribute FT supplied.')}}});var _e=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!_e||_e.length<1){if(this instanceof yt)return;_e="FieldObject"+e.FieldNum++}var Be=function(Ye){return Ye};return this.scope&&(Be=this.scope.internal.getEncryptor(this.objId)),"("+R(Be(_e))+")"},set:function(Be){_e=Be.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return _e},set:function(Be){_e=Be}});var Ee="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return Ee},set:function(Be){Ee=Be}});var Pe="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return Pe},set:function(Be){Pe=Be}});var Ce=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return Ce},set:function(Be){Ce=Be}});var Te=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return Te===void 0?50/D:Te},set:function(Be){Te=Be}});var Ie="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return Ie},set:function(Be){Ie=Be}});var Ve="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!Ve||this instanceof yt||this instanceof Nt))return st(Ve,this.objId,this.scope)},set:function(Be){Be=Be.toString(),Ve=Be}});var He=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(He)return this instanceof mt?He:st(He,this.objId,this.scope)},set:function(Be){Be=Be.toString(),He=this instanceof mt?Be:Be.substr(0,1)==="("?T(Be.substr(1,Be.length-2)):T(Be)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(He.substr(1,He.length-1)):He},set:function(Be){Be=Be.toString(),He=this instanceof mt?"/"+Be:Be}});var ke=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(ke)return ke},set:function(Be){this.V=Be}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(ke)return this instanceof mt?ke:st(ke,this.objId,this.scope)},set:function(Be){Be=Be.toString(),ke=this instanceof mt?Be:Be.substr(0,1)==="("?T(Be.substr(1,Be.length-2)):T(Be)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(ke.substr(1,ke.length-1)):ke},set:function(Be){Be=Be.toString(),ke=this instanceof mt?"/"+Be:Be}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var qe,De=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return De},set:function(Be){Be=!!Be,De=Be}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(qe)return qe},set:function(Be){qe=Be}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,1)},set:function(Be){Be?this.Ff=K(this.Ff,1):this.Ff=Z(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,2)},set:function(Be){Be?this.Ff=K(this.Ff,2):this.Ff=Z(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,3)},set:function(Be){Be?this.Ff=K(this.Ff,3):this.Ff=Z(this.Ff,3)}});var Oe=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(Oe!==null)return Oe},set:function(Be){if([0,1,2].indexOf(Be)===-1)throw new Error('Invalid value "'+Be+'" for attribute Q supplied.');Oe=Be}}),Object.defineProperty(this,"textAlign",{get:function(){var Be;switch(Oe){case 0:default:Be="left";break;case 1:Be="center";break;case 2:Be="right"}return Be},configurable:!0,enumerable:!0,set:function(Be){switch(Be){case"right":case 2:Oe=2;break;case"center":case 1:Oe=1;break;case"left":case 0:default:Oe=0}}})};H(lt,ct);var ft=function(){lt.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(St){e=St}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(St){e=St}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(t,this.objId,this.scope)},set:function(St){var r,xe;xe=[],typeof(r=St)=="string"&&(xe=function(_e,Ee,Pe){Pe||(Pe=1);for(var Ce,Te=[];Ce=Ee.exec(_e);)Te.push(Ce[Pe]);return Te}(r,/\((.*?)\)/g)),t=xe}}),this.getOptions=function(){return t},this.setOptions=function(St){t=St,this.sort&&t.sort()},this.addOption=function(St){St=(St=St||"").toString(),t.push(St),this.sort&&t.sort()},this.removeOption=function(St,r){for(r=r||!1,St=(St=St||"").toString();t.indexOf(St)!==-1&&(t.splice(t.indexOf(St),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,18)},set:function(St){St?this.Ff=K(this.Ff,18):this.Ff=Z(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,19)},set:function(St){this.combo===!0&&(St?this.Ff=K(this.Ff,19):this.Ff=Z(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,20)},set:function(St){St?(this.Ff=K(this.Ff,20),t.sort()):this.Ff=Z(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,22)},set:function(St){St?this.Ff=K(this.Ff,22):this.Ff=Z(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(St){St?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,27)},set:function(St){St?this.Ff=K(this.Ff,27):this.Ff=Z(this.Ff,27)}}),this.hasAppearanceStream=!1};H(ft,lt);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};H(dt,ft);var pt=function(){dt.call(this),this.combo=!0};H(pt,dt);var gt=function(){pt.call(this),this.edit=!0};H(gt,pt);var mt=function(){lt.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,15)},set:function(St){St?this.Ff=K(this.Ff,15):this.Ff=Z(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,16)},set:function(St){St?this.Ff=K(this.Ff,16):this.Ff=Z(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,17)},set:function(St){St?this.Ff=K(this.Ff,17):this.Ff=Z(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(St){St?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var St=function(_e){return _e};if(this.scope&&(St=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,xe=[];for(r in xe.push("<<"),t)xe.push("/"+r+" ("+R(St(t[r]))+")");return xe.push(">>"),xe.join(`
`)}},set:function(St){_typeof(St)==="object"&&(t=St)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(St){typeof St=="string"&&(t.CA=St)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(St){e=St}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(St){e="/"+St}})};H(mt,lt);var vt=function(){mt.call(this),this.pushButton=!0};H(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};H(bt,mt);var yt=function(){var e,t;lt.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(xe){e=xe}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(xe){t=xe}});var St,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var xe=function(Pe){return Pe};this.scope&&(xe=this.scope.internal.getEncryptor(this.objId));var _e,Ee=[];for(_e in Ee.push("<<"),r)Ee.push("/"+_e+" ("+R(xe(r[_e]))+")");return Ee.push(">>"),Ee.join(`
`)},set:function(xe){_typeof(xe)==="object"&&(r=xe)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(xe){typeof xe=="string"&&(r.CA=xe)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return St},set:function(xe){St=xe}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return St.substr(1,St.length-1)},set:function(xe){St="/"+xe}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};H(yt,lt),bt.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var St=this.Kids[t];St.appearanceStreamContent=e.createAppearanceStream(St.optionName),St.caption=e.getCA()}},bt.prototype.createOption=function(e){var t=new yt;return t.Parent=this,t.optionName=e,this.Kids.push(t),xt.call(this.scope,t),t};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};H(wt,mt);var Nt=function(){lt.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,13)},set:function(t){t?this.Ff=K(this.Ff,13):this.Ff=Z(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,21)},set:function(t){t?this.Ff=K(this.Ff,21):this.Ff=Z(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(t){t?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,24)},set:function(t){t?this.Ff=K(this.Ff,24):this.Ff=Z(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,25)},set:function(t){t?this.Ff=K(this.Ff,25):this.Ff=Z(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(t){t?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};H(Nt,lt);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,14)},set:function(e){e?this.Ff=K(this.Ff,14):this.Ff=Z(this.Ff,14)}}),this.password=!0};H(Lt,Nt);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=V(e);t.scope=e.scope;var St=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,xe=e.scope.__private__.encodeColorString(e.color),_e=tt(e,e.caption);return St.push("0.749023 g"),St.push("0 0 "+U(At.internal.getWidth(e))+" "+U(At.internal.getHeight(e))+" re"),St.push("f"),St.push("BMC"),St.push("q"),St.push("0 0 1 rg"),St.push("/"+r+" "+U(_e.fontSize)+" Tf "+xe),St.push("BT"),St.push(_e.text),St.push("ET"),St.push("Q"),St.push("EMC"),t.stream=St.join(`
`),t},YesNormal:function(e){var t=V(e);t.scope=e.scope;var St=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),xe=[],_e=At.internal.getHeight(e),Ee=At.internal.getWidth(e),Pe=tt(e,e.caption);return xe.push("1 g"),xe.push("0 0 "+U(Ee)+" "+U(_e)+" re"),xe.push("f"),xe.push("q"),xe.push("0 0 1 rg"),xe.push("0 0 "+U(Ee-1)+" "+U(_e-1)+" re"),xe.push("W"),xe.push("n"),xe.push("0 g"),xe.push("BT"),xe.push("/"+St+" "+U(Pe.fontSize)+" Tf "+r),xe.push(Pe.text),xe.push("ET"),xe.push("Q"),t.stream=xe.join(`
`),t},OffPushDown:function(e){var t=V(e);t.scope=e.scope;var St=[];return St.push("0.749023 g"),St.push("0 0 "+U(At.internal.getWidth(e))+" "+U(At.internal.getHeight(e))+" re"),St.push("f"),t.stream=St.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=At.RadioButton.Circle.YesNormal,t.D[e]=At.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=V(e);t.scope=e.scope;var St=[],r=At.internal.getWidth(e)<=At.internal.getHeight(e)?At.internal.getWidth(e)/4:At.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var xe=At.internal.Bezier_C,_e=Number((r*xe).toFixed(5));return St.push("q"),St.push("1 0 0 1 "+z(At.internal.getWidth(e)/2)+" "+z(At.internal.getHeight(e)/2)+" cm"),St.push(r+" 0 m"),St.push(r+" "+_e+" "+_e+" "+r+" 0 "+r+" c"),St.push("-"+_e+" "+r+" -"+r+" "+_e+" -"+r+" 0 c"),St.push("-"+r+" -"+_e+" -"+_e+" -"+r+" 0 -"+r+" c"),St.push(_e+" -"+r+" "+r+" -"+_e+" "+r+" 0 c"),St.push("f"),St.push("Q"),t.stream=St.join(`
`),t},YesPushDown:function(e){var t=V(e);t.scope=e.scope;var St=[],r=At.internal.getWidth(e)<=At.internal.getHeight(e)?At.internal.getWidth(e)/4:At.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var xe=Number((2*r).toFixed(5)),_e=Number((xe*At.internal.Bezier_C).toFixed(5)),Ee=Number((r*At.internal.Bezier_C).toFixed(5));return St.push("0.749023 g"),St.push("q"),St.push("1 0 0 1 "+z(At.internal.getWidth(e)/2)+" "+z(At.internal.getHeight(e)/2)+" cm"),St.push(xe+" 0 m"),St.push(xe+" "+_e+" "+_e+" "+xe+" 0 "+xe+" c"),St.push("-"+_e+" "+xe+" -"+xe+" "+_e+" -"+xe+" 0 c"),St.push("-"+xe+" -"+_e+" -"+_e+" -"+xe+" 0 -"+xe+" c"),St.push(_e+" -"+xe+" "+xe+" -"+_e+" "+xe+" 0 c"),St.push("f"),St.push("Q"),St.push("0 g"),St.push("q"),St.push("1 0 0 1 "+z(At.internal.getWidth(e)/2)+" "+z(At.internal.getHeight(e)/2)+" cm"),St.push(r+" 0 m"),St.push(r+" "+Ee+" "+Ee+" "+r+" 0 "+r+" c"),St.push("-"+Ee+" "+r+" -"+r+" "+Ee+" -"+r+" 0 c"),St.push("-"+r+" -"+Ee+" -"+Ee+" -"+r+" 0 -"+r+" c"),St.push(Ee+" -"+r+" "+r+" -"+Ee+" "+r+" 0 c"),St.push("f"),St.push("Q"),t.stream=St.join(`
`),t},OffPushDown:function(e){var t=V(e);t.scope=e.scope;var St=[],r=At.internal.getWidth(e)<=At.internal.getHeight(e)?At.internal.getWidth(e)/4:At.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var xe=Number((2*r).toFixed(5)),_e=Number((xe*At.internal.Bezier_C).toFixed(5));return St.push("0.749023 g"),St.push("q"),St.push("1 0 0 1 "+z(At.internal.getWidth(e)/2)+" "+z(At.internal.getHeight(e)/2)+" cm"),St.push(xe+" 0 m"),St.push(xe+" "+_e+" "+_e+" "+xe+" 0 "+xe+" c"),St.push("-"+_e+" "+xe+" -"+xe+" "+_e+" -"+xe+" 0 c"),St.push("-"+xe+" -"+_e+" -"+_e+" -"+xe+" 0 -"+xe+" c"),St.push(_e+" -"+xe+" "+xe+" -"+_e+" "+xe+" 0 c"),St.push("f"),St.push("Q"),t.stream=St.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=At.RadioButton.Cross.YesNormal,t.D[e]=At.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=V(e);t.scope=e.scope;var St=[],r=At.internal.calculateCross(e);return St.push("q"),St.push("1 1 "+U(At.internal.getWidth(e)-2)+" "+U(At.internal.getHeight(e)-2)+" re"),St.push("W"),St.push("n"),St.push(U(r.x1.x)+" "+U(r.x1.y)+" m"),St.push(U(r.x2.x)+" "+U(r.x2.y)+" l"),St.push(U(r.x4.x)+" "+U(r.x4.y)+" m"),St.push(U(r.x3.x)+" "+U(r.x3.y)+" l"),St.push("s"),St.push("Q"),t.stream=St.join(`
`),t},YesPushDown:function(e){var t=V(e);t.scope=e.scope;var St=At.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+U(At.internal.getWidth(e))+" "+U(At.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+U(At.internal.getWidth(e)-2)+" "+U(At.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(U(St.x1.x)+" "+U(St.x1.y)+" m"),r.push(U(St.x2.x)+" "+U(St.x2.y)+" l"),r.push(U(St.x4.x)+" "+U(St.x4.y)+" m"),r.push(U(St.x3.x)+" "+U(St.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=V(e);t.scope=e.scope;var St=[];return St.push("0.749023 g"),St.push("0 0 "+U(At.internal.getWidth(e))+" "+U(At.internal.getHeight(e))+" re"),St.push("f"),t.stream=St.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,St=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+St}};At.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=At.internal.getWidth(e),St=At.internal.getHeight(e),r=Math.min(t,St);return{x1:{x:(t-r)/2,y:(St-r)/2+r},x2:{x:(t-r)/2+r,y:(St-r)/2},x3:{x:(t-r)/2,y:(St-r)/2},x4:{x:(t-r)/2+r,y:(St-r)/2+r}}}},At.internal.getWidth=function(e){var t=0;return _typeof(e)==="object"&&(t=W(e.Rect[2])),t},At.internal.getHeight=function(e){var t=0;return _typeof(e)==="object"&&(t=W(e.Rect[3])),t};var xt=q.addField=function(e){if(at(this,e),!(e instanceof lt))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};q.AcroFormChoiceField=ft,q.AcroFormListBox=dt,q.AcroFormComboBox=pt,q.AcroFormEditBox=gt,q.AcroFormButton=mt,q.AcroFormPushButton=vt,q.AcroFormRadioButton=bt,q.AcroFormCheckBox=wt,q.AcroFormTextField=Nt,q.AcroFormPasswordField=Lt,q.AcroFormAppearance=At,q.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At};function _t(e){return e.reduce(function(t,St,r){return t[St]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",St={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(Re,Qe){var cn,hn,Pn,kn,Dn,Rn=t;if((Qe=Qe||t)==="RGBA"||Re.data!==void 0&&Re.data instanceof Uint8ClampedArray&&"height"in Re&&"width"in Re)return"RGBA";if(Je(Re))for(Dn in St)for(Pn=St[Dn],cn=0;cn<Pn.length;cn+=1){for(kn=!0,hn=0;hn<Pn[cn].length;hn+=1)if(Pn[cn][hn]!==void 0&&Pn[cn][hn]!==Re[hn]){kn=!1;break}if(kn===!0){Rn=Dn;break}}else for(Dn in St)for(Pn=St[Dn],cn=0;cn<Pn.length;cn+=1){for(kn=!0,hn=0;hn<Pn[cn].length;hn+=1)if(Pn[cn][hn]!==void 0&&Pn[cn][hn]!==Re.charCodeAt(hn)){kn=!1;break}if(kn===!0){Rn=Dn;break}}return Rn===t&&Qe!==t&&(Rn=Qe),Rn},xe=function Re(Qe){for(var cn=this.internal.write,hn=this.internal.putStream,Pn=(0,this.internal.getFilters)();Pn.indexOf("FlateEncode")!==-1;)Pn.splice(Pn.indexOf("FlateEncode"),1);Qe.objectId=this.internal.newObject();var kn=[];if(kn.push({key:"Type",value:"/XObject"}),kn.push({key:"Subtype",value:"/Image"}),kn.push({key:"Width",value:Qe.width}),kn.push({key:"Height",value:Qe.height}),Qe.colorSpace===Oe.INDEXED?kn.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Qe.palette.length/3-1)+" "+("sMask"in Qe&&Qe.sMask!==void 0?Qe.objectId+2:Qe.objectId+1)+" 0 R]"}):(kn.push({key:"ColorSpace",value:"/"+Qe.colorSpace}),Qe.colorSpace===Oe.DEVICE_CMYK&&kn.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),kn.push({key:"BitsPerComponent",value:Qe.bitsPerComponent}),"decodeParameters"in Qe&&Qe.decodeParameters!==void 0&&kn.push({key:"DecodeParms",value:"<<"+Qe.decodeParameters+">>"}),"transparency"in Qe&&Array.isArray(Qe.transparency)){for(var Dn="",Rn=0,jn=Qe.transparency.length;Rn<jn;Rn++)Dn+=Qe.transparency[Rn]+" "+Qe.transparency[Rn]+" ";kn.push({key:"Mask",value:"["+Dn+"]"})}Qe.sMask!==void 0&&kn.push({key:"SMask",value:Qe.objectId+1+" 0 R"});var zn=Qe.filter!==void 0?["/"+Qe.filter]:void 0;if(hn({data:Qe.data,additionalKeyValues:kn,alreadyAppliedFilters:zn,objectId:Qe.objectId}),cn("endobj"),"sMask"in Qe&&Qe.sMask!==void 0){var ii="/Predictor "+Qe.predictor+" /Colors 1 /BitsPerComponent "+Qe.bitsPerComponent+" /Columns "+Qe.width,an={width:Qe.width,height:Qe.height,colorSpace:"DeviceGray",bitsPerComponent:Qe.bitsPerComponent,decodeParameters:ii,data:Qe.sMask};"filter"in Qe&&(an.filter=Qe.filter),Re.call(this,an)}if(Qe.colorSpace===Oe.INDEXED){var _n=this.internal.newObject();hn({data:Me(new Uint8Array(Qe.palette)),objectId:_n}),cn("endobj")}},_e=function(){var Re=this.internal.collections.addImage_images;for(var Qe in Re)xe.call(this,Re[Qe])},Ee=function(){var Re,Qe=this.internal.collections.addImage_images,cn=this.internal.write;for(var hn in Qe)cn("/I"+(Re=Qe[hn]).index,Re.objectId,"0","R")},Pe=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",_e),this.internal.events.subscribe("putXobjectDict",Ee))},Ce=function(){var Re=this.internal.collections.addImage_images;return Pe.call(this),Re},Te=function(){return Object.keys(this.internal.collections.addImage_images).length},Ie=function(Re){return typeof e["process"+Re.toUpperCase()]=="function"},Ve=function(Re){return _typeof(Re)==="object"&&Re.nodeType===1},He=function(Re,Qe){if(Re.nodeName==="IMG"&&Re.hasAttribute("src")){var cn=""+Re.getAttribute("src");if(cn.indexOf("data:image/")===0)return u(unescape(cn).split("base64,").pop());var hn=e.loadFile(cn,!0);if(hn!==void 0)return hn}if(Re.nodeName==="CANVAS"){if(Re.width===0||Re.height===0)throw new Error("Given canvas must have data. Canvas width: "+Re.width+", height: "+Re.height);var Pn;switch(Qe){case"PNG":Pn="image/png";break;case"WEBP":Pn="image/webp";break;case"JPEG":case"JPG":default:Pn="image/jpeg"}return u(Re.toDataURL(Pn,1).split("base64,").pop())}},ke=function(Re){var Qe=this.internal.collections.addImage_images;if(Qe){for(var cn in Qe)if(Re===Qe[cn].alias)return Qe[cn]}},qe=function(Re,Qe,cn){return Re||Qe||(Re=-96,Qe=-96),Re<0&&(Re=-1*cn.width*72/Re/this.internal.scaleFactor),Qe<0&&(Qe=-1*cn.height*72/Qe/this.internal.scaleFactor),Re===0&&(Re=Qe*cn.width/cn.height),Qe===0&&(Qe=Re*cn.height/cn.width),[Re,Qe]},De=function(Re,Qe,cn,hn,Pn,kn){var Dn=qe.call(this,cn,hn,Pn),Rn=this.internal.getCoordinateString,jn=this.internal.getVerticalCoordinateString,zn=Ce.call(this);if(cn=Dn[0],hn=Dn[1],zn[Pn.index]=Pn,kn){kn*=Math.PI/180;var ii=Math.cos(kn),an=Math.sin(kn),_n=function(ze){return ze.toFixed(4)},sn=[_n(ii),_n(an),_n(-1*an),_n(ii),0,0,"cm"]}this.internal.write("q"),kn?(this.internal.write([1,"0","0",1,Rn(Re),jn(Qe+hn),"cm"].join(" ")),this.internal.write(sn.join(" ")),this.internal.write([Rn(cn),"0","0",Rn(hn),"0","0","cm"].join(" "))):this.internal.write([Rn(cn),"0","0",Rn(hn),Rn(Re),jn(Qe+hn),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Pn.index+" Do"),this.internal.write("Q")},Oe=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Be=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Ye=e.__addimage__.sHashCode=function(Re){var Qe,cn,hn=0;if(typeof Re=="string")for(cn=Re.length,Qe=0;Qe<cn;Qe++)hn=(hn<<5)-hn+Re.charCodeAt(Qe),hn|=0;else if(Je(Re))for(cn=Re.byteLength/2,Qe=0;Qe<cn;Qe++)hn=(hn<<5)-hn+Re[Qe],hn|=0;return hn},nn=e.__addimage__.validateStringAsBase64=function(Re){(Re=Re||"").toString().trim();var Qe=!0;return Re.length===0&&(Qe=!1),Re.length%4!=0&&(Qe=!1),/^[A-Za-z0-9+/]+$/.test(Re.substr(0,Re.length-2))===!1&&(Qe=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Re.substr(-2))===!1&&(Qe=!1),Qe},en=e.__addimage__.extractImageFromDataUrl=function(Re){var Qe=(Re=Re||"").split("base64,"),cn=null;if(Qe.length===2){var hn=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Qe[0]);Array.isArray(hn)&&(cn={mimeType:hn[1],charset:hn[2],data:Qe[1]})}return cn},Ue=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(Re){return Ue()&&Re instanceof ArrayBuffer};var Je=e.__addimage__.isArrayBufferView=function(Re){return Ue()&&typeof Uint32Array<"u"&&(Re instanceof Int8Array||Re instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&Re instanceof Uint8ClampedArray||Re instanceof Int16Array||Re instanceof Uint16Array||Re instanceof Int32Array||Re instanceof Uint32Array||Re instanceof Float32Array||Re instanceof Float64Array)},Ge=e.__addimage__.binaryStringToUint8Array=function(Re){for(var Qe=Re.length,cn=new Uint8Array(Qe),hn=0;hn<Qe;hn++)cn[hn]=Re.charCodeAt(hn);return cn},Me=e.__addimage__.arrayBufferToBinaryString=function(Re){for(var Qe="",cn=Je(Re)?Re:new Uint8Array(Re),hn=0;hn<cn.length;hn+=8192)Qe+=String.fromCharCode.apply(null,cn.subarray(hn,hn+8192));return Qe};e.addImage=function(){var Re,Qe,cn,hn,Pn,kn,Dn,Rn,jn;if(typeof arguments[1]=="number"?(Qe=t,cn=arguments[1],hn=arguments[2],Pn=arguments[3],kn=arguments[4],Dn=arguments[5],Rn=arguments[6],jn=arguments[7]):(Qe=arguments[1],cn=arguments[2],hn=arguments[3],Pn=arguments[4],kn=arguments[5],Dn=arguments[6],Rn=arguments[7],jn=arguments[8]),_typeof(Re=arguments[0])==="object"&&!Ve(Re)&&"imageData"in Re){var zn=Re;Re=zn.imageData,Qe=zn.format||Qe||t,cn=zn.x||cn||0,hn=zn.y||hn||0,Pn=zn.w||zn.width||Pn,kn=zn.h||zn.height||kn,Dn=zn.alias||Dn,Rn=zn.compression||Rn,jn=zn.rotation||zn.angle||jn}var ii=this.internal.getFilters();if(Rn===void 0&&ii.indexOf("FlateEncode")!==-1&&(Rn="SLOW"),isNaN(cn)||isNaN(hn))throw new Error("Invalid coordinates passed to jsPDF.addImage");Pe.call(this);var an=tn.call(this,Re,Qe,Dn,Rn);return De.call(this,cn,hn,Pn,kn,an,jn),this};var tn=function(Re,Qe,cn,hn){var Pn,kn,Dn;if(typeof Re=="string"&&r(Re)===t){Re=unescape(Re);var Rn=dn(Re,!1);(Rn!==""||(Rn=e.loadFile(Re,!0))!==void 0)&&(Re=Rn)}if(Ve(Re)&&(Re=He(Re,Qe)),Qe=r(Re,Qe),!Ie(Qe))throw new Error("addImage does not support files of type '"+Qe+"', please ensure that a plugin for '"+Qe+"' support is added.");if(((Dn=cn)==null||Dn.length===0)&&(cn=function(jn){return typeof jn=="string"||Je(jn)?Ye(jn):Je(jn.data)?Ye(jn.data):null}(Re)),(Pn=ke.call(this,cn))||(Ue()&&(Re instanceof Uint8Array||Qe==="RGBA"||(kn=Re,Re=Ge(Re))),Pn=this["process"+Qe.toUpperCase()](Re,Te.call(this),cn,function(jn){return jn&&typeof jn=="string"&&(jn=jn.toUpperCase()),jn in e.image_compression?jn:Be.NONE}(hn),kn)),!Pn)throw new Error("An unknown error occurred whilst processing the image.");return Pn},dn=e.__addimage__.convertBase64ToBinaryString=function(Re,Qe){var cn;Qe=typeof Qe!="boolean"||Qe;var hn,Pn="";if(typeof Re=="string"){hn=(cn=en(Re))!==null?cn.data:Re;try{Pn=u(hn)}catch(kn){if(Qe)throw nn(hn)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+kn.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Pn};e.getImageProperties=function(Re){var Qe,cn,hn="";if(Ve(Re)&&(Re=He(Re)),typeof Re=="string"&&r(Re)===t&&((hn=dn(Re,!1))===""&&(hn=e.loadFile(Re)||""),Re=hn),cn=r(Re),!Ie(cn))throw new Error("addImage does not support files of type '"+cn+"', please ensure that a plugin for '"+cn+"' support is added.");if(!Ue()||Re instanceof Uint8Array||(Re=Ge(Re)),!(Qe=this["process"+cn.toUpperCase()](Re)))throw new Error("An unknown error occurred whilst processing the image");return Qe.fileType=cn,Qe}})(E.API),function(e){var t=function(St){if(St!==void 0&&St!="")return!0};E.API.events.push(["addPage",function(St){this.internal.getPageInfo(St.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(St){for(var r,xe,_e,Ee=this.internal.getCoordinateString,Pe=this.internal.getVerticalCoordinateString,Ce=this.internal.getPageInfoByObjId(St.objId),Te=St.pageContext.annotations,Ie=!1,Ve=0;Ve<Te.length&&!Ie;Ve++)switch((r=Te[Ve]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(Ie=!0);break;case"reference":case"text":case"freetext":Ie=!0}if(Ie!=0){this.internal.write("/Annots [");for(var He=0;He<Te.length;He++){r=Te[He];var ke=this.internal.pdfEscape,qe=this.internal.getEncryptor(St.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var De=this.internal.newAdditionalObject(),Oe=this.internal.newAdditionalObject(),Be=this.internal.getEncryptor(De.objId),Ye=r.title||"Note";_e="<</Type /Annot /Subtype /Text "+(xe="/Rect ["+Ee(r.bounds.x)+" "+Pe(r.bounds.y+r.bounds.h)+" "+Ee(r.bounds.x+r.bounds.w)+" "+Pe(r.bounds.y)+"] ")+"/Contents ("+ke(Be(r.contents))+")",_e+=" /Popup "+Oe.objId+" 0 R",_e+=" /P "+Ce.objId+" 0 R",_e+=" /T ("+ke(Be(Ye))+") >>",De.content=_e;var nn=De.objId+" 0 R";_e="<</Type /Annot /Subtype /Popup "+(xe="/Rect ["+Ee(r.bounds.x+30)+" "+Pe(r.bounds.y+r.bounds.h)+" "+Ee(r.bounds.x+r.bounds.w+30)+" "+Pe(r.bounds.y)+"] ")+" /Parent "+nn,r.open&&(_e+=" /Open true"),_e+=" >>",Oe.content=_e,this.internal.write(De.objId,"0 R",Oe.objId,"0 R");break;case"freetext":xe="/Rect ["+Ee(r.bounds.x)+" "+Pe(r.bounds.y)+" "+Ee(r.bounds.x+r.bounds.w)+" "+Pe(r.bounds.y+r.bounds.h)+"] ";var en=r.color||"#000000";_e="<</Type /Annot /Subtype /FreeText "+xe+"/Contents ("+ke(qe(r.contents))+")",_e+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+en+")",_e+=" /Border [0 0 0]",_e+=" >>",this.internal.write(_e);break;case"link":if(r.options.name){var Ue=this.annotations._nameMap[r.options.name];r.options.pageNumber=Ue.page,r.options.top=Ue.y}else r.options.top||(r.options.top=0);if(xe="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",_e="",r.options.url)_e="<</Type /Annot /Subtype /Link "+xe+"/Border [0 0 0] /A <</S /URI /URI ("+ke(qe(r.options.url))+") >>";else if(r.options.pageNumber)switch(_e="<</Type /Annot /Subtype /Link "+xe+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":_e+=" /Fit]";break;case"FitH":_e+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,_e+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var Je=Pe(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),_e+=" /XYZ "+r.options.left+" "+Je+" "+r.options.zoom+"]"}_e!=""&&(_e+=" >>",this.internal.write(_e))}}this.internal.write("]")}}]),e.createAnnotation=function(St){var r=this.internal.getCurrentPageInfo();switch(St.type){case"link":this.link(St.bounds.x,St.bounds.y,St.bounds.w,St.bounds.h,St);break;case"text":case"freetext":r.pageContext.annotations.push(St)}},e.link=function(St,r,xe,_e,Ee){var Pe=this.internal.getCurrentPageInfo(),Ce=this.internal.getCoordinateString,Te=this.internal.getVerticalCoordinateString;Pe.pageContext.annotations.push({finalBounds:{x:Ce(St),y:Te(r),w:Ce(St+xe),h:Te(r+_e)},options:Ee,type:"link"})},e.textWithLink=function(St,r,xe,_e){var Ee,Pe,Ce=this.getTextWidth(St),Te=this.internal.getLineHeight()/this.internal.scaleFactor;if(_e.maxWidth!==void 0){Pe=_e.maxWidth;var Ie=this.splitTextToSize(St,Pe).length;Ee=Math.ceil(Te*Ie)}else Pe=Ce,Ee=Te;return this.text(St,r,xe,_e),xe+=.2*Te,_e.align==="center"&&(r-=Ce/2),_e.align==="right"&&(r-=Ce),this.link(r,xe-Te,Pe,Ee,_e),Ce},e.getTextWidth=function(St){var r=this.internal.getFontSize();return this.getStringUnitWidth(St)*r/this.internal.scaleFactor}}(E.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},St={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},xe=[1570,1571,1573,1575];e.__arabicParser__={};var _e=e.__arabicParser__.isInArabicSubstitutionA=function(De){return t[De.charCodeAt(0)]!==void 0},Ee=e.__arabicParser__.isArabicLetter=function(De){return typeof De=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(De)},Pe=e.__arabicParser__.isArabicEndLetter=function(De){return Ee(De)&&_e(De)&&t[De.charCodeAt(0)].length<=2},Ce=e.__arabicParser__.isArabicAlfLetter=function(De){return Ee(De)&&xe.indexOf(De.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(De){return Ee(De)&&_e(De)&&t[De.charCodeAt(0)].length>=1};var Te=e.__arabicParser__.arabicLetterHasFinalForm=function(De){return Ee(De)&&_e(De)&&t[De.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(De){return Ee(De)&&_e(De)&&t[De.charCodeAt(0)].length>=3};var Ie=e.__arabicParser__.arabicLetterHasMedialForm=function(De){return Ee(De)&&_e(De)&&t[De.charCodeAt(0)].length==4},Ve=e.__arabicParser__.resolveLigatures=function(De){var Oe=0,Be=St,Ye="",nn=0;for(Oe=0;Oe<De.length;Oe+=1)Be[De.charCodeAt(Oe)]!==void 0?(nn++,typeof(Be=Be[De.charCodeAt(Oe)])=="number"&&(Ye+=String.fromCharCode(Be),Be=St,nn=0),Oe===De.length-1&&(Be=St,Ye+=De.charAt(Oe-(nn-1)),Oe-=nn-1,nn=0)):(Be=St,Ye+=De.charAt(Oe-nn),Oe-=nn,nn=0);return Ye};e.__arabicParser__.isArabicDiacritic=function(De){return De!==void 0&&r[De.charCodeAt(0)]!==void 0};var He=e.__arabicParser__.getCorrectForm=function(De,Oe,Be){return Ee(De)?_e(De)===!1?-1:!Te(De)||!Ee(Oe)&&!Ee(Be)||!Ee(Be)&&Pe(Oe)||Pe(De)&&!Ee(Oe)||Pe(De)&&Ce(Oe)||Pe(De)&&Pe(Oe)?0:Ie(De)&&Ee(Oe)&&!Pe(Oe)&&Ee(Be)&&Te(Be)?3:Pe(De)||!Ee(Be)?1:2:-1},ke=function(De){var Oe=0,Be=0,Ye=0,nn="",en="",Ue="",Je=(De=De||"").split("\\s+"),Ge=[];for(Oe=0;Oe<Je.length;Oe+=1){for(Ge.push(""),Be=0;Be<Je[Oe].length;Be+=1)nn=Je[Oe][Be],en=Je[Oe][Be-1],Ue=Je[Oe][Be+1],Ee(nn)?(Ye=He(nn,en,Ue),Ge[Oe]+=Ye!==-1?String.fromCharCode(t[nn.charCodeAt(0)][Ye]):nn):Ge[Oe]+=nn;Ge[Oe]=Ve(Ge[Oe])}return Ge.join(" ")},qe=e.__arabicParser__.processArabic=e.processArabic=function(){var De,Oe=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,Be=[];if(Array.isArray(Oe)){var Ye=0;for(Be=[],Ye=0;Ye<Oe.length;Ye+=1)Array.isArray(Oe[Ye])?Be.push([ke(Oe[Ye][0]),Oe[Ye][1],Oe[Ye][2]]):Be.push([ke(Oe[Ye])]);De=Be}else De=ke(Oe);return typeof arguments[0]=="string"?De:(arguments[0].text=De,arguments[0])};e.events.push(["preProcessText",qe])}(E.API),E.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var St=void 0;Object.defineProperty(this,"pdf",{get:function(){return St},set:function(Pe){St=Pe}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(Pe){r=isNaN(Pe)||Number.isInteger(Pe)===!1||Pe<0?150:Pe,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var xe=300;Object.defineProperty(this,"height",{get:function(){return xe},set:function(Pe){xe=isNaN(Pe)||Number.isInteger(Pe)===!1||Pe<0?300:Pe,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=xe+1)}});var _e=[];Object.defineProperty(this,"childNodes",{get:function(){return _e},set:function(Pe){_e=Pe}});var Ee={};Object.defineProperty(this,"style",{get:function(){return Ee},set:function(Pe){Ee=Pe}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(St,r){var xe;if((St=St||"2d")!=="2d")return null;for(xe in r)this.pdf.context2d.hasOwnProperty(xe)&&(this.pdf.context2d[xe]=r[xe]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(E.API),function(e){var t={left:0,top:0,bottom:0,right:0},St=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),xe.call(this))},xe=function(){this.internal.__cell__.lastCell=new _e,this.internal.__cell__.pages=1},_e=function(){var Ce=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ce},set:function(De){Ce=De}});var Te=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Te},set:function(De){Te=De}});var Ie=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return Ie},set:function(De){Ie=De}});var Ve=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return Ve},set:function(De){Ve=De}});var He=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return He},set:function(De){He=De}});var ke=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return ke},set:function(De){ke=De}});var qe=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return qe},set:function(De){qe=De}}),this};_e.prototype.clone=function(){return new _e(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},_e.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(Ce){return r.call(this),this.internal.__cell__.headerFunction=typeof Ce=="function"?Ce:void 0,this},e.getTextDimensions=function(Ce,Te){r.call(this);var Ie=(Te=Te||{}).fontSize||this.getFontSize(),Ve=Te.font||this.getFont(),He=Te.scaleFactor||this.internal.scaleFactor,ke=0,qe=0,De=0,Oe=this;if(!Array.isArray(Ce)&&typeof Ce!="string"){if(typeof Ce!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");Ce=String(Ce)}var Be=Te.maxWidth;Be>0?typeof Ce=="string"?Ce=this.splitTextToSize(Ce,Be):Object.prototype.toString.call(Ce)==="[object Array]"&&(Ce=Ce.reduce(function(nn,en){return nn.concat(Oe.splitTextToSize(en,Be))},[])):Ce=Array.isArray(Ce)?Ce:[Ce];for(var Ye=0;Ye<Ce.length;Ye++)ke<(De=this.getStringUnitWidth(Ce[Ye],{font:Ve})*Ie)&&(ke=De);return ke!==0&&(qe=Ce.length),{w:ke/=He,h:Math.max((qe*Ie*this.getLineHeightFactor()-Ie*(this.getLineHeightFactor()-1))/He,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var Ce=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new _e(Ce.left,Ce.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var Ee=e.cell=function(){var Ce;Ce=arguments[0]instanceof _e?arguments[0]:new _e(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var Te=this.internal.__cell__.lastCell,Ie=this.internal.__cell__.padding,Ve=this.internal.__cell__.margins||t,He=this.internal.__cell__.tableHeaderRow,ke=this.internal.__cell__.printHeaders;return Te.lineNumber!==void 0&&(Te.lineNumber===Ce.lineNumber?(Ce.x=(Te.x||0)+(Te.width||0),Ce.y=Te.y||0):Te.y+Te.height+Ce.height+Ve.bottom>this.getPageHeight()?(this.cellAddPage(),Ce.y=Ve.top,ke&&He&&(this.printHeaderRow(Ce.lineNumber,!0),Ce.y+=He[0].height)):Ce.y=Te.y+Te.height||Ce.y),Ce.text[0]!==void 0&&(this.rect(Ce.x,Ce.y,Ce.width,Ce.height,St===!0?"FD":void 0),Ce.align==="right"?this.text(Ce.text,Ce.x+Ce.width-Ie,Ce.y+Ie,{align:"right",baseline:"top"}):Ce.align==="center"?this.text(Ce.text,Ce.x+Ce.width/2,Ce.y+Ie,{align:"center",baseline:"top",maxWidth:Ce.width-Ie-Ie}):this.text(Ce.text,Ce.x+Ie,Ce.y+Ie,{align:"left",baseline:"top",maxWidth:Ce.width-Ie-Ie})),this.internal.__cell__.lastCell=Ce,this};e.table=function(Ce,Te,Ie,Ve,He){if(r.call(this),!Ie)throw new Error("No data for PDF table.");var ke,qe,De,Oe,Be=[],Ye=[],nn=[],en={},Ue={},Je=[],Ge=[],Me=(He=He||{}).autoSize||!1,tn=He.printHeaders!==!1,dn=He.css&&He.css["font-size"]!==void 0?16*He.css["font-size"]:He.fontSize||12,Re=He.margins||Object.assign({width:this.getPageWidth()},t),Qe=typeof He.padding=="number"?He.padding:3,cn=He.headerBackgroundColor||"#c8c8c8",hn=He.headerTextColor||"#000";if(xe.call(this),this.internal.__cell__.printHeaders=tn,this.internal.__cell__.margins=Re,this.internal.__cell__.table_font_size=dn,this.internal.__cell__.padding=Qe,this.internal.__cell__.headerBackgroundColor=cn,this.internal.__cell__.headerTextColor=hn,this.setFontSize(dn),Ve==null)Ye=Be=Object.keys(Ie[0]),nn=Be.map(function(){return"left"});else if(Array.isArray(Ve)&&_typeof(Ve[0])==="object")for(Be=Ve.map(function(zn){return zn.name}),Ye=Ve.map(function(zn){return zn.prompt||zn.name||""}),nn=Ve.map(function(zn){return zn.align||"left"}),ke=0;ke<Ve.length;ke+=1)Ue[Ve[ke].name]=Ve[ke].width*(19.049976/25.4);else Array.isArray(Ve)&&typeof Ve[0]=="string"&&(Ye=Be=Ve,nn=Be.map(function(){return"left"}));if(Me||Array.isArray(Ve)&&typeof Ve[0]=="string")for(ke=0;ke<Be.length;ke+=1){for(en[Oe=Be[ke]]=Ie.map(function(zn){return zn[Oe]}),this.setFont(void 0,"bold"),Je.push(this.getTextDimensions(Ye[ke],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),qe=en[Oe],this.setFont(void 0,"normal"),De=0;De<qe.length;De+=1)Je.push(this.getTextDimensions(qe[De],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Ue[Oe]=Math.max.apply(null,Je)+Qe+Qe,Je=[]}if(tn){var Pn={};for(ke=0;ke<Be.length;ke+=1)Pn[Be[ke]]={},Pn[Be[ke]].text=Ye[ke],Pn[Be[ke]].align=nn[ke];var kn=Pe.call(this,Pn,Ue);Ge=Be.map(function(zn){return new _e(Ce,Te,Ue[zn],kn,Pn[zn].text,void 0,Pn[zn].align)}),this.setTableHeaderRow(Ge),this.printHeaderRow(1,!1)}var Dn=Ve.reduce(function(zn,ii){return zn[ii.name]=ii.align,zn},{});for(ke=0;ke<Ie.length;ke+=1){"rowStart"in He&&He.rowStart instanceof Function&&He.rowStart({row:ke,data:Ie[ke]},this);var Rn=Pe.call(this,Ie[ke],Ue);for(De=0;De<Be.length;De+=1){var jn=Ie[ke][Be[De]];"cellStart"in He&&He.cellStart instanceof Function&&He.cellStart({row:ke,col:De,data:jn},this),Ee.call(this,new _e(Ce,Te,Ue[Be[De]],Rn,jn,ke+2,Dn[Be[De]]))}}return this.internal.__cell__.table_x=Ce,this.internal.__cell__.table_y=Te,this};var Pe=function(Ce,Te){var Ie=this.internal.__cell__.padding,Ve=this.internal.__cell__.table_font_size,He=this.internal.scaleFactor;return Object.keys(Ce).map(function(ke){var qe=Ce[ke];return this.splitTextToSize(qe.hasOwnProperty("text")?qe.text:qe,Te[ke]-Ie-Ie)},this).map(function(ke){return this.getLineHeightFactor()*ke.length*Ve/He+Ie+Ie},this).reduce(function(ke,qe){return Math.max(ke,qe)},0)};e.setTableHeaderRow=function(Ce){r.call(this),this.internal.__cell__.tableHeaderRow=Ce},e.printHeaderRow=function(Ce,Te){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var Ie;if(St=!0,typeof this.internal.__cell__.headerFunction=="function"){var Ve=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new _e(Ve[0],Ve[1],Ve[2],Ve[3],void 0,-1)}this.setFont(void 0,"bold");for(var He=[],ke=0;ke<this.internal.__cell__.tableHeaderRow.length;ke+=1){Ie=this.internal.__cell__.tableHeaderRow[ke].clone(),Te&&(Ie.y=this.internal.__cell__.margins.top||0,He.push(Ie)),Ie.lineNumber=Ce;var qe=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),Ee.call(this,Ie),this.setTextColor(qe)}He.length>0&&this.setTableHeaderRow(He),this.setFont(void 0,"normal"),St=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],It=_t(kt),Ft=[100,200,300,400,500,600,700,800,900],Ct=_t(Ft);function jt(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),St=function(_e){return Pt[_e=_e||"normal"]?_e:"normal"}(e.style),r=function(_e){if(!_e)return 400;if(typeof _e=="number")return _e>=100&&_e<=900&&_e%100==0?_e:400;if(/^\d00$/.test(_e))return parseInt(_e);switch(_e){case"bold":return 700;case"normal":default:return 400}}(e.weight),xe=function(_e){return typeof It[_e=_e||"normal"]=="number"?_e:"normal"}(e.stretch);return{family:t,style:St,weight:r,stretch:xe,src:e.src||[],ref:e.ref||{name:t,style:[xe,St,r].join(" ")}}}function Ot(e,t,St,r){var xe;for(xe=St;xe>=0&&xe<t.length;xe+=r)if(e[t[xe]])return e[t[xe]];for(xe=St;xe>=0&&xe<t.length;xe-=r)if(e[t[xe]])return e[t[xe]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Et(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function qt(e,t,St){for(var r=(St=St||{}).defaultFontFamily||"times",xe=Object.assign({},Bt,St.genericFontFamilies||{}),_e=null,Ee=null,Pe=0;Pe<t.length;++Pe)if(xe[(_e=jt(t[Pe])).family]&&(_e.family=xe[_e.family]),e.hasOwnProperty(_e.family)){Ee=e[_e.family];break}if(!(Ee=Ee||e[r]))throw new Error("Could not find a font-family for the rule '"+Et(_e)+"' and default family '"+r+"'.");if(Ee=function(Ce,Te){if(Te[Ce])return Te[Ce];var Ie=It[Ce],Ve=Ie<=It.normal?-1:1,He=Ot(Te,kt,Ie,Ve);if(!He)throw new Error("Could not find a matching font-stretch value for "+Ce);return He}(_e.stretch,Ee),Ee=function(Ce,Te){if(Te[Ce])return Te[Ce];for(var Ie=Pt[Ce],Ve=0;Ve<Ie.length;++Ve)if(Te[Ie[Ve]])return Te[Ie[Ve]];throw new Error("Could not find a matching font-style for "+Ce)}(_e.style,Ee),!(Ee=function(Ce,Te){if(Te[Ce])return Te[Ce];if(Ce===400&&Te[500])return Te[500];if(Ce===500&&Te[400])return Te[400];var Ie=Ct[Ce],Ve=Ot(Te,Ft,Ie,Ce<400?-1:1);if(!Ve)throw new Error("Could not find a matching font-weight for value "+Ce);return Ve}(_e.weight,Ee)))throw new Error("Failed to resolve a font for the rule '"+Et(_e)+"'.");return Ee}function Dt(e){return e.trimLeft()}function Rt(e,t){for(var St=0;St<e.length;){if(e.charAt(St)===t)return[e.substring(0,St),e.substring(St+1)];St+=1}return null}function Tt(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Ut,zt,Ht,Wt=["times"];(function(e){var t,St,r,xe,_e,Ee,Pe,Ce,Te,Ie=function(an){return an=an||{},this.isStrokeTransparent=an.isStrokeTransparent||!1,this.strokeOpacity=an.strokeOpacity||1,this.strokeStyle=an.strokeStyle||"#000000",this.fillStyle=an.fillStyle||"#000000",this.isFillTransparent=an.isFillTransparent||!1,this.fillOpacity=an.fillOpacity||1,this.font=an.font||"10px sans-serif",this.textBaseline=an.textBaseline||"alphabetic",this.textAlign=an.textAlign||"left",this.lineWidth=an.lineWidth||1,this.lineJoin=an.lineJoin||"miter",this.lineCap=an.lineCap||"butt",this.path=an.path||[],this.transform=an.transform!==void 0?an.transform.clone():new Ce,this.globalCompositeOperation=an.globalCompositeOperation||"normal",this.globalAlpha=an.globalAlpha||1,this.clip_path=an.clip_path||[],this.currentPoint=an.currentPoint||new Ee,this.miterLimit=an.miterLimit||10,this.lastPoint=an.lastPoint||new Ee,this.lineDashOffset=an.lineDashOffset||0,this.lineDash=an.lineDash||[],this.margin=an.margin||[0,0,0,0],this.prevPageLastElemOffset=an.prevPageLastElemOffset||0,this.ignoreClearRect=typeof an.ignoreClearRect!="boolean"||an.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new Ve(this),t=this.internal.f2,St=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,xe=this.internal.getHorizontalCoordinate,_e=this.internal.getVerticalCoordinate,Ee=this.internal.Point,Pe=this.internal.Rectangle,Ce=this.internal.Matrix,Te=new Ie}]);var Ve=function(an){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var _n=an;Object.defineProperty(this,"pdf",{get:function(){return _n}});var sn=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return sn},set:function($e){sn=!!$e}});var ze=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ze},set:function($e){ze=!!$e}});var Xe=0;Object.defineProperty(this,"posX",{get:function(){return Xe},set:function($e){isNaN($e)||(Xe=$e)}});var rn=0;Object.defineProperty(this,"posY",{get:function(){return rn},set:function($e){isNaN($e)||(rn=$e)}}),Object.defineProperty(this,"margin",{get:function(){return Te.margin},set:function($e){var We;typeof $e=="number"?We=[$e,$e,$e,$e]:((We=new Array(4))[0]=$e[0],We[1]=$e.length>=2?$e[1]:We[0],We[2]=$e.length>=3?$e[2]:We[0],We[3]=$e.length>=4?$e[3]:We[1]),Te.margin=We}});var gn=!1;Object.defineProperty(this,"autoPaging",{get:function(){return gn},set:function($e){gn=$e}});var fn=0;Object.defineProperty(this,"lastBreak",{get:function(){return fn},set:function($e){fn=$e}});var Nn=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Nn},set:function($e){Nn=$e}}),Object.defineProperty(this,"ctx",{get:function(){return Te},set:function($e){$e instanceof Ie&&(Te=$e)}}),Object.defineProperty(this,"path",{get:function(){return Te.path},set:function($e){Te.path=$e}});var wn=[];Object.defineProperty(this,"ctxStack",{get:function(){return wn},set:function($e){wn=$e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function($e){var We;We=He($e),this.ctx.fillStyle=We.style,this.ctx.isFillTransparent=We.a===0,this.ctx.fillOpacity=We.a,this.pdf.setFillColor(We.r,We.g,We.b,{a:We.a}),this.pdf.setTextColor(We.r,We.g,We.b,{a:We.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function($e){var We=He($e);this.ctx.strokeStyle=We.style,this.ctx.isStrokeTransparent=We.a===0,this.ctx.strokeOpacity=We.a,We.a===0?this.pdf.setDrawColor(255,255,255):(We.a,this.pdf.setDrawColor(We.r,We.g,We.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function($e){["butt","round","square"].indexOf($e)!==-1&&(this.ctx.lineCap=$e,this.pdf.setLineCap($e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function($e){isNaN($e)||(this.ctx.lineWidth=$e,this.pdf.setLineWidth($e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function($e){["bevel","round","miter"].indexOf($e)!==-1&&(this.ctx.lineJoin=$e,this.pdf.setLineJoin($e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function($e){isNaN($e)||(this.ctx.miterLimit=$e,this.pdf.setMiterLimit($e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function($e){this.ctx.textBaseline=$e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function($e){["right","end","center","left","start"].indexOf($e)!==-1&&(this.ctx.textAlign=$e)}});var xn=null;function Sn($e,We){if(xn===null){var yn=function(bn){var Ln=[];return Object.keys(bn).forEach(function(Bn){bn[Bn].forEach(function(On){var qn=null;switch(On){case"bold":qn={family:Bn,weight:"bold"};break;case"italic":qn={family:Bn,style:"italic"};break;case"bolditalic":qn={family:Bn,weight:"bold",style:"italic"};break;case"":case"normal":qn={family:Bn}}qn!==null&&(qn.ref={name:Bn,style:On},Ln.push(qn))})}),Ln}($e.getFontList());xn=function(bn){for(var Ln={},Bn=0;Bn<bn.length;++Bn){var On=jt(bn[Bn]),qn=On.family,Gn=On.stretch,$n=On.style,Yn=On.weight;Ln[qn]=Ln[qn]||{},Ln[qn][Gn]=Ln[qn][Gn]||{},Ln[qn][Gn][$n]=Ln[qn][Gn][$n]||{},Ln[qn][Gn][$n][Yn]=On}return Ln}(yn.concat(We))}return xn}var Ke=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ke},set:function($e){xn=null,Ke=$e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function($e){var We;if(this.ctx.font=$e,(We=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec($e))!==null){var yn=We[1],bn=(We[2],We[3]),Ln=We[4],Bn=(We[5],We[6]),On=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ln)[2];Ln=Math.floor(On==="px"?parseFloat(Ln)*this.pdf.internal.scaleFactor:On==="em"?parseFloat(Ln)*this.pdf.getFontSize():parseFloat(Ln)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ln);var qn=function(li){var vi,Mn,bi=[],fi=li.trim();if(fi==="")return Wt;if(fi in Mt)return[Mt[fi]];for(;fi!=="";){switch(Mn=null,vi=(fi=Dt(fi)).charAt(0)){case'"':case"'":Mn=Rt(fi.substring(1),vi);break;default:Mn=Tt(fi)}if(Mn===null||(bi.push(Mn[0]),(fi=Dt(Mn[1]))!==""&&fi.charAt(0)!==","))return Wt;fi=fi.replace(/^,/,"")}return bi}(Bn);if(this.fontFaces){var Gn=qt(Sn(this.pdf,this.fontFaces),qn.map(function(li){return{family:li,stretch:"normal",weight:bn,style:yn}}));this.pdf.setFont(Gn.ref.name,Gn.ref.style)}else{var $n="";(bn==="bold"||parseInt(bn,10)>=700||yn==="bold")&&($n="bold"),yn==="italic"&&($n+="italic"),$n.length===0&&($n="normal");for(var Yn="",ni={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},si=0;si<qn.length;si++){if(this.pdf.internal.getFont(qn[si],$n,{noFallback:!0,disableWarning:!0})!==void 0){Yn=qn[si];break}if($n==="bolditalic"&&this.pdf.internal.getFont(qn[si],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Yn=qn[si],$n="bold";else if(this.pdf.internal.getFont(qn[si],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Yn=qn[si],$n="normal";break}}if(Yn===""){for(var yi=0;yi<qn.length;yi++)if(ni[qn[yi]]){Yn=ni[qn[yi]];break}}Yn=Yn===""?"Times":Yn,this.pdf.setFont(Yn,$n)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function($e){this.ctx.globalCompositeOperation=$e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function($e){this.ctx.globalAlpha=$e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function($e){this.ctx.lineDashOffset=$e,ii.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function($e){this.ctx.lineDash=$e,ii.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function($e){this.ctx.ignoreClearRect=!!$e}})};Ve.prototype.setLineDash=function(an){this.lineDash=an},Ve.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},Ve.prototype.fill=function(){en.call(this,"fill",!1)},Ve.prototype.stroke=function(){en.call(this,"stroke",!1)},Ve.prototype.beginPath=function(){this.path=[{type:"begin"}]},Ve.prototype.moveTo=function(an,_n){if(isNaN(an)||isNaN(_n))throw a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var sn=this.ctx.transform.applyToPoint(new Ee(an,_n));this.path.push({type:"mt",x:sn.x,y:sn.y}),this.ctx.lastPoint=new Ee(an,_n)},Ve.prototype.closePath=function(){var an=new Ee(0,0),_n=0;for(_n=this.path.length-1;_n!==-1;_n--)if(this.path[_n].type==="begin"&&_typeof(this.path[_n+1])==="object"&&typeof this.path[_n+1].x=="number"){an=new Ee(this.path[_n+1].x,this.path[_n+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new Ee(an.x,an.y)},Ve.prototype.lineTo=function(an,_n){if(isNaN(an)||isNaN(_n))throw a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var sn=this.ctx.transform.applyToPoint(new Ee(an,_n));this.path.push({type:"lt",x:sn.x,y:sn.y}),this.ctx.lastPoint=new Ee(sn.x,sn.y)},Ve.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),en.call(this,null,!0)},Ve.prototype.quadraticCurveTo=function(an,_n,sn,ze){if(isNaN(sn)||isNaN(ze)||isNaN(an)||isNaN(_n))throw a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Xe=this.ctx.transform.applyToPoint(new Ee(sn,ze)),rn=this.ctx.transform.applyToPoint(new Ee(an,_n));this.path.push({type:"qct",x1:rn.x,y1:rn.y,x:Xe.x,y:Xe.y}),this.ctx.lastPoint=new Ee(Xe.x,Xe.y)},Ve.prototype.bezierCurveTo=function(an,_n,sn,ze,Xe,rn){if(isNaN(Xe)||isNaN(rn)||isNaN(an)||isNaN(_n)||isNaN(sn)||isNaN(ze))throw a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var gn=this.ctx.transform.applyToPoint(new Ee(Xe,rn)),fn=this.ctx.transform.applyToPoint(new Ee(an,_n)),Nn=this.ctx.transform.applyToPoint(new Ee(sn,ze));this.path.push({type:"bct",x1:fn.x,y1:fn.y,x2:Nn.x,y2:Nn.y,x:gn.x,y:gn.y}),this.ctx.lastPoint=new Ee(gn.x,gn.y)},Ve.prototype.arc=function(an,_n,sn,ze,Xe,rn){if(isNaN(an)||isNaN(_n)||isNaN(sn)||isNaN(ze)||isNaN(Xe))throw a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(rn=!!rn,!this.ctx.transform.isIdentity){var gn=this.ctx.transform.applyToPoint(new Ee(an,_n));an=gn.x,_n=gn.y;var fn=this.ctx.transform.applyToPoint(new Ee(0,sn)),Nn=this.ctx.transform.applyToPoint(new Ee(0,0));sn=Math.sqrt(Math.pow(fn.x-Nn.x,2)+Math.pow(fn.y-Nn.y,2))}Math.abs(Xe-ze)>=2*Math.PI&&(ze=0,Xe=2*Math.PI),this.path.push({type:"arc",x:an,y:_n,radius:sn,startAngle:ze,endAngle:Xe,counterclockwise:rn})},Ve.prototype.arcTo=function(an,_n,sn,ze,Xe){throw new Error("arcTo not implemented.")},Ve.prototype.rect=function(an,_n,sn,ze){if(isNaN(an)||isNaN(_n)||isNaN(sn)||isNaN(ze))throw a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(an,_n),this.lineTo(an+sn,_n),this.lineTo(an+sn,_n+ze),this.lineTo(an,_n+ze),this.lineTo(an,_n),this.lineTo(an+sn,_n),this.lineTo(an,_n)},Ve.prototype.fillRect=function(an,_n,sn,ze){if(isNaN(an)||isNaN(_n)||isNaN(sn)||isNaN(ze))throw a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!ke.call(this)){var Xe={};this.lineCap!=="butt"&&(Xe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Xe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(an,_n,sn,ze),this.fill(),Xe.hasOwnProperty("lineCap")&&(this.lineCap=Xe.lineCap),Xe.hasOwnProperty("lineJoin")&&(this.lineJoin=Xe.lineJoin)}},Ve.prototype.strokeRect=function(an,_n,sn,ze){if(isNaN(an)||isNaN(_n)||isNaN(sn)||isNaN(ze))throw a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");qe.call(this)||(this.beginPath(),this.rect(an,_n,sn,ze),this.stroke())},Ve.prototype.clearRect=function(an,_n,sn,ze){if(isNaN(an)||isNaN(_n)||isNaN(sn)||isNaN(ze))throw a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(an,_n,sn,ze))},Ve.prototype.save=function(an){an=typeof an!="boolean"||an;for(var _n=this.pdf.internal.getCurrentPageInfo().pageNumber,sn=0;sn<this.pdf.internal.getNumberOfPages();sn++)this.pdf.setPage(sn+1),this.pdf.internal.out("q");if(this.pdf.setPage(_n),an){this.ctx.fontSize=this.pdf.internal.getFontSize();var ze=new Ie(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ze}},Ve.prototype.restore=function(an){an=typeof an!="boolean"||an;for(var _n=this.pdf.internal.getCurrentPageInfo().pageNumber,sn=0;sn<this.pdf.internal.getNumberOfPages();sn++)this.pdf.setPage(sn+1),this.pdf.internal.out("Q");this.pdf.setPage(_n),an&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},Ve.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var He=function(an){var _n,sn,ze,Xe;if(an.isCanvasGradient===!0&&(an=an.getColor()),!an)return{r:0,g:0,b:0,a:0,style:an};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(an))_n=0,sn=0,ze=0,Xe=0;else{var rn=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(an);if(rn!==null)_n=parseInt(rn[1]),sn=parseInt(rn[2]),ze=parseInt(rn[3]),Xe=1;else if((rn=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(an))!==null)_n=parseInt(rn[1]),sn=parseInt(rn[2]),ze=parseInt(rn[3]),Xe=parseFloat(rn[4]);else{if(Xe=1,typeof an=="string"&&an.charAt(0)!=="#"){var gn=new f(an);an=gn.ok?gn.toHex():"#000000"}an.length===4?(_n=an.substring(1,2),_n+=_n,sn=an.substring(2,3),sn+=sn,ze=an.substring(3,4),ze+=ze):(_n=an.substring(1,3),sn=an.substring(3,5),ze=an.substring(5,7)),_n=parseInt(_n,16),sn=parseInt(sn,16),ze=parseInt(ze,16)}}return{r:_n,g:sn,b:ze,a:Xe,style:an}},ke=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},qe=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};Ve.prototype.fillText=function(an,_n,sn,ze){if(isNaN(_n)||isNaN(sn)||typeof an!="string")throw a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ze=isNaN(ze)?void 0:ze,!ke.call(this)){var Xe=Rn(this.ctx.transform.rotation),rn=this.ctx.transform.scaleX;Qe.call(this,{text:an,x:_n,y:sn,scale:rn,angle:Xe,align:this.textAlign,maxWidth:ze})}},Ve.prototype.strokeText=function(an,_n,sn,ze){if(isNaN(_n)||isNaN(sn)||typeof an!="string")throw a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!qe.call(this)){ze=isNaN(ze)?void 0:ze;var Xe=Rn(this.ctx.transform.rotation),rn=this.ctx.transform.scaleX;Qe.call(this,{text:an,x:_n,y:sn,scale:rn,renderingMode:"stroke",angle:Xe,align:this.textAlign,maxWidth:ze})}},Ve.prototype.measureText=function(an){if(typeof an!="string")throw a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var _n=this.pdf,sn=this.pdf.internal.scaleFactor,ze=_n.internal.getFontSize(),Xe=_n.getStringUnitWidth(an)*ze/_n.internal.scaleFactor,rn=function(gn){var fn=(gn=gn||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return fn}}),this};return new rn({width:Xe*=Math.round(96*sn/72*1e4)/1e4})},Ve.prototype.scale=function(an,_n){if(isNaN(an)||isNaN(_n))throw a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var sn=new Ce(an,0,0,_n,0,0);this.ctx.transform=this.ctx.transform.multiply(sn)},Ve.prototype.rotate=function(an){if(isNaN(an))throw a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var _n=new Ce(Math.cos(an),Math.sin(an),-Math.sin(an),Math.cos(an),0,0);this.ctx.transform=this.ctx.transform.multiply(_n)},Ve.prototype.translate=function(an,_n){if(isNaN(an)||isNaN(_n))throw a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var sn=new Ce(1,0,0,1,an,_n);this.ctx.transform=this.ctx.transform.multiply(sn)},Ve.prototype.transform=function(an,_n,sn,ze,Xe,rn){if(isNaN(an)||isNaN(_n)||isNaN(sn)||isNaN(ze)||isNaN(Xe)||isNaN(rn))throw a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var gn=new Ce(an,_n,sn,ze,Xe,rn);this.ctx.transform=this.ctx.transform.multiply(gn)},Ve.prototype.setTransform=function(an,_n,sn,ze,Xe,rn){an=isNaN(an)?1:an,_n=isNaN(_n)?0:_n,sn=isNaN(sn)?0:sn,ze=isNaN(ze)?1:ze,Xe=isNaN(Xe)?0:Xe,rn=isNaN(rn)?0:rn,this.ctx.transform=new Ce(an,_n,sn,ze,Xe,rn)};var De=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};Ve.prototype.drawImage=function(an,_n,sn,ze,Xe,rn,gn,fn,Nn){var wn=this.pdf.getImageProperties(an),xn=1,Sn=1,Ke=1,$e=1;ze!==void 0&&fn!==void 0&&(Ke=fn/ze,$e=Nn/Xe,xn=wn.width/ze*fn/ze,Sn=wn.height/Xe*Nn/Xe),rn===void 0&&(rn=_n,gn=sn,_n=0,sn=0),ze!==void 0&&fn===void 0&&(fn=ze,Nn=Xe),ze===void 0&&fn===void 0&&(fn=wn.width,Nn=wn.height);for(var We,yn=this.ctx.transform.decompose(),bn=Rn(yn.rotate.shx),Ln=new Ce,Bn=(Ln=(Ln=(Ln=Ln.multiply(yn.translate)).multiply(yn.skew)).multiply(yn.scale)).applyToRectangle(new Pe(rn-_n*Ke,gn-sn*$e,ze*xn,Xe*Sn)),On=Oe.call(this,Bn),qn=[],Gn=0;Gn<On.length;Gn+=1)qn.indexOf(On[Gn])===-1&&qn.push(On[Gn]);if(nn(qn),this.autoPaging)for(var $n=qn[0],Yn=qn[qn.length-1],ni=$n;ni<Yn+1;ni++){this.pdf.setPage(ni);var si=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yi=ni===1?this.posY+this.margin[0]:this.margin[0],li=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],vi=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Mn=ni===1?0:li+(ni-2)*vi;if(this.ctx.clip_path.length!==0){var bi=this.path;We=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ye(We,this.posX+this.margin[3],-Mn+yi+this.ctx.prevPageLastElemOffset),Ue.call(this,"fill",!0),this.path=bi}var fi=JSON.parse(JSON.stringify(Bn));fi=Ye([fi],this.posX+this.margin[3],-Mn+yi+this.ctx.prevPageLastElemOffset)[0];var Mi=(ni>$n||ni<Yn)&&De.call(this);Mi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],si,vi,null).clip().discardPath()),this.pdf.addImage(an,"JPEG",fi.x,fi.y,fi.w,fi.h,null,null,bn),Mi&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(an,"JPEG",Bn.x,Bn.y,Bn.w,Bn.h,null,null,bn)};var Oe=function(an,_n,sn){var ze=[];_n=_n||this.pdf.internal.pageSize.width,sn=sn||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Xe=this.posY+this.ctx.prevPageLastElemOffset;switch(an.type){default:case"mt":case"lt":ze.push(Math.floor((an.y+Xe)/sn)+1);break;case"arc":ze.push(Math.floor((an.y+Xe-an.radius)/sn)+1),ze.push(Math.floor((an.y+Xe+an.radius)/sn)+1);break;case"qct":var rn=jn(this.ctx.lastPoint.x,this.ctx.lastPoint.y,an.x1,an.y1,an.x,an.y);ze.push(Math.floor((rn.y+Xe)/sn)+1),ze.push(Math.floor((rn.y+rn.h+Xe)/sn)+1);break;case"bct":var gn=zn(this.ctx.lastPoint.x,this.ctx.lastPoint.y,an.x1,an.y1,an.x2,an.y2,an.x,an.y);ze.push(Math.floor((gn.y+Xe)/sn)+1),ze.push(Math.floor((gn.y+gn.h+Xe)/sn)+1);break;case"rect":ze.push(Math.floor((an.y+Xe)/sn)+1),ze.push(Math.floor((an.y+an.h+Xe)/sn)+1)}for(var fn=0;fn<ze.length;fn+=1)for(;this.pdf.internal.getNumberOfPages()<ze[fn];)Be.call(this);return ze},Be=function(){var an=this.fillStyle,_n=this.strokeStyle,sn=this.font,ze=this.lineCap,Xe=this.lineWidth,rn=this.lineJoin;this.pdf.addPage(),this.fillStyle=an,this.strokeStyle=_n,this.font=sn,this.lineCap=ze,this.lineWidth=Xe,this.lineJoin=rn},Ye=function(an,_n,sn){for(var ze=0;ze<an.length;ze++)switch(an[ze].type){case"bct":an[ze].x2+=_n,an[ze].y2+=sn;case"qct":an[ze].x1+=_n,an[ze].y1+=sn;case"mt":case"lt":case"arc":default:an[ze].x+=_n,an[ze].y+=sn}return an},nn=function(an){return an.sort(function(_n,sn){return _n-sn})},en=function(an,_n){for(var sn,ze,Xe=this.fillStyle,rn=this.strokeStyle,gn=this.lineCap,fn=this.lineWidth,Nn=Math.abs(fn*this.ctx.transform.scaleX),wn=this.lineJoin,xn=JSON.parse(JSON.stringify(this.path)),Sn=JSON.parse(JSON.stringify(this.path)),Ke=[],$e=0;$e<Sn.length;$e++)if(Sn[$e].x!==void 0)for(var We=Oe.call(this,Sn[$e]),yn=0;yn<We.length;yn+=1)Ke.indexOf(We[yn])===-1&&Ke.push(We[yn]);for(var bn=0;bn<Ke.length;bn++)for(;this.pdf.internal.getNumberOfPages()<Ke[bn];)Be.call(this);if(nn(Ke),this.autoPaging)for(var Ln=Ke[0],Bn=Ke[Ke.length-1],On=Ln;On<Bn+1;On++){this.pdf.setPage(On),this.fillStyle=Xe,this.strokeStyle=rn,this.lineCap=gn,this.lineWidth=Nn,this.lineJoin=wn;var qn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Gn=On===1?this.posY+this.margin[0]:this.margin[0],$n=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Yn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ni=On===1?0:$n+(On-2)*Yn;if(this.ctx.clip_path.length!==0){var si=this.path;sn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ye(sn,this.posX+this.margin[3],-ni+Gn+this.ctx.prevPageLastElemOffset),Ue.call(this,an,!0),this.path=si}if(ze=JSON.parse(JSON.stringify(xn)),this.path=Ye(ze,this.posX+this.margin[3],-ni+Gn+this.ctx.prevPageLastElemOffset),_n===!1||On===0){var yi=(On>Ln||On<Bn)&&De.call(this);yi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qn,Yn,null).clip().discardPath()),Ue.call(this,an,_n),yi&&this.pdf.restoreGraphicsState()}this.lineWidth=fn}else this.lineWidth=Nn,Ue.call(this,an,_n),this.lineWidth=fn;this.path=xn},Ue=function(an,_n){if((an!=="stroke"||_n||!qe.call(this))&&(an==="stroke"||_n||!ke.call(this))){for(var sn,ze,Xe=[],rn=this.path,gn=0;gn<rn.length;gn++){var fn=rn[gn];switch(fn.type){case"begin":Xe.push({begin:!0});break;case"close":Xe.push({close:!0});break;case"mt":Xe.push({start:fn,deltas:[],abs:[]});break;case"lt":var Nn=Xe.length;if(rn[gn-1]&&!isNaN(rn[gn-1].x)&&(sn=[fn.x-rn[gn-1].x,fn.y-rn[gn-1].y],Nn>0)){for(;Nn>=0;Nn--)if(Xe[Nn-1].close!==!0&&Xe[Nn-1].begin!==!0){Xe[Nn-1].deltas.push(sn),Xe[Nn-1].abs.push(fn);break}}break;case"bct":sn=[fn.x1-rn[gn-1].x,fn.y1-rn[gn-1].y,fn.x2-rn[gn-1].x,fn.y2-rn[gn-1].y,fn.x-rn[gn-1].x,fn.y-rn[gn-1].y],Xe[Xe.length-1].deltas.push(sn);break;case"qct":var wn=rn[gn-1].x+2/3*(fn.x1-rn[gn-1].x),xn=rn[gn-1].y+2/3*(fn.y1-rn[gn-1].y),Sn=fn.x+2/3*(fn.x1-fn.x),Ke=fn.y+2/3*(fn.y1-fn.y),$e=fn.x,We=fn.y;sn=[wn-rn[gn-1].x,xn-rn[gn-1].y,Sn-rn[gn-1].x,Ke-rn[gn-1].y,$e-rn[gn-1].x,We-rn[gn-1].y],Xe[Xe.length-1].deltas.push(sn);break;case"arc":Xe.push({deltas:[],abs:[],arc:!0}),Array.isArray(Xe[Xe.length-1].abs)&&Xe[Xe.length-1].abs.push(fn)}}ze=_n?null:an==="stroke"?"stroke":"fill";for(var yn=!1,bn=0;bn<Xe.length;bn++)if(Xe[bn].arc)for(var Ln=Xe[bn].abs,Bn=0;Bn<Ln.length;Bn++){var On=Ln[Bn];On.type==="arc"?Me.call(this,On.x,On.y,On.radius,On.startAngle,On.endAngle,On.counterclockwise,void 0,_n,!yn):cn.call(this,On.x,On.y),yn=!0}else if(Xe[bn].close===!0)this.pdf.internal.out("h"),yn=!1;else if(Xe[bn].begin!==!0){var qn=Xe[bn].start.x,Gn=Xe[bn].start.y;hn.call(this,Xe[bn].deltas,qn,Gn),yn=!0}ze&&tn.call(this,ze),_n&&dn.call(this)}},Je=function(an){var _n=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,sn=_n*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return an-sn;case"top":return an+_n-sn;case"hanging":return an+_n-2*sn;case"middle":return an+_n/2-sn;case"ideographic":return an;case"alphabetic":default:return an}},Ge=function(an){return an+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};Ve.prototype.createLinearGradient=function(){var an=function(){};return an.colorStops=[],an.addColorStop=function(_n,sn){this.colorStops.push([_n,sn])},an.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},an.isCanvasGradient=!0,an},Ve.prototype.createPattern=function(){return this.createLinearGradient()},Ve.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Me=function(an,_n,sn,ze,Xe,rn,gn,fn,Nn){for(var wn=kn.call(this,sn,ze,Xe,rn),xn=0;xn<wn.length;xn++){var Sn=wn[xn];xn===0&&(Nn?Re.call(this,Sn.x1+an,Sn.y1+_n):cn.call(this,Sn.x1+an,Sn.y1+_n)),Pn.call(this,an,_n,Sn.x2,Sn.y2,Sn.x3,Sn.y3,Sn.x4,Sn.y4)}fn?dn.call(this):tn.call(this,gn)},tn=function(an){switch(an){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},dn=function(){this.pdf.clip(),this.pdf.discardPath()},Re=function(an,_n){this.pdf.internal.out(St(an)+" "+r(_n)+" m")},Qe=function(an){var _n;switch(an.align){case"right":case"end":_n="right";break;case"center":_n="center";break;case"left":case"start":default:_n="left"}var sn=this.pdf.getTextDimensions(an.text),ze=Je.call(this,an.y),Xe=Ge.call(this,ze)-sn.h,rn=this.ctx.transform.applyToPoint(new Ee(an.x,ze)),gn=this.ctx.transform.decompose(),fn=new Ce;fn=(fn=(fn=fn.multiply(gn.translate)).multiply(gn.skew)).multiply(gn.scale);for(var Nn,wn,xn,Sn=this.ctx.transform.applyToRectangle(new Pe(an.x,ze,sn.w,sn.h)),Ke=fn.applyToRectangle(new Pe(an.x,Xe,sn.w,sn.h)),$e=Oe.call(this,Ke),We=[],yn=0;yn<$e.length;yn+=1)We.indexOf($e[yn])===-1&&We.push($e[yn]);if(nn(We),this.autoPaging)for(var bn=We[0],Ln=We[We.length-1],Bn=bn;Bn<Ln+1;Bn++){this.pdf.setPage(Bn);var On=Bn===1?this.posY+this.margin[0]:this.margin[0],qn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Gn=this.pdf.internal.pageSize.height-this.margin[2],$n=Gn-this.margin[0],Yn=this.pdf.internal.pageSize.width-this.margin[1],ni=Yn-this.margin[3],si=Bn===1?0:qn+(Bn-2)*$n;if(this.ctx.clip_path.length!==0){var yi=this.path;Nn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ye(Nn,this.posX+this.margin[3],-1*si+On),Ue.call(this,"fill",!0),this.path=yi}var li=Ye([JSON.parse(JSON.stringify(Ke))],this.posX+this.margin[3],-si+On+this.ctx.prevPageLastElemOffset)[0];an.scale>=.01&&(wn=this.pdf.internal.getFontSize(),this.pdf.setFontSize(wn*an.scale),xn=this.lineWidth,this.lineWidth=xn*an.scale);var vi=this.autoPaging!=="text";if(vi||li.y+li.h<=Gn){if(vi||li.y>=On&&li.x<=Yn){var Mn=vi?an.text:this.pdf.splitTextToSize(an.text,an.maxWidth||Yn-li.x)[0],bi=Ye([JSON.parse(JSON.stringify(Sn))],this.posX+this.margin[3],-si+On+this.ctx.prevPageLastElemOffset)[0],fi=vi&&(Bn>bn||Bn<Ln)&&De.call(this);fi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ni,$n,null).clip().discardPath()),this.pdf.text(Mn,bi.x,bi.y,{angle:an.angle,align:_n,renderingMode:an.renderingMode}),fi&&this.pdf.restoreGraphicsState()}}else li.y<Gn&&(this.ctx.prevPageLastElemOffset+=Gn-li.y);an.scale>=.01&&(this.pdf.setFontSize(wn),this.lineWidth=xn)}else an.scale>=.01&&(wn=this.pdf.internal.getFontSize(),this.pdf.setFontSize(wn*an.scale),xn=this.lineWidth,this.lineWidth=xn*an.scale),this.pdf.text(an.text,rn.x+this.posX,rn.y+this.posY,{angle:an.angle,align:_n,renderingMode:an.renderingMode,maxWidth:an.maxWidth}),an.scale>=.01&&(this.pdf.setFontSize(wn),this.lineWidth=xn)},cn=function(an,_n,sn,ze){sn=sn||0,ze=ze||0,this.pdf.internal.out(St(an+sn)+" "+r(_n+ze)+" l")},hn=function(an,_n,sn){return this.pdf.lines(an,_n,sn,null,null)},Pn=function(an,_n,sn,ze,Xe,rn,gn,fn){this.pdf.internal.out([t(xe(sn+an)),t(_e(ze+_n)),t(xe(Xe+an)),t(_e(rn+_n)),t(xe(gn+an)),t(_e(fn+_n)),"c"].join(" "))},kn=function(an,_n,sn,ze){for(var Xe=2*Math.PI,rn=Math.PI/2;_n>sn;)_n-=Xe;var gn=Math.abs(sn-_n);gn<Xe&&ze&&(gn=Xe-gn);for(var fn=[],Nn=ze?-1:1,wn=_n;gn>1e-5;){var xn=wn+Nn*Math.min(gn,rn);fn.push(Dn.call(this,an,wn,xn)),gn-=Math.abs(xn-wn),wn=xn}return fn},Dn=function(an,_n,sn){var ze=(sn-_n)/2,Xe=an*Math.cos(ze),rn=an*Math.sin(ze),gn=Xe,fn=-rn,Nn=gn*gn+fn*fn,wn=Nn+gn*Xe+fn*rn,xn=4/3*(Math.sqrt(2*Nn*wn)-wn)/(gn*rn-fn*Xe),Sn=gn-xn*fn,Ke=fn+xn*gn,$e=Sn,We=-Ke,yn=ze+_n,bn=Math.cos(yn),Ln=Math.sin(yn);return{x1:an*Math.cos(_n),y1:an*Math.sin(_n),x2:Sn*bn-Ke*Ln,y2:Sn*Ln+Ke*bn,x3:$e*bn-We*Ln,y3:$e*Ln+We*bn,x4:an*Math.cos(sn),y4:an*Math.sin(sn)}},Rn=function(an){return 180*an/Math.PI},jn=function(an,_n,sn,ze,Xe,rn){var gn=an+.5*(sn-an),fn=_n+.5*(ze-_n),Nn=Xe+.5*(sn-Xe),wn=rn+.5*(ze-rn),xn=Math.min(an,Xe,gn,Nn),Sn=Math.max(an,Xe,gn,Nn),Ke=Math.min(_n,rn,fn,wn),$e=Math.max(_n,rn,fn,wn);return new Pe(xn,Ke,Sn-xn,$e-Ke)},zn=function(an,_n,sn,ze,Xe,rn,gn,fn){var Nn,wn,xn,Sn,Ke,$e,We,yn,bn,Ln,Bn,On,qn,Gn,$n=sn-an,Yn=ze-_n,ni=Xe-sn,si=rn-ze,yi=gn-Xe,li=fn-rn;for(wn=0;wn<41;wn++)bn=(We=(xn=an+(Nn=wn/40)*$n)+Nn*((Ke=sn+Nn*ni)-xn))+Nn*(Ke+Nn*(Xe+Nn*yi-Ke)-We),Ln=(yn=(Sn=_n+Nn*Yn)+Nn*(($e=ze+Nn*si)-Sn))+Nn*($e+Nn*(rn+Nn*li-$e)-yn),wn==0?(Bn=bn,On=Ln,qn=bn,Gn=Ln):(Bn=Math.min(Bn,bn),On=Math.min(On,Ln),qn=Math.max(qn,bn),Gn=Math.max(Gn,Ln));return new Pe(Math.round(Bn),Math.round(On),Math.round(qn-Bn),Math.round(Gn-On))},ii=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var an,_n,sn=(an=this.ctx.lineDash,_n=this.ctx.lineDashOffset,JSON.stringify({lineDash:an,lineDashOffset:_n}));this.prevLineDash!==sn&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=sn)}}})(E.API),function(e){var t=function(_e){var Ee,Pe,Ce,Te,Ie,Ve,He,ke,qe,De;for(Pe=[],Ce=0,Te=(_e+=Ee="\0\0\0\0".slice(_e.length%4||4)).length;Te>Ce;Ce+=4)(Ie=(_e.charCodeAt(Ce)<<24)+(_e.charCodeAt(Ce+1)<<16)+(_e.charCodeAt(Ce+2)<<8)+_e.charCodeAt(Ce+3))!==0?(Ve=(Ie=((Ie=((Ie=((Ie=(Ie-(De=Ie%85))/85)-(qe=Ie%85))/85)-(ke=Ie%85))/85)-(He=Ie%85))/85)%85,Pe.push(Ve+33,He+33,ke+33,qe+33,De+33)):Pe.push(122);return function(Oe,Be){for(var Ye=Be;Ye>0;Ye--)Oe.pop()}(Pe,Ee.length),String.fromCharCode.apply(String,Pe)+"~>"},St=function(_e){var Ee,Pe,Ce,Te,Ie,Ve=String,He="length",ke=255,qe="charCodeAt",De="slice",Oe="replace";for(_e[De](-2),_e=_e[De](0,-2)[Oe](/\s/g,"")[Oe]("z","!!!!!"),Ce=[],Te=0,Ie=(_e+=Ee="uuuuu"[De](_e[He]%5||5))[He];Ie>Te;Te+=5)Pe=52200625*(_e[qe](Te)-33)+614125*(_e[qe](Te+1)-33)+7225*(_e[qe](Te+2)-33)+85*(_e[qe](Te+3)-33)+(_e[qe](Te+4)-33),Ce.push(ke&Pe>>24,ke&Pe>>16,ke&Pe>>8,ke&Pe);return function(Be,Ye){for(var nn=Ye;nn>0;nn--)Be.pop()}(Ce,Ee[He]),Ve.fromCharCode.apply(Ve,Ce)},r=function(_e){var Ee=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((_e=_e.replace(/\s/g,"")).indexOf(">")!==-1&&(_e=_e.substr(0,_e.indexOf(">"))),_e.length%2&&(_e+="0"),Ee.test(_e)===!1)return"";for(var Pe="",Ce=0;Ce<_e.length;Ce+=2)Pe+=String.fromCharCode("0x"+(_e[Ce]+_e[Ce+1]));return Pe},xe=function(_e){for(var Ee=new Uint8Array(_e.length),Pe=_e.length;Pe--;)Ee[Pe]=_e.charCodeAt(Pe);return _e=(Ee=zlibSync(Ee)).reduce(function(Ce,Te){return Ce+String.fromCharCode(Te)},"")};e.processDataByFilters=function(_e,Ee){var Pe=0,Ce=_e||"",Te=[];for(typeof(Ee=Ee||[])=="string"&&(Ee=[Ee]),Pe=0;Pe<Ee.length;Pe+=1)switch(Ee[Pe]){case"ASCII85Decode":case"/ASCII85Decode":Ce=St(Ce),Te.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":Ce=t(Ce),Te.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":Ce=r(Ce),Te.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":Ce=Ce.split("").map(function(Ie){return("0"+Ie.charCodeAt().toString(16)).slice(-2)}).join("")+">",Te.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":Ce=xe(Ce),Te.push("/FlateDecode");break;default:throw new Error('The filter: "'+Ee[Pe]+'" is not implemented')}return{data:Ce,reverseChain:Te.reverse().join(" ")}}}(E.API),function(e){e.loadFile=function(t,St,r){return function(xe,_e,Ee){_e=_e!==!1,Ee=typeof Ee=="function"?Ee:function(){};var Pe=void 0;try{Pe=function(Ce,Te,Ie){var Ve=new XMLHttpRequest,He=0,ke=function(qe){var De=qe.length,Oe=[],Be=String.fromCharCode;for(He=0;He<De;He+=1)Oe.push(Be(255&qe.charCodeAt(He)));return Oe.join("")};if(Ve.open("GET",Ce,!Te),Ve.overrideMimeType("text/plain; charset=x-user-defined"),Te===!1&&(Ve.onload=function(){Ve.status===200?Ie(ke(this.responseText)):Ie(void 0)}),Ve.send(null),Te&&Ve.status===200)return ke(Ve.responseText)}(xe,_e,Ee)}catch{}return Pe}(t,St,r)},e.loadImageFile=e.loadFile}(E.API),function(e){function t(){return(n.html2canvas?Promise.resolve(n.html2canvas):__vitePreload(()=>import("./html2canvas.esm-e0a7d97b.js"),[])).catch(function(Ee){return Promise.reject(new Error("Could not load html2canvas: "+Ee))}).then(function(Ee){return Ee.default?Ee.default:Ee})}function St(){return(n.DOMPurify?Promise.resolve(n.DOMPurify):__vitePreload(()=>import("./purify.es-cf254a40.js"),[])).catch(function(Ee){return Promise.reject(new Error("Could not load dompurify: "+Ee))}).then(function(Ee){return Ee.default?Ee.default:Ee})}var r=function(Ee){var Pe=_typeof(Ee);return Pe==="undefined"?"undefined":Pe==="string"||Ee instanceof String?"string":Pe==="number"||Ee instanceof Number?"number":Pe==="function"||Ee instanceof Function?"function":Ee&&Ee.constructor===Array?"array":Ee&&Ee.nodeType===1?"element":Pe==="object"?"object":"unknown"},xe=function(Ee,Pe){var Ce=document.createElement(Ee);for(var Te in Pe.className&&(Ce.className=Pe.className),Pe.innerHTML&&Pe.dompurify&&(Ce.innerHTML=Pe.dompurify.sanitize(Pe.innerHTML)),Pe.style)Ce.style[Te]=Pe.style[Te];return Ce},_e=function Ee(Pe){var Ce=Object.assign(Ee.convert(Promise.resolve()),JSON.parse(JSON.stringify(Ee.template))),Te=Ee.convert(Promise.resolve(),Ce);return Te=(Te=Te.setProgress(1,Ee,1,[Ee])).set(Pe)};(_e.prototype=Object.create(Promise.prototype)).constructor=_e,_e.convert=function(Ee,Pe){return Ee.__proto__=Pe||_e.prototype,Ee},_e.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},_e.prototype.from=function(Ee,Pe){return this.then(function(){switch(Pe=Pe||function(Ce){switch(r(Ce)){case"string":return"string";case"element":return Ce.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(Ee)){case"string":return this.then(St).then(function(Ce){return this.set({src:xe("div",{innerHTML:Ee,dompurify:Ce})})});case"element":return this.set({src:Ee});case"canvas":return this.set({canvas:Ee});case"img":return this.set({img:Ee});default:return this.error("Unknown source type.")}})},_e.prototype.to=function(Ee){switch(Ee){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},_e.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var Ee={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},Pe=function Ce(Te,Ie){for(var Ve=Te.nodeType===3?document.createTextNode(Te.nodeValue):Te.cloneNode(!1),He=Te.firstChild;He;He=He.nextSibling)Ie!==!0&&He.nodeType===1&&He.nodeName==="SCRIPT"||Ve.appendChild(Ce(He,Ie));return Te.nodeType===1&&(Te.nodeName==="CANVAS"?(Ve.width=Te.width,Ve.height=Te.height,Ve.getContext("2d").drawImage(Te,0,0)):Te.nodeName!=="TEXTAREA"&&Te.nodeName!=="SELECT"||(Ve.value=Te.value),Ve.addEventListener("load",function(){Ve.scrollTop=Te.scrollTop,Ve.scrollLeft=Te.scrollLeft},!0)),Ve}(this.prop.src,this.opt.html2canvas.javascriptEnabled);Pe.tagName==="BODY"&&(Ee.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=xe("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=xe("div",{className:"html2pdf__container",style:Ee}),this.prop.container.appendChild(Pe),this.prop.container.firstChild.appendChild(xe("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},_e.prototype.toCanvas=function(){var Ee=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Ee).then(t).then(function(Pe){var Ce=Object.assign({},this.opt.html2canvas);return delete Ce.onrendered,Pe(this.prop.container,Ce)}).then(function(Pe){(this.opt.html2canvas.onrendered||function(){})(Pe),this.prop.canvas=Pe,document.body.removeChild(this.prop.overlay)})},_e.prototype.toContext2d=function(){var Ee=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Ee).then(t).then(function(Pe){var Ce=this.opt.jsPDF,Te=this.opt.fontFaces,Ie=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,Ve=Object.assign({async:!0,allowTaint:!0,scale:Ie,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete Ve.onrendered,Ce.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,Ce.context2d.posX=this.opt.x,Ce.context2d.posY=this.opt.y,Ce.context2d.margin=this.opt.margin,Ce.context2d.fontFaces=Te,Te)for(var He=0;He<Te.length;++He){var ke=Te[He],qe=ke.src.find(function(De){return De.format==="truetype"});qe&&Ce.addFont(qe.url,ke.ref.name,ke.ref.style)}return Ve.windowHeight=Ve.windowHeight||0,Ve.windowHeight=Ve.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):Ve.windowHeight,Ce.context2d.save(!0),Pe(this.prop.container,Ve)}).then(function(Pe){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(Pe),this.prop.canvas=Pe,document.body.removeChild(this.prop.overlay)})},_e.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var Ee=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=Ee})},_e.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},_e.prototype.output=function(Ee,Pe,Ce){return(Ce=Ce||"pdf").toLowerCase()==="img"||Ce.toLowerCase()==="image"?this.outputImg(Ee,Pe):this.outputPdf(Ee,Pe)},_e.prototype.outputPdf=function(Ee,Pe){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(Ee,Pe)})},_e.prototype.outputImg=function(Ee){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(Ee){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+Ee+'" is not supported.'}})},_e.prototype.save=function(Ee){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(Ee?{filename:Ee}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},_e.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},_e.prototype.set=function(Ee){if(r(Ee)!=="object")return this;var Pe=Object.keys(Ee||{}).map(function(Ce){if(Ce in _e.template.prop)return function(){this.prop[Ce]=Ee[Ce]};switch(Ce){case"margin":return this.setMargin.bind(this,Ee.margin);case"jsPDF":return function(){return this.opt.jsPDF=Ee.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,Ee.pageSize);default:return function(){this.opt[Ce]=Ee[Ce]}}},this);return this.then(function(){return this.thenList(Pe)})},_e.prototype.get=function(Ee,Pe){return this.then(function(){var Ce=Ee in _e.template.prop?this.prop[Ee]:this.opt[Ee];return Pe?Pe(Ce):Ce})},_e.prototype.setMargin=function(Ee){return this.then(function(){switch(r(Ee)){case"number":Ee=[Ee,Ee,Ee,Ee];case"array":if(Ee.length===2&&(Ee=[Ee[0],Ee[1],Ee[0],Ee[1]]),Ee.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=Ee}).then(this.setPageSize)},_e.prototype.setPageSize=function(Ee){function Pe(Ce,Te){return Math.floor(Ce*Te/72*96)}return this.then(function(){(Ee=Ee||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(Ee.inner={width:Ee.width-this.opt.margin[1]-this.opt.margin[3],height:Ee.height-this.opt.margin[0]-this.opt.margin[2]},Ee.inner.px={width:Pe(Ee.inner.width,Ee.k),height:Pe(Ee.inner.height,Ee.k)},Ee.inner.ratio=Ee.inner.height/Ee.inner.width),this.prop.pageSize=Ee})},_e.prototype.setProgress=function(Ee,Pe,Ce,Te){return Ee!=null&&(this.progress.val=Ee),Pe!=null&&(this.progress.state=Pe),Ce!=null&&(this.progress.n=Ce),Te!=null&&(this.progress.stack=Te),this.progress.ratio=this.progress.val/this.progress.state,this},_e.prototype.updateProgress=function(Ee,Pe,Ce,Te){return this.setProgress(Ee?this.progress.val+Ee:null,Pe||null,Ce?this.progress.n+Ce:null,Te?this.progress.stack.concat(Te):null)},_e.prototype.then=function(Ee,Pe){var Ce=this;return this.thenCore(Ee,Pe,function(Te,Ie){return Ce.updateProgress(null,null,1,[Te]),Promise.prototype.then.call(this,function(Ve){return Ce.updateProgress(null,Te),Ve}).then(Te,Ie).then(function(Ve){return Ce.updateProgress(1),Ve})})},_e.prototype.thenCore=function(Ee,Pe,Ce){Ce=Ce||Promise.prototype.then,Ee&&(Ee=Ee.bind(this)),Pe&&(Pe=Pe.bind(this));var Te=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:_e.convert(Object.assign({},this),Promise.prototype),Ie=Ce.call(Te,Ee,Pe);return _e.convert(Ie,this.__proto__)},_e.prototype.thenExternal=function(Ee,Pe){return Promise.prototype.then.call(this,Ee,Pe)},_e.prototype.thenList=function(Ee){var Pe=this;return Ee.forEach(function(Ce){Pe=Pe.thenCore(Ce)}),Pe},_e.prototype.catch=function(Ee){Ee&&(Ee=Ee.bind(this));var Pe=Promise.prototype.catch.call(this,Ee);return _e.convert(Pe,this)},_e.prototype.catchExternal=function(Ee){return Promise.prototype.catch.call(this,Ee)},_e.prototype.error=function(Ee){return this.then(function(){throw new Error(Ee)})},_e.prototype.using=_e.prototype.set,_e.prototype.saveAs=_e.prototype.save,_e.prototype.export=_e.prototype.output,_e.prototype.run=_e.prototype.then,E.getPageSize=function(Ee,Pe,Ce){if(_typeof(Ee)==="object"){var Te=Ee;Ee=Te.orientation,Pe=Te.unit||Pe,Ce=Te.format||Ce}Pe=Pe||"mm",Ce=Ce||"a4",Ee=(""+(Ee||"P")).toLowerCase();var Ie,Ve=(""+Ce).toLowerCase(),He={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(Pe){case"pt":Ie=1;break;case"mm":Ie=72/25.4;break;case"cm":Ie=72/2.54;break;case"in":Ie=72;break;case"px":Ie=.75;break;case"pc":case"em":Ie=12;break;case"ex":Ie=6;break;default:throw"Invalid unit: "+Pe}var ke,qe=0,De=0;if(He.hasOwnProperty(Ve))qe=He[Ve][1]/Ie,De=He[Ve][0]/Ie;else try{qe=Ce[1],De=Ce[0]}catch{throw new Error("Invalid format: "+Ce)}if(Ee==="p"||Ee==="portrait")Ee="p",De>qe&&(ke=De,De=qe,qe=ke);else{if(Ee!=="l"&&Ee!=="landscape")throw"Invalid orientation: "+Ee;Ee="l",qe>De&&(ke=De,De=qe,qe=ke)}return{width:De,height:qe,unit:Pe,k:Ie,orientation:Ee}},e.html=function(Ee,Pe){(Pe=Pe||{}).callback=Pe.callback||function(){},Pe.html2canvas=Pe.html2canvas||{},Pe.html2canvas.canvas=Pe.html2canvas.canvas||this.canvas,Pe.jsPDF=Pe.jsPDF||this,Pe.fontFaces=Pe.fontFaces?Pe.fontFaces.map(jt):null;var Ce=new _e(Pe);return Pe.worker?Ce:Ce.from(Ee).doCallback()}}(E.API),E.API.addJS=function(e){return Ht=e,this.internal.events.subscribe("postPutResources",function(){Ut=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ut+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ht+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ut!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Ut+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var St=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var xe=St.outline.render().split(/\r\n/),_e=0;_e<xe.length;_e++){var Ee=xe[_e],Pe=r.exec(Ee);if(Pe!=null){var Ce=Pe[1];St.internal.newObjectDeferredBegin(Ce,!1)}St.internal.write(Ee)}if(this.outline.createNamedDestinations){var Te=this.internal.pages.length,Ie=[];for(_e=0;_e<Te;_e++){var Ve=St.internal.newObject();Ie.push(Ve);var He=St.internal.getPageInfo(_e+1);St.internal.write("<< /D["+He.objId+" 0 R /XYZ null null null]>> endobj")}var ke=St.internal.newObject();for(St.internal.write("<< /Names [ "),_e=0;_e<Ie.length;_e++)St.internal.write("(page_"+(_e+1)+")"+Ie[_e]+" 0 R");St.internal.write(" ] >>","endobj"),t=St.internal.newObject(),St.internal.write("<< /Dests "+ke+" 0 R"),St.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var St=this;St.outline={createNamedDestinations:!1,root:{children:[]}},St.outline.add=function(r,xe,_e){var Ee={title:xe,options:_e,children:[]};return r==null&&(r=this.root),r.children.push(Ee),Ee},St.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=St,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},St.outline.genIds_r=function(r){r.id=St.internal.newObjectDeferred();for(var xe=0;xe<r.children.length;xe++)this.genIds_r(r.children[xe])},St.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},St.outline.renderItems=function(r){for(var xe=this.ctx.pdf.internal.getVerticalCoordinateString,_e=0;_e<r.children.length;_e++){var Ee=r.children[_e];this.objStart(Ee),this.line("/Title "+this.makeString(Ee.title)),this.line("/Parent "+this.makeRef(r)),_e>0&&this.line("/Prev "+this.makeRef(r.children[_e-1])),_e<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[_e+1])),Ee.children.length>0&&(this.line("/First "+this.makeRef(Ee.children[0])),this.line("/Last "+this.makeRef(Ee.children[Ee.children.length-1])));var Pe=this.count=this.count_r({count:0},Ee);if(Pe>0&&this.line("/Count "+Pe),Ee.options&&Ee.options.pageNumber){var Ce=St.internal.getPageInfo(Ee.options.pageNumber);this.line("/Dest ["+Ce.objId+" 0 R /XYZ 0 "+xe(0)+" 0]")}this.objEnd()}for(var Te=0;Te<r.children.length;Te++)this.renderItems(r.children[Te])},St.outline.line=function(r){this.ctx.val+=r+`\r
`},St.outline.makeRef=function(r){return r.id+" 0 R"},St.outline.makeString=function(r){return"("+St.internal.pdfEscape(r)+")"},St.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},St.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},St.outline.count_r=function(r,xe){for(var _e=0;_e<xe.children.length;_e++)r.count++,this.count_r(r,xe.children[_e]);return r.count}}])}(E.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(St,r,xe,_e,Ee,Pe){var Ce,Te=this.decode.DCT_DECODE,Ie=null;if(typeof St=="string"||this.__addimage__.isArrayBuffer(St)||this.__addimage__.isArrayBufferView(St)){switch(St=Ee||St,St=this.__addimage__.isArrayBuffer(St)?new Uint8Array(St):St,(Ce=function(Ve){for(var He,ke=256*Ve.charCodeAt(4)+Ve.charCodeAt(5),qe=Ve.length,De={width:0,height:0,numcomponents:1},Oe=4;Oe<qe;Oe+=2){if(Oe+=ke,t.indexOf(Ve.charCodeAt(Oe+1))!==-1){He=256*Ve.charCodeAt(Oe+5)+Ve.charCodeAt(Oe+6),De={width:256*Ve.charCodeAt(Oe+7)+Ve.charCodeAt(Oe+8),height:He,numcomponents:Ve.charCodeAt(Oe+9)};break}ke=256*Ve.charCodeAt(Oe+2)+Ve.charCodeAt(Oe+3)}return De}(St=this.__addimage__.isArrayBufferView(St)?this.__addimage__.arrayBufferToBinaryString(St):St)).numcomponents){case 1:Pe=this.color_spaces.DEVICE_GRAY;break;case 4:Pe=this.color_spaces.DEVICE_CMYK;break;case 3:Pe=this.color_spaces.DEVICE_RGB}Ie={data:St,width:Ce.width,height:Ce.height,colorSpace:Pe,bitsPerComponent:8,filter:Te,index:r,alias:xe}}return Ie}}(E.API);var Vt,Gt,Yt,Jt,Xt,Kt=function(){var e,t,St;function r(_e){var Ee,Pe,Ce,Te,Ie,Ve,He,ke,qe,De,Oe,Be,Ye,nn;for(this.data=_e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},Ve=null;;){switch(Ee=this.readUInt32(),qe=(function(){var en,Ue;for(Ue=[],en=0;en<4;++en)Ue.push(String.fromCharCode(this.data[this.pos++]));return Ue}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(Ee);break;case"fcTL":Ve&&this.animation.frames.push(Ve),this.pos+=4,Ve={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},Ie=this.readUInt16(),Te=this.readUInt16()||100,Ve.delay=1e3*Ie/Te,Ve.disposeOp=this.data[this.pos++],Ve.blendOp=this.data[this.pos++],Ve.data=[];break;case"IDAT":case"fdAT":for(qe==="fdAT"&&(this.pos+=4,Ee-=4),_e=(Ve!=null?Ve.data:void 0)||this.imgData,Be=0;0<=Ee?Be<Ee:Be>Ee;0<=Ee?++Be:--Be)_e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(Ce=this.palette.length/3,this.transparency.indexed=this.read(Ee),this.transparency.indexed.length>Ce)throw new Error("More transparent colors than palette size");if((De=Ce-this.transparency.indexed.length)>0)for(Ye=0;0<=De?Ye<De:Ye>De;0<=De?++Ye:--Ye)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(Ee)[0];break;case 2:this.transparency.rgb=this.read(Ee)}break;case"tEXt":He=(Oe=this.read(Ee)).indexOf(0),ke=String.fromCharCode.apply(String,Oe.slice(0,He)),this.text[ke]=String.fromCharCode.apply(String,Oe.slice(He+1));break;case"IEND":return Ve&&this.animation.frames.push(Ve),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(nn=this.colorType)===4||nn===6,Pe=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*Pe,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=Ee}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(_e){var Ee,Pe;for(Pe=[],Ee=0;0<=_e?Ee<_e:Ee>_e;0<=_e?++Ee:--Ee)Pe.push(this.data[this.pos++]);return Pe},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(_e){var Ee=this.pixelBitlength/8,Pe=new Uint8Array(this.width*this.height*Ee),Ce=0,Te=this;if(_e==null&&(_e=this.imgData),_e.length===0)return new Uint8Array(0);function Ie(Ve,He,ke,qe){var De,Oe,Be,Ye,nn,en,Ue,Je,Ge,Me,tn,dn,Re,Qe,cn,hn,Pn,kn,Dn,Rn,jn,zn=Math.ceil((Te.width-Ve)/ke),ii=Math.ceil((Te.height-He)/qe),an=Te.width==zn&&Te.height==ii;for(Qe=Ee*zn,dn=an?Pe:new Uint8Array(Qe*ii),en=_e.length,Re=0,Oe=0;Re<ii&&Ce<en;){switch(_e[Ce++]){case 0:for(Ye=Pn=0;Pn<Qe;Ye=Pn+=1)dn[Oe++]=_e[Ce++];break;case 1:for(Ye=kn=0;kn<Qe;Ye=kn+=1)De=_e[Ce++],nn=Ye<Ee?0:dn[Oe-Ee],dn[Oe++]=(De+nn)%256;break;case 2:for(Ye=Dn=0;Dn<Qe;Ye=Dn+=1)De=_e[Ce++],Be=(Ye-Ye%Ee)/Ee,cn=Re&&dn[(Re-1)*Qe+Be*Ee+Ye%Ee],dn[Oe++]=(cn+De)%256;break;case 3:for(Ye=Rn=0;Rn<Qe;Ye=Rn+=1)De=_e[Ce++],Be=(Ye-Ye%Ee)/Ee,nn=Ye<Ee?0:dn[Oe-Ee],cn=Re&&dn[(Re-1)*Qe+Be*Ee+Ye%Ee],dn[Oe++]=(De+Math.floor((nn+cn)/2))%256;break;case 4:for(Ye=jn=0;jn<Qe;Ye=jn+=1)De=_e[Ce++],Be=(Ye-Ye%Ee)/Ee,nn=Ye<Ee?0:dn[Oe-Ee],Re===0?cn=hn=0:(cn=dn[(Re-1)*Qe+Be*Ee+Ye%Ee],hn=Be&&dn[(Re-1)*Qe+(Be-1)*Ee+Ye%Ee]),Ue=nn+cn-hn,Je=Math.abs(Ue-nn),Me=Math.abs(Ue-cn),tn=Math.abs(Ue-hn),Ge=Je<=Me&&Je<=tn?nn:Me<=tn?cn:hn,dn[Oe++]=(De+Ge)%256;break;default:throw new Error("Invalid filter algorithm: "+_e[Ce-1])}if(!an){var _n=((He+Re*qe)*Te.width+Ve)*Ee,sn=Re*Qe;for(Ye=0;Ye<zn;Ye+=1){for(var ze=0;ze<Ee;ze+=1)Pe[_n++]=dn[sn++];_n+=(ke-1)*Ee}}Re++}}return _e=unzlibSync(_e),Te.interlaceMethod==1?(Ie(0,0,8,8),Ie(4,0,8,8),Ie(0,4,4,8),Ie(2,0,4,4),Ie(0,2,2,4),Ie(1,0,2,2),Ie(0,1,1,2)):Ie(0,0,1,1),Pe},r.prototype.decodePalette=function(){var _e,Ee,Pe,Ce,Te,Ie,Ve,He,ke;for(Pe=this.palette,Ie=this.transparency.indexed||[],Te=new Uint8Array((Ie.length||0)+Pe.length),Ce=0,_e=0,Ee=Ve=0,He=Pe.length;Ve<He;Ee=Ve+=3)Te[Ce++]=Pe[Ee],Te[Ce++]=Pe[Ee+1],Te[Ce++]=Pe[Ee+2],Te[Ce++]=(ke=Ie[_e++])!=null?ke:255;return Te},r.prototype.copyToImageData=function(_e,Ee){var Pe,Ce,Te,Ie,Ve,He,ke,qe,De,Oe,Be;if(Ce=this.colors,De=null,Pe=this.hasAlphaChannel,this.palette.length&&(De=(Be=this._decodedPalette)!=null?Be:this._decodedPalette=this.decodePalette(),Ce=4,Pe=!0),qe=(Te=_e.data||_e).length,Ve=De||Ee,Ie=He=0,Ce===1)for(;Ie<qe;)ke=De?4*Ee[Ie/4]:He,Oe=Ve[ke++],Te[Ie++]=Oe,Te[Ie++]=Oe,Te[Ie++]=Oe,Te[Ie++]=Pe?Ve[ke++]:255,He=ke;else for(;Ie<qe;)ke=De?4*Ee[Ie/4]:He,Te[Ie++]=Ve[ke++],Te[Ie++]=Ve[ke++],Te[Ie++]=Ve[ke++],Te[Ie++]=Pe?Ve[ke++]:255,He=ke},r.prototype.decode=function(){var _e;return _e=new Uint8Array(this.width*this.height*4),this.copyToImageData(_e,this.decodePixels()),_e};var xe=function(){if(Object.prototype.toString.call(n)==="[object Window]"){try{t=n.document.createElement("canvas"),St=t.getContext("2d")}catch{return!1}return!0}return!1};return xe(),e=function(_e){var Ee;if(xe()===!0)return St.width=_e.width,St.height=_e.height,St.clearRect(0,0,_e.width,_e.height),St.putImageData(_e,0,0),(Ee=new Image).src=t.toDataURL(),Ee;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(_e){var Ee,Pe,Ce,Te,Ie,Ve,He,ke;if(this.animation){for(ke=[],Pe=Ie=0,Ve=(He=this.animation.frames).length;Ie<Ve;Pe=++Ie)Ee=He[Pe],Ce=_e.createImageData(Ee.width,Ee.height),Te=this.decodePixels(new Uint8Array(Ee.data)),this.copyToImageData(Ce,Te),Ee.imageData=Ce,ke.push(Ee.image=e(Ce));return ke}},r.prototype.renderFrame=function(_e,Ee){var Pe,Ce,Te;return Pe=(Ce=this.animation.frames)[Ee],Te=Ce[Ee-1],Ee===0&&_e.clearRect(0,0,this.width,this.height),(Te!=null?Te.disposeOp:void 0)===1?_e.clearRect(Te.xOffset,Te.yOffset,Te.width,Te.height):(Te!=null?Te.disposeOp:void 0)===2&&_e.putImageData(Te.imageData,Te.xOffset,Te.yOffset),Pe.blendOp===0&&_e.clearRect(Pe.xOffset,Pe.yOffset,Pe.width,Pe.height),_e.drawImage(Pe.image,Pe.xOffset,Pe.yOffset)},r.prototype.animate=function(_e){var Ee,Pe,Ce,Te,Ie,Ve,He=this;return Pe=0,Ve=this.animation,Te=Ve.numFrames,Ce=Ve.frames,Ie=Ve.numPlays,(Ee=function(){var ke,qe;if(ke=Pe++%Te,qe=Ce[ke],He.renderFrame(_e,ke),Te>1&&Pe/Te<Ie)return He.animation._timeout=setTimeout(Ee,qe.delay)})()},r.prototype.stopAnimation=function(){var _e;return clearTimeout((_e=this.animation)!=null?_e._timeout:void 0)},r.prototype.render=function(_e){var Ee,Pe;return _e._png&&_e._png.stopAnimation(),_e._png=this,_e.width=this.width,_e.height=this.height,Ee=_e.getContext("2d"),this.animation?(this.decodeFrames(Ee),this.animate(Ee)):(Pe=Ee.createImageData(this.width,this.height),this.copyToImageData(Pe,this.decodePixels()),Ee.putImageData(Pe,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zt(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var St=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,xe=e[t++],_e=xe>>7,Ee=1<<(7&xe)+1;e[t++],e[t++];var Pe=null,Ce=null;_e&&(Pe=t,Ce=Ee,t+=3*Ee);var Te=!0,Ie=[],Ve=0,He=null,ke=0,qe=null;for(this.width=St,this.height=r;Te&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,qe=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((Re=e[t++])>=0))throw Error("Invalid block size");if(Re===0)break;t+=Re}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var De=e[t++];Ve=e[t++]|e[t++]<<8,He=e[t++],!(1&De)&&(He=null),ke=De>>2&7,t++;break;case 254:for(;;){if(!((Re=e[t++])>=0))throw Error("Invalid block size");if(Re===0)break;t+=Re}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var Oe=e[t++]|e[t++]<<8,Be=e[t++]|e[t++]<<8,Ye=e[t++]|e[t++]<<8,nn=e[t++]|e[t++]<<8,en=e[t++],Ue=en>>6&1,Je=1<<(7&en)+1,Ge=Pe,Me=Ce,tn=!1;en>>7&&(tn=!0,Ge=t,Me=Je,t+=3*Je);var dn=t;for(t++;;){var Re;if(!((Re=e[t++])>=0))throw Error("Invalid block size");if(Re===0)break;t+=Re}Ie.push({x:Oe,y:Be,width:Ye,height:nn,has_local_palette:tn,palette_offset:Ge,palette_size:Me,data_offset:dn,data_length:t-dn,transparent_index:He,interlaced:!!Ue,delay:Ve,disposal:ke});break;case 59:Te=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return Ie.length},this.loopCount=function(){return qe},this.frameInfo=function(Qe){if(Qe<0||Qe>=Ie.length)throw new Error("Frame index out of range.");return Ie[Qe]},this.decodeAndBlitFrameBGRA=function(Qe,cn){var hn=this.frameInfo(Qe),Pn=hn.width*hn.height,kn=new Uint8Array(Pn);$t(e,hn.data_offset,kn,Pn);var Dn=hn.palette_offset,Rn=hn.transparent_index;Rn===null&&(Rn=256);var jn=hn.width,zn=St-jn,ii=jn,an=4*(hn.y*St+hn.x),_n=4*((hn.y+hn.height)*St+hn.x),sn=an,ze=4*zn;hn.interlaced===!0&&(ze+=4*St*7);for(var Xe=8,rn=0,gn=kn.length;rn<gn;++rn){var fn=kn[rn];if(ii===0&&(ii=jn,(sn+=ze)>=_n&&(ze=4*zn+4*St*(Xe-1),sn=an+(jn+zn)*(Xe<<1),Xe>>=1)),fn===Rn)sn+=4;else{var Nn=e[Dn+3*fn],wn=e[Dn+3*fn+1],xn=e[Dn+3*fn+2];cn[sn++]=xn,cn[sn++]=wn,cn[sn++]=Nn,cn[sn++]=255}--ii}},this.decodeAndBlitFrameRGBA=function(Qe,cn){var hn=this.frameInfo(Qe),Pn=hn.width*hn.height,kn=new Uint8Array(Pn);$t(e,hn.data_offset,kn,Pn);var Dn=hn.palette_offset,Rn=hn.transparent_index;Rn===null&&(Rn=256);var jn=hn.width,zn=St-jn,ii=jn,an=4*(hn.y*St+hn.x),_n=4*((hn.y+hn.height)*St+hn.x),sn=an,ze=4*zn;hn.interlaced===!0&&(ze+=4*St*7);for(var Xe=8,rn=0,gn=kn.length;rn<gn;++rn){var fn=kn[rn];if(ii===0&&(ii=jn,(sn+=ze)>=_n&&(ze=4*zn+4*St*(Xe-1),sn=an+(jn+zn)*(Xe<<1),Xe>>=1)),fn===Rn)sn+=4;else{var Nn=e[Dn+3*fn],wn=e[Dn+3*fn+1],xn=e[Dn+3*fn+2];cn[sn++]=Nn,cn[sn++]=wn,cn[sn++]=xn,cn[sn++]=255}--ii}}}function $t(e,t,St,r){for(var xe=e[t++],_e=1<<xe,Ee=_e+1,Pe=Ee+1,Ce=xe+1,Te=(1<<Ce)-1,Ie=0,Ve=0,He=0,ke=e[t++],qe=new Int32Array(4096),De=null;;){for(;Ie<16&&ke!==0;)Ve|=e[t++]<<Ie,Ie+=8,ke===1?ke=e[t++]:--ke;if(Ie<Ce)break;var Oe=Ve&Te;if(Ve>>=Ce,Ie-=Ce,Oe!==_e){if(Oe===Ee)break;for(var Be=Oe<Pe?Oe:De,Ye=0,nn=Be;nn>_e;)nn=qe[nn]>>8,++Ye;var en=nn;if(He+Ye+(Be!==Oe?1:0)>r)return void a.log("Warning, gif stream longer than expected.");St[He++]=en;var Ue=He+=Ye;for(Be!==Oe&&(St[He++]=en),nn=Be;Ye--;)nn=qe[nn],St[--Ue]=255&nn,nn>>=8;De!==null&&Pe<4096&&(qe[Pe++]=De<<8|en,Pe>=Te+1&&Ce<12&&(++Ce,Te=Te<<1|1)),De=Oe}else Pe=Ee+1,Te=(1<<(Ce=xe+1))-1,De=null}return He!==r&&a.log("Warning, gif stream shorter than expected."),St}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qt(e){var t,St,r,xe,_e,Ee=Math.floor,Pe=new Array(64),Ce=new Array(64),Te=new Array(64),Ie=new Array(64),Ve=new Array(65535),He=new Array(65535),ke=new Array(64),qe=new Array(64),De=[],Oe=0,Be=7,Ye=new Array(64),nn=new Array(64),en=new Array(64),Ue=new Array(256),Je=new Array(2048),Ge=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Me=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],tn=[0,1,2,3,4,5,6,7,8,9,10,11],dn=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Re=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Qe=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],cn=[0,1,2,3,4,5,6,7,8,9,10,11],hn=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Pn=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function kn(an,_n){for(var sn=0,ze=0,Xe=new Array,rn=1;rn<=16;rn++){for(var gn=1;gn<=an[rn];gn++)Xe[_n[ze]]=[],Xe[_n[ze]][0]=sn,Xe[_n[ze]][1]=rn,ze++,sn++;sn*=2}return Xe}function Dn(an){for(var _n=an[0],sn=an[1]-1;sn>=0;)_n&1<<sn&&(Oe|=1<<Be),sn--,--Be<0&&(Oe==255?(Rn(255),Rn(0)):Rn(Oe),Be=7,Oe=0)}function Rn(an){De.push(an)}function jn(an){Rn(an>>8&255),Rn(255&an)}function zn(an,_n,sn,ze,Xe){for(var rn,gn=Xe[0],fn=Xe[240],Nn=function(Ln,Bn){var On,qn,Gn,$n,Yn,ni,si,yi,li,vi,Mn=0;for(li=0;li<8;++li){On=Ln[Mn],qn=Ln[Mn+1],Gn=Ln[Mn+2],$n=Ln[Mn+3],Yn=Ln[Mn+4],ni=Ln[Mn+5],si=Ln[Mn+6];var bi=On+(yi=Ln[Mn+7]),fi=On-yi,Mi=qn+si,ei=qn-si,Cn=Gn+ni,Tn=Gn-ni,Jn=$n+Yn,gi=$n-Yn,Si=bi+Jn,Ni=bi-Jn,Fi=Mi+Cn,Pi=Mi-Cn;Ln[Mn]=Si+Fi,Ln[Mn+4]=Si-Fi;var wi=.707106781*(Pi+Ni);Ln[Mn+2]=Ni+wi,Ln[Mn+6]=Ni-wi;var xi=.382683433*((Si=gi+Tn)-(Pi=ei+fi)),$i=.5411961*Si+xi,Ii=1.306562965*Pi+xi,zi=.707106781*(Fi=Tn+ei),Ti=fi+zi,Li=fi-zi;Ln[Mn+5]=Li+$i,Ln[Mn+3]=Li-$i,Ln[Mn+1]=Ti+Ii,Ln[Mn+7]=Ti-Ii,Mn+=8}for(Mn=0,li=0;li<8;++li){On=Ln[Mn],qn=Ln[Mn+8],Gn=Ln[Mn+16],$n=Ln[Mn+24],Yn=Ln[Mn+32],ni=Ln[Mn+40],si=Ln[Mn+48];var Ji=On+(yi=Ln[Mn+56]),Zi=On-yi,tr=qn+si,qi=qn-si,Ui=Gn+ni,rr=Gn-ni,wr=$n+Yn,_r=$n-Yn,vr=Ji+wr,Sr=Ji-wr,Er=tr+Ui,Jr=tr-Ui;Ln[Mn]=vr+Er,Ln[Mn+32]=vr-Er;var Mr=.707106781*(Jr+Sr);Ln[Mn+16]=Sr+Mr,Ln[Mn+48]=Sr-Mr;var Qr=.382683433*((vr=_r+rr)-(Jr=qi+Zi)),Fs=.5411961*vr+Qr,qs=1.306562965*Jr+Qr,Us=.707106781*(Er=rr+qi),zs=Zi+Us,Hs=Zi-Us;Ln[Mn+40]=Hs+Fs,Ln[Mn+24]=Hs-Fs,Ln[Mn+8]=zs+qs,Ln[Mn+56]=zs-qs,Mn++}for(li=0;li<64;++li)vi=Ln[li]*Bn[li],ke[li]=vi>0?vi+.5|0:vi-.5|0;return ke}(an,_n),wn=0;wn<64;++wn)qe[Ge[wn]]=Nn[wn];var xn=qe[0]-sn;sn=qe[0],xn==0?Dn(ze[0]):(Dn(ze[He[rn=32767+xn]]),Dn(Ve[rn]));for(var Sn=63;Sn>0&&qe[Sn]==0;)Sn--;if(Sn==0)return Dn(gn),sn;for(var Ke,$e=1;$e<=Sn;){for(var We=$e;qe[$e]==0&&$e<=Sn;)++$e;var yn=$e-We;if(yn>=16){Ke=yn>>4;for(var bn=1;bn<=Ke;++bn)Dn(fn);yn&=15}rn=32767+qe[$e],Dn(Xe[(yn<<4)+He[rn]]),Dn(Ve[rn]),$e++}return Sn!=63&&Dn(gn),sn}function ii(an){an=Math.min(Math.max(an,1),100),_e!=an&&(function(_n){for(var sn=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ze=0;ze<64;ze++){var Xe=Ee((sn[ze]*_n+50)/100);Xe=Math.min(Math.max(Xe,1),255),Pe[Ge[ze]]=Xe}for(var rn=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],gn=0;gn<64;gn++){var fn=Ee((rn[gn]*_n+50)/100);fn=Math.min(Math.max(fn,1),255),Ce[Ge[gn]]=fn}for(var Nn=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],wn=0,xn=0;xn<8;xn++)for(var Sn=0;Sn<8;Sn++)Te[wn]=1/(Pe[Ge[wn]]*Nn[xn]*Nn[Sn]*8),Ie[wn]=1/(Ce[Ge[wn]]*Nn[xn]*Nn[Sn]*8),wn++}(an<50?Math.floor(5e3/an):Math.floor(200-2*an)),_e=an)}this.encode=function(an,_n){_n&&ii(_n),De=new Array,Oe=0,Be=7,jn(65496),jn(65504),jn(16),Rn(74),Rn(70),Rn(73),Rn(70),Rn(0),Rn(1),Rn(1),Rn(0),jn(1),jn(1),Rn(0),Rn(0),function(){jn(65499),jn(132),Rn(0);for(var qn=0;qn<64;qn++)Rn(Pe[qn]);Rn(1);for(var Gn=0;Gn<64;Gn++)Rn(Ce[Gn])}(),function(qn,Gn){jn(65472),jn(17),Rn(8),jn(Gn),jn(qn),Rn(3),Rn(1),Rn(17),Rn(0),Rn(2),Rn(17),Rn(1),Rn(3),Rn(17),Rn(1)}(an.width,an.height),function(){jn(65476),jn(418),Rn(0);for(var qn=0;qn<16;qn++)Rn(Me[qn+1]);for(var Gn=0;Gn<=11;Gn++)Rn(tn[Gn]);Rn(16);for(var $n=0;$n<16;$n++)Rn(dn[$n+1]);for(var Yn=0;Yn<=161;Yn++)Rn(Re[Yn]);Rn(1);for(var ni=0;ni<16;ni++)Rn(Qe[ni+1]);for(var si=0;si<=11;si++)Rn(cn[si]);Rn(17);for(var yi=0;yi<16;yi++)Rn(hn[yi+1]);for(var li=0;li<=161;li++)Rn(Pn[li])}(),jn(65498),jn(12),Rn(3),Rn(1),Rn(0),Rn(2),Rn(17),Rn(3),Rn(17),Rn(0),Rn(63),Rn(0);var sn=0,ze=0,Xe=0;Oe=0,Be=7,this.encode.displayName="_encode_";for(var rn,gn,fn,Nn,wn,xn,Sn,Ke,$e,We=an.data,yn=an.width,bn=an.height,Ln=4*yn,Bn=0;Bn<bn;){for(rn=0;rn<Ln;){for(wn=Ln*Bn+rn,Sn=-1,Ke=0,$e=0;$e<64;$e++)xn=wn+(Ke=$e>>3)*Ln+(Sn=4*(7&$e)),Bn+Ke>=bn&&(xn-=Ln*(Bn+1+Ke-bn)),rn+Sn>=Ln&&(xn-=rn+Sn-Ln+4),gn=We[xn++],fn=We[xn++],Nn=We[xn++],Ye[$e]=(Je[gn]+Je[fn+256>>0]+Je[Nn+512>>0]>>16)-128,nn[$e]=(Je[gn+768>>0]+Je[fn+1024>>0]+Je[Nn+1280>>0]>>16)-128,en[$e]=(Je[gn+1280>>0]+Je[fn+1536>>0]+Je[Nn+1792>>0]>>16)-128;sn=zn(Ye,Te,sn,t,r),ze=zn(nn,Ie,ze,St,xe),Xe=zn(en,Ie,Xe,St,xe),rn+=32}Bn+=8}if(Be>=0){var On=[];On[1]=Be+1,On[0]=(1<<Be+1)-1,Dn(On)}return jn(65497),new Uint8Array(De)},e=e||50,function(){for(var an=String.fromCharCode,_n=0;_n<256;_n++)Ue[_n]=an(_n)}(),t=kn(Me,tn),St=kn(Qe,cn),r=kn(dn,Re),xe=kn(hn,Pn),function(){for(var an=1,_n=2,sn=1;sn<=15;sn++){for(var ze=an;ze<_n;ze++)He[32767+ze]=sn,Ve[32767+ze]=[],Ve[32767+ze][1]=sn,Ve[32767+ze][0]=ze;for(var Xe=-(_n-1);Xe<=-an;Xe++)He[32767+Xe]=sn,Ve[32767+Xe]=[],Ve[32767+Xe][1]=sn,Ve[32767+Xe][0]=_n-1+Xe;an<<=1,_n<<=1}}(),function(){for(var an=0;an<256;an++)Je[an]=19595*an,Je[an+256>>0]=38470*an,Je[an+512>>0]=7471*an+32768,Je[an+768>>0]=-11059*an,Je[an+1024>>0]=-21709*an,Je[an+1280>>0]=32768*an+8421375,Je[an+1536>>0]=-27439*an,Je[an+1792>>0]=-5329*an}(),ii(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function te(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ee(e){function t(Me){if(!Me)throw Error("assert :P")}function St(Me,tn,dn){for(var Re=0;4>Re;Re++)if(Me[tn+Re]!=dn.charCodeAt(Re))return!0;return!1}function r(Me,tn,dn,Re,Qe){for(var cn=0;cn<Qe;cn++)Me[tn+cn]=dn[Re+cn]}function xe(Me,tn,dn,Re){for(var Qe=0;Qe<Re;Qe++)Me[tn+Qe]=dn}function _e(Me){return new Int32Array(Me)}function Ee(Me,tn){for(var dn=[],Re=0;Re<Me;Re++)dn.push(new tn);return dn}function Pe(Me,tn){var dn=[];return function Re(Qe,cn,hn){for(var Pn=hn[cn],kn=0;kn<Pn&&(Qe.push(hn.length>cn+1?[]:new tn),!(hn.length<cn+1));kn++)Re(Qe[kn],cn+1,hn)}(dn,0,Me),dn}var Ce=function(){var Me=this;function tn(Ae,Se){for(var je=1<<Se-1>>>0;Ae&je;)je>>>=1;return je?(Ae&je-1)+je:Ae}function dn(Ae,Se,je,Ze,on){t(!(Ze%je));do Ae[Se+(Ze-=je)]=on;while(0<Ze)}function Re(Ae,Se,je,Ze,on){if(t(2328>=on),512>=on)var mn=_e(512);else if((mn=_e(on))==null)return 0;return function(vn,An,En,Fn,Hn,Qn){var Zn,Xn,ui=An,ai=1<<En,Wn=_e(16),Vn=_e(16);for(t(Hn!=0),t(Fn!=null),t(vn!=null),t(0<En),Xn=0;Xn<Hn;++Xn){if(15<Fn[Xn])return 0;++Wn[Fn[Xn]]}if(Wn[0]==Hn)return 0;for(Vn[1]=0,Zn=1;15>Zn;++Zn){if(Wn[Zn]>1<<Zn)return 0;Vn[Zn+1]=Vn[Zn]+Wn[Zn]}for(Xn=0;Xn<Hn;++Xn)Zn=Fn[Xn],0<Fn[Xn]&&(Qn[Vn[Zn]++]=Xn);if(Vn[15]==1)return(Fn=new Qe).g=0,Fn.value=Qn[0],dn(vn,ui,1,ai,Fn),ai;var ci,di=-1,hi=ai-1,Ci=0,Ai=1,Ri=1,_i=1<<En;for(Xn=0,Zn=1,Hn=2;Zn<=En;++Zn,Hn<<=1){if(Ai+=Ri<<=1,0>(Ri-=Wn[Zn]))return 0;for(;0<Wn[Zn];--Wn[Zn])(Fn=new Qe).g=Zn,Fn.value=Qn[Xn++],dn(vn,ui+Ci,Hn,_i,Fn),Ci=tn(Ci,Zn)}for(Zn=En+1,Hn=2;15>=Zn;++Zn,Hn<<=1){if(Ai+=Ri<<=1,0>(Ri-=Wn[Zn]))return 0;for(;0<Wn[Zn];--Wn[Zn]){if(Fn=new Qe,(Ci&hi)!=di){for(ui+=_i,ci=1<<(di=Zn)-En;15>di&&!(0>=(ci-=Wn[di]));)++di,ci<<=1;ai+=_i=1<<(ci=di-En),vn[An+(di=Ci&hi)].g=ci+En,vn[An+di].value=ui-An-di}Fn.g=Zn-En,Fn.value=Qn[Xn++],dn(vn,ui+(Ci>>En),Hn,_i,Fn),Ci=tn(Ci,Zn)}}return Ai!=2*Vn[15]-1?0:ai}(Ae,Se,je,Ze,on,mn)}function Qe(){this.value=this.g=0}function cn(){this.value=this.g=0}function hn(){this.G=Ee(5,Qe),this.H=_e(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=Ee(Lr,cn)}function Pn(Ae,Se,je,Ze){t(Ae!=null),t(Se!=null),t(2147483648>Ze),Ae.Ca=254,Ae.I=0,Ae.b=-8,Ae.Ka=0,Ae.oa=Se,Ae.pa=je,Ae.Jd=Se,Ae.Yc=je+Ze,Ae.Zc=4<=Ze?je+Ze-4+1:je,rn(Ae)}function kn(Ae,Se){for(var je=0;0<Se--;)je|=fn(Ae,128)<<Se;return je}function Dn(Ae,Se){var je=kn(Ae,Se);return gn(Ae)?-je:je}function Rn(Ae,Se,je,Ze){var on,mn=0;for(t(Ae!=null),t(Se!=null),t(4294967288>Ze),Ae.Sb=Ze,Ae.Ra=0,Ae.u=0,Ae.h=0,4<Ze&&(Ze=4),on=0;on<Ze;++on)mn+=Se[je+on]<<8*on;Ae.Ra=mn,Ae.bb=Ze,Ae.oa=Se,Ae.pa=je}function jn(Ae){for(;8<=Ae.u&&Ae.bb<Ae.Sb;)Ae.Ra>>>=8,Ae.Ra+=Ae.oa[Ae.pa+Ae.bb]<<ra-8>>>0,++Ae.bb,Ae.u-=8;sn(Ae)&&(Ae.h=1,Ae.u=0)}function zn(Ae,Se){if(t(0<=Se),!Ae.h&&Se<=ia){var je=_n(Ae)&na[Se];return Ae.u+=Se,jn(Ae),je}return Ae.h=1,Ae.u=0}function ii(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function an(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function _n(Ae){return Ae.Ra>>>(Ae.u&ra-1)>>>0}function sn(Ae){return t(Ae.bb<=Ae.Sb),Ae.h||Ae.bb==Ae.Sb&&Ae.u>ra}function ze(Ae,Se){Ae.u=Se,Ae.h=sn(Ae)}function Xe(Ae){Ae.u>=Oa&&(t(Ae.u>=Oa),jn(Ae))}function rn(Ae){t(Ae!=null&&Ae.oa!=null),Ae.pa<Ae.Zc?(Ae.I=(Ae.oa[Ae.pa++]|Ae.I<<8)>>>0,Ae.b+=8):(t(Ae!=null&&Ae.oa!=null),Ae.pa<Ae.Yc?(Ae.b+=8,Ae.I=Ae.oa[Ae.pa++]|Ae.I<<8):Ae.Ka?Ae.b=0:(Ae.I<<=8,Ae.b+=8,Ae.Ka=1))}function gn(Ae){return kn(Ae,1)}function fn(Ae,Se){var je=Ae.Ca;0>Ae.b&&rn(Ae);var Ze=Ae.b,on=je*Se>>>8,mn=(Ae.I>>>Ze>on)+0;for(mn?(je-=on,Ae.I-=on+1<<Ze>>>0):je=on+1,Ze=je,on=0;256<=Ze;)on+=8,Ze>>=8;return Ze=7^on+Pr[Ze],Ae.b-=Ze,Ae.Ca=(je<<Ze)-1,mn}function Nn(Ae,Se,je){Ae[Se+0]=je>>24&255,Ae[Se+1]=je>>16&255,Ae[Se+2]=je>>8&255,Ae[Se+3]=je>>0&255}function wn(Ae,Se){return Ae[Se+0]<<0|Ae[Se+1]<<8}function xn(Ae,Se){return wn(Ae,Se)|Ae[Se+2]<<16}function Sn(Ae,Se){return wn(Ae,Se)|wn(Ae,Se+2)<<16}function Ke(Ae,Se){var je=1<<Se;return t(Ae!=null),t(0<Se),Ae.X=_e(je),Ae.X==null?0:(Ae.Mb=32-Se,Ae.Xa=Se,1)}function $e(Ae,Se){t(Ae!=null),t(Se!=null),t(Ae.Xa==Se.Xa),r(Se.X,0,Ae.X,0,1<<Se.Xa)}function We(){this.X=[],this.Xa=this.Mb=0}function yn(Ae,Se,je,Ze){t(je!=null),t(Ze!=null);var on=je[0],mn=Ze[0];return on==0&&(on=(Ae*mn+Se/2)/Se),mn==0&&(mn=(Se*on+Ae/2)/Ae),0>=on||0>=mn?0:(je[0]=on,Ze[0]=mn,1)}function bn(Ae,Se){return Ae+(1<<Se)-1>>>Se}function Ln(Ae,Se){return((4278255360&Ae)+(4278255360&Se)>>>0&4278255360)+((16711935&Ae)+(16711935&Se)>>>0&16711935)>>>0}function Bn(Ae,Se){Me[Se]=function(je,Ze,on,mn,vn,An,En){var Fn;for(Fn=0;Fn<vn;++Fn){var Hn=Me[Ae](An[En+Fn-1],on,mn+Fn);An[En+Fn]=Ln(je[Ze+Fn],Hn)}}}function On(){this.ud=this.hd=this.jd=0}function qn(Ae,Se){return((4278124286&(Ae^Se))>>>1)+(Ae&Se)>>>0}function Gn(Ae){return 0<=Ae&&256>Ae?Ae:0>Ae?0:255<Ae?255:void 0}function $n(Ae,Se){return Gn(Ae+(Ae-Se+.5>>1))}function Yn(Ae,Se,je){return Math.abs(Se-je)-Math.abs(Ae-je)}function ni(Ae,Se,je,Ze,on,mn,vn){for(Ze=mn[vn-1],je=0;je<on;++je)mn[vn+je]=Ze=Ln(Ae[Se+je],Ze)}function si(Ae,Se,je,Ze,on){var mn;for(mn=0;mn<je;++mn){var vn=Ae[Se+mn],An=vn>>8&255,En=16711935&(En=(En=16711935&vn)+((An<<16)+An));Ze[on+mn]=(4278255360&vn)+En>>>0}}function yi(Ae,Se){Se.jd=Ae>>0&255,Se.hd=Ae>>8&255,Se.ud=Ae>>16&255}function li(Ae,Se,je,Ze,on,mn){var vn;for(vn=0;vn<Ze;++vn){var An=Se[je+vn],En=An>>>8,Fn=An,Hn=255&(Hn=(Hn=An>>>16)+((Ae.jd<<24>>24)*(En<<24>>24)>>>5));Fn=255&(Fn=(Fn=Fn+((Ae.hd<<24>>24)*(En<<24>>24)>>>5))+((Ae.ud<<24>>24)*(Hn<<24>>24)>>>5)),on[mn+vn]=(4278255360&An)+(Hn<<16)+Fn}}function vi(Ae,Se,je,Ze,on){Me[Se]=function(mn,vn,An,En,Fn,Hn,Qn,Zn,Xn){for(En=Qn;En<Zn;++En)for(Qn=0;Qn<Xn;++Qn)Fn[Hn++]=on(An[Ze(mn[vn++])])},Me[Ae]=function(mn,vn,An,En,Fn,Hn,Qn){var Zn=8>>mn.b,Xn=mn.Ea,ui=mn.K[0],ai=mn.w;if(8>Zn)for(mn=(1<<mn.b)-1,ai=(1<<Zn)-1;vn<An;++vn){var Wn,Vn=0;for(Wn=0;Wn<Xn;++Wn)Wn&mn||(Vn=Ze(En[Fn++])),Hn[Qn++]=on(ui[Vn&ai]),Vn>>=Zn}else Me["VP8LMapColor"+je](En,Fn,ui,ai,Hn,Qn,vn,An,Xn)}}function Mn(Ae,Se,je,Ze,on){for(je=Se+je;Se<je;){var mn=Ae[Se++];Ze[on++]=mn>>16&255,Ze[on++]=mn>>8&255,Ze[on++]=mn>>0&255}}function bi(Ae,Se,je,Ze,on){for(je=Se+je;Se<je;){var mn=Ae[Se++];Ze[on++]=mn>>16&255,Ze[on++]=mn>>8&255,Ze[on++]=mn>>0&255,Ze[on++]=mn>>24&255}}function fi(Ae,Se,je,Ze,on){for(je=Se+je;Se<je;){var mn=(vn=Ae[Se++])>>16&240|vn>>12&15,vn=vn>>0&240|vn>>28&15;Ze[on++]=mn,Ze[on++]=vn}}function Mi(Ae,Se,je,Ze,on){for(je=Se+je;Se<je;){var mn=(vn=Ae[Se++])>>16&248|vn>>13&7,vn=vn>>5&224|vn>>3&31;Ze[on++]=mn,Ze[on++]=vn}}function ei(Ae,Se,je,Ze,on){for(je=Se+je;Se<je;){var mn=Ae[Se++];Ze[on++]=mn>>0&255,Ze[on++]=mn>>8&255,Ze[on++]=mn>>16&255}}function Cn(Ae,Se,je,Ze,on,mn){if(mn==0)for(je=Se+je;Se<je;)Nn(Ze,((mn=Ae[Se++])[0]>>24|mn[1]>>8&65280|mn[2]<<8&16711680|mn[3]<<24)>>>0),on+=32;else r(Ze,on,Ae,Se,je)}function Tn(Ae,Se){Me[Se][0]=Me[Ae+"0"],Me[Se][1]=Me[Ae+"1"],Me[Se][2]=Me[Ae+"2"],Me[Se][3]=Me[Ae+"3"],Me[Se][4]=Me[Ae+"4"],Me[Se][5]=Me[Ae+"5"],Me[Se][6]=Me[Ae+"6"],Me[Se][7]=Me[Ae+"7"],Me[Se][8]=Me[Ae+"8"],Me[Se][9]=Me[Ae+"9"],Me[Se][10]=Me[Ae+"10"],Me[Se][11]=Me[Ae+"11"],Me[Se][12]=Me[Ae+"12"],Me[Se][13]=Me[Ae+"13"],Me[Se][14]=Me[Ae+"0"],Me[Se][15]=Me[Ae+"0"]}function Jn(Ae){return Ae==Al||Ae==wl||Ae==_o||Ae==xl}function gi(){this.eb=[],this.size=this.A=this.fb=0}function Si(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ni(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new gi,this.f.kb=new Si,this.sd=null}function Fi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Pi(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function wi(Ae){return alert("todo:WebPSamplerProcessPlane"),Ae.T}function xi(Ae,Se){var je=Ae.T,Ze=Se.ba.f.RGBA,on=Ze.eb,mn=Ze.fb+Ae.ka*Ze.A,vn=Br[Se.ba.S],An=Ae.y,En=Ae.O,Fn=Ae.f,Hn=Ae.N,Qn=Ae.ea,Zn=Ae.W,Xn=Se.cc,ui=Se.dc,ai=Se.Mc,Wn=Se.Nc,Vn=Ae.ka,ci=Ae.ka+Ae.T,di=Ae.U,hi=di+1>>1;for(Vn==0?vn(An,En,null,null,Fn,Hn,Qn,Zn,Fn,Hn,Qn,Zn,on,mn,null,null,di):(vn(Se.ec,Se.fc,An,En,Xn,ui,ai,Wn,Fn,Hn,Qn,Zn,on,mn-Ze.A,on,mn,di),++je);Vn+2<ci;Vn+=2)Xn=Fn,ui=Hn,ai=Qn,Wn=Zn,Hn+=Ae.Rc,Zn+=Ae.Rc,mn+=2*Ze.A,vn(An,(En+=2*Ae.fa)-Ae.fa,An,En,Xn,ui,ai,Wn,Fn,Hn,Qn,Zn,on,mn-Ze.A,on,mn,di);return En+=Ae.fa,Ae.j+ci<Ae.o?(r(Se.ec,Se.fc,An,En,di),r(Se.cc,Se.dc,Fn,Hn,hi),r(Se.Mc,Se.Nc,Qn,Zn,hi),je--):1&ci||vn(An,En,null,null,Fn,Hn,Qn,Zn,Fn,Hn,Qn,Zn,on,mn+Ze.A,null,null,di),je}function $i(Ae,Se,je){var Ze=Ae.F,on=[Ae.J];if(Ze!=null){var mn=Ae.U,vn=Se.ba.S,An=vn==xo||vn==_o;Se=Se.ba.f.RGBA;var En=[0],Fn=Ae.ka;En[0]=Ae.T,Ae.Kb&&(Fn==0?--En[0]:(--Fn,on[0]-=Ae.width),Ae.j+Ae.ka+Ae.T==Ae.o&&(En[0]=Ae.o-Ae.j-Fn));var Hn=Se.eb;Fn=Se.fb+Fn*Se.A,Ae=bo(Ze,on[0],Ae.width,mn,En,Hn,Fn+(An?0:3),Se.A),t(je==En),Ae&&Jn(vn)&&xs(Hn,Fn,An,mn,En,Se.A)}return 0}function Ii(Ae){var Se=Ae.ma,je=Se.ba.S,Ze=11>je,on=je==Ao||je==wo||je==xo||je==yl||je==12||Jn(je);if(Se.memory=null,Se.Ib=null,Se.Jb=null,Se.Nd=null,!Ia(Se.Oa,Ae,on?11:12))return 0;if(on&&Jn(je)&&mi(),Ae.da)alert("todo:use_scaling");else{if(Ze){if(Se.Ib=wi,Ae.Kb){if(je=Ae.U+1>>1,Se.memory=_e(Ae.U+2*je),Se.memory==null)return 0;Se.ec=Se.memory,Se.fc=0,Se.cc=Se.ec,Se.dc=Se.fc+Ae.U,Se.Mc=Se.cc,Se.Nc=Se.dc+je,Se.Ib=xi,mi()}}else alert("todo:EmitYUV");on&&(Se.Jb=$i,Ze&&Kn())}if(Ze&&!yc){for(Ae=0;256>Ae;++Ae)Eh[Ae]=89858*(Ae-128)+Eo>>So,Ph[Ae]=-22014*(Ae-128)+Eo,Lh[Ae]=-45773*(Ae-128),Ch[Ae]=113618*(Ae-128)+Eo>>So;for(Ae=za;Ae<El;++Ae)Se=76283*(Ae-16)+Eo>>So,Nh[Ae-za]=Fr(Se,255),kh[Ae-za]=Fr(Se+8>>4,15);yc=1}return 1}function zi(Ae){var Se=Ae.ma,je=Ae.U,Ze=Ae.T;return t(!(1&Ae.ka)),0>=je||0>=Ze?0:(je=Se.Ib(Ae,Se),Se.Jb!=null&&Se.Jb(Ae,Se,je),Se.Dc+=je,1)}function Ti(Ae){Ae.ma.memory=null}function Li(Ae,Se,je,Ze){return zn(Ae,8)!=47?0:(Se[0]=zn(Ae,14)+1,je[0]=zn(Ae,14)+1,Ze[0]=zn(Ae,1),zn(Ae,3)!=0?0:!Ae.h)}function Ji(Ae,Se){if(4>Ae)return Ae+1;var je=Ae-2>>1;return(2+(1&Ae)<<je)+zn(Se,je)+1}function Zi(Ae,Se){return 120<Se?Se-120:1<=(je=((je=uh[Se-1])>>4)*Ae+(8-(15&je)))?je:1;var je}function tr(Ae,Se,je){var Ze=_n(je),on=Ae[Se+=255&Ze].g-8;return 0<on&&(ze(je,je.u+8),Ze=_n(je),Se+=Ae[Se].value,Se+=Ze&(1<<on)-1),ze(je,je.u+Ae[Se].g),Ae[Se].value}function qi(Ae,Se,je){return je.g+=Ae.g,je.value+=Ae.value<<Se>>>0,t(8>=je.g),Ae.g}function Ui(Ae,Se,je){var Ze=Ae.xc;return t((Se=Ze==0?0:Ae.vc[Ae.md*(je>>Ze)+(Se>>Ze)])<Ae.Wb),Ae.Ya[Se]}function rr(Ae,Se,je,Ze){var on=Ae.ab,mn=Ae.c*Se,vn=Ae.C;Se=vn+Se;var An=je,En=Ze;for(Ze=Ae.Ta,je=Ae.Ua;0<on--;){var Fn=Ae.gc[on],Hn=vn,Qn=Se,Zn=An,Xn=En,ui=(En=Ze,An=je,Fn.Ea);switch(t(Hn<Qn),t(Qn<=Fn.nc),Fn.hc){case 2:mo(Zn,Xn,(Qn-Hn)*ui,En,An);break;case 0:var ai=Hn,Wn=Qn,Vn=En,ci=An,di=(_i=Fn).Ea;ai==0&&(gl(Zn,Xn,null,null,1,Vn,ci),ni(Zn,Xn+1,0,0,di-1,Vn,ci+1),Xn+=di,ci+=di,++ai);for(var hi=1<<_i.b,Ci=hi-1,Ai=bn(di,_i.b),Ri=_i.K,_i=_i.w+(ai>>_i.b)*Ai;ai<Wn;){var Gi=Ri,Xi=_i,Vi=1;for(Da(Zn,Xn,Vn,ci-di,1,Vn,ci);Vi<di;){var Hi=(Vi&~Ci)+hi;Hi>di&&(Hi=di),(0,vs[Gi[Xi++]>>8&15])(Zn,Xn+ +Vi,Vn,ci+Vi-di,Hi-Vi,Vn,ci+Vi),Vi=Hi}Xn+=di,ci+=di,++ai&Ci||(_i+=Ai)}Qn!=Fn.nc&&r(En,An-ui,En,An+(Qn-Hn-1)*ui,ui);break;case 1:for(ui=Zn,Wn=Xn,di=(Zn=Fn.Ea)-(ci=Zn&~(Vn=(Xn=1<<Fn.b)-1)),ai=bn(Zn,Fn.b),hi=Fn.K,Fn=Fn.w+(Hn>>Fn.b)*ai;Hn<Qn;){for(Ci=hi,Ai=Fn,Ri=new On,_i=Wn+ci,Gi=Wn+Zn;Wn<_i;)yi(Ci[Ai++],Ri),Or(Ri,ui,Wn,Xn,En,An),Wn+=Xn,An+=Xn;Wn<Gi&&(yi(Ci[Ai++],Ri),Or(Ri,ui,Wn,di,En,An),Wn+=di,An+=di),++Hn&Vn||(Fn+=ai)}break;case 3:if(Zn==En&&Xn==An&&0<Fn.b){for(Wn=En,Zn=ui=An+(Qn-Hn)*ui-(ci=(Qn-Hn)*bn(Fn.Ea,Fn.b)),Xn=En,Vn=An,ai=[],ci=(di=ci)-1;0<=ci;--ci)ai[ci]=Xn[Vn+ci];for(ci=di-1;0<=ci;--ci)Wn[Zn+ci]=ai[ci];Vr(Fn,Hn,Qn,En,ui,En,An)}else Vr(Fn,Hn,Qn,Zn,Xn,En,An)}An=Ze,En=je}En!=je&&r(Ze,je,An,En,mn)}function wr(Ae,Se){var je=Ae.V,Ze=Ae.Ba+Ae.c*Ae.C,on=Se-Ae.C;if(t(Se<=Ae.l.o),t(16>=on),0<on){var mn=Ae.l,vn=Ae.Ta,An=Ae.Ua,En=mn.width;if(rr(Ae,on,je,Ze),on=An=[An],t((je=Ae.C)<(Ze=Se)),t(mn.v<mn.va),Ze>mn.o&&(Ze=mn.o),je<mn.j){var Fn=mn.j-je;je=mn.j,on[0]+=Fn*En}if(je>=Ze?je=0:(on[0]+=4*mn.v,mn.ka=je-mn.j,mn.U=mn.va-mn.v,mn.T=Ze-je,je=1),je){if(An=An[0],11>(je=Ae.ca).S){var Hn=je.f.RGBA,Qn=(Ze=je.S,on=mn.U,mn=mn.T,Fn=Hn.eb,Hn.A),Zn=mn;for(Hn=Hn.fb+Ae.Ma*Hn.A;0<Zn--;){var Xn=vn,ui=An,ai=on,Wn=Fn,Vn=Hn;switch(Ze){case yo:Gr(Xn,ui,ai,Wn,Vn);break;case Ao:ys(Xn,ui,ai,Wn,Vn);break;case Al:ys(Xn,ui,ai,Wn,Vn),xs(Wn,Vn,0,ai,1,0);break;case cc:sa(Xn,ui,ai,Wn,Vn);break;case wo:Cn(Xn,ui,ai,Wn,Vn,1);break;case wl:Cn(Xn,ui,ai,Wn,Vn,1),xs(Wn,Vn,0,ai,1,0);break;case xo:Cn(Xn,ui,ai,Wn,Vn,0);break;case _o:Cn(Xn,ui,ai,Wn,Vn,0),xs(Wn,Vn,1,ai,1,0);break;case yl:ts(Xn,ui,ai,Wn,Vn);break;case xl:ts(Xn,ui,ai,Wn,Vn),la(Wn,Vn,ai,1,0);break;case hc:os(Xn,ui,ai,Wn,Vn);break;default:t(0)}An+=En,Hn+=Qn}Ae.Ma+=mn}else alert("todo:EmitRescaledRowsYUVA");t(Ae.Ma<=je.height)}}Ae.C=Se,t(Ae.C<=Ae.i)}function _r(Ae){var Se;if(0<Ae.ua)return 0;for(Se=0;Se<Ae.Wb;++Se){var je=Ae.Ya[Se].G,Ze=Ae.Ya[Se].H;if(0<je[1][Ze[1]+0].g||0<je[2][Ze[2]+0].g||0<je[3][Ze[3]+0].g)return 0}return 1}function vr(Ae,Se,je,Ze,on,mn){if(Ae.Z!=0){var vn=Ae.qd,An=Ae.rd;for(t(Ss[Ae.Z]!=null);Se<je;++Se)Ss[Ae.Z](vn,An,Ze,on,Ze,on,mn),vn=Ze,An=on,on+=mn;Ae.qd=vn,Ae.rd=An}}function Sr(Ae,Se){var je=Ae.l.ma,Ze=je.Z==0||je.Z==1?Ae.l.j:Ae.C;if(Ze=Ae.C<Ze?Ze:Ae.C,t(Se<=Ae.l.o),Se>Ze){var on=Ae.l.width,mn=je.ca,vn=je.tb+on*Ze,An=Ae.V,En=Ae.Ba+Ae.c*Ze,Fn=Ae.gc;t(Ae.ab==1),t(Fn[0].hc==3),ml(Fn[0],Ze,Se,An,En,mn,vn),vr(je,Ze,Se,mn,vn,on)}Ae.C=Ae.Ma=Se}function Er(Ae,Se,je,Ze,on,mn,vn){var An=Ae.$/Ze,En=Ae.$%Ze,Fn=Ae.m,Hn=Ae.s,Qn=je+Ae.$,Zn=Qn;on=je+Ze*on;var Xn=je+Ze*mn,ui=280+Hn.ua,ai=Ae.Pb?An:16777216,Wn=0<Hn.ua?Hn.Wa:null,Vn=Hn.wc,ci=Qn<Xn?Ui(Hn,En,An):null;t(Ae.C<mn),t(Xn<=on);var di=!1;t:for(;;){for(;di||Qn<Xn;){var hi=0;if(An>=ai){var Ci=Qn-je;t((ai=Ae).Pb),ai.wd=ai.m,ai.xd=Ci,0<ai.s.ua&&$e(ai.s.Wa,ai.s.vb),ai=An+fh}if(En&Vn||(ci=Ui(Hn,En,An)),t(ci!=null),ci.Qb&&(Se[Qn]=ci.qb,di=!0),!di)if(Xe(Fn),ci.jc){hi=Fn,Ci=Se;var Ai=Qn,Ri=ci.pd[_n(hi)&Lr-1];t(ci.jc),256>Ri.g?(ze(hi,hi.u+Ri.g),Ci[Ai]=Ri.value,hi=0):(ze(hi,hi.u+Ri.g-256),t(256<=Ri.value),hi=Ri.value),hi==0&&(di=!0)}else hi=tr(ci.G[0],ci.H[0],Fn);if(Fn.h)break;if(di||256>hi){if(!di)if(ci.nd)Se[Qn]=(ci.qb|hi<<8)>>>0;else{if(Xe(Fn),di=tr(ci.G[1],ci.H[1],Fn),Xe(Fn),Ci=tr(ci.G[2],ci.H[2],Fn),Ai=tr(ci.G[3],ci.H[3],Fn),Fn.h)break;Se[Qn]=(Ai<<24|di<<16|hi<<8|Ci)>>>0}if(di=!1,++Qn,++En>=Ze&&(En=0,++An,vn!=null&&An<=mn&&!(An%16)&&vn(Ae,An),Wn!=null))for(;Zn<Qn;)hi=Se[Zn++],Wn.X[(506832829*hi&4294967295)>>>Wn.Mb]=hi}else if(280>hi){if(hi=Ji(hi-256,Fn),Ci=tr(ci.G[4],ci.H[4],Fn),Xe(Fn),Ci=Zi(Ze,Ci=Ji(Ci,Fn)),Fn.h)break;if(Qn-je<Ci||on-Qn<hi)break t;for(Ai=0;Ai<hi;++Ai)Se[Qn+Ai]=Se[Qn+Ai-Ci];for(Qn+=hi,En+=hi;En>=Ze;)En-=Ze,++An,vn!=null&&An<=mn&&!(An%16)&&vn(Ae,An);if(t(Qn<=on),En&Vn&&(ci=Ui(Hn,En,An)),Wn!=null)for(;Zn<Qn;)hi=Se[Zn++],Wn.X[(506832829*hi&4294967295)>>>Wn.Mb]=hi}else{if(!(hi<ui))break t;for(di=hi-280,t(Wn!=null);Zn<Qn;)hi=Se[Zn++],Wn.X[(506832829*hi&4294967295)>>>Wn.Mb]=hi;hi=Qn,t(!(di>>>(Ci=Wn).Xa)),Se[hi]=Ci.X[di],di=!0}di||t(Fn.h==sn(Fn))}if(Ae.Pb&&Fn.h&&Qn<on)t(Ae.m.h),Ae.a=5,Ae.m=Ae.wd,Ae.$=Ae.xd,0<Ae.s.ua&&$e(Ae.s.vb,Ae.s.Wa);else{if(Fn.h)break t;vn!=null&&vn(Ae,An>mn?mn:An),Ae.a=0,Ae.$=Qn-je}return 1}return Ae.a=3,0}function Jr(Ae){t(Ae!=null),Ae.vc=null,Ae.yc=null,Ae.Ya=null;var Se=Ae.Wa;Se!=null&&(Se.X=null),Ae.vb=null,t(Ae!=null)}function Mr(){var Ae=new pl;return Ae==null?null:(Ae.a=0,Ae.xb=fc,Tn("Predictor","VP8LPredictors"),Tn("Predictor","VP8LPredictors_C"),Tn("PredictorAdd","VP8LPredictorsAdd"),Tn("PredictorAdd","VP8LPredictorsAdd_C"),mo=si,Or=li,Gr=Mn,ys=bi,ts=fi,os=Mi,sa=ei,Me.VP8LMapColor32b=ja,Me.VP8LMapColor8b=bl,Ae)}function Qr(Ae,Se,je,Ze,on){var mn=1,vn=[Ae],An=[Se],En=Ze.m,Fn=Ze.s,Hn=null,Qn=0;t:for(;;){if(je)for(;mn&&zn(En,1);){var Zn=vn,Xn=An,ui=Ze,ai=1,Wn=ui.m,Vn=ui.gc[ui.ab],ci=zn(Wn,2);if(ui.Oc&1<<ci)mn=0;else{switch(ui.Oc|=1<<ci,Vn.hc=ci,Vn.Ea=Zn[0],Vn.nc=Xn[0],Vn.K=[null],++ui.ab,t(4>=ui.ab),ci){case 0:case 1:Vn.b=zn(Wn,3)+2,ai=Qr(bn(Vn.Ea,Vn.b),bn(Vn.nc,Vn.b),0,ui,Vn.K),Vn.K=Vn.K[0];break;case 3:var di,hi=zn(Wn,8)+1,Ci=16<hi?0:4<hi?1:2<hi?2:3;if(Zn[0]=bn(Vn.Ea,Ci),Vn.b=Ci,di=ai=Qr(hi,1,0,ui,Vn.K)){var Ai,Ri=hi,_i=Vn,Gi=1<<(8>>_i.b),Xi=_e(Gi);if(Xi==null)di=0;else{var Vi=_i.K[0],Hi=_i.w;for(Xi[0]=_i.K[0][0],Ai=1;Ai<1*Ri;++Ai)Xi[Ai]=Ln(Vi[Hi+Ai],Xi[Ai-1]);for(;Ai<4*Gi;++Ai)Xi[Ai]=0;_i.K[0]=null,_i.K[0]=Xi,di=1}}ai=di;break;case 2:break;default:t(0)}mn=ai}}if(vn=vn[0],An=An[0],mn&&zn(En,1)&&!(mn=1<=(Qn=zn(En,4))&&11>=Qn)){Ze.a=3;break t}var Qi;if(Qi=mn)e:{var Ki,ji,ur,Nr=Ze,dr=vn,kr=An,Yi=Qn,Tr=je,Ir=Nr.m,gr=Nr.s,br=[null],xr=1,qr=0,es=dh[Yi];n:for(;;){if(Tr&&zn(Ir,1)){var mr=zn(Ir,3)+2,ds=bn(dr,mr),js=bn(kr,mr),ca=ds*js;if(!Qr(ds,js,0,Nr,br))break n;for(br=br[0],gr.xc=mr,Ki=0;Ki<ca;++Ki){var Es=br[Ki]>>8&65535;br[Ki]=Es,Es>=xr&&(xr=Es+1)}}if(Ir.h)break n;for(ji=0;5>ji;++ji){var or=uc[ji];!ji&&0<Yi&&(or+=1<<Yi),qr<or&&(qr=or)}var Cl=Ee(xr*es,Qe),xc=xr,_c=Ee(xc,hn);if(_c==null)var Lo=null;else t(65536>=xc),Lo=_c;var Ha=_e(qr);if(Lo==null||Ha==null||Cl==null){Nr.a=1;break n}var Po=Cl;for(Ki=ur=0;Ki<xr;++Ki){var Kr=Lo[Ki],ha=Kr.G,ua=Kr.H,Sc=0,No=1,Ec=0;for(ji=0;5>ji;++ji){or=uc[ji],ha[ji]=Po,ua[ji]=ur,!ji&&0<Yi&&(or+=1<<Yi);r:{var ko,Ll=or,Fo=Nr,Wa=Ha,Th=Po,Ih=ur,Pl=0,Cs=Fo.m,Mh=zn(Cs,1);if(xe(Wa,0,0,Ll),Mh){var Oh=zn(Cs,1)+1,Dh=zn(Cs,1),Cc=zn(Cs,Dh==0?1:8);Wa[Cc]=1,Oh==2&&(Wa[Cc=zn(Cs,8)]=1);var Ro=1}else{var Lc=_e(19),Pc=zn(Cs,4)+4;if(19<Pc){Fo.a=3;var To=0;break r}for(ko=0;ko<Pc;++ko)Lc[hh[ko]]=zn(Cs,3);var Nl=void 0,Va=void 0,Nc=Fo,jh=Lc,Io=Ll,kc=Wa,kl=0,Ls=Nc.m,Fc=8,Rc=Ee(128,Qe);i:for(;Re(Rc,0,7,jh,19);){if(zn(Ls,1)){var Bh=2+2*zn(Ls,3);if((Nl=2+zn(Ls,Bh))>Io)break i}else Nl=Io;for(Va=0;Va<Io&&Nl--;){Xe(Ls);var Tc=Rc[0+(127&_n(Ls))];ze(Ls,Ls.u+Tc.g);var da=Tc.value;if(16>da)kc[Va++]=da,da!=0&&(Fc=da);else{var qh=da==16,Ic=da-16,Uh=lh[Ic],Mc=zn(Ls,oh[Ic])+Uh;if(Va+Mc>Io)break i;for(var zh=qh?Fc:0;0<Mc--;)kc[Va++]=zh}}kl=1;break i}kl||(Nc.a=3),Ro=kl}(Ro=Ro&&!Cs.h)&&(Pl=Re(Th,Ih,8,Wa,Ll)),Ro&&Pl!=0?To=Pl:(Fo.a=3,To=0)}if(To==0)break n;if(No&&ch[ji]==1&&(No=Po[ur].g==0),Sc+=Po[ur].g,ur+=To,3>=ji){var Ga,Fl=Ha[0];for(Ga=1;Ga<or;++Ga)Ha[Ga]>Fl&&(Fl=Ha[Ga]);Ec+=Fl}}if(Kr.nd=No,Kr.Qb=0,No&&(Kr.qb=(ha[3][ua[3]+0].value<<24|ha[1][ua[1]+0].value<<16|ha[2][ua[2]+0].value)>>>0,Sc==0&&256>ha[0][ua[0]+0].value&&(Kr.Qb=1,Kr.qb+=ha[0][ua[0]+0].value<<8)),Kr.jc=!Kr.Qb&&6>Ec,Kr.jc){var Mo,fs=Kr;for(Mo=0;Mo<Lr;++Mo){var Ps=Mo,Ns=fs.pd[Ps],Oo=fs.G[0][fs.H[0]+Ps];256<=Oo.value?(Ns.g=Oo.g+256,Ns.value=Oo.value):(Ns.g=0,Ns.value=0,Ps>>=qi(Oo,8,Ns),Ps>>=qi(fs.G[1][fs.H[1]+Ps],16,Ns),Ps>>=qi(fs.G[2][fs.H[2]+Ps],0,Ns),qi(fs.G[3][fs.H[3]+Ps],24,Ns))}}}gr.vc=br,gr.Wb=xr,gr.Ya=Lo,gr.yc=Cl,Qi=1;break e}Qi=0}if(!(mn=Qi)){Ze.a=3;break t}if(0<Qn){if(Fn.ua=1<<Qn,!Ke(Fn.Wa,Qn)){Ze.a=1,mn=0;break t}}else Fn.ua=0;var Rl=Ze,Oc=vn,Hh=An,Tl=Rl.s,Il=Tl.xc;if(Rl.c=Oc,Rl.i=Hh,Tl.md=bn(Oc,Il),Tl.wc=Il==0?-1:(1<<Il)-1,je){Ze.xb=Ah;break t}if((Hn=_e(vn*An))==null){Ze.a=1,mn=0;break t}mn=(mn=Er(Ze,Hn,0,vn,An,An,null))&&!En.h;break t}return mn?(on!=null?on[0]=Hn:(t(Hn==null),t(je)),Ze.$=0,je||Jr(Fn)):Jr(Fn),mn}function Fs(Ae,Se){var je=Ae.c*Ae.i,Ze=je+Se+16*Se;return t(Ae.c<=Se),Ae.V=_e(Ze),Ae.V==null?(Ae.Ta=null,Ae.Ua=0,Ae.a=1,0):(Ae.Ta=Ae.V,Ae.Ua=Ae.Ba+je+Se,1)}function qs(Ae,Se){var je=Ae.C,Ze=Se-je,on=Ae.V,mn=Ae.Ba+Ae.c*je;for(t(Se<=Ae.l.o);0<Ze;){var vn=16<Ze?16:Ze,An=Ae.l.ma,En=Ae.l.width,Fn=En*vn,Hn=An.ca,Qn=An.tb+En*je,Zn=Ae.Ta,Xn=Ae.Ua;rr(Ae,vn,on,mn),nc(Zn,Xn,Hn,Qn,Fn),vr(An,je,je+vn,Hn,Qn,En),Ze-=vn,on+=vn*Ae.c,je+=vn}t(je==Se),Ae.C=Ae.Ma=Se}function Us(){this.ub=this.yd=this.td=this.Rb=0}function zs(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Hs(){this.Fb=this.Bb=this.Cb=0,this.Zb=_e(4),this.Lb=_e(4)}function Ya(){this.Yb=function(){var Ae=[];return function Se(je,Ze,on){for(var mn=on[Ze],vn=0;vn<mn&&(je.push(on.length>Ze+1?[]:0),!(on.length<Ze+1));vn++)Se(je[vn],Ze+1,on)}(Ae,0,[3,11]),Ae}()}function Wo(){this.jb=_e(3),this.Wc=Pe([4,8],Ya),this.Xc=Pe([4,17],Ya)}function Vo(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new _e(4),this.od=new _e(4)}function Ws(){this.ld=this.La=this.dd=this.tc=0}function Ka(){this.Na=this.la=0}function Go(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ba(){this.ad=_e(384),this.Za=0,this.Ob=_e(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function $o(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ws),this.Y=0,this.ya=Array(new ba),this.aa=0,this.l=new Vs}function Ja(){this.y=_e(16),this.f=_e(8),this.ea=_e(8)}function Xo(){this.cb=this.a=0,this.sc="",this.m=new ii,this.Od=new Us,this.Kc=new zs,this.ed=new Vo,this.Qa=new Hs,this.Ic=this.$c=this.Aa=0,this.D=new $o,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=Ee(8,ii),this.ia=0,this.pb=Ee(4,Go),this.Pa=new Wo,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ja),this.Hd=0,this.rb=Array(new Ka),this.sb=0,this.wa=Array(new Ws),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ba),this.L=this.aa=0,this.gd=Pe([4,2],Ws),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Vs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Yo(){var Ae=new Xo;return Ae!=null&&(Ae.a=0,Ae.sc="OK",Ae.cb=0,Ae.Xb=0,Ua||(Ua=to)),Ae}function lr(Ae,Se,je){return Ae.a==0&&(Ae.a=Se,Ae.sc=je,Ae.cb=0),0}function Qa(Ae,Se,je){return 3<=je&&Ae[Se+0]==157&&Ae[Se+1]==1&&Ae[Se+2]==42}function Za(Ae,Se){if(Ae==null)return 0;if(Ae.a=0,Ae.sc="OK",Se==null)return lr(Ae,2,"null VP8Io passed to VP8GetHeaders()");var je=Se.data,Ze=Se.w,on=Se.ha;if(4>on)return lr(Ae,7,"Truncated header.");var mn=je[Ze+0]|je[Ze+1]<<8|je[Ze+2]<<16,vn=Ae.Od;if(vn.Rb=!(1&mn),vn.td=mn>>1&7,vn.yd=mn>>4&1,vn.ub=mn>>5,3<vn.td)return lr(Ae,3,"Incorrect keyframe parameters.");if(!vn.yd)return lr(Ae,4,"Frame not displayable.");Ze+=3,on-=3;var An=Ae.Kc;if(vn.Rb){if(7>on)return lr(Ae,7,"cannot parse picture header");if(!Qa(je,Ze,on))return lr(Ae,3,"Bad code word");An.c=16383&(je[Ze+4]<<8|je[Ze+3]),An.Td=je[Ze+4]>>6,An.i=16383&(je[Ze+6]<<8|je[Ze+5]),An.Ud=je[Ze+6]>>6,Ze+=7,on-=7,Ae.za=An.c+15>>4,Ae.Ub=An.i+15>>4,Se.width=An.c,Se.height=An.i,Se.Da=0,Se.j=0,Se.v=0,Se.va=Se.width,Se.o=Se.height,Se.da=0,Se.ib=Se.width,Se.hb=Se.height,Se.U=Se.width,Se.T=Se.height,xe((mn=Ae.Pa).jb,0,255,mn.jb.length),t((mn=Ae.Qa)!=null),mn.Cb=0,mn.Bb=0,mn.Fb=1,xe(mn.Zb,0,0,mn.Zb.length),xe(mn.Lb,0,0,mn.Lb)}if(vn.ub>on)return lr(Ae,7,"bad partition length");Pn(mn=Ae.m,je,Ze,vn.ub),Ze+=vn.ub,on-=vn.ub,vn.Rb&&(An.Ld=gn(mn),An.Kd=gn(mn)),An=Ae.Qa;var En,Fn=Ae.Pa;if(t(mn!=null),t(An!=null),An.Cb=gn(mn),An.Cb){if(An.Bb=gn(mn),gn(mn)){for(An.Fb=gn(mn),En=0;4>En;++En)An.Zb[En]=gn(mn)?Dn(mn,7):0;for(En=0;4>En;++En)An.Lb[En]=gn(mn)?Dn(mn,6):0}if(An.Bb)for(En=0;3>En;++En)Fn.jb[En]=gn(mn)?kn(mn,8):255}else An.Bb=0;if(mn.Ka)return lr(Ae,3,"cannot parse segment header");if((An=Ae.ed).zd=gn(mn),An.Tb=kn(mn,6),An.wb=kn(mn,3),An.Pc=gn(mn),An.Pc&&gn(mn)){for(Fn=0;4>Fn;++Fn)gn(mn)&&(An.vd[Fn]=Dn(mn,6));for(Fn=0;4>Fn;++Fn)gn(mn)&&(An.od[Fn]=Dn(mn,6))}if(Ae.L=An.Tb==0?0:An.zd?1:2,mn.Ka)return lr(Ae,3,"cannot parse filter header");var Hn=on;if(on=En=Ze,Ze=En+Hn,An=Hn,Ae.Xb=(1<<kn(Ae.m,2))-1,Hn<3*(Fn=Ae.Xb))je=7;else{for(En+=3*Fn,An-=3*Fn,Hn=0;Hn<Fn;++Hn){var Qn=je[on+0]|je[on+1]<<8|je[on+2]<<16;Qn>An&&(Qn=An),Pn(Ae.Jc[+Hn],je,En,Qn),En+=Qn,An-=Qn,on+=3}Pn(Ae.Jc[+Fn],je,En,An),je=En<Ze?0:5}if(je!=0)return lr(Ae,je,"cannot parse partitions");for(je=kn(En=Ae.m,7),on=gn(En)?Dn(En,4):0,Ze=gn(En)?Dn(En,4):0,An=gn(En)?Dn(En,4):0,Fn=gn(En)?Dn(En,4):0,En=gn(En)?Dn(En,4):0,Hn=Ae.Qa,Qn=0;4>Qn;++Qn){if(Hn.Cb){var Zn=Hn.Zb[Qn];Hn.Fb||(Zn+=je)}else{if(0<Qn){Ae.pb[Qn]=Ae.pb[0];continue}Zn=je}var Xn=Ae.pb[Qn];Xn.Sc[0]=_l[Fr(Zn+on,127)],Xn.Sc[1]=Sl[Fr(Zn+0,127)],Xn.Eb[0]=2*_l[Fr(Zn+Ze,127)],Xn.Eb[1]=101581*Sl[Fr(Zn+An,127)]>>16,8>Xn.Eb[1]&&(Xn.Eb[1]=8),Xn.Qc[0]=_l[Fr(Zn+Fn,117)],Xn.Qc[1]=Sl[Fr(Zn+En,127)],Xn.lc=Zn+En}if(!vn.Rb)return lr(Ae,4,"Not a key frame.");for(gn(mn),vn=Ae.Pa,je=0;4>je;++je){for(on=0;8>on;++on)for(Ze=0;3>Ze;++Ze)for(An=0;11>An;++An)Fn=fn(mn,vh[je][on][Ze][An])?kn(mn,8):mh[je][on][Ze][An],vn.Wc[je][on].Yb[Ze][An]=Fn;for(on=0;17>on;++on)vn.Xc[je][on]=vn.Wc[je][yh[on]]}return Ae.kc=gn(mn),Ae.kc&&(Ae.Bd=kn(mn,8)),Ae.cb=1}function to(Ae,Se,je,Ze,on,mn,vn){var An=Se[on].Yb[je];for(je=0;16>on;++on){if(!fn(Ae,An[je+0]))return on;for(;!fn(Ae,An[je+1]);)if(An=Se[++on].Yb[0],je=0,on==16)return 16;var En=Se[on+1].Yb;if(fn(Ae,An[je+2])){var Fn=Ae,Hn=0;if(fn(Fn,(Zn=An)[(Qn=je)+3]))if(fn(Fn,Zn[Qn+6])){for(An=0,Qn=2*(Hn=fn(Fn,Zn[Qn+8]))+(Zn=fn(Fn,Zn[Qn+9+Hn])),Hn=0,Zn=ph[Qn];Zn[An];++An)Hn+=Hn+fn(Fn,Zn[An]);Hn+=3+(8<<Qn)}else fn(Fn,Zn[Qn+7])?(Hn=7+2*fn(Fn,165),Hn+=fn(Fn,145)):Hn=5+fn(Fn,159);else Hn=fn(Fn,Zn[Qn+4])?3+fn(Fn,Zn[Qn+5]):2;An=En[2]}else Hn=1,An=En[1];En=vn+gh[on],0>(Fn=Ae).b&&rn(Fn);var Qn,Zn=Fn.b,Xn=(Qn=Fn.Ca>>1)-(Fn.I>>Zn)>>31;--Fn.b,Fn.Ca+=Xn,Fn.Ca|=1,Fn.I-=(Qn+1&Xn)<<Zn,mn[En]=((Hn^Xn)-Xn)*Ze[(0<on)+0]}return 16}function va(Ae){var Se=Ae.rb[Ae.sb-1];Se.la=0,Se.Na=0,xe(Ae.zc,0,0,Ae.zc.length),Ae.ja=0}function Ko(Ae,Se){if(Ae==null)return 0;if(Se==null)return lr(Ae,2,"NULL VP8Io parameter in VP8Decode().");if(!Ae.cb&&!Za(Ae,Se))return 0;if(t(Ae.cb),Se.ac==null||Se.ac(Se)){Se.ob&&(Ae.L=0);var je=Co[Ae.L];if(Ae.L==2?(Ae.yb=0,Ae.zb=0):(Ae.yb=Se.v-je>>4,Ae.zb=Se.j-je>>4,0>Ae.yb&&(Ae.yb=0),0>Ae.zb&&(Ae.zb=0)),Ae.Va=Se.o+15+je>>4,Ae.Hb=Se.va+15+je>>4,Ae.Hb>Ae.za&&(Ae.Hb=Ae.za),Ae.Va>Ae.Ub&&(Ae.Va=Ae.Ub),0<Ae.L){var Ze=Ae.ed;for(je=0;4>je;++je){var on;if(Ae.Qa.Cb){var mn=Ae.Qa.Lb[je];Ae.Qa.Fb||(mn+=Ze.Tb)}else mn=Ze.Tb;for(on=0;1>=on;++on){var vn=Ae.gd[je][on],An=mn;if(Ze.Pc&&(An+=Ze.vd[0],on&&(An+=Ze.od[0])),0<(An=0>An?0:63<An?63:An)){var En=An;0<Ze.wb&&(En=4<Ze.wb?En>>2:En>>1)>9-Ze.wb&&(En=9-Ze.wb),1>En&&(En=1),vn.dd=En,vn.tc=2*An+En,vn.ld=40<=An?2:15<=An?1:0}else vn.tc=0;vn.La=on}}}je=0}else lr(Ae,6,"Frame setup failed"),je=Ae.a;if(je=je==0){if(je){Ae.$c=0,0<Ae.Aa||(Ae.Ic=Rh);t:{je=Ae.Ic,Ze=4*(En=Ae.za);var Fn=32*En,Hn=En+1,Qn=0<Ae.L?En*(0<Ae.Aa?2:1):0,Zn=(Ae.Aa==2?2:1)*En;if((vn=Ze+832+(on=3*(16*je+Co[Ae.L])/2*Fn)+(mn=Ae.Fa!=null&&0<Ae.Fa.length?Ae.Kc.c*Ae.Kc.i:0))!=vn)je=0;else{if(vn>Ae.Vb){if(Ae.Vb=0,Ae.Ec=_e(vn),Ae.Fc=0,Ae.Ec==null){je=lr(Ae,1,"no memory during frame initialization.");break t}Ae.Vb=vn}vn=Ae.Ec,An=Ae.Fc,Ae.Ac=vn,Ae.Bc=An,An+=Ze,Ae.Gd=Ee(Fn,Ja),Ae.Hd=0,Ae.rb=Ee(Hn+1,Ka),Ae.sb=1,Ae.wa=Qn?Ee(Qn,Ws):null,Ae.Y=0,Ae.D.Nb=0,Ae.D.wa=Ae.wa,Ae.D.Y=Ae.Y,0<Ae.Aa&&(Ae.D.Y+=En),t(!0),Ae.oc=vn,Ae.pc=An,An+=832,Ae.ya=Ee(Zn,ba),Ae.aa=0,Ae.D.ya=Ae.ya,Ae.D.aa=Ae.aa,Ae.Aa==2&&(Ae.D.aa+=En),Ae.R=16*En,Ae.B=8*En,En=(Fn=Co[Ae.L])*Ae.R,Fn=Fn/2*Ae.B,Ae.sa=vn,Ae.ta=An+En,Ae.qa=Ae.sa,Ae.ra=Ae.ta+16*je*Ae.R+Fn,Ae.Ha=Ae.qa,Ae.Ia=Ae.ra+8*je*Ae.B+Fn,Ae.$c=0,An+=on,Ae.mb=mn?vn:null,Ae.nb=mn?An:null,t(An+mn<=Ae.Fc+Ae.Vb),va(Ae),xe(Ae.Ac,Ae.Bc,0,Ze),je=1}}if(je){if(Se.ka=0,Se.y=Ae.sa,Se.O=Ae.ta,Se.f=Ae.qa,Se.N=Ae.ra,Se.ea=Ae.Ha,Se.Vd=Ae.Ia,Se.fa=Ae.R,Se.Rc=Ae.B,Se.F=null,Se.J=0,!oc){for(je=-255;255>=je;++je)ic[255+je]=0>je?-je:je;for(je=-1020;1020>=je;++je)rc[1020+je]=-128>je?-128:127<je?127:je;for(je=-112;112>=je;++je)sc[112+je]=-16>je?-16:15<je?15:je;for(je=-255;510>=je;++je)ac[255+je]=0>je?0:255<je?255:je;oc=1}$r=Zo,aa=Jo,As=no,Xr=Qo,ls=io,Ba=eo,Os=Ea,oa=Is,Ds=dl,ws=Ca,qa=ul,Dr=Js,cs=La,er=fo,nr=uo,cr=ss,fr=gs,hs=hl,Yr[0]=Zr,Yr[1]=tl,Yr[2]=rl,Yr[3]=sl,Yr[4]=ao,Yr[5]=Ys,Yr[6]=oo,Yr[7]=wa,Yr[8]=ol,Yr[9]=al,_s[0]=ro,_s[1]=nl,_s[2]=rs,_s[3]=$s,_s[4]=yr,_s[5]=il,_s[6]=so,us[0]=ps,us[1]=el,us[2]=ll,us[3]=xa,us[4]=Ts,us[5]=cl,us[6]=Sa,je=1}else je=0}je&&(je=function(Xn,ui){for(Xn.M=0;Xn.M<Xn.Va;++Xn.M){var ai,Wn=Xn.Jc[Xn.M&Xn.Xb],Vn=Xn.m,ci=Xn;for(ai=0;ai<ci.za;++ai){var di=Vn,hi=ci,Ci=hi.Ac,Ai=hi.Bc+4*ai,Ri=hi.zc,_i=hi.ya[hi.aa+ai];if(hi.Qa.Bb?_i.$b=fn(di,hi.Pa.jb[0])?2+fn(di,hi.Pa.jb[2]):fn(di,hi.Pa.jb[1]):_i.$b=0,hi.kc&&(_i.Ad=fn(di,hi.Bd)),_i.Za=!fn(di,145)+0,_i.Za){var Gi=_i.Ob,Xi=0;for(hi=0;4>hi;++hi){var Vi,Hi=Ri[0+hi];for(Vi=0;4>Vi;++Vi){Hi=bh[Ci[Ai+Vi]][Hi];for(var Qi=dc[fn(di,Hi[0])];0<Qi;)Qi=dc[2*Qi+fn(di,Hi[Qi])];Hi=-Qi,Ci[Ai+Vi]=Hi}r(Gi,Xi,Ci,Ai,4),Xi+=4,Ri[0+hi]=Hi}}else Hi=fn(di,156)?fn(di,128)?1:3:fn(di,163)?2:0,_i.Ob[0]=Hi,xe(Ci,Ai,Hi,4),xe(Ri,0,Hi,4);_i.Dd=fn(di,142)?fn(di,114)?fn(di,183)?1:3:2:0}if(ci.m.Ka)return lr(Xn,7,"Premature end-of-partition0 encountered.");for(;Xn.ja<Xn.za;++Xn.ja){if(ci=Wn,di=(Vn=Xn).rb[Vn.sb-1],Ci=Vn.rb[Vn.sb+Vn.ja],ai=Vn.ya[Vn.aa+Vn.ja],Ai=Vn.kc?ai.Ad:0)di.la=Ci.la=0,ai.Za||(di.Na=Ci.Na=0),ai.Hc=0,ai.Gc=0,ai.ia=0;else{var Ki,ji;if(di=Ci,Ci=ci,Ai=Vn.Pa.Xc,Ri=Vn.ya[Vn.aa+Vn.ja],_i=Vn.pb[Ri.$b],hi=Ri.ad,Gi=0,Xi=Vn.rb[Vn.sb-1],Hi=Vi=0,xe(hi,Gi,0,384),Ri.Za)var ur=0,Nr=Ai[3];else{Qi=_e(16);var dr=di.Na+Xi.Na;if(dr=Ua(Ci,Ai[1],dr,_i.Eb,0,Qi,0),di.Na=Xi.Na=(0<dr)+0,1<dr)$r(Qi,0,hi,Gi);else{var kr=Qi[0]+3>>3;for(Qi=0;256>Qi;Qi+=16)hi[Gi+Qi]=kr}ur=1,Nr=Ai[0]}var Yi=15&di.la,Tr=15&Xi.la;for(Qi=0;4>Qi;++Qi){var Ir=1&Tr;for(kr=ji=0;4>kr;++kr)Yi=Yi>>1|(Ir=(dr=Ua(Ci,Nr,dr=Ir+(1&Yi),_i.Sc,ur,hi,Gi))>ur)<<7,ji=ji<<2|(3<dr?3:1<dr?2:hi[Gi+0]!=0),Gi+=16;Yi>>=4,Tr=Tr>>1|Ir<<7,Vi=(Vi<<8|ji)>>>0}for(Nr=Yi,ur=Tr>>4,Ki=0;4>Ki;Ki+=2){for(ji=0,Yi=di.la>>4+Ki,Tr=Xi.la>>4+Ki,Qi=0;2>Qi;++Qi){for(Ir=1&Tr,kr=0;2>kr;++kr)dr=Ir+(1&Yi),Yi=Yi>>1|(Ir=0<(dr=Ua(Ci,Ai[2],dr,_i.Qc,0,hi,Gi)))<<3,ji=ji<<2|(3<dr?3:1<dr?2:hi[Gi+0]!=0),Gi+=16;Yi>>=2,Tr=Tr>>1|Ir<<5}Hi|=ji<<4*Ki,Nr|=Yi<<4<<Ki,ur|=(240&Tr)<<Ki}di.la=Nr,Xi.la=ur,Ri.Hc=Vi,Ri.Gc=Hi,Ri.ia=43690&Hi?0:_i.ia,Ai=!(Vi|Hi)}if(0<Vn.L&&(Vn.wa[Vn.Y+Vn.ja]=Vn.gd[ai.$b][ai.Za],Vn.wa[Vn.Y+Vn.ja].La|=!Ai),ci.Ka)return lr(Xn,7,"Premature end-of-file encountered.")}if(va(Xn),Vn=ui,ci=1,ai=(Wn=Xn).D,di=0<Wn.L&&Wn.M>=Wn.zb&&Wn.M<=Wn.Va,Wn.Aa==0)t:{if(ai.M=Wn.M,ai.uc=di,Ta(Wn,ai),ci=1,ai=(ji=Wn.D).Nb,di=(Hi=Co[Wn.L])*Wn.R,Ci=Hi/2*Wn.B,Qi=16*ai*Wn.R,kr=8*ai*Wn.B,Ai=Wn.sa,Ri=Wn.ta-di+Qi,_i=Wn.qa,hi=Wn.ra-Ci+kr,Gi=Wn.Ha,Xi=Wn.Ia-Ci+kr,Tr=(Yi=ji.M)==0,Vi=Yi>=Wn.Va-1,Wn.Aa==2&&Ta(Wn,ji),ji.uc)for(Ir=(dr=Wn).D.M,t(dr.D.uc),ji=dr.yb;ji<dr.Hb;++ji){ur=ji,Nr=Ir;var gr=(br=(or=dr).D).Nb;Ki=or.R;var br=br.wa[br.Y+ur],xr=or.sa,qr=or.ta+16*gr*Ki+16*ur,es=br.dd,mr=br.tc;if(mr!=0)if(t(3<=mr),or.L==1)0<ur&&cr(xr,qr,Ki,mr+4),br.La&&hs(xr,qr,Ki,mr),0<Nr&&nr(xr,qr,Ki,mr+4),br.La&&fr(xr,qr,Ki,mr);else{var ds=or.B,js=or.qa,ca=or.ra+8*gr*ds+8*ur,Es=or.Ha,or=or.Ia+8*gr*ds+8*ur;gr=br.ld,0<ur&&(oa(xr,qr,Ki,mr+4,es,gr),ws(js,ca,Es,or,ds,mr+4,es,gr)),br.La&&(Dr(xr,qr,Ki,mr,es,gr),er(js,ca,Es,or,ds,mr,es,gr)),0<Nr&&(Os(xr,qr,Ki,mr+4,es,gr),Ds(js,ca,Es,or,ds,mr+4,es,gr)),br.La&&(qa(xr,qr,Ki,mr,es,gr),cs(js,ca,Es,or,ds,mr,es,gr))}}if(Wn.ia&&alert("todo:DitherRow"),Vn.put!=null){if(ji=16*Yi,Yi=16*(Yi+1),Tr?(Vn.y=Wn.sa,Vn.O=Wn.ta+Qi,Vn.f=Wn.qa,Vn.N=Wn.ra+kr,Vn.ea=Wn.Ha,Vn.W=Wn.Ia+kr):(ji-=Hi,Vn.y=Ai,Vn.O=Ri,Vn.f=_i,Vn.N=hi,Vn.ea=Gi,Vn.W=Xi),Vi||(Yi-=Hi),Yi>Vn.o&&(Yi=Vn.o),Vn.F=null,Vn.J=null,Wn.Fa!=null&&0<Wn.Fa.length&&ji<Yi&&(Vn.J=Fa(Wn,Vn,ji,Yi-ji),Vn.F=Wn.mb,Vn.F==null&&Vn.F.length==0)){ci=lr(Wn,3,"Could not decode alpha data.");break t}ji<Vn.j&&(Hi=Vn.j-ji,ji=Vn.j,t(!(1&Hi)),Vn.O+=Wn.R*Hi,Vn.N+=Wn.B*(Hi>>1),Vn.W+=Wn.B*(Hi>>1),Vn.F!=null&&(Vn.J+=Vn.width*Hi)),ji<Yi&&(Vn.O+=Vn.v,Vn.N+=Vn.v>>1,Vn.W+=Vn.v>>1,Vn.F!=null&&(Vn.J+=Vn.v),Vn.ka=ji-Vn.j,Vn.U=Vn.va-Vn.v,Vn.T=Yi-ji,ci=Vn.put(Vn))}ai+1!=Wn.Ic||Vi||(r(Wn.sa,Wn.ta-di,Ai,Ri+16*Wn.R,di),r(Wn.qa,Wn.ra-Ci,_i,hi+8*Wn.B,Ci),r(Wn.Ha,Wn.Ia-Ci,Gi,Xi+8*Wn.B,Ci))}if(!ci)return lr(Xn,6,"Output aborted.")}return 1}(Ae,Se)),Se.bc!=null&&Se.bc(Se),je&=1}return je?(Ae.cb=0,je):0}function zr(Ae,Se,je,Ze,on){on=Ae[Se+je+32*Ze]+(on>>3),Ae[Se+je+32*Ze]=-256&on?0>on?0:255:on}function Gs(Ae,Se,je,Ze,on,mn){zr(Ae,Se,0,je,Ze+on),zr(Ae,Se,1,je,Ze+mn),zr(Ae,Se,2,je,Ze-mn),zr(Ae,Se,3,je,Ze-on)}function Cr(Ae){return(20091*Ae>>16)+Ae}function ya(Ae,Se,je,Ze){var on,mn=0,vn=_e(16);for(on=0;4>on;++on){var An=Ae[Se+0]+Ae[Se+8],En=Ae[Se+0]-Ae[Se+8],Fn=(35468*Ae[Se+4]>>16)-Cr(Ae[Se+12]),Hn=Cr(Ae[Se+4])+(35468*Ae[Se+12]>>16);vn[mn+0]=An+Hn,vn[mn+1]=En+Fn,vn[mn+2]=En-Fn,vn[mn+3]=An-Hn,mn+=4,Se++}for(on=mn=0;4>on;++on)An=(Ae=vn[mn+0]+4)+vn[mn+8],En=Ae-vn[mn+8],Fn=(35468*vn[mn+4]>>16)-Cr(vn[mn+12]),zr(je,Ze,0,0,An+(Hn=Cr(vn[mn+4])+(35468*vn[mn+12]>>16))),zr(je,Ze,1,0,En+Fn),zr(je,Ze,2,0,En-Fn),zr(je,Ze,3,0,An-Hn),mn++,Ze+=32}function eo(Ae,Se,je,Ze){var on=Ae[Se+0]+4,mn=35468*Ae[Se+4]>>16,vn=Cr(Ae[Se+4]),An=35468*Ae[Se+1]>>16;Gs(je,Ze,0,on+vn,Ae=Cr(Ae[Se+1]),An),Gs(je,Ze,1,on+mn,Ae,An),Gs(je,Ze,2,on-mn,Ae,An),Gs(je,Ze,3,on-vn,Ae,An)}function Jo(Ae,Se,je,Ze,on){ya(Ae,Se,je,Ze),on&&ya(Ae,Se+16,je,Ze+4)}function no(Ae,Se,je,Ze){aa(Ae,Se+0,je,Ze,1),aa(Ae,Se+32,je,Ze+128,1)}function Qo(Ae,Se,je,Ze){var on;for(Ae=Ae[Se+0]+4,on=0;4>on;++on)for(Se=0;4>Se;++Se)zr(je,Ze,Se,on,Ae)}function io(Ae,Se,je,Ze){Ae[Se+0]&&Xr(Ae,Se+0,je,Ze),Ae[Se+16]&&Xr(Ae,Se+16,je,Ze+4),Ae[Se+32]&&Xr(Ae,Se+32,je,Ze+128),Ae[Se+48]&&Xr(Ae,Se+48,je,Ze+128+4)}function Zo(Ae,Se,je,Ze){var on,mn=_e(16);for(on=0;4>on;++on){var vn=Ae[Se+0+on]+Ae[Se+12+on],An=Ae[Se+4+on]+Ae[Se+8+on],En=Ae[Se+4+on]-Ae[Se+8+on],Fn=Ae[Se+0+on]-Ae[Se+12+on];mn[0+on]=vn+An,mn[8+on]=vn-An,mn[4+on]=Fn+En,mn[12+on]=Fn-En}for(on=0;4>on;++on)vn=(Ae=mn[0+4*on]+3)+mn[3+4*on],An=mn[1+4*on]+mn[2+4*on],En=mn[1+4*on]-mn[2+4*on],Fn=Ae-mn[3+4*on],je[Ze+0]=vn+An>>3,je[Ze+16]=Fn+En>>3,je[Ze+32]=vn-An>>3,je[Ze+48]=Fn-En>>3,Ze+=64}function Aa(Ae,Se,je){var Ze,on=Se-32,mn=Rr,vn=255-Ae[on-1];for(Ze=0;Ze<je;++Ze){var An,En=mn,Fn=vn+Ae[Se-1];for(An=0;An<je;++An)Ae[Se+An]=En[Fn+Ae[on+An]];Se+=32}}function tl(Ae,Se){Aa(Ae,Se,4)}function el(Ae,Se){Aa(Ae,Se,8)}function nl(Ae,Se){Aa(Ae,Se,16)}function rs(Ae,Se){var je;for(je=0;16>je;++je)r(Ae,Se+32*je,Ae,Se-32,16)}function $s(Ae,Se){var je;for(je=16;0<je;--je)xe(Ae,Se,Ae[Se-1],16),Se+=32}function Xs(Ae,Se,je){var Ze;for(Ze=0;16>Ze;++Ze)xe(Se,je+32*Ze,Ae,16)}function ro(Ae,Se){var je,Ze=16;for(je=0;16>je;++je)Ze+=Ae[Se-1+32*je]+Ae[Se+je-32];Xs(Ze>>5,Ae,Se)}function yr(Ae,Se){var je,Ze=8;for(je=0;16>je;++je)Ze+=Ae[Se-1+32*je];Xs(Ze>>4,Ae,Se)}function il(Ae,Se){var je,Ze=8;for(je=0;16>je;++je)Ze+=Ae[Se+je-32];Xs(Ze>>4,Ae,Se)}function so(Ae,Se){Xs(128,Ae,Se)}function Oi(Ae,Se,je){return Ae+2*Se+je+2>>2}function rl(Ae,Se){var je,Ze=Se-32;for(Ze=new Uint8Array([Oi(Ae[Ze-1],Ae[Ze+0],Ae[Ze+1]),Oi(Ae[Ze+0],Ae[Ze+1],Ae[Ze+2]),Oi(Ae[Ze+1],Ae[Ze+2],Ae[Ze+3]),Oi(Ae[Ze+2],Ae[Ze+3],Ae[Ze+4])]),je=0;4>je;++je)r(Ae,Se+32*je,Ze,0,Ze.length)}function sl(Ae,Se){var je=Ae[Se-1],Ze=Ae[Se-1+32],on=Ae[Se-1+64],mn=Ae[Se-1+96];Nn(Ae,Se+0,16843009*Oi(Ae[Se-1-32],je,Ze)),Nn(Ae,Se+32,16843009*Oi(je,Ze,on)),Nn(Ae,Se+64,16843009*Oi(Ze,on,mn)),Nn(Ae,Se+96,16843009*Oi(on,mn,mn))}function Zr(Ae,Se){var je,Ze=4;for(je=0;4>je;++je)Ze+=Ae[Se+je-32]+Ae[Se-1+32*je];for(Ze>>=3,je=0;4>je;++je)xe(Ae,Se+32*je,Ze,4)}function ao(Ae,Se){var je=Ae[Se-1+0],Ze=Ae[Se-1+32],on=Ae[Se-1+64],mn=Ae[Se-1-32],vn=Ae[Se+0-32],An=Ae[Se+1-32],En=Ae[Se+2-32],Fn=Ae[Se+3-32];Ae[Se+0+96]=Oi(Ze,on,Ae[Se-1+96]),Ae[Se+1+96]=Ae[Se+0+64]=Oi(je,Ze,on),Ae[Se+2+96]=Ae[Se+1+64]=Ae[Se+0+32]=Oi(mn,je,Ze),Ae[Se+3+96]=Ae[Se+2+64]=Ae[Se+1+32]=Ae[Se+0+0]=Oi(vn,mn,je),Ae[Se+3+64]=Ae[Se+2+32]=Ae[Se+1+0]=Oi(An,vn,mn),Ae[Se+3+32]=Ae[Se+2+0]=Oi(En,An,vn),Ae[Se+3+0]=Oi(Fn,En,An)}function oo(Ae,Se){var je=Ae[Se+1-32],Ze=Ae[Se+2-32],on=Ae[Se+3-32],mn=Ae[Se+4-32],vn=Ae[Se+5-32],An=Ae[Se+6-32],En=Ae[Se+7-32];Ae[Se+0+0]=Oi(Ae[Se+0-32],je,Ze),Ae[Se+1+0]=Ae[Se+0+32]=Oi(je,Ze,on),Ae[Se+2+0]=Ae[Se+1+32]=Ae[Se+0+64]=Oi(Ze,on,mn),Ae[Se+3+0]=Ae[Se+2+32]=Ae[Se+1+64]=Ae[Se+0+96]=Oi(on,mn,vn),Ae[Se+3+32]=Ae[Se+2+64]=Ae[Se+1+96]=Oi(mn,vn,An),Ae[Se+3+64]=Ae[Se+2+96]=Oi(vn,An,En),Ae[Se+3+96]=Oi(An,En,En)}function Ys(Ae,Se){var je=Ae[Se-1+0],Ze=Ae[Se-1+32],on=Ae[Se-1+64],mn=Ae[Se-1-32],vn=Ae[Se+0-32],An=Ae[Se+1-32],En=Ae[Se+2-32],Fn=Ae[Se+3-32];Ae[Se+0+0]=Ae[Se+1+64]=mn+vn+1>>1,Ae[Se+1+0]=Ae[Se+2+64]=vn+An+1>>1,Ae[Se+2+0]=Ae[Se+3+64]=An+En+1>>1,Ae[Se+3+0]=En+Fn+1>>1,Ae[Se+0+96]=Oi(on,Ze,je),Ae[Se+0+64]=Oi(Ze,je,mn),Ae[Se+0+32]=Ae[Se+1+96]=Oi(je,mn,vn),Ae[Se+1+32]=Ae[Se+2+96]=Oi(mn,vn,An),Ae[Se+2+32]=Ae[Se+3+96]=Oi(vn,An,En),Ae[Se+3+32]=Oi(An,En,Fn)}function wa(Ae,Se){var je=Ae[Se+0-32],Ze=Ae[Se+1-32],on=Ae[Se+2-32],mn=Ae[Se+3-32],vn=Ae[Se+4-32],An=Ae[Se+5-32],En=Ae[Se+6-32],Fn=Ae[Se+7-32];Ae[Se+0+0]=je+Ze+1>>1,Ae[Se+1+0]=Ae[Se+0+64]=Ze+on+1>>1,Ae[Se+2+0]=Ae[Se+1+64]=on+mn+1>>1,Ae[Se+3+0]=Ae[Se+2+64]=mn+vn+1>>1,Ae[Se+0+32]=Oi(je,Ze,on),Ae[Se+1+32]=Ae[Se+0+96]=Oi(Ze,on,mn),Ae[Se+2+32]=Ae[Se+1+96]=Oi(on,mn,vn),Ae[Se+3+32]=Ae[Se+2+96]=Oi(mn,vn,An),Ae[Se+3+64]=Oi(vn,An,En),Ae[Se+3+96]=Oi(An,En,Fn)}function al(Ae,Se){var je=Ae[Se-1+0],Ze=Ae[Se-1+32],on=Ae[Se-1+64],mn=Ae[Se-1+96];Ae[Se+0+0]=je+Ze+1>>1,Ae[Se+2+0]=Ae[Se+0+32]=Ze+on+1>>1,Ae[Se+2+32]=Ae[Se+0+64]=on+mn+1>>1,Ae[Se+1+0]=Oi(je,Ze,on),Ae[Se+3+0]=Ae[Se+1+32]=Oi(Ze,on,mn),Ae[Se+3+32]=Ae[Se+1+64]=Oi(on,mn,mn),Ae[Se+3+64]=Ae[Se+2+64]=Ae[Se+0+96]=Ae[Se+1+96]=Ae[Se+2+96]=Ae[Se+3+96]=mn}function ol(Ae,Se){var je=Ae[Se-1+0],Ze=Ae[Se-1+32],on=Ae[Se-1+64],mn=Ae[Se-1+96],vn=Ae[Se-1-32],An=Ae[Se+0-32],En=Ae[Se+1-32],Fn=Ae[Se+2-32];Ae[Se+0+0]=Ae[Se+2+32]=je+vn+1>>1,Ae[Se+0+32]=Ae[Se+2+64]=Ze+je+1>>1,Ae[Se+0+64]=Ae[Se+2+96]=on+Ze+1>>1,Ae[Se+0+96]=mn+on+1>>1,Ae[Se+3+0]=Oi(An,En,Fn),Ae[Se+2+0]=Oi(vn,An,En),Ae[Se+1+0]=Ae[Se+3+32]=Oi(je,vn,An),Ae[Se+1+32]=Ae[Se+3+64]=Oi(Ze,je,vn),Ae[Se+1+64]=Ae[Se+3+96]=Oi(on,Ze,je),Ae[Se+1+96]=Oi(mn,on,Ze)}function ll(Ae,Se){var je;for(je=0;8>je;++je)r(Ae,Se+32*je,Ae,Se-32,8)}function xa(Ae,Se){var je;for(je=0;8>je;++je)xe(Ae,Se,Ae[Se-1],8),Se+=32}function Rs(Ae,Se,je){var Ze;for(Ze=0;8>Ze;++Ze)xe(Se,je+32*Ze,Ae,8)}function ps(Ae,Se){var je,Ze=8;for(je=0;8>je;++je)Ze+=Ae[Se+je-32]+Ae[Se-1+32*je];Rs(Ze>>4,Ae,Se)}function cl(Ae,Se){var je,Ze=4;for(je=0;8>je;++je)Ze+=Ae[Se+je-32];Rs(Ze>>3,Ae,Se)}function Ts(Ae,Se){var je,Ze=4;for(je=0;8>je;++je)Ze+=Ae[Se-1+32*je];Rs(Ze>>3,Ae,Se)}function Sa(Ae,Se){Rs(128,Ae,Se)}function Ks(Ae,Se,je){var Ze=Ae[Se-je],on=Ae[Se+0],mn=3*(on-Ze)+vl[1020+Ae[Se-2*je]-Ae[Se+je]],vn=vo[112+(mn+4>>3)];Ae[Se-je]=Rr[255+Ze+vo[112+(mn+3>>3)]],Ae[Se+0]=Rr[255+on-vn]}function lo(Ae,Se,je,Ze){var on=Ae[Se+0],mn=Ae[Se+je];return jr[255+Ae[Se-2*je]-Ae[Se-je]]>Ze||jr[255+mn-on]>Ze}function co(Ae,Se,je,Ze){return 4*jr[255+Ae[Se-je]-Ae[Se+0]]+jr[255+Ae[Se-2*je]-Ae[Se+je]]<=Ze}function ho(Ae,Se,je,Ze,on){var mn=Ae[Se-3*je],vn=Ae[Se-2*je],An=Ae[Se-je],En=Ae[Se+0],Fn=Ae[Se+je],Hn=Ae[Se+2*je],Qn=Ae[Se+3*je];return 4*jr[255+An-En]+jr[255+vn-Fn]>Ze?0:jr[255+Ae[Se-4*je]-mn]<=on&&jr[255+mn-vn]<=on&&jr[255+vn-An]<=on&&jr[255+Qn-Hn]<=on&&jr[255+Hn-Fn]<=on&&jr[255+Fn-En]<=on}function uo(Ae,Se,je,Ze){var on=2*Ze+1;for(Ze=0;16>Ze;++Ze)co(Ae,Se+Ze,je,on)&&Ks(Ae,Se+Ze,je)}function ss(Ae,Se,je,Ze){var on=2*Ze+1;for(Ze=0;16>Ze;++Ze)co(Ae,Se+Ze*je,1,on)&&Ks(Ae,Se+Ze*je,1)}function gs(Ae,Se,je,Ze){var on;for(on=3;0<on;--on)uo(Ae,Se+=4*je,je,Ze)}function hl(Ae,Se,je,Ze){var on;for(on=3;0<on;--on)ss(Ae,Se+=4,je,Ze)}function ms(Ae,Se,je,Ze,on,mn,vn,An){for(mn=2*mn+1;0<on--;){if(ho(Ae,Se,je,mn,vn))if(lo(Ae,Se,je,An))Ks(Ae,Se,je);else{var En=Ae,Fn=Se,Hn=je,Qn=En[Fn-2*Hn],Zn=En[Fn-Hn],Xn=En[Fn+0],ui=En[Fn+Hn],ai=En[Fn+2*Hn],Wn=27*(ci=vl[1020+3*(Xn-Zn)+vl[1020+Qn-ui]])+63>>7,Vn=18*ci+63>>7,ci=9*ci+63>>7;En[Fn-3*Hn]=Rr[255+En[Fn-3*Hn]+ci],En[Fn-2*Hn]=Rr[255+Qn+Vn],En[Fn-Hn]=Rr[255+Zn+Wn],En[Fn+0]=Rr[255+Xn-Wn],En[Fn+Hn]=Rr[255+ui-Vn],En[Fn+2*Hn]=Rr[255+ai-ci]}Se+=Ze}}function Hr(Ae,Se,je,Ze,on,mn,vn,An){for(mn=2*mn+1;0<on--;){if(ho(Ae,Se,je,mn,vn))if(lo(Ae,Se,je,An))Ks(Ae,Se,je);else{var En=Ae,Fn=Se,Hn=je,Qn=En[Fn-Hn],Zn=En[Fn+0],Xn=En[Fn+Hn],ui=vo[112+((ai=3*(Zn-Qn))+4>>3)],ai=vo[112+(ai+3>>3)],Wn=ui+1>>1;En[Fn-2*Hn]=Rr[255+En[Fn-2*Hn]+Wn],En[Fn-Hn]=Rr[255+Qn+ai],En[Fn+0]=Rr[255+Zn-ui],En[Fn+Hn]=Rr[255+Xn-Wn]}Se+=Ze}}function Ea(Ae,Se,je,Ze,on,mn){ms(Ae,Se,je,1,16,Ze,on,mn)}function Is(Ae,Se,je,Ze,on,mn){ms(Ae,Se,1,je,16,Ze,on,mn)}function ul(Ae,Se,je,Ze,on,mn){var vn;for(vn=3;0<vn;--vn)Hr(Ae,Se+=4*je,je,1,16,Ze,on,mn)}function Js(Ae,Se,je,Ze,on,mn){var vn;for(vn=3;0<vn;--vn)Hr(Ae,Se+=4,1,je,16,Ze,on,mn)}function dl(Ae,Se,je,Ze,on,mn,vn,An){ms(Ae,Se,on,1,8,mn,vn,An),ms(je,Ze,on,1,8,mn,vn,An)}function Ca(Ae,Se,je,Ze,on,mn,vn,An){ms(Ae,Se,1,on,8,mn,vn,An),ms(je,Ze,1,on,8,mn,vn,An)}function La(Ae,Se,je,Ze,on,mn,vn,An){Hr(Ae,Se+4*on,on,1,8,mn,vn,An),Hr(je,Ze+4*on,on,1,8,mn,vn,An)}function fo(Ae,Se,je,Ze,on,mn,vn,An){Hr(Ae,Se+4,1,on,8,mn,vn,An),Hr(je,Ze+4,1,on,8,mn,vn,An)}function Qs(){this.ba=new Ni,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Pi,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Pa(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Na(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function po(){this.ua=0,this.Wa=new We,this.vb=new We,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new hn,this.yc=new Qe}function pl(){this.xb=this.a=0,this.l=new Vs,this.ca=new Ni,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new an,this.Pb=0,this.wd=new an,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new po,this.ab=0,this.gc=Ee(4,Na),this.Oc=0}function Zs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Vs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ms(Ae,Se,je,Ze,on,mn,vn){for(Ae=Ae==null?0:Ae[Se+0],Se=0;Se<vn;++Se)on[mn+Se]=Ae+je[Ze+Se]&255,Ae=on[mn+Se]}function ka(Ae,Se,je,Ze,on,mn,vn){var An;if(Ae==null)Ms(null,null,je,Ze,on,mn,vn);else for(An=0;An<vn;++An)on[mn+An]=Ae[Se+An]+je[Ze+An]&255}function bs(Ae,Se,je,Ze,on,mn,vn){if(Ae==null)Ms(null,null,je,Ze,on,mn,vn);else{var An,En=Ae[Se+0],Fn=En,Hn=En;for(An=0;An<vn;++An)Fn=Hn+(En=Ae[Se+An])-Fn,Hn=je[Ze+An]+(-256&Fn?0>Fn?0:255:Fn)&255,Fn=En,on[mn+An]=Hn}}function Fa(Ae,Se,je,Ze){var on=Se.width,mn=Se.o;if(t(Ae!=null&&Se!=null),0>je||0>=Ze||je+Ze>mn)return null;if(!Ae.Cc){if(Ae.ga==null){var vn;if(Ae.ga=new Zs,(vn=Ae.ga==null)||(vn=Se.width*Se.o,t(Ae.Gb.length==0),Ae.Gb=_e(vn),Ae.Uc=0,Ae.Gb==null?vn=0:(Ae.mb=Ae.Gb,Ae.nb=Ae.Uc,Ae.rc=null,vn=1),vn=!vn),!vn){vn=Ae.ga;var An=Ae.Fa,En=Ae.P,Fn=Ae.qc,Hn=Ae.mb,Qn=Ae.nb,Zn=En+1,Xn=Fn-1,ui=vn.l;if(t(An!=null&&Hn!=null&&Se!=null),Ss[0]=null,Ss[1]=Ms,Ss[2]=ka,Ss[3]=bs,vn.ca=Hn,vn.tb=Qn,vn.c=Se.width,vn.i=Se.height,t(0<vn.c&&0<vn.i),1>=Fn)Se=0;else if(vn.$a=An[En+0]>>0&3,vn.Z=An[En+0]>>2&3,vn.Lc=An[En+0]>>4&3,En=An[En+0]>>6&3,0>vn.$a||1<vn.$a||4<=vn.Z||1<vn.Lc||En)Se=0;else if(ui.put=zi,ui.ac=Ii,ui.bc=Ti,ui.ma=vn,ui.width=Se.width,ui.height=Se.height,ui.Da=Se.Da,ui.v=Se.v,ui.va=Se.va,ui.j=Se.j,ui.o=Se.o,vn.$a)t:{t(vn.$a==1),Se=Mr();e:for(;;){if(Se==null){Se=0;break t}if(t(vn!=null),vn.mc=Se,Se.c=vn.c,Se.i=vn.i,Se.l=vn.l,Se.l.ma=vn,Se.l.width=vn.c,Se.l.height=vn.i,Se.a=0,Rn(Se.m,An,Zn,Xn),!Qr(vn.c,vn.i,1,Se,null)||(Se.ab==1&&Se.gc[0].hc==3&&_r(Se.s)?(vn.ic=1,An=Se.c*Se.i,Se.Ta=null,Se.Ua=0,Se.V=_e(An),Se.Ba=0,Se.V==null?(Se.a=1,Se=0):Se=1):(vn.ic=0,Se=Fs(Se,vn.c)),!Se))break e;Se=1;break t}vn.mc=null,Se=0}else Se=Xn>=vn.c*vn.i;vn=!Se}if(vn)return null;Ae.ga.Lc!=1?Ae.Ga=0:Ze=mn-je}t(Ae.ga!=null),t(je+Ze<=mn);t:{if(Se=(An=Ae.ga).c,mn=An.l.o,An.$a==0){if(Zn=Ae.rc,Xn=Ae.Vc,ui=Ae.Fa,En=Ae.P+1+je*Se,Fn=Ae.mb,Hn=Ae.nb+je*Se,t(En<=Ae.P+Ae.qc),An.Z!=0)for(t(Ss[An.Z]!=null),vn=0;vn<Ze;++vn)Ss[An.Z](Zn,Xn,ui,En,Fn,Hn,Se),Zn=Fn,Xn=Hn,Hn+=Se,En+=Se;else for(vn=0;vn<Ze;++vn)r(Fn,Hn,ui,En,Se),Zn=Fn,Xn=Hn,Hn+=Se,En+=Se;Ae.rc=Zn,Ae.Vc=Xn}else{if(t(An.mc!=null),Se=je+Ze,t((vn=An.mc)!=null),t(Se<=vn.i),vn.C>=Se)Se=1;else if(An.ic||Kn(),An.ic){An=vn.V,Zn=vn.Ba,Xn=vn.c;var ai=vn.i,Wn=(ui=1,En=vn.$/Xn,Fn=vn.$%Xn,Hn=vn.m,Qn=vn.s,vn.$),Vn=Xn*ai,ci=Xn*Se,di=Qn.wc,hi=Wn<ci?Ui(Qn,Fn,En):null;t(Wn<=Vn),t(Se<=ai),t(_r(Qn));e:for(;;){for(;!Hn.h&&Wn<ci;){if(Fn&di||(hi=Ui(Qn,Fn,En)),t(hi!=null),Xe(Hn),256>(ai=tr(hi.G[0],hi.H[0],Hn)))An[Zn+Wn]=ai,++Wn,++Fn>=Xn&&(Fn=0,++En<=Se&&!(En%16)&&Sr(vn,En));else{if(!(280>ai)){ui=0;break e}ai=Ji(ai-256,Hn);var Ci,Ai=tr(hi.G[4],hi.H[4],Hn);if(Xe(Hn),!(Wn>=(Ai=Zi(Xn,Ai=Ji(Ai,Hn)))&&Vn-Wn>=ai)){ui=0;break e}for(Ci=0;Ci<ai;++Ci)An[Zn+Wn+Ci]=An[Zn+Wn+Ci-Ai];for(Wn+=ai,Fn+=ai;Fn>=Xn;)Fn-=Xn,++En<=Se&&!(En%16)&&Sr(vn,En);Wn<ci&&Fn&di&&(hi=Ui(Qn,Fn,En))}t(Hn.h==sn(Hn))}Sr(vn,En>Se?Se:En);break e}!ui||Hn.h&&Wn<Vn?(ui=0,vn.a=Hn.h?5:3):vn.$=Wn,Se=ui}else Se=Er(vn,vn.V,vn.Ba,vn.c,vn.i,Se,qs);if(!Se){Ze=0;break t}}je+Ze>=mn&&(Ae.Cc=1),Ze=1}if(!Ze)return null;if(Ae.Cc&&((Ze=Ae.ga)!=null&&(Ze.mc=null),Ae.ga=null,0<Ae.Ga))return alert("todo:WebPDequantizeLevels"),null}return Ae.nb+je*on}function Fe(Ae,Se,je,Ze,on,mn){for(;0<on--;){var vn,An=Ae,En=Se+(je?1:0),Fn=Ae,Hn=Se+(je?0:3);for(vn=0;vn<Ze;++vn){var Qn=Fn[Hn+4*vn];Qn!=255&&(Qn*=32897,An[En+4*vn+0]=An[En+4*vn+0]*Qn>>23,An[En+4*vn+1]=An[En+4*vn+1]*Qn>>23,An[En+4*vn+2]=An[En+4*vn+2]*Qn>>23)}Se+=mn}}function un(Ae,Se,je,Ze,on){for(;0<Ze--;){var mn;for(mn=0;mn<je;++mn){var vn=Ae[Se+2*mn+0],An=15&(Fn=Ae[Se+2*mn+1]),En=4369*An,Fn=(240&Fn|Fn>>4)*En>>16;Ae[Se+2*mn+0]=(240&vn|vn>>4)*En>>16&240|(15&vn|vn<<4)*En>>16>>4&15,Ae[Se+2*mn+1]=240&Fn|An}Se+=on}}function In(Ae,Se,je,Ze,on,mn,vn,An){var En,Fn,Hn=255;for(Fn=0;Fn<on;++Fn){for(En=0;En<Ze;++En){var Qn=Ae[Se+En];mn[vn+4*En]=Qn,Hn&=Qn}Se+=je,vn+=An}return Hn!=255}function Un(Ae,Se,je,Ze,on){var mn;for(mn=0;mn<on;++mn)je[Ze+mn]=Ae[Se+mn]>>8}function Kn(){xs=Fe,la=un,bo=In,nc=Un}function oi(Ae,Se,je){Me[Ae]=function(Ze,on,mn,vn,An,En,Fn,Hn,Qn,Zn,Xn,ui,ai,Wn,Vn,ci,di){var hi,Ci=di-1>>1,Ai=An[En+0]|Fn[Hn+0]<<16,Ri=Qn[Zn+0]|Xn[ui+0]<<16;t(Ze!=null);var _i=3*Ai+Ri+131074>>2;for(Se(Ze[on+0],255&_i,_i>>16,ai,Wn),mn!=null&&(_i=3*Ri+Ai+131074>>2,Se(mn[vn+0],255&_i,_i>>16,Vn,ci)),hi=1;hi<=Ci;++hi){var Gi=An[En+hi]|Fn[Hn+hi]<<16,Xi=Qn[Zn+hi]|Xn[ui+hi]<<16,Vi=Ai+Gi+Ri+Xi+524296,Hi=Vi+2*(Gi+Ri)>>3;_i=Hi+Ai>>1,Ai=(Vi=Vi+2*(Ai+Xi)>>3)+Gi>>1,Se(Ze[on+2*hi-1],255&_i,_i>>16,ai,Wn+(2*hi-1)*je),Se(Ze[on+2*hi-0],255&Ai,Ai>>16,ai,Wn+(2*hi-0)*je),mn!=null&&(_i=Vi+Ri>>1,Ai=Hi+Xi>>1,Se(mn[vn+2*hi-1],255&_i,_i>>16,Vn,ci+(2*hi-1)*je),Se(mn[vn+2*hi+0],255&Ai,Ai>>16,Vn,ci+(2*hi+0)*je)),Ai=Gi,Ri=Xi}1&di||(_i=3*Ai+Ri+131074>>2,Se(Ze[on+di-1],255&_i,_i>>16,ai,Wn+(di-1)*je),mn!=null&&(_i=3*Ri+Ai+131074>>2,Se(mn[vn+di-1],255&_i,_i>>16,Vn,ci+(di-1)*je)))}}function mi(){Br[yo]=wh,Br[Ao]=pc,Br[cc]=xh,Br[wo]=gc,Br[xo]=mc,Br[yl]=bc,Br[hc]=_h,Br[Al]=pc,Br[wl]=gc,Br[_o]=mc,Br[xl]=bc}function Ei(Ae){return Ae&~Sh?0>Ae?0:255:Ae>>vc}function ki(Ae,Se){return Ei((19077*Ae>>8)+(26149*Se>>8)-14234)}function Di(Ae,Se,je){return Ei((19077*Ae>>8)-(6419*Se>>8)-(13320*je>>8)+8708)}function Bi(Ae,Se){return Ei((19077*Ae>>8)+(33050*Se>>8)-17685)}function Wi(Ae,Se,je,Ze,on){Ze[on+0]=ki(Ae,je),Ze[on+1]=Di(Ae,Se,je),Ze[on+2]=Bi(Ae,Se)}function sr(Ae,Se,je,Ze,on){Ze[on+0]=Bi(Ae,Se),Ze[on+1]=Di(Ae,Se,je),Ze[on+2]=ki(Ae,je)}function ar(Ae,Se,je,Ze,on){var mn=Di(Ae,Se,je);Se=mn<<3&224|Bi(Ae,Se)>>3,Ze[on+0]=248&ki(Ae,je)|mn>>5,Ze[on+1]=Se}function hr(Ae,Se,je,Ze,on){var mn=240&Bi(Ae,Se)|15;Ze[on+0]=240&ki(Ae,je)|Di(Ae,Se,je)>>4,Ze[on+1]=mn}function Ar(Ae,Se,je,Ze,on){Ze[on+0]=255,Wi(Ae,Se,je,Ze,on+1)}function pr(Ae,Se,je,Ze,on){sr(Ae,Se,je,Ze,on),Ze[on+3]=255}function Wr(Ae,Se,je,Ze,on){Wi(Ae,Se,je,Ze,on),Ze[on+3]=255}function Fr(Ae,Se){return 0>Ae?0:Ae>Se?Se:Ae}function as(Ae,Se,je){Me[Ae]=function(Ze,on,mn,vn,An,En,Fn,Hn,Qn){for(var Zn=Hn+(-2&Qn)*je;Hn!=Zn;)Se(Ze[on+0],mn[vn+0],An[En+0],Fn,Hn),Se(Ze[on+1],mn[vn+0],An[En+0],Fn,Hn+je),on+=2,++vn,++En,Hn+=2*je;1&Qn&&Se(Ze[on+0],mn[vn+0],An[En+0],Fn,Hn)}}function go(Ae,Se,je){return je==0?Ae==0?Se==0?6:5:Se==0?4:0:je}function Ra(Ae,Se,je,Ze,on){switch(Ae>>>30){case 3:aa(Se,je,Ze,on,0);break;case 2:Ba(Se,je,Ze,on);break;case 1:Xr(Se,je,Ze,on)}}function Ta(Ae,Se){var je,Ze,on=Se.M,mn=Se.Nb,vn=Ae.oc,An=Ae.pc+40,En=Ae.oc,Fn=Ae.pc+584,Hn=Ae.oc,Qn=Ae.pc+600;for(je=0;16>je;++je)vn[An+32*je-1]=129;for(je=0;8>je;++je)En[Fn+32*je-1]=129,Hn[Qn+32*je-1]=129;for(0<on?vn[An-1-32]=En[Fn-1-32]=Hn[Qn-1-32]=129:(xe(vn,An-32-1,127,21),xe(En,Fn-32-1,127,9),xe(Hn,Qn-32-1,127,9)),Ze=0;Ze<Ae.za;++Ze){var Zn=Se.ya[Se.aa+Ze];if(0<Ze){for(je=-1;16>je;++je)r(vn,An+32*je-4,vn,An+32*je+12,4);for(je=-1;8>je;++je)r(En,Fn+32*je-4,En,Fn+32*je+4,4),r(Hn,Qn+32*je-4,Hn,Qn+32*je+4,4)}var Xn=Ae.Gd,ui=Ae.Hd+Ze,ai=Zn.ad,Wn=Zn.Hc;if(0<on&&(r(vn,An-32,Xn[ui].y,0,16),r(En,Fn-32,Xn[ui].f,0,8),r(Hn,Qn-32,Xn[ui].ea,0,8)),Zn.Za){var Vn=vn,ci=An-32+16;for(0<on&&(Ze>=Ae.za-1?xe(Vn,ci,Xn[ui].y[15],4):r(Vn,ci,Xn[ui+1].y,0,4)),je=0;4>je;je++)Vn[ci+128+je]=Vn[ci+256+je]=Vn[ci+384+je]=Vn[ci+0+je];for(je=0;16>je;++je,Wn<<=2)Vn=vn,ci=An+Ac[je],Yr[Zn.Ob[je]](Vn,ci),Ra(Wn,ai,16*+je,Vn,ci)}else if(Vn=go(Ze,on,Zn.Ob[0]),_s[Vn](vn,An),Wn!=0)for(je=0;16>je;++je,Wn<<=2)Ra(Wn,ai,16*+je,vn,An+Ac[je]);for(je=Zn.Gc,Vn=go(Ze,on,Zn.Dd),us[Vn](En,Fn),us[Vn](Hn,Qn),Wn=ai,Vn=En,ci=Fn,255&(Zn=je>>0)&&(170&Zn?As(Wn,256,Vn,ci):ls(Wn,256,Vn,ci)),Zn=Hn,Wn=Qn,255&(je>>=8)&&(170&je?As(ai,320,Zn,Wn):ls(ai,320,Zn,Wn)),on<Ae.Ub-1&&(r(Xn[ui].y,0,vn,An+480,16),r(Xn[ui].f,0,En,Fn+224,8),r(Xn[ui].ea,0,Hn,Qn+224,8)),je=8*mn*Ae.B,Xn=Ae.sa,ui=Ae.ta+16*Ze+16*mn*Ae.R,ai=Ae.qa,Zn=Ae.ra+8*Ze+je,Wn=Ae.Ha,Vn=Ae.Ia+8*Ze+je,je=0;16>je;++je)r(Xn,ui+je*Ae.R,vn,An+32*je,16);for(je=0;8>je;++je)r(ai,Zn+je*Ae.B,En,Fn+32*je,8),r(Wn,Vn+je*Ae.B,Hn,Qn+32*je,8)}}function ta(Ae,Se,je,Ze,on,mn,vn,An,En){var Fn=[0],Hn=[0],Qn=0,Zn=En!=null?En.kd:0,Xn=En??new Pa;if(Ae==null||12>je)return 7;Xn.data=Ae,Xn.w=Se,Xn.ha=je,Se=[Se],je=[je],Xn.gb=[Xn.gb];t:{var ui=Se,ai=je,Wn=Xn.gb;if(t(Ae!=null),t(ai!=null),t(Wn!=null),Wn[0]=0,12<=ai[0]&&!St(Ae,ui[0],"RIFF")){if(St(Ae,ui[0]+8,"WEBP")){Wn=3;break t}var Vn=Sn(Ae,ui[0]+4);if(12>Vn||4294967286<Vn){Wn=3;break t}if(Zn&&Vn>ai[0]-8){Wn=7;break t}Wn[0]=Vn,ui[0]+=12,ai[0]-=12}Wn=0}if(Wn!=0)return Wn;for(Vn=0<Xn.gb[0],je=je[0];;){t:{var ci=Ae;ai=Se,Wn=je;var di=Fn,hi=Hn,Ci=ui=[0];if((_i=Qn=[Qn])[0]=0,8>Wn[0])Wn=7;else{if(!St(ci,ai[0],"VP8X")){if(Sn(ci,ai[0]+4)!=10){Wn=3;break t}if(18>Wn[0]){Wn=7;break t}var Ai=Sn(ci,ai[0]+8),Ri=1+xn(ci,ai[0]+12);if(2147483648<=Ri*(ci=1+xn(ci,ai[0]+15))){Wn=3;break t}Ci!=null&&(Ci[0]=Ai),di!=null&&(di[0]=Ri),hi!=null&&(hi[0]=ci),ai[0]+=18,Wn[0]-=18,_i[0]=1}Wn=0}}if(Qn=Qn[0],ui=ui[0],Wn!=0)return Wn;if(ai=!!(2&ui),!Vn&&Qn)return 3;if(mn!=null&&(mn[0]=!!(16&ui)),vn!=null&&(vn[0]=ai),An!=null&&(An[0]=0),vn=Fn[0],ui=Hn[0],Qn&&ai&&En==null){Wn=0;break}if(4>je){Wn=7;break}if(Vn&&Qn||!Vn&&!Qn&&!St(Ae,Se[0],"ALPH")){je=[je],Xn.na=[Xn.na],Xn.P=[Xn.P],Xn.Sa=[Xn.Sa];t:{Ai=Ae,Wn=Se,Vn=je;var _i=Xn.gb;di=Xn.na,hi=Xn.P,Ci=Xn.Sa,Ri=22,t(Ai!=null),t(Vn!=null),ci=Wn[0];var Gi=Vn[0];for(t(di!=null),t(Ci!=null),di[0]=null,hi[0]=null,Ci[0]=0;;){if(Wn[0]=ci,Vn[0]=Gi,8>Gi){Wn=7;break t}var Xi=Sn(Ai,ci+4);if(4294967286<Xi){Wn=3;break t}var Vi=8+Xi+1&-2;if(Ri+=Vi,0<_i&&Ri>_i){Wn=3;break t}if(!St(Ai,ci,"VP8 ")||!St(Ai,ci,"VP8L")){Wn=0;break t}if(Gi[0]<Vi){Wn=7;break t}St(Ai,ci,"ALPH")||(di[0]=Ai,hi[0]=ci+8,Ci[0]=Xi),ci+=Vi,Gi-=Vi}}if(je=je[0],Xn.na=Xn.na[0],Xn.P=Xn.P[0],Xn.Sa=Xn.Sa[0],Wn!=0)break}je=[je],Xn.Ja=[Xn.Ja],Xn.xa=[Xn.xa];t:if(_i=Ae,Wn=Se,Vn=je,di=Xn.gb[0],hi=Xn.Ja,Ci=Xn.xa,Ai=Wn[0],ci=!St(_i,Ai,"VP8 "),Ri=!St(_i,Ai,"VP8L"),t(_i!=null),t(Vn!=null),t(hi!=null),t(Ci!=null),8>Vn[0])Wn=7;else{if(ci||Ri){if(_i=Sn(_i,Ai+4),12<=di&&_i>di-12){Wn=3;break t}if(Zn&&_i>Vn[0]-8){Wn=7;break t}hi[0]=_i,Wn[0]+=8,Vn[0]-=8,Ci[0]=Ri}else Ci[0]=5<=Vn[0]&&_i[Ai+0]==47&&!(_i[Ai+4]>>5),hi[0]=Vn[0];Wn=0}if(je=je[0],Xn.Ja=Xn.Ja[0],Xn.xa=Xn.xa[0],Se=Se[0],Wn!=0)break;if(4294967286<Xn.Ja)return 3;if(An==null||ai||(An[0]=Xn.xa?2:1),vn=[vn],ui=[ui],Xn.xa){if(5>je){Wn=7;break}An=vn,Zn=ui,ai=mn,Ae==null||5>je?Ae=0:5<=je&&Ae[Se+0]==47&&!(Ae[Se+4]>>5)?(Vn=[0],_i=[0],di=[0],Rn(hi=new an,Ae,Se,je),Li(hi,Vn,_i,di)?(An!=null&&(An[0]=Vn[0]),Zn!=null&&(Zn[0]=_i[0]),ai!=null&&(ai[0]=di[0]),Ae=1):Ae=0):Ae=0}else{if(10>je){Wn=7;break}An=ui,Ae==null||10>je||!Qa(Ae,Se+3,je-3)?Ae=0:(Zn=Ae[Se+0]|Ae[Se+1]<<8|Ae[Se+2]<<16,ai=16383&(Ae[Se+7]<<8|Ae[Se+6]),Ae=16383&(Ae[Se+9]<<8|Ae[Se+8]),1&Zn||3<(Zn>>1&7)||!(Zn>>4&1)||Zn>>5>=Xn.Ja||!ai||!Ae?Ae=0:(vn&&(vn[0]=ai),An&&(An[0]=Ae),Ae=1))}if(!Ae||(vn=vn[0],ui=ui[0],Qn&&(Fn[0]!=vn||Hn[0]!=ui)))return 3;En!=null&&(En[0]=Xn,En.offset=Se-En.w,t(4294967286>Se-En.w),t(En.offset==En.ha-je));break}return Wn==0||Wn==7&&Qn&&En==null?(mn!=null&&(mn[0]|=Xn.na!=null&&0<Xn.na.length),Ze!=null&&(Ze[0]=vn),on!=null&&(on[0]=ui),0):Wn}function Ia(Ae,Se,je){var Ze=Se.width,on=Se.height,mn=0,vn=0,An=Ze,En=on;if(Se.Da=Ae!=null&&0<Ae.Da,Se.Da&&(An=Ae.cd,En=Ae.bd,mn=Ae.v,vn=Ae.j,11>je||(mn&=-2,vn&=-2),0>mn||0>vn||0>=An||0>=En||mn+An>Ze||vn+En>on))return 0;if(Se.v=mn,Se.j=vn,Se.va=mn+An,Se.o=vn+En,Se.U=An,Se.T=En,Se.da=Ae!=null&&0<Ae.da,Se.da){if(!yn(An,En,je=[Ae.ib],mn=[Ae.hb]))return 0;Se.ib=je[0],Se.hb=mn[0]}return Se.ob=Ae!=null&&Ae.ob,Se.Kb=Ae==null||!Ae.Sd,Se.da&&(Se.ob=Se.ib<3*Ze/4&&Se.hb<3*on/4,Se.Kb=0),1}function Ma(Ae){if(Ae==null)return 2;if(11>Ae.S){var Se=Ae.f.RGBA;Se.fb+=(Ae.height-1)*Se.A,Se.A=-Se.A}else Se=Ae.f.kb,Ae=Ae.height,Se.O+=(Ae-1)*Se.fa,Se.fa=-Se.fa,Se.N+=(Ae-1>>1)*Se.Ab,Se.Ab=-Se.Ab,Se.W+=(Ae-1>>1)*Se.Db,Se.Db=-Se.Db,Se.F!=null&&(Se.J+=(Ae-1)*Se.lb,Se.lb=-Se.lb);return 0}function ea(Ae,Se,je,Ze){if(Ze==null||0>=Ae||0>=Se)return 2;if(je!=null){if(je.Da){var on=je.cd,mn=je.bd,vn=-2&je.v,An=-2&je.j;if(0>vn||0>An||0>=on||0>=mn||vn+on>Ae||An+mn>Se)return 2;Ae=on,Se=mn}if(je.da){if(!yn(Ae,Se,on=[je.ib],mn=[je.hb]))return 2;Ae=on[0],Se=mn[0]}}Ze.width=Ae,Ze.height=Se;t:{var En=Ze.width,Fn=Ze.height;if(Ae=Ze.S,0>=En||0>=Fn||!(Ae>=yo&&13>Ae))Ae=2;else{if(0>=Ze.Rd&&Ze.sd==null){vn=mn=on=Se=0;var Hn=(An=En*wc[Ae])*Fn;if(11>Ae||(mn=(Fn+1)/2*(Se=(En+1)/2),Ae==12&&(vn=(on=En)*Fn)),(Fn=_e(Hn+2*mn+vn))==null){Ae=1;break t}Ze.sd=Fn,11>Ae?((En=Ze.f.RGBA).eb=Fn,En.fb=0,En.A=An,En.size=Hn):((En=Ze.f.kb).y=Fn,En.O=0,En.fa=An,En.Fd=Hn,En.f=Fn,En.N=0+Hn,En.Ab=Se,En.Cd=mn,En.ea=Fn,En.W=0+Hn+mn,En.Db=Se,En.Ed=mn,Ae==12&&(En.F=Fn,En.J=0+Hn+2*mn),En.Tc=vn,En.lb=on)}if(Se=1,on=Ze.S,mn=Ze.width,vn=Ze.height,on>=yo&&13>on)if(11>on)Ae=Ze.f.RGBA,Se&=(An=Math.abs(Ae.A))*(vn-1)+mn<=Ae.size,Se&=An>=mn*wc[on],Se&=Ae.eb!=null;else{Ae=Ze.f.kb,An=(mn+1)/2,Hn=(vn+1)/2,En=Math.abs(Ae.fa),Fn=Math.abs(Ae.Ab);var Qn=Math.abs(Ae.Db),Zn=Math.abs(Ae.lb),Xn=Zn*(vn-1)+mn;Se&=En*(vn-1)+mn<=Ae.Fd,Se&=Fn*(Hn-1)+An<=Ae.Cd,Se=(Se&=Qn*(Hn-1)+An<=Ae.Ed)&En>=mn&Fn>=An&Qn>=An,Se&=Ae.y!=null,Se&=Ae.f!=null,Se&=Ae.ea!=null,on==12&&(Se&=Zn>=mn,Se&=Xn<=Ae.Tc,Se&=Ae.F!=null)}else Se=0;Ae=Se?0:2}}return Ae!=0||je!=null&&je.fd&&(Ae=Ma(Ze)),Ae}var Lr=64,na=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ia=24,ra=32,Oa=8,Pr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Bn("Predictor0","PredictorAdd0"),Me.Predictor0=function(){return 4278190080},Me.Predictor1=function(Ae){return Ae},Me.Predictor2=function(Ae,Se,je){return Se[je+0]},Me.Predictor3=function(Ae,Se,je){return Se[je+1]},Me.Predictor4=function(Ae,Se,je){return Se[je-1]},Me.Predictor5=function(Ae,Se,je){return qn(qn(Ae,Se[je+1]),Se[je+0])},Me.Predictor6=function(Ae,Se,je){return qn(Ae,Se[je-1])},Me.Predictor7=function(Ae,Se,je){return qn(Ae,Se[je+0])},Me.Predictor8=function(Ae,Se,je){return qn(Se[je-1],Se[je+0])},Me.Predictor9=function(Ae,Se,je){return qn(Se[je+0],Se[je+1])},Me.Predictor10=function(Ae,Se,je){return qn(qn(Ae,Se[je-1]),qn(Se[je+0],Se[je+1]))},Me.Predictor11=function(Ae,Se,je){var Ze=Se[je+0];return 0>=Yn(Ze>>24&255,Ae>>24&255,(Se=Se[je-1])>>24&255)+Yn(Ze>>16&255,Ae>>16&255,Se>>16&255)+Yn(Ze>>8&255,Ae>>8&255,Se>>8&255)+Yn(255&Ze,255&Ae,255&Se)?Ze:Ae},Me.Predictor12=function(Ae,Se,je){var Ze=Se[je+0];return(Gn((Ae>>24&255)+(Ze>>24&255)-((Se=Se[je-1])>>24&255))<<24|Gn((Ae>>16&255)+(Ze>>16&255)-(Se>>16&255))<<16|Gn((Ae>>8&255)+(Ze>>8&255)-(Se>>8&255))<<8|Gn((255&Ae)+(255&Ze)-(255&Se)))>>>0},Me.Predictor13=function(Ae,Se,je){var Ze=Se[je-1];return($n((Ae=qn(Ae,Se[je+0]))>>24&255,Ze>>24&255)<<24|$n(Ae>>16&255,Ze>>16&255)<<16|$n(Ae>>8&255,Ze>>8&255)<<8|$n(Ae>>0&255,Ze>>0&255))>>>0};var gl=Me.PredictorAdd0;Me.PredictorAdd1=ni,Bn("Predictor2","PredictorAdd2"),Bn("Predictor3","PredictorAdd3"),Bn("Predictor4","PredictorAdd4"),Bn("Predictor5","PredictorAdd5"),Bn("Predictor6","PredictorAdd6"),Bn("Predictor7","PredictorAdd7"),Bn("Predictor8","PredictorAdd8"),Bn("Predictor9","PredictorAdd9"),Bn("Predictor10","PredictorAdd10"),Bn("Predictor11","PredictorAdd11"),Bn("Predictor12","PredictorAdd12"),Bn("Predictor13","PredictorAdd13");var Da=Me.PredictorAdd2;vi("ColorIndexInverseTransform","MapARGB","32b",function(Ae){return Ae>>8&255},function(Ae){return Ae}),vi("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(Ae){return Ae},function(Ae){return Ae>>8&255});var mo,Vr=Me.ColorIndexInverseTransform,ja=Me.MapARGB,ml=Me.VP8LColorIndexInverseTransformAlpha,bl=Me.MapAlpha,vs=Me.VP8LPredictorsAdd=[];vs.length=16,(Me.VP8LPredictors=[]).length=16,(Me.VP8LPredictorsAdd_C=[]).length=16,(Me.VP8LPredictors_C=[]).length=16;var Or,Gr,ys,ts,os,sa,$r,aa,Ba,As,Xr,ls,Os,oa,Ds,ws,qa,Dr,cs,er,nr,cr,fr,hs,xs,la,bo,nc,ic=_e(511),rc=_e(2041),sc=_e(225),ac=_e(767),oc=0,vl=rc,vo=sc,Rr=ac,jr=ic,yo=0,Ao=1,cc=2,wo=3,xo=4,yl=5,hc=6,Al=7,wl=8,_o=9,xl=10,oh=[2,3,7],lh=[3,3,11],uc=[280,256,256,256,40],ch=[0,1,1,1,0],hh=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],uh=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],dh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],fh=8,_l=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Sl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ua=null,ph=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],gh=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],dc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],mh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],bh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],vh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],yh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],_s=[],Yr=[],us=[],Ah=1,fc=2,Ss=[],Br=[];oi("UpsampleRgbLinePair",Wi,3),oi("UpsampleBgrLinePair",sr,3),oi("UpsampleRgbaLinePair",Wr,4),oi("UpsampleBgraLinePair",pr,4),oi("UpsampleArgbLinePair",Ar,4),oi("UpsampleRgba4444LinePair",hr,2),oi("UpsampleRgb565LinePair",ar,2);var wh=Me.UpsampleRgbLinePair,xh=Me.UpsampleBgrLinePair,pc=Me.UpsampleRgbaLinePair,gc=Me.UpsampleBgraLinePair,mc=Me.UpsampleArgbLinePair,bc=Me.UpsampleRgba4444LinePair,_h=Me.UpsampleRgb565LinePair,So=16,Eo=1<<So-1,za=-227,El=482,vc=6,Sh=(256<<vc)-1,yc=0,Eh=_e(256),Ch=_e(256),Lh=_e(256),Ph=_e(256),Nh=_e(El-za),kh=_e(El-za);as("YuvToRgbRow",Wi,3),as("YuvToBgrRow",sr,3),as("YuvToRgbaRow",Wr,4),as("YuvToBgraRow",pr,4),as("YuvToArgbRow",Ar,4),as("YuvToRgba4444Row",hr,2),as("YuvToRgb565Row",ar,2);var Ac=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Co=[0,2,8],Fh=[8,7,6,4,4,2,2,2,1,1,1,1],Rh=1;this.WebPDecodeRGBA=function(Ae,Se,je,Ze,on){var mn=Ao,vn=new Qs,An=new Ni;vn.ba=An,An.S=mn,An.width=[An.width],An.height=[An.height];var En=An.width,Fn=An.height,Hn=new Fi;if(Hn==null||Ae==null)var Qn=2;else t(Hn!=null),Qn=ta(Ae,Se,je,Hn.width,Hn.height,Hn.Pd,Hn.Qd,Hn.format,null);if(Qn!=0?En=0:(En!=null&&(En[0]=Hn.width[0]),Fn!=null&&(Fn[0]=Hn.height[0]),En=1),En){An.width=An.width[0],An.height=An.height[0],Ze!=null&&(Ze[0]=An.width),on!=null&&(on[0]=An.height);t:{if(Ze=new Vs,(on=new Pa).data=Ae,on.w=Se,on.ha=je,on.kd=1,Se=[0],t(on!=null),((Ae=ta(on.data,on.w,on.ha,null,null,null,Se,null,on))==0||Ae==7)&&Se[0]&&(Ae=4),(Se=Ae)==0){if(t(vn!=null),Ze.data=on.data,Ze.w=on.w+on.offset,Ze.ha=on.ha-on.offset,Ze.put=zi,Ze.ac=Ii,Ze.bc=Ti,Ze.ma=vn,on.xa){if((Ae=Mr())==null){vn=1;break t}if(function(Zn,Xn){var ui=[0],ai=[0],Wn=[0];e:for(;;){if(Zn==null)return 0;if(Xn==null)return Zn.a=2,0;if(Zn.l=Xn,Zn.a=0,Rn(Zn.m,Xn.data,Xn.w,Xn.ha),!Li(Zn.m,ui,ai,Wn)){Zn.a=3;break e}if(Zn.xb=fc,Xn.width=ui[0],Xn.height=ai[0],!Qr(ui[0],ai[0],1,Zn,null))break e;return 1}return t(Zn.a!=0),0}(Ae,Ze)){if(Ze=(Se=ea(Ze.width,Ze.height,vn.Oa,vn.ba))==0){e:{Ze=Ae;n:for(;;){if(Ze==null){Ze=0;break e}if(t(Ze.s.yc!=null),t(Ze.s.Ya!=null),t(0<Ze.s.Wb),t((je=Ze.l)!=null),t((on=je.ma)!=null),Ze.xb!=0){if(Ze.ca=on.ba,Ze.tb=on.tb,t(Ze.ca!=null),!Ia(on.Oa,je,wo)){Ze.a=2;break n}if(!Fs(Ze,je.width)||je.da)break n;if((je.da||Jn(Ze.ca.S))&&Kn(),11>Ze.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Ze.ca.f.kb.F!=null&&Kn()),Ze.Pb&&0<Ze.s.ua&&Ze.s.vb.X==null&&!Ke(Ze.s.vb,Ze.s.Wa.Xa)){Ze.a=1;break n}Ze.xb=0}if(!Er(Ze,Ze.V,Ze.Ba,Ze.c,Ze.i,je.o,wr))break n;on.Dc=Ze.Ma,Ze=1;break e}t(Ze.a!=0),Ze=0}Ze=!Ze}Ze&&(Se=Ae.a)}else Se=Ae.a}else{if((Ae=new Yo)==null){vn=1;break t}if(Ae.Fa=on.na,Ae.P=on.P,Ae.qc=on.Sa,Za(Ae,Ze)){if((Se=ea(Ze.width,Ze.height,vn.Oa,vn.ba))==0){if(Ae.Aa=0,je=vn.Oa,t((on=Ae)!=null),je!=null){if(0<(En=0>(En=je.Md)?0:100<En?255:255*En/100)){for(Fn=Hn=0;4>Fn;++Fn)12>(Qn=on.pb[Fn]).lc&&(Qn.ia=En*Fh[0>Qn.lc?0:Qn.lc]>>3),Hn|=Qn.ia;Hn&&(alert("todo:VP8InitRandom"),on.ia=1)}on.Ga=je.Id,100<on.Ga?on.Ga=100:0>on.Ga&&(on.Ga=0)}Ko(Ae,Ze)||(Se=Ae.a)}}else Se=Ae.a}Se==0&&vn.Oa!=null&&vn.Oa.fd&&(Se=Ma(vn.ba))}vn=Se}mn=vn!=0?null:11>mn?An.f.RGBA.eb:An.f.kb.y}else mn=null;return mn};var wc=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function Te(Me,tn){for(var dn="",Re=0;Re<4;Re++)dn+=String.fromCharCode(Me[tn++]);return dn}function Ie(Me,tn){return(Me[tn+0]<<0|Me[tn+1]<<8|Me[tn+2]<<16)>>>0}function Ve(Me,tn){return(Me[tn+0]<<0|Me[tn+1]<<8|Me[tn+2]<<16|Me[tn+3]<<24)>>>0}new Ce;var He=[0],ke=[0],qe=[],De=new Ce,Oe=e,Be=function(Me,tn){var dn={},Re=0,Qe=!1,cn=0,hn=0;if(dn.frames=[],!function(_n,sn,ze,Xe){for(var rn=0;rn<Xe;rn++)if(_n[sn+rn]!=ze.charCodeAt(rn))return!0;return!1}(Me,tn,"RIFF",4)){var Pn,kn;for(Ve(Me,tn+=4),tn+=8;tn<Me.length;){var Dn=Te(Me,tn),Rn=Ve(Me,tn+=4);tn+=4;var jn=Rn+(1&Rn);switch(Dn){case"VP8 ":case"VP8L":dn.frames[Re]===void 0&&(dn.frames[Re]={}),(an=dn.frames[Re]).src_off=Qe?hn:tn-8,an.src_size=cn+Rn+8,Re++,Qe&&(Qe=!1,cn=0,hn=0);break;case"VP8X":(an=dn.header={}).feature_flags=Me[tn];var zn=tn+4;an.canvas_width=1+Ie(Me,zn),zn+=3,an.canvas_height=1+Ie(Me,zn),zn+=3;break;case"ALPH":Qe=!0,cn=jn+8,hn=tn-8;break;case"ANIM":(an=dn.header).bgcolor=Ve(Me,tn),zn=tn+4,an.loop_count=(Pn=Me)[(kn=zn)+0]<<0|Pn[kn+1]<<8,zn+=2;break;case"ANMF":var ii,an;(an=dn.frames[Re]={}).offset_x=2*Ie(Me,tn),tn+=3,an.offset_y=2*Ie(Me,tn),tn+=3,an.width=1+Ie(Me,tn),tn+=3,an.height=1+Ie(Me,tn),tn+=3,an.duration=Ie(Me,tn),tn+=3,ii=Me[tn++],an.dispose=1&ii,an.blend=ii>>1&1}Dn!="ANMF"&&(tn+=jn)}return dn}}(Oe,0);Be.response=Oe,Be.rgbaoutput=!0,Be.dataurl=!1;var Ye=Be.header?Be.header:null,nn=Be.frames?Be.frames:null;if(Ye){Ye.loop_counter=Ye.loop_count,He=[Ye.canvas_height],ke=[Ye.canvas_width];for(var en=0;en<nn.length&&nn[en].blend!=0;en++);}var Ue=nn[0],Je=De.WebPDecodeRGBA(Oe,Ue.src_off,Ue.src_size,ke,He);Ue.rgba=Je,Ue.imgwidth=ke[0],Ue.imgheight=He[0];for(var Ge=0;Ge<ke[0]*He[0]*4;Ge++)qe[Ge]=Je[Ge];return this.width=ke,this.height=He,this.data=qe,this}(function(e){var t=function(){return typeof zlibSync=="function"},St=function(He,ke,qe,De){var Oe=4,Be=Ee;switch(De){case e.image_compression.FAST:Oe=1,Be=_e;break;case e.image_compression.MEDIUM:Oe=6,Be=Pe;break;case e.image_compression.SLOW:Oe=9,Be=Ce}He=r(He,ke,qe,Be);var Ye=zlibSync(He,{level:Oe});return e.__addimage__.arrayBufferToBinaryString(Ye)},r=function(He,ke,qe,De){for(var Oe,Be,Ye,nn=He.length/ke,en=new Uint8Array(He.length+nn),Ue=Ie(),Je=0;Je<nn;Je+=1){if(Ye=Je*ke,Oe=He.subarray(Ye,Ye+ke),De)en.set(De(Oe,qe,Be),Ye+Je);else{for(var Ge,Me=Ue.length,tn=[];Ge<Me;Ge+=1)tn[Ge]=Ue[Ge](Oe,qe,Be);var dn=Ve(tn.concat());en.set(tn[dn],Ye+Je)}Be=Oe}return en},xe=function(He){var ke=Array.apply([],He);return ke.unshift(0),ke},_e=function(He,ke){var qe,De=[],Oe=He.length;De[0]=1;for(var Be=0;Be<Oe;Be+=1)qe=He[Be-ke]||0,De[Be+1]=He[Be]-qe+256&255;return De},Ee=function(He,ke,qe){var De,Oe=[],Be=He.length;Oe[0]=2;for(var Ye=0;Ye<Be;Ye+=1)De=qe&&qe[Ye]||0,Oe[Ye+1]=He[Ye]-De+256&255;return Oe},Pe=function(He,ke,qe){var De,Oe,Be=[],Ye=He.length;Be[0]=3;for(var nn=0;nn<Ye;nn+=1)De=He[nn-ke]||0,Oe=qe&&qe[nn]||0,Be[nn+1]=He[nn]+256-(De+Oe>>>1)&255;return Be},Ce=function(He,ke,qe){var De,Oe,Be,Ye,nn=[],en=He.length;nn[0]=4;for(var Ue=0;Ue<en;Ue+=1)De=He[Ue-ke]||0,Oe=qe&&qe[Ue]||0,Be=qe&&qe[Ue-ke]||0,Ye=Te(De,Oe,Be),nn[Ue+1]=He[Ue]-Ye+256&255;return nn},Te=function(He,ke,qe){if(He===ke&&ke===qe)return He;var De=Math.abs(ke-qe),Oe=Math.abs(He-qe),Be=Math.abs(He+ke-qe-qe);return De<=Oe&&De<=Be?He:Oe<=Be?ke:qe},Ie=function(){return[xe,_e,Ee,Pe,Ce]},Ve=function(He){var ke=He.map(function(qe){return qe.reduce(function(De,Oe){return De+Math.abs(Oe)},0)});return ke.indexOf(Math.min.apply(null,ke))};e.processPNG=function(He,ke,qe,De){var Oe,Be,Ye,nn,en,Ue,Je,Ge,Me,tn,dn,Re,Qe,cn,hn,Pn=this.decode.FLATE_DECODE,kn="";if(this.__addimage__.isArrayBuffer(He)&&(He=new Uint8Array(He)),this.__addimage__.isArrayBufferView(He)){if(He=(Ye=new Kt(He)).imgData,Be=Ye.bits,Oe=Ye.colorSpace,en=Ye.colors,[4,6].indexOf(Ye.colorType)!==-1){if(Ye.bits===8){Me=(Ge=Ye.pixelBitlength==32?new Uint32Array(Ye.decodePixels().buffer):Ye.pixelBitlength==16?new Uint16Array(Ye.decodePixels().buffer):new Uint8Array(Ye.decodePixels().buffer)).length,dn=new Uint8Array(Me*Ye.colors),tn=new Uint8Array(Me);var Dn,Rn=Ye.pixelBitlength-Ye.bits;for(cn=0,hn=0;cn<Me;cn++){for(Qe=Ge[cn],Dn=0;Dn<Rn;)dn[hn++]=Qe>>>Dn&255,Dn+=Ye.bits;tn[cn]=Qe>>>Dn&255}}if(Ye.bits===16){Me=(Ge=new Uint32Array(Ye.decodePixels().buffer)).length,dn=new Uint8Array(Me*(32/Ye.pixelBitlength)*Ye.colors),tn=new Uint8Array(Me*(32/Ye.pixelBitlength)),Re=Ye.colors>1,cn=0,hn=0;for(var jn=0;cn<Me;)Qe=Ge[cn++],dn[hn++]=Qe>>>0&255,Re&&(dn[hn++]=Qe>>>16&255,Qe=Ge[cn++],dn[hn++]=Qe>>>0&255),tn[jn++]=Qe>>>16&255;Be=8}De!==e.image_compression.NONE&&t()?(He=St(dn,Ye.width*Ye.colors,Ye.colors,De),Je=St(tn,Ye.width,1,De)):(He=dn,Je=tn,Pn=void 0)}if(Ye.colorType===3&&(Oe=this.color_spaces.INDEXED,Ue=Ye.palette,Ye.transparency.indexed)){var zn=Ye.transparency.indexed,ii=0;for(cn=0,Me=zn.length;cn<Me;++cn)ii+=zn[cn];if((ii/=255)===Me-1&&zn.indexOf(0)!==-1)nn=[zn.indexOf(0)];else if(ii!==Me){for(Ge=Ye.decodePixels(),tn=new Uint8Array(Ge.length),cn=0,Me=Ge.length;cn<Me;cn++)tn[cn]=zn[Ge[cn]];Je=St(tn,Ye.width,1)}}var an=function(_n){var sn;switch(_n){case e.image_compression.FAST:sn=11;break;case e.image_compression.MEDIUM:sn=13;break;case e.image_compression.SLOW:sn=14;break;default:sn=12}return sn}(De);return Pn===this.decode.FLATE_DECODE&&(kn="/Predictor "+an+" "),kn+="/Colors "+en+" /BitsPerComponent "+Be+" /Columns "+Ye.width,(this.__addimage__.isArrayBuffer(He)||this.__addimage__.isArrayBufferView(He))&&(He=this.__addimage__.arrayBufferToBinaryString(He)),(Je&&this.__addimage__.isArrayBuffer(Je)||this.__addimage__.isArrayBufferView(Je))&&(Je=this.__addimage__.arrayBufferToBinaryString(Je)),{alias:qe,data:He,index:ke,filter:Pn,decodeParameters:kn,transparency:nn,palette:Ue,sMask:Je,predictor:an,width:Ye.width,height:Ye.height,bitsPerComponent:Be,colorSpace:Oe}}}})(E.API),function(e){e.processGIF89A=function(t,St,r,xe){var _e=new Zt(t),Ee=_e.width,Pe=_e.height,Ce=[];_e.decodeAndBlitFrameRGBA(0,Ce);var Te={data:Ce,width:Ee,height:Pe},Ie=new Qt(100).encode(Te,100);return e.processJPEG.call(this,Ie,St,r,xe)},e.processGIF87A=e.processGIF89A}(E.API),te.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var St=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),xe=this.datav.getUint8(this.pos++,!0),_e=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:xe,green:r,blue:St,quad:_e}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},te.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(St){a.log("bit decode error:"+St)}},te.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),St=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,xe=0;xe<t;xe++)for(var _e=this.datav.getUint8(this.pos++,!0),Ee=r*this.width*4+8*xe*4,Pe=0;Pe<8&&8*xe+Pe<this.width;Pe++){var Ce=this.palette[_e>>7-Pe&1];this.data[Ee+4*Pe]=Ce.blue,this.data[Ee+4*Pe+1]=Ce.green,this.data[Ee+4*Pe+2]=Ce.red,this.data[Ee+4*Pe+3]=255}St!==0&&(this.pos+=4-St)}},te.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,St=this.height-1;St>=0;St--){for(var r=this.bottom_up?St:this.height-1-St,xe=0;xe<e;xe++){var _e=this.datav.getUint8(this.pos++,!0),Ee=r*this.width*4+2*xe*4,Pe=_e>>4,Ce=15&_e,Te=this.palette[Pe];if(this.data[Ee]=Te.blue,this.data[Ee+1]=Te.green,this.data[Ee+2]=Te.red,this.data[Ee+3]=255,2*xe+1>=this.width)break;Te=this.palette[Ce],this.data[Ee+4]=Te.blue,this.data[Ee+4+1]=Te.green,this.data[Ee+4+2]=Te.red,this.data[Ee+4+3]=255}t!==0&&(this.pos+=4-t)}},te.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var St=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var xe=this.datav.getUint8(this.pos++,!0),_e=St*this.width*4+4*r;if(xe<this.palette.length){var Ee=this.palette[xe];this.data[_e]=Ee.red,this.data[_e+1]=Ee.green,this.data[_e+2]=Ee.blue,this.data[_e+3]=255}else this.data[_e]=255,this.data[_e+1]=255,this.data[_e+2]=255,this.data[_e+3]=255}e!==0&&(this.pos+=4-e)}},te.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),St=this.height-1;St>=0;St--){for(var r=this.bottom_up?St:this.height-1-St,xe=0;xe<this.width;xe++){var _e=this.datav.getUint16(this.pos,!0);this.pos+=2;var Ee=(_e&t)/t*255|0,Pe=(_e>>5&t)/t*255|0,Ce=(_e>>10&t)/t*255|0,Te=_e>>15?255:0,Ie=r*this.width*4+4*xe;this.data[Ie]=Ce,this.data[Ie+1]=Pe,this.data[Ie+2]=Ee,this.data[Ie+3]=Te}this.pos+=e}},te.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),St=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var xe=this.bottom_up?r:this.height-1-r,_e=0;_e<this.width;_e++){var Ee=this.datav.getUint16(this.pos,!0);this.pos+=2;var Pe=(Ee&t)/t*255|0,Ce=(Ee>>5&St)/St*255|0,Te=(Ee>>11)/t*255|0,Ie=xe*this.width*4+4*_e;this.data[Ie]=Te,this.data[Ie+1]=Ce,this.data[Ie+2]=Pe,this.data[Ie+3]=255}this.pos+=e}},te.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,St=0;St<this.width;St++){var r=this.datav.getUint8(this.pos++,!0),xe=this.datav.getUint8(this.pos++,!0),_e=this.datav.getUint8(this.pos++,!0),Ee=t*this.width*4+4*St;this.data[Ee]=_e,this.data[Ee+1]=xe,this.data[Ee+2]=r,this.data[Ee+3]=255}this.pos+=this.width%4}},te.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,St=0;St<this.width;St++){var r=this.datav.getUint8(this.pos++,!0),xe=this.datav.getUint8(this.pos++,!0),_e=this.datav.getUint8(this.pos++,!0),Ee=this.datav.getUint8(this.pos++,!0),Pe=t*this.width*4+4*St;this.data[Pe]=_e,this.data[Pe+1]=xe,this.data[Pe+2]=r,this.data[Pe+3]=Ee}},te.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,St,r,xe){var _e=new te(t,!1),Ee=_e.width,Pe=_e.height,Ce={data:_e.getData(),width:Ee,height:Pe},Te=new Qt(100).encode(Ce,100);return e.processJPEG.call(this,Te,St,r,xe)}}(E.API),ee.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,St,r,xe){var _e=new ee(t),Ee=_e.width,Pe=_e.height,Ce={data:_e.getData(),width:Ee,height:Pe},Te=new Qt(100).encode(Ce,100);return e.processJPEG.call(this,Te,St,r,xe)}}(E.API),E.API.processRGBA=function(e,t,St){for(var r=e.data,xe=r.length,_e=new Uint8Array(xe/4*3),Ee=new Uint8Array(xe/4),Pe=0,Ce=0,Te=0;Te<xe;Te+=4){var Ie=r[Te],Ve=r[Te+1],He=r[Te+2],ke=r[Te+3];_e[Pe++]=Ie,_e[Pe++]=Ve,_e[Pe++]=He,Ee[Ce++]=ke}var qe=this.__addimage__.arrayBufferToBinaryString(_e);return{alpha:this.__addimage__.arrayBufferToBinaryString(Ee),data:qe,index:t,alias:St,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},E.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vt=E.API,Gt=Vt.getCharWidthsArray=function(e,t){var St,r,xe=(t=t||{}).font||this.internal.getFont(),_e=t.fontSize||this.internal.getFontSize(),Ee=t.charSpace||this.internal.getCharSpace(),Pe=t.widths?t.widths:xe.metadata.Unicode.widths,Ce=Pe.fof?Pe.fof:1,Te=t.kerning?t.kerning:xe.metadata.Unicode.kerning,Ie=Te.fof?Te.fof:1,Ve=t.doKerning!==!1,He=0,ke=e.length,qe=0,De=Pe[0]||Ce,Oe=[];for(St=0;St<ke;St++)r=e.charCodeAt(St),typeof xe.metadata.widthOfString=="function"?Oe.push((xe.metadata.widthOfGlyph(xe.metadata.characterToGlyph(r))+Ee*(1e3/_e)||0)/1e3):(He=Ve&&_typeof(Te[r])==="object"&&!isNaN(parseInt(Te[r][qe],10))?Te[r][qe]/Ie:0,Oe.push((Pe[r]||De)/Ce+He)),qe=r;return Oe},Yt=Vt.getStringUnitWidth=function(e,t){var St=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),xe=t.charSpace||this.internal.getCharSpace();return Vt.processArabic&&(e=Vt.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,St,xe)/St:Gt.apply(this,arguments).reduce(function(_e,Ee){return _e+Ee},0)},Jt=function(e,t,St,r){for(var xe=[],_e=0,Ee=e.length,Pe=0;_e!==Ee&&Pe+t[_e]<St;)Pe+=t[_e],_e++;xe.push(e.slice(0,_e));var Ce=_e;for(Pe=0;_e!==Ee;)Pe+t[_e]>r&&(xe.push(e.slice(Ce,_e)),Pe=0,Ce=_e),Pe+=t[_e],_e++;return Ce!==_e&&xe.push(e.slice(Ce,_e)),xe},Xt=function(e,t,St){St||(St={});var r,xe,_e,Ee,Pe,Ce,Te,Ie=[],Ve=[Ie],He=St.textIndent||0,ke=0,qe=0,De=e.split(" "),Oe=Gt.apply(this,[" ",St])[0];if(Ce=St.lineIndent===-1?De[0].length+2:St.lineIndent||0){var Be=Array(Ce).join(" "),Ye=[];De.map(function(en){(en=en.split(/\s*\n/)).length>1?Ye=Ye.concat(en.map(function(Ue,Je){return(Je&&Ue.length?`
`:"")+Ue})):Ye.push(en[0])}),De=Ye,Ce=Yt.apply(this,[Be,St])}for(_e=0,Ee=De.length;_e<Ee;_e++){var nn=0;if(r=De[_e],Ce&&r[0]==`
`&&(r=r.substr(1),nn=1),He+ke+(qe=(xe=Gt.apply(this,[r,St])).reduce(function(en,Ue){return en+Ue},0))>t||nn){if(qe>t){for(Pe=Jt.apply(this,[r,xe,t-(He+ke),t]),Ie.push(Pe.shift()),Ie=[Pe.pop()];Pe.length;)Ve.push([Pe.shift()]);qe=xe.slice(r.length-(Ie[0]?Ie[0].length:0)).reduce(function(en,Ue){return en+Ue},0)}else Ie=[r];Ve.push(Ie),He=qe+Ce,ke=Oe}else Ie.push(r),He+=ke+qe,ke=Oe}return Te=Ce?function(en,Ue){return(Ue?Be:"")+en.join(" ")}:function(en){return en.join(" ")},Ve.map(Te)},Vt.splitTextToSize=function(e,t,St){var r,xe=(St=St||{}).fontSize||this.internal.getFontSize(),_e=(function(Ie){if(Ie.widths&&Ie.kerning)return{widths:Ie.widths,kerning:Ie.kerning};var Ve=this.internal.getFont(Ie.fontName,Ie.fontStyle);return Ve.metadata.Unicode?{widths:Ve.metadata.Unicode.widths||{0:1},kerning:Ve.metadata.Unicode.kerning||{}}:{font:Ve.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,St);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var Ee=1*this.internal.scaleFactor*t/xe;_e.textIndent=St.textIndent?1*St.textIndent*this.internal.scaleFactor/xe:0,_e.lineIndent=St.lineIndent;var Pe,Ce,Te=[];for(Pe=0,Ce=r.length;Pe<Ce;Pe++)Te=Te.concat(Xt.apply(this,[r[Pe],Ee,_e]));return Te},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",St={},r={},xe=0;xe<t.length;xe++)St[t[xe]]="0123456789abcdef"[xe],r["0123456789abcdef"[xe]]=t[xe];var _e=function(Ve){return"0x"+parseInt(Ve,10).toString(16)},Ee=e.__fontmetrics__.compress=function(Ve){var He,ke,qe,De,Oe=["{"];for(var Be in Ve){if(He=Ve[Be],isNaN(parseInt(Be,10))?ke="'"+Be+"'":(Be=parseInt(Be,10),ke=(ke=_e(Be).slice(2)).slice(0,-1)+r[ke.slice(-1)]),typeof He=="number")He<0?(qe=_e(He).slice(3),De="-"):(qe=_e(He).slice(2),De=""),qe=De+qe.slice(0,-1)+r[qe.slice(-1)];else{if(_typeof(He)!=="object")throw new Error("Don't know what to do with value type "+_typeof(He)+".");qe=Ee(He)}Oe.push(ke+qe)}return Oe.push("}"),Oe.join("")},Pe=e.__fontmetrics__.uncompress=function(Ve){if(typeof Ve!="string")throw new Error("Invalid argument passed to uncompress.");for(var He,ke,qe,De,Oe={},Be=1,Ye=Oe,nn=[],en="",Ue="",Je=Ve.length-1,Ge=1;Ge<Je;Ge+=1)(De=Ve[Ge])=="'"?He?(qe=He.join(""),He=void 0):He=[]:He?He.push(De):De=="{"?(nn.push([Ye,qe]),Ye={},qe=void 0):De=="}"?((ke=nn.pop())[0][ke[1]]=Ye,qe=void 0,Ye=ke[0]):De=="-"?Be=-1:qe===void 0?St.hasOwnProperty(De)?(en+=St[De],qe=parseInt(en,16)*Be,Be=1,en=""):en+=De:St.hasOwnProperty(De)?(Ue+=St[De],Ye[qe]=parseInt(Ue,16)*Be,Be=1,qe=void 0,Ue=""):Ue+=De;return Oe},Ce={codePages:["WinAnsiEncoding"],WinAnsiEncoding:Pe("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},Te={Unicode:{Courier:Ce,"Courier-Bold":Ce,"Courier-BoldOblique":Ce,"Courier-Oblique":Ce,Helvetica:Ce,"Helvetica-Bold":Ce,"Helvetica-BoldOblique":Ce,"Helvetica-Oblique":Ce,"Times-Roman":Ce,"Times-Bold":Ce,"Times-BoldItalic":Ce,"Times-Italic":Ce}},Ie={Unicode:{"Courier-Oblique":Pe("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":Pe("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":Pe("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:Pe("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":Pe("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":Pe("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:Pe("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:Pe("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":Pe("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:Pe("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":Pe("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":Pe("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":Pe("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":Pe("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(Ve){var He=Ve.font,ke=Ie.Unicode[He.postScriptName];ke&&(He.metadata.Unicode={},He.metadata.Unicode.widths=ke.widths,He.metadata.Unicode.kerning=ke.kerning);var qe=Te.Unicode[He.postScriptName];qe&&(He.metadata.Unicode.encoding=qe,He.encoding=qe.codePages[0])}])}(E.API),function(e){var t=function(St){for(var r=St.length,xe=new Uint8Array(r),_e=0;_e<r;_e++)xe[_e]=St.charCodeAt(_e);return xe};e.API.events.push(["addFont",function(St){var r=void 0,xe=St.font,_e=St.instance;if(!xe.isStandardFont){if(_e===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+xe.postScriptName+"').");if(typeof(r=_e.existsFileInVFS(xe.postScriptName)===!1?_e.loadFile(xe.postScriptName):_e.getFileFromVFS(xe.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+xe.postScriptName+"').");(function(Ee,Pe){Pe=/^\x00\x01\x00\x00/.test(Pe)?t(Pe):t(u(Pe)),Ee.metadata=e.API.TTFFont.open(Pe),Ee.metadata.Unicode=Ee.metadata.Unicode||{encoding:{},kerning:{},widths:[]},Ee.metadata.glyIdsUsed=[0]})(xe,r)}}])}(E),function(e){function t(){return(n.canvg?Promise.resolve(n.canvg):__vitePreload(()=>import("./index.es-21ebb03e.js"),["assets/index.es-21ebb03e.js","assets/index-a992da42.js","assets/index-aa1be764.css"])).catch(function(St){return Promise.reject(new Error("Could not load canvg: "+St))}).then(function(St){return St.default?St.default:St})}E.API.addSvgAsImage=function(St,r,xe,_e,Ee,Pe,Ce,Te){if(isNaN(r)||isNaN(xe))throw a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(_e)||isNaN(Ee))throw a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var Ie=document.createElement("canvas");Ie.width=_e,Ie.height=Ee;var Ve=Ie.getContext("2d");Ve.fillStyle="#fff",Ve.fillRect(0,0,Ie.width,Ie.height);var He={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},ke=this;return t().then(function(qe){return qe.fromString(Ve,St,He)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(qe){return qe.render(He)}).then(function(){ke.addImage(Ie.toDataURL("image/jpeg",1),r,xe,_e,Ee,Ce,Te)})}}(),E.API.putTotalPages=function(e){var t,St=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),St=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),St=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var xe=0;xe<this.internal.pages[r].length;xe++)this.internal.pages[r][xe]=this.internal.pages[r][xe].replace(t,St);return this},E.API.viewerPreferences=function(e,t){var St;e=e||{},t=t||!1;var r,xe,_e,Ee={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},Pe=Object.keys(Ee),Ce=[],Te=0,Ie=0,Ve=0;function He(qe,De){var Oe,Be=!1;for(Oe=0;Oe<qe.length;Oe+=1)qe[Oe]===De&&(Be=!0);return Be}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(Ee)),this.internal.viewerpreferences.isSubscribed=!1),St=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var ke=Pe.length;for(Ve=0;Ve<ke;Ve+=1)St[Pe[Ve]].value=St[Pe[Ve]].defaultValue,St[Pe[Ve]].explicitSet=!1}if(_typeof(e)==="object"){for(xe in e)if(_e=e[xe],He(Pe,xe)&&_e!==void 0){if(St[xe].type==="boolean"&&typeof _e=="boolean")St[xe].value=_e;else if(St[xe].type==="name"&&He(St[xe].valueSet,_e))St[xe].value=_e;else if(St[xe].type==="integer"&&Number.isInteger(_e))St[xe].value=_e;else if(St[xe].type==="array"){for(Te=0;Te<_e.length;Te+=1)if(r=!0,_e[Te].length===1&&typeof _e[Te][0]=="number")Ce.push(String(_e[Te]-1));else if(_e[Te].length>1){for(Ie=0;Ie<_e[Te].length;Ie+=1)typeof _e[Te][Ie]!="number"&&(r=!1);r===!0&&Ce.push([_e[Te][0]-1,_e[Te][1]-1].join(" "))}St[xe].value="["+Ce.join(" ")+"]"}else St[xe].value=St[xe].defaultValue;St[xe].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var qe,De=[];for(qe in St)St[qe].explicitSet===!0&&(St[qe].type==="name"?De.push("/"+qe+" /"+St[qe].value):De.push("/"+qe+" "+St[qe].value));De.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+De.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=St,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',xe=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),_e=unescape(encodeURIComponent(r)),Ee=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),Pe=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),Ce=unescape(encodeURIComponent("</x:xmpmeta>")),Te=_e.length+Ee.length+Pe.length+xe.length+Ce.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+Te+" >>"),this.internal.write("stream"),this.internal.write(xe+_e+Ee+Pe+Ce),this.internal.write("endstream"),this.internal.write("endobj")},St=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,xe){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:xe||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",St),this.internal.events.subscribe("postPutResources",t)),this}}(E.API),function(e){var t=e.API,St=t.pdfEscape16=function(_e,Ee){for(var Pe,Ce=Ee.metadata.Unicode.widths,Te=["","0","00","000","0000"],Ie=[""],Ve=0,He=_e.length;Ve<He;++Ve){if(Pe=Ee.metadata.characterToGlyph(_e.charCodeAt(Ve)),Ee.metadata.glyIdsUsed.push(Pe),Ee.metadata.toUnicode[Pe]=_e.charCodeAt(Ve),Ce.indexOf(Pe)==-1&&(Ce.push(Pe),Ce.push([parseInt(Ee.metadata.widthOfGlyph(Pe),10)])),Pe=="0")return Ie.join("");Pe=Pe.toString(16),Ie.push(Te[4-Pe.length],Pe)}return Ie.join("")},r=function(_e){var Ee,Pe,Ce,Te,Ie,Ve,He;for(Ie=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,Ce=[],Ve=0,He=(Pe=Object.keys(_e).sort(function(ke,qe){return ke-qe})).length;Ve<He;Ve++)Ee=Pe[Ve],Ce.length>=100&&(Ie+=`
`+Ce.length+` beginbfchar
`+Ce.join(`
`)+`
endbfchar`,Ce=[]),_e[Ee]!==void 0&&_e[Ee]!==null&&typeof _e[Ee].toString=="function"&&(Te=("0000"+_e[Ee].toString(16)).slice(-4),Ee=("0000"+(+Ee).toString(16)).slice(-4),Ce.push("<"+Ee+"><"+Te+">"));return Ce.length&&(Ie+=`
`+Ce.length+` beginbfchar
`+Ce.join(`
`)+`
endbfchar
`),Ie+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(_e){(function(Ee){var Pe=Ee.font,Ce=Ee.out,Te=Ee.newObject,Ie=Ee.putStream;if(Pe.metadata instanceof e.API.TTFFont&&Pe.encoding==="Identity-H"){for(var Ve=Pe.metadata.Unicode.widths,He=Pe.metadata.subset.encode(Pe.metadata.glyIdsUsed,1),ke="",qe=0;qe<He.length;qe++)ke+=String.fromCharCode(He[qe]);var De=Te();Ie({data:ke,addLength1:!0,objectId:De}),Ce("endobj");var Oe=Te();Ie({data:r(Pe.metadata.toUnicode),addLength1:!0,objectId:Oe}),Ce("endobj");var Be=Te();Ce("<<"),Ce("/Type /FontDescriptor"),Ce("/FontName /"+F(Pe.fontName)),Ce("/FontFile2 "+De+" 0 R"),Ce("/FontBBox "+e.API.PDFObject.convert(Pe.metadata.bbox)),Ce("/Flags "+Pe.metadata.flags),Ce("/StemV "+Pe.metadata.stemV),Ce("/ItalicAngle "+Pe.metadata.italicAngle),Ce("/Ascent "+Pe.metadata.ascender),Ce("/Descent "+Pe.metadata.decender),Ce("/CapHeight "+Pe.metadata.capHeight),Ce(">>"),Ce("endobj");var Ye=Te();Ce("<<"),Ce("/Type /Font"),Ce("/BaseFont /"+F(Pe.fontName)),Ce("/FontDescriptor "+Be+" 0 R"),Ce("/W "+e.API.PDFObject.convert(Ve)),Ce("/CIDToGIDMap /Identity"),Ce("/DW 1000"),Ce("/Subtype /CIDFontType2"),Ce("/CIDSystemInfo"),Ce("<<"),Ce("/Supplement 0"),Ce("/Registry (Adobe)"),Ce("/Ordering ("+Pe.encoding+")"),Ce(">>"),Ce(">>"),Ce("endobj"),Pe.objectNumber=Te(),Ce("<<"),Ce("/Type /Font"),Ce("/Subtype /Type0"),Ce("/ToUnicode "+Oe+" 0 R"),Ce("/BaseFont /"+F(Pe.fontName)),Ce("/Encoding /"+Pe.encoding),Ce("/DescendantFonts ["+Ye+" 0 R]"),Ce(">>"),Ce("endobj"),Pe.isAlreadyPutted=!0}})(_e)}]),t.events.push(["putFont",function(_e){(function(Ee){var Pe=Ee.font,Ce=Ee.out,Te=Ee.newObject,Ie=Ee.putStream;if(Pe.metadata instanceof e.API.TTFFont&&Pe.encoding==="WinAnsiEncoding"){for(var Ve=Pe.metadata.rawData,He="",ke=0;ke<Ve.length;ke++)He+=String.fromCharCode(Ve[ke]);var qe=Te();Ie({data:He,addLength1:!0,objectId:qe}),Ce("endobj");var De=Te();Ie({data:r(Pe.metadata.toUnicode),addLength1:!0,objectId:De}),Ce("endobj");var Oe=Te();Ce("<<"),Ce("/Descent "+Pe.metadata.decender),Ce("/CapHeight "+Pe.metadata.capHeight),Ce("/StemV "+Pe.metadata.stemV),Ce("/Type /FontDescriptor"),Ce("/FontFile2 "+qe+" 0 R"),Ce("/Flags 96"),Ce("/FontBBox "+e.API.PDFObject.convert(Pe.metadata.bbox)),Ce("/FontName /"+F(Pe.fontName)),Ce("/ItalicAngle "+Pe.metadata.italicAngle),Ce("/Ascent "+Pe.metadata.ascender),Ce(">>"),Ce("endobj"),Pe.objectNumber=Te();for(var Be=0;Be<Pe.metadata.hmtx.widths.length;Be++)Pe.metadata.hmtx.widths[Be]=parseInt(Pe.metadata.hmtx.widths[Be]*(1e3/Pe.metadata.head.unitsPerEm));Ce("<</Subtype/TrueType/Type/Font/ToUnicode "+De+" 0 R/BaseFont/"+F(Pe.fontName)+"/FontDescriptor "+Oe+" 0 R/Encoding/"+Pe.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(Pe.metadata.hmtx.widths)+">>"),Ce("endobj"),Pe.isAlreadyPutted=!0}})(_e)}]);var xe=function(_e){var Ee,Pe=_e.text||"",Ce=_e.x,Te=_e.y,Ie=_e.options||{},Ve=_e.mutex||{},He=Ve.pdfEscape,ke=Ve.activeFontKey,qe=Ve.fonts,De=ke,Oe="",Be=0,Ye="",nn=qe[De].encoding;if(qe[De].encoding!=="Identity-H")return{text:Pe,x:Ce,y:Te,options:Ie,mutex:Ve};for(Ye=Pe,De=ke,Array.isArray(Pe)&&(Ye=Pe[0]),Be=0;Be<Ye.length;Be+=1)qe[De].metadata.hasOwnProperty("cmap")&&(Ee=qe[De].metadata.cmap.unicode.codeMap[Ye[Be].charCodeAt(0)]),Ee||Ye[Be].charCodeAt(0)<256&&qe[De].metadata.hasOwnProperty("Unicode")?Oe+=Ye[Be]:Oe+="";var en="";return parseInt(De.slice(1))<14||nn==="WinAnsiEncoding"?en=He(Oe,De).split("").map(function(Ue){return Ue.charCodeAt(0).toString(16)}).join(""):nn==="Identity-H"&&(en=St(Oe,qe[De])),Ve.isHex=!0,{text:en,x:Ce,y:Te,options:Ie,mutex:Ve}};t.events.push(["postProcessText",function(_e){var Ee=_e.text||"",Pe=[],Ce={text:Ee,x:_e.x,y:_e.y,options:_e.options,mutex:_e.mutex};if(Array.isArray(Ee)){var Te=0;for(Te=0;Te<Ee.length;Te+=1)Array.isArray(Ee[Te])&&Ee[Te].length===3?Pe.push([xe(Object.assign({},Ce,{text:Ee[Te][0]})).text,Ee[Te][1],Ee[Te][2]]):Pe.push(xe(Object.assign({},Ce,{text:Ee[Te]})).text);_e.text=Pe}else _e.text=xe(Object.assign({},Ce,{text:Ee})).text}])}(E),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(St){return t.call(this),this.internal.vFS[St]!==void 0},e.addFileToVFS=function(St,r){return t.call(this),this.internal.vFS[St]=r,this},e.getFileFromVFS=function(St){return t.call(this),this.internal.vFS[St]!==void 0?this.internal.vFS[St]:null}}(E.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var xe,_e,Ee,Pe,Ce,Te,Ie,Ve=t,He=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],ke=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],qe={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},De={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},Oe=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],Be=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Ye=!1,nn=0;this.__bidiEngine__={};var en=function(Re){var Qe=Re.charCodeAt(),cn=Qe>>8,hn=De[cn];return hn!==void 0?Ve[256*hn+(255&Qe)]:cn===252||cn===253?"AL":Be.test(cn)?"L":cn===8?"R":"N"},Ue=function(Re){for(var Qe,cn=0;cn<Re.length;cn++){if((Qe=en(Re.charAt(cn)))==="L")return!1;if(Qe==="R")return!0}return!1},Je=function(Re,Qe,cn,hn){var Pn,kn,Dn,Rn,jn=Qe[hn];switch(jn){case"L":case"R":Ye=!1;break;case"N":case"AN":break;case"EN":Ye&&(jn="AN");break;case"AL":Ye=!0,jn="R";break;case"WS":jn="N";break;case"CS":hn<1||hn+1>=Qe.length||(Pn=cn[hn-1])!=="EN"&&Pn!=="AN"||(kn=Qe[hn+1])!=="EN"&&kn!=="AN"?jn="N":Ye&&(kn="AN"),jn=kn===Pn?kn:"N";break;case"ES":jn=(Pn=hn>0?cn[hn-1]:"B")==="EN"&&hn+1<Qe.length&&Qe[hn+1]==="EN"?"EN":"N";break;case"ET":if(hn>0&&cn[hn-1]==="EN"){jn="EN";break}if(Ye){jn="N";break}for(Dn=hn+1,Rn=Qe.length;Dn<Rn&&Qe[Dn]==="ET";)Dn++;jn=Dn<Rn&&Qe[Dn]==="EN"?"EN":"N";break;case"NSM":if(Ee&&!Pe){for(Rn=Qe.length,Dn=hn+1;Dn<Rn&&Qe[Dn]==="NSM";)Dn++;if(Dn<Rn){var zn=Re[hn],ii=zn>=1425&&zn<=2303||zn===64286;if(Pn=Qe[Dn],ii&&(Pn==="R"||Pn==="AL")){jn="R";break}}}jn=hn<1||(Pn=Qe[hn-1])==="B"?"N":cn[hn-1];break;case"B":Ye=!1,xe=!0,jn=nn;break;case"S":_e=!0,jn="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Ye=!1;break;case"BN":jn="N"}return jn},Ge=function(Re,Qe,cn){var hn=Re.split("");return cn&&Me(hn,cn,{hiLevel:nn}),hn.reverse(),Qe&&Qe.reverse(),hn.join("")},Me=function(Re,Qe,cn){var hn,Pn,kn,Dn,Rn,jn=-1,zn=Re.length,ii=0,an=[],_n=nn?ke:He,sn=[];for(Ye=!1,xe=!1,_e=!1,Pn=0;Pn<zn;Pn++)sn[Pn]=en(Re[Pn]);for(kn=0;kn<zn;kn++){if(Rn=ii,an[kn]=Je(Re,sn,an,kn),hn=240&(ii=_n[Rn][qe[an[kn]]]),ii&=15,Qe[kn]=Dn=_n[ii][5],hn>0)if(hn===16){for(Pn=jn;Pn<kn;Pn++)Qe[Pn]=1;jn=-1}else jn=-1;if(_n[ii][6])jn===-1&&(jn=kn);else if(jn>-1){for(Pn=jn;Pn<kn;Pn++)Qe[Pn]=Dn;jn=-1}sn[kn]==="B"&&(Qe[kn]=0),cn.hiLevel|=Dn}_e&&function(ze,Xe,rn){for(var gn=0;gn<rn;gn++)if(ze[gn]==="S"){Xe[gn]=nn;for(var fn=gn-1;fn>=0&&ze[fn]==="WS";fn--)Xe[fn]=nn}}(sn,Qe,zn)},tn=function(Re,Qe,cn,hn,Pn){if(!(Pn.hiLevel<Re)){if(Re===1&&nn===1&&!xe)return Qe.reverse(),void(cn&&cn.reverse());for(var kn,Dn,Rn,jn,zn=Qe.length,ii=0;ii<zn;){if(hn[ii]>=Re){for(Rn=ii+1;Rn<zn&&hn[Rn]>=Re;)Rn++;for(jn=ii,Dn=Rn-1;jn<Dn;jn++,Dn--)kn=Qe[jn],Qe[jn]=Qe[Dn],Qe[Dn]=kn,cn&&(kn=cn[jn],cn[jn]=cn[Dn],cn[Dn]=kn);ii=Rn}ii++}}},dn=function(Re,Qe,cn){var hn=Re.split(""),Pn={hiLevel:nn};return cn||(cn=[]),Me(hn,cn,Pn),function(kn,Dn,Rn){if(Rn.hiLevel!==0&&Ie)for(var jn,zn=0;zn<kn.length;zn++)Dn[zn]===1&&(jn=Oe.indexOf(kn[zn]))>=0&&(kn[zn]=Oe[jn+1])}(hn,cn,Pn),tn(2,hn,Qe,cn,Pn),tn(1,hn,Qe,cn,Pn),hn.join("")};return this.__bidiEngine__.doBidiReorder=function(Re,Qe,cn){if(function(Pn,kn){if(kn)for(var Dn=0;Dn<Pn.length;Dn++)kn[Dn]=Dn;Pe===void 0&&(Pe=Ue(Pn)),Te===void 0&&(Te=Ue(Pn))}(Re,Qe),Ee||!Ce||Te)if(Ee&&Ce&&Pe^Te)nn=Pe?1:0,Re=Ge(Re,Qe,cn);else if(!Ee&&Ce&&Te)nn=Pe?1:0,Re=dn(Re,Qe,cn),Re=Ge(Re,Qe);else if(!Ee||Pe||Ce||Te){if(Ee&&!Ce&&Pe^Te)Re=Ge(Re,Qe),Pe?(nn=0,Re=dn(Re,Qe,cn)):(nn=1,Re=dn(Re,Qe,cn),Re=Ge(Re,Qe));else if(Ee&&Pe&&!Ce&&Te)nn=1,Re=dn(Re,Qe,cn),Re=Ge(Re,Qe);else if(!Ee&&!Ce&&Pe^Te){var hn=Ie;Pe?(nn=1,Re=dn(Re,Qe,cn),nn=0,Ie=!1,Re=dn(Re,Qe,cn),Ie=hn):(nn=0,Re=dn(Re,Qe,cn),Re=Ge(Re,Qe),nn=1,Ie=!1,Re=dn(Re,Qe,cn),Ie=hn,Re=Ge(Re,Qe))}}else nn=0,Re=dn(Re,Qe,cn);else nn=Pe?1:0,Re=dn(Re,Qe,cn);return Re},this.__bidiEngine__.setOptions=function(Re){Re&&(Ee=Re.isInputVisual,Ce=Re.isOutputVisual,Pe=Re.isInputRtl,Te=Re.isOutputRtl,Ie=Re.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],St=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var xe=r.text,_e=(r.x,r.y,r.options||{}),Ee=(r.mutex,_e.lang,[]);if(_e.isInputVisual=typeof _e.isInputVisual!="boolean"||_e.isInputVisual,St.setOptions(_e),Object.prototype.toString.call(xe)==="[object Array]"){var Pe=0;for(Ee=[],Pe=0;Pe<xe.length;Pe+=1)Object.prototype.toString.call(xe[Pe])==="[object Array]"?Ee.push([St.doBidiReorder(xe[Pe][0]),xe[Pe][1],xe[Pe][2]]):Ee.push([St.doBidiReorder(xe[Pe])]);r.text=Ee}else r.text=St.doBidiReorder(xe);St.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function e(t){var St;if(this.rawData=t,St=this.contents=new ne(t),this.contents.pos=4,St.readString(4)==="ttcf")throw new Error("TTCF not supported.");St.pos=0,this.parse(),this.subset=new Le(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new ie(this.contents),this.head=new se(this),this.name=new pe(this),this.cmap=new ue(this),this.toUnicode={},this.hhea=new he(this),this.maxp=new ge(this),this.hmtx=new me(this),this.post=new fe(this),this.os2=new le(this),this.loca=new Ne(this),this.glyf=new be(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,St,r,xe,_e;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var Ee,Pe,Ce,Te;for(Te=[],Ee=0,Pe=(Ce=this.bbox).length;Ee<Pe;Ee++)t=Ce[Ee],Te.push(Math.round(t*this.scaleFactor));return Te}).call(this),this.stemV=0,this.post.exists?(r=255&(xe=this.post.italic_angle),32768&(St=xe>>16)&&(St=-(1+(65535^St))),this.italicAngle=+(St+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(_e=this.familyClass)===1||_e===2||_e===3||_e===4||_e===5||_e===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var St;return((St=this.cmap.unicode)!=null?St.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var St;return St=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*St},e.prototype.widthOfString=function(t,St,r){var xe,_e,Ee,Pe;for(Ee=0,_e=0,Pe=(t=""+t).length;0<=Pe?_e<Pe:_e>Pe;_e=0<=Pe?++_e:--_e)xe=t.charCodeAt(_e),Ee+=this.widthOfGlyph(this.characterToGlyph(xe))+r*(1e3/St)||0;return Ee*(St/1e3)},e.prototype.lineHeight=function(t,St){var r;return St==null&&(St=!1),r=St?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var re,ne=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var St,r;for(r=[],St=0;0<=t?St<t:St>t;St=0<=t?++St:--St)r[St]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var St,r,xe;for(xe=[],St=0,r=t.length;0<=r?St<r:St>r;St=0<=r?++St:--St)xe.push(this.writeByte(t.charCodeAt(St)));return xe},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,St,r,xe,_e,Ee,Pe,Ce;return t=this.readByte(),St=this.readByte(),r=this.readByte(),xe=this.readByte(),_e=this.readByte(),Ee=this.readByte(),Pe=this.readByte(),Ce=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^St)+1099511627776*(255^r)+4294967296*(255^xe)+16777216*(255^_e)+65536*(255^Ee)+256*(255^Pe)+(255^Ce)+1):72057594037927940*t+281474976710656*St+1099511627776*r+4294967296*xe+16777216*_e+65536*Ee+256*Pe+Ce},e.prototype.writeLongLong=function(t){var St,r;return St=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(St>>24&255),this.writeByte(St>>16&255),this.writeByte(St>>8&255),this.writeByte(255&St),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var St,r;for(St=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)St.push(this.readByte());return St},e.prototype.write=function(t){var St,r,xe,_e;for(_e=[],r=0,xe=t.length;r<xe;r++)St=t[r],_e.push(this.writeByte(St));return _e},e}(),ie=function(){var e;function t(St){var r,xe,_e;for(this.scalarType=St.readInt(),this.tableCount=St.readShort(),this.searchRange=St.readShort(),this.entrySelector=St.readShort(),this.rangeShift=St.readShort(),this.tables={},xe=0,_e=this.tableCount;0<=_e?xe<_e:xe>_e;xe=0<=_e?++xe:--xe)r={tag:St.readString(4),checksum:St.readInt(),offset:St.readInt(),length:St.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(St){var r,xe,_e,Ee,Pe,Ce,Te,Ie,Ve,He,ke,qe,De;for(De in ke=Object.keys(St).length,Ce=Math.log(2),Ve=16*Math.floor(Math.log(ke)/Ce),Ee=Math.floor(Ve/Ce),Ie=16*ke-Ve,(xe=new ne).writeInt(this.scalarType),xe.writeShort(ke),xe.writeShort(Ve),xe.writeShort(Ee),xe.writeShort(Ie),_e=16*ke,Te=xe.pos+_e,Pe=null,qe=[],St)for(He=St[De],xe.writeString(De),xe.writeInt(e(He)),xe.writeInt(Te),xe.writeInt(He.length),qe=qe.concat(He),De==="head"&&(Pe=Te),Te+=He.length;Te%4;)qe.push(0),Te++;return xe.write(qe),r=2981146554-e(xe.data),xe.pos=Pe+8,xe.writeUInt32(r),xe.data},e=function(St){var r,xe,_e,Ee;for(St=ve.call(St);St.length%4;)St.push(0);for(_e=new ne(St),xe=0,r=0,Ee=St.length;r<Ee;r=r+=4)xe+=_e.readUInt32();return 4294967295&xe},t}(),ae={}.hasOwnProperty,oe=function(e,t){for(var St in t)ae.call(t,St)&&(e[St]=t[St]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};re=function(){function e(t){var St;this.file=t,St=this.file.directory.tables[this.tag],this.exists=!!St,St&&(this.offset=St.offset,this.length=St.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var se=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="head",t.prototype.parse=function(St){return St.pos=this.offset,this.version=St.readInt(),this.revision=St.readInt(),this.checkSumAdjustment=St.readInt(),this.magicNumber=St.readInt(),this.flags=St.readShort(),this.unitsPerEm=St.readShort(),this.created=St.readLongLong(),this.modified=St.readLongLong(),this.xMin=St.readShort(),this.yMin=St.readShort(),this.xMax=St.readShort(),this.yMax=St.readShort(),this.macStyle=St.readShort(),this.lowestRecPPEM=St.readShort(),this.fontDirectionHint=St.readShort(),this.indexToLocFormat=St.readShort(),this.glyphDataFormat=St.readShort()},t.prototype.encode=function(St){var r;return(r=new ne).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(St),r.writeShort(this.glyphDataFormat),r.data},t}(),ce=function(){function e(t,St){var r,xe,_e,Ee,Pe,Ce,Te,Ie,Ve,He,ke,qe,De,Oe,Be,Ye,nn;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=St+t.readInt(),Ve=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(Ce=0;Ce<256;++Ce)this.codeMap[Ce]=t.readByte();break;case 4:for(ke=t.readUInt16(),He=ke/2,t.pos+=6,_e=function(){var en,Ue;for(Ue=[],Ce=en=0;0<=He?en<He:en>He;Ce=0<=He?++en:--en)Ue.push(t.readUInt16());return Ue}(),t.pos+=2,De=function(){var en,Ue;for(Ue=[],Ce=en=0;0<=He?en<He:en>He;Ce=0<=He?++en:--en)Ue.push(t.readUInt16());return Ue}(),Te=function(){var en,Ue;for(Ue=[],Ce=en=0;0<=He?en<He:en>He;Ce=0<=He?++en:--en)Ue.push(t.readUInt16());return Ue}(),Ie=function(){var en,Ue;for(Ue=[],Ce=en=0;0<=He?en<He:en>He;Ce=0<=He?++en:--en)Ue.push(t.readUInt16());return Ue}(),xe=(this.length-t.pos+this.offset)/2,Pe=function(){var en,Ue;for(Ue=[],Ce=en=0;0<=xe?en<xe:en>xe;Ce=0<=xe?++en:--en)Ue.push(t.readUInt16());return Ue}(),Ce=Be=0,nn=_e.length;Be<nn;Ce=++Be)for(Oe=_e[Ce],r=Ye=qe=De[Ce];qe<=Oe?Ye<=Oe:Ye>=Oe;r=qe<=Oe?++Ye:--Ye)Ie[Ce]===0?Ee=r+Te[Ce]:(Ee=Pe[Ie[Ce]/2+(r-qe)-(He-Ce)]||0)!==0&&(Ee+=Te[Ce]),this.codeMap[r]=65535&Ee}t.pos=Ve}return e.encode=function(t,St){var r,xe,_e,Ee,Pe,Ce,Te,Ie,Ve,He,ke,qe,De,Oe,Be,Ye,nn,en,Ue,Je,Ge,Me,tn,dn,Re,Qe,cn,hn,Pn,kn,Dn,Rn,jn,zn,ii,an,_n,sn,ze,Xe,rn,gn,fn,Nn,wn,xn;switch(hn=new ne,Ee=Object.keys(t).sort(function(Sn,Ke){return Sn-Ke}),St){case"macroman":for(De=0,Oe=function(){var Sn=[];for(qe=0;qe<256;++qe)Sn.push(0);return Sn}(),Ye={0:0},_e={},Pn=0,jn=Ee.length;Pn<jn;Pn++)Ye[fn=t[xe=Ee[Pn]]]==null&&(Ye[fn]=++De),_e[xe]={old:t[xe],new:Ye[t[xe]]},Oe[xe]=Ye[t[xe]];return hn.writeUInt16(1),hn.writeUInt16(0),hn.writeUInt32(12),hn.writeUInt16(0),hn.writeUInt16(262),hn.writeUInt16(0),hn.write(Oe),{charMap:_e,subtable:hn.data,maxGlyphID:De+1};case"unicode":for(Qe=[],Ve=[],nn=0,Ye={},r={},Be=Te=null,kn=0,zn=Ee.length;kn<zn;kn++)Ye[Ue=t[xe=Ee[kn]]]==null&&(Ye[Ue]=++nn),r[xe]={old:Ue,new:Ye[Ue]},Pe=Ye[Ue]-xe,Be!=null&&Pe===Te||(Be&&Ve.push(Be),Qe.push(xe),Te=Pe),Be=xe;for(Be&&Ve.push(Be),Ve.push(65535),Qe.push(65535),dn=2*(tn=Qe.length),Me=2*Math.pow(Math.log(tn)/Math.LN2,2),He=Math.log(Me/2)/Math.LN2,Ge=2*tn-Me,Ce=[],Je=[],ke=[],qe=Dn=0,ii=Qe.length;Dn<ii;qe=++Dn){if(Re=Qe[qe],Ie=Ve[qe],Re===65535){Ce.push(0),Je.push(0);break}if(Re-(cn=r[Re].new)>=32768)for(Ce.push(0),Je.push(2*(ke.length+tn-qe)),xe=Rn=Re;Re<=Ie?Rn<=Ie:Rn>=Ie;xe=Re<=Ie?++Rn:--Rn)ke.push(r[xe].new);else Ce.push(cn-Re),Je.push(0)}for(hn.writeUInt16(3),hn.writeUInt16(1),hn.writeUInt32(12),hn.writeUInt16(4),hn.writeUInt16(16+8*tn+2*ke.length),hn.writeUInt16(0),hn.writeUInt16(dn),hn.writeUInt16(Me),hn.writeUInt16(He),hn.writeUInt16(Ge),rn=0,an=Ve.length;rn<an;rn++)xe=Ve[rn],hn.writeUInt16(xe);for(hn.writeUInt16(0),gn=0,_n=Qe.length;gn<_n;gn++)xe=Qe[gn],hn.writeUInt16(xe);for(Nn=0,sn=Ce.length;Nn<sn;Nn++)Pe=Ce[Nn],hn.writeUInt16(Pe);for(wn=0,ze=Je.length;wn<ze;wn++)en=Je[wn],hn.writeUInt16(en);for(xn=0,Xe=ke.length;xn<Xe;xn++)De=ke[xn],hn.writeUInt16(De);return{charMap:r,subtable:hn.data,maxGlyphID:nn+1}}},e}(),ue=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="cmap",t.prototype.parse=function(St){var r,xe,_e;for(St.pos=this.offset,this.version=St.readUInt16(),_e=St.readUInt16(),this.tables=[],this.unicode=null,xe=0;0<=_e?xe<_e:xe>_e;xe=0<=_e?++xe:--xe)r=new ce(St,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(St,r){var xe,_e;return r==null&&(r="macroman"),xe=ce.encode(St,r),(_e=new ne).writeUInt16(0),_e.writeUInt16(1),xe.table=_e.data.concat(xe.subtable),xe},t}(),he=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="hhea",t.prototype.parse=function(St){return St.pos=this.offset,this.version=St.readInt(),this.ascender=St.readShort(),this.decender=St.readShort(),this.lineGap=St.readShort(),this.advanceWidthMax=St.readShort(),this.minLeftSideBearing=St.readShort(),this.minRightSideBearing=St.readShort(),this.xMaxExtent=St.readShort(),this.caretSlopeRise=St.readShort(),this.caretSlopeRun=St.readShort(),this.caretOffset=St.readShort(),St.pos+=8,this.metricDataFormat=St.readShort(),this.numberOfMetrics=St.readUInt16()},t}(),le=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="OS/2",t.prototype.parse=function(St){if(St.pos=this.offset,this.version=St.readUInt16(),this.averageCharWidth=St.readShort(),this.weightClass=St.readUInt16(),this.widthClass=St.readUInt16(),this.type=St.readShort(),this.ySubscriptXSize=St.readShort(),this.ySubscriptYSize=St.readShort(),this.ySubscriptXOffset=St.readShort(),this.ySubscriptYOffset=St.readShort(),this.ySuperscriptXSize=St.readShort(),this.ySuperscriptYSize=St.readShort(),this.ySuperscriptXOffset=St.readShort(),this.ySuperscriptYOffset=St.readShort(),this.yStrikeoutSize=St.readShort(),this.yStrikeoutPosition=St.readShort(),this.familyClass=St.readShort(),this.panose=function(){var r,xe;for(xe=[],r=0;r<10;++r)xe.push(St.readByte());return xe}(),this.charRange=function(){var r,xe;for(xe=[],r=0;r<4;++r)xe.push(St.readInt());return xe}(),this.vendorID=St.readString(4),this.selection=St.readShort(),this.firstCharIndex=St.readShort(),this.lastCharIndex=St.readShort(),this.version>0&&(this.ascent=St.readShort(),this.descent=St.readShort(),this.lineGap=St.readShort(),this.winAscent=St.readShort(),this.winDescent=St.readShort(),this.codePageRange=function(){var r,xe;for(xe=[],r=0;r<2;r=++r)xe.push(St.readInt());return xe}(),this.version>1))return this.xHeight=St.readShort(),this.capHeight=St.readShort(),this.defaultChar=St.readShort(),this.breakChar=St.readShort(),this.maxContext=St.readShort()},t}(),fe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="post",t.prototype.parse=function(St){var r,xe,_e;switch(St.pos=this.offset,this.format=St.readInt(),this.italicAngle=St.readInt(),this.underlinePosition=St.readShort(),this.underlineThickness=St.readShort(),this.isFixedPitch=St.readInt(),this.minMemType42=St.readInt(),this.maxMemType42=St.readInt(),this.minMemType1=St.readInt(),this.maxMemType1=St.readInt(),this.format){case 65536:break;case 131072:var Ee;for(xe=St.readUInt16(),this.glyphNameIndex=[],Ee=0;0<=xe?Ee<xe:Ee>xe;Ee=0<=xe?++Ee:--Ee)this.glyphNameIndex.push(St.readUInt16());for(this.names=[],_e=[];St.pos<this.offset+this.length;)r=St.readByte(),_e.push(this.names.push(St.readString(r)));return _e;case 151552:return xe=St.readUInt16(),this.offsets=St.read(xe);case 196608:break;case 262144:return this.map=(function(){var Pe,Ce,Te;for(Te=[],Ee=Pe=0,Ce=this.file.maxp.numGlyphs;0<=Ce?Pe<Ce:Pe>Ce;Ee=0<=Ce?++Pe:--Pe)Te.push(St.readUInt32());return Te}).call(this)}},t}(),de=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},pe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="name",t.prototype.parse=function(St){var r,xe,_e,Ee,Pe,Ce,Te,Ie,Ve,He,ke;for(St.pos=this.offset,St.readShort(),r=St.readShort(),Ce=St.readShort(),xe=[],Ee=0;0<=r?Ee<r:Ee>r;Ee=0<=r?++Ee:--Ee)xe.push({platformID:St.readShort(),encodingID:St.readShort(),languageID:St.readShort(),nameID:St.readShort(),length:St.readShort(),offset:this.offset+Ce+St.readShort()});for(Te={},Ee=Ve=0,He=xe.length;Ve<He;Ee=++Ve)_e=xe[Ee],St.pos=_e.offset,Ie=St.readString(_e.length),Pe=new de(Ie,_e),Te[ke=_e.nameID]==null&&(Te[ke]=[]),Te[_e.nameID].push(Pe);this.strings=Te,this.copyright=Te[0],this.fontFamily=Te[1],this.fontSubfamily=Te[2],this.uniqueSubfamily=Te[3],this.fontName=Te[4],this.version=Te[5];try{this.postscriptName=Te[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=Te[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=Te[7],this.manufacturer=Te[8],this.designer=Te[9],this.description=Te[10],this.vendorUrl=Te[11],this.designerUrl=Te[12],this.license=Te[13],this.licenseUrl=Te[14],this.preferredFamily=Te[15],this.preferredSubfamily=Te[17],this.compatibleFull=Te[18],this.sampleText=Te[19]},t}(),ge=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="maxp",t.prototype.parse=function(St){return St.pos=this.offset,this.version=St.readInt(),this.numGlyphs=St.readUInt16(),this.maxPoints=St.readUInt16(),this.maxContours=St.readUInt16(),this.maxCompositePoints=St.readUInt16(),this.maxComponentContours=St.readUInt16(),this.maxZones=St.readUInt16(),this.maxTwilightPoints=St.readUInt16(),this.maxStorage=St.readUInt16(),this.maxFunctionDefs=St.readUInt16(),this.maxInstructionDefs=St.readUInt16(),this.maxStackElements=St.readUInt16(),this.maxSizeOfInstructions=St.readUInt16(),this.maxComponentElements=St.readUInt16(),this.maxComponentDepth=St.readUInt16()},t}(),me=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="hmtx",t.prototype.parse=function(St){var r,xe,_e,Ee,Pe,Ce,Te;for(St.pos=this.offset,this.metrics=[],r=0,Ce=this.file.hhea.numberOfMetrics;0<=Ce?r<Ce:r>Ce;r=0<=Ce?++r:--r)this.metrics.push({advance:St.readUInt16(),lsb:St.readInt16()});for(_e=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var Ie,Ve;for(Ve=[],r=Ie=0;0<=_e?Ie<_e:Ie>_e;r=0<=_e?++Ie:--Ie)Ve.push(St.readInt16());return Ve}(),this.widths=(function(){var Ie,Ve,He,ke;for(ke=[],Ie=0,Ve=(He=this.metrics).length;Ie<Ve;Ie++)Ee=He[Ie],ke.push(Ee.advance);return ke}).call(this),xe=this.widths[this.widths.length-1],Te=[],r=Pe=0;0<=_e?Pe<_e:Pe>_e;r=0<=_e?++Pe:--Pe)Te.push(this.widths.push(xe));return Te},t.prototype.forGlyph=function(St){return St in this.metrics?this.metrics[St]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[St-this.metrics.length]}},t}(),ve=[].slice,be=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(St){var r,xe,_e,Ee,Pe,Ce,Te,Ie,Ve,He;return St in this.cache?this.cache[St]:(Ee=this.file.loca,r=this.file.contents,xe=Ee.indexOf(St),(_e=Ee.lengthOf(St))===0?this.cache[St]=null:(r.pos=this.offset+xe,Pe=(Ce=new ne(r.read(_e))).readShort(),Ie=Ce.readShort(),He=Ce.readShort(),Te=Ce.readShort(),Ve=Ce.readShort(),this.cache[St]=Pe===-1?new we(Ce,Ie,He,Te,Ve):new ye(Ce,Pe,Ie,He,Te,Ve),this.cache[St]))},t.prototype.encode=function(St,r,xe){var _e,Ee,Pe,Ce,Te;for(Pe=[],Ee=[],Ce=0,Te=r.length;Ce<Te;Ce++)_e=St[r[Ce]],Ee.push(Pe.length),_e&&(Pe=Pe.concat(_e.encode(xe)));return Ee.push(Pe.length),{table:Pe,offsets:Ee}},t}(),ye=function(){function e(t,St,r,xe,_e,Ee){this.raw=t,this.numberOfContours=St,this.xMin=r,this.yMin=xe,this.xMax=_e,this.yMax=Ee,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),we=function(){function e(t,St,r,xe,_e){var Ee,Pe;for(this.raw=t,this.xMin=St,this.yMin=r,this.xMax=xe,this.yMax=_e,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],Ee=this.raw;Pe=Ee.readShort(),this.glyphOffsets.push(Ee.pos),this.glyphIDs.push(Ee.readUInt16()),32&Pe;)Ee.pos+=1&Pe?4:2,128&Pe?Ee.pos+=8:64&Pe?Ee.pos+=4:8&Pe&&(Ee.pos+=2)}return e.prototype.encode=function(){var t,St,r;for(St=new ne(ve.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)St.pos=this.glyphOffsets[t];return St.data},e}(),Ne=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return oe(t,re),t.prototype.tag="loca",t.prototype.parse=function(St){var r,xe;return St.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var _e,Ee;for(Ee=[],xe=0,_e=this.length;xe<_e;xe+=2)Ee.push(2*St.readUInt16());return Ee}).call(this):(function(){var _e,Ee;for(Ee=[],xe=0,_e=this.length;xe<_e;xe+=4)Ee.push(St.readUInt32());return Ee}).call(this)},t.prototype.indexOf=function(St){return this.offsets[St]},t.prototype.lengthOf=function(St){return this.offsets[St+1]-this.offsets[St]},t.prototype.encode=function(St,r){for(var xe=new Uint32Array(this.offsets.length),_e=0,Ee=0,Pe=0;Pe<xe.length;++Pe)if(xe[Pe]=_e,Ee<r.length&&r[Ee]==Pe){++Ee,xe[Pe]=_e;var Ce=this.offsets[Pe],Te=this.offsets[Pe+1]-Ce;Te>0&&(_e+=Te)}for(var Ie=new Array(4*xe.length),Ve=0;Ve<xe.length;++Ve)Ie[4*Ve+3]=255&xe[Ve],Ie[4*Ve+2]=(65280&xe[Ve])>>8,Ie[4*Ve+1]=(16711680&xe[Ve])>>16,Ie[4*Ve]=(4278190080&xe[Ve])>>24;return Ie},t}(),Le=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,St,r,xe,_e;for(St in xe=this.font.cmap.tables[0].codeMap,t={},_e=this.subset)r=_e[St],t[St]=xe[r];return t},e.prototype.glyphsFor=function(t){var St,r,xe,_e,Ee,Pe,Ce;for(xe={},Ee=0,Pe=t.length;Ee<Pe;Ee++)xe[_e=t[Ee]]=this.font.glyf.glyphFor(_e);for(_e in St=[],xe)(r=xe[_e])!=null&&r.compound&&St.push.apply(St,r.glyphIDs);if(St.length>0)for(_e in Ce=this.glyphsFor(St))r=Ce[_e],xe[_e]=r;return xe},e.prototype.encode=function(t,St){var r,xe,_e,Ee,Pe,Ce,Te,Ie,Ve,He,ke,qe,De,Oe,Be;for(xe in r=ue.encode(this.generateCmap(),"unicode"),Ee=this.glyphsFor(t),ke={0:0},Be=r.charMap)ke[(Ce=Be[xe]).old]=Ce.new;for(qe in He=r.maxGlyphID,Ee)qe in ke||(ke[qe]=He++);return Ie=function(Ye){var nn,en;for(nn in en={},Ye)en[Ye[nn]]=nn;return en}(ke),Ve=Object.keys(Ie).sort(function(Ye,nn){return Ye-nn}),De=function(){var Ye,nn,en;for(en=[],Ye=0,nn=Ve.length;Ye<nn;Ye++)Pe=Ve[Ye],en.push(Ie[Pe]);return en}(),_e=this.font.glyf.encode(Ee,De,ke),Te=this.font.loca.encode(_e.offsets,De),Oe={cmap:this.font.cmap.raw(),glyf:_e.table,loca:Te,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(St)},this.font.os2.exists&&(Oe["OS/2"]=this.font.os2.raw()),this.font.directory.encode(Oe)},e}();E.API.PDFObject=function(){var e;function t(){}return e=function(St,r){return(Array(r+1).join("0")+St).slice(-r)},t.convert=function(St){var r,xe,_e,Ee;if(Array.isArray(St))return"["+function(){var Pe,Ce,Te;for(Te=[],Pe=0,Ce=St.length;Pe<Ce;Pe++)r=St[Pe],Te.push(t.convert(r));return Te}().join(" ")+"]";if(typeof St=="string")return"/"+St;if(St!=null&&St.isString)return"("+St+")";if(St instanceof Date)return"(D:"+e(St.getUTCFullYear(),4)+e(St.getUTCMonth(),2)+e(St.getUTCDate(),2)+e(St.getUTCHours(),2)+e(St.getUTCMinutes(),2)+e(St.getUTCSeconds(),2)+"Z)";if({}.toString.call(St)==="[object Object]"){for(xe in _e=["<<"],St)Ee=St[xe],_e.push("/"+xe+" "+t.convert(Ee));return _e.push(">>"),_e.join(`
`)}return""+St},t}();const InvoiceForm=()=>{const e=useDispatch(),t=create$3().shape({item:create$6().required("Please enter an item"),price:create$6().required("Please enter a price")}),St={item:"",price:""},r=xe=>{const{item:_e,price:Ee}=xe,Pe={tid:createUID(5),item:_e,price:Ee};e(setInvoiceData(Pe)),e(setAddingItem(!1))};return jsxRuntimeExports.jsx(AnimatePresence,{children:jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,visibility:"hidden"},animate:{opacity:1,visibility:"visible"},transition:{duration:.2,type:"tween"},exit:{opacity:0,visibility:"hidden"},layoutId:1,children:jsxRuntimeExports.jsx(Formik,{validationSchema:t,initialValues:St,onSubmit:(xe,{resetForm:_e,setSubmitting:Ee})=>{r(xe),_e()},children:({touched:xe,errors:_e,values:Ee})=>(console.log(Ee),jsxRuntimeExports.jsx(Form,{children:jsxRuntimeExports.jsxs(FormContainer,{children:[jsxRuntimeExports.jsx(FormItem,{label:"Item",invalid:_e.item&&xe.item,errorMessage:_e.item,children:jsxRuntimeExports.jsx(Field,{type:"text",autoComplete:"off",name:"item",size:"sm",placeholder:"Enter an item",component:Input})}),jsxRuntimeExports.jsx(FormItem,{label:"Price",invalid:_e.price&&xe.price,errorMessage:_e.price,children:jsxRuntimeExports.jsx(Field,{name:"price",children:({field:Pe,form:Ce})=>jsxRuntimeExports.jsx(FormNumericInput,{thousandSeparator:!0,form:Ce,size:"sm",field:Pe,placeholder:"Enter price",decimalScale:2,onValueChange:Te=>{Ce.setFieldValue(Pe.name,Te.floatValue)},value:Pe.value,inputPrefix:jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"₦"})})})}),jsxRuntimeExports.jsxs("div",{className:"mt-8 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{block:!0,variant:"solid",type:"submit",size:"sm",icon:jsxRuntimeExports.jsx(MdOutlineDownloadDone,{}),disabled:!Ee.item||!Ee.price,children:"Add"}),jsxRuntimeExports.jsx(Button,{className:"bg-red-500 hover:bg-red-600",block:!0,variant:"solid",type:"button",size:"sm",icon:jsxRuntimeExports.jsx(AiOutlineRollback,{}),onClick:()=>e(setAddingItem(!1)),children:"Back"})]})]})}))})},1)})},useInvoiceData=e=>{const[t,St]=reactExports.useState(0);return reactExports.useEffect(()=>{(()=>{const xe=e==null?void 0:e.reduce((_e,Ee)=>_e+Number(Ee.price),0);St(xe)})()},[e]),{totalPrice:t}},InvoiceDialog=({receiver:e})=>{var cn;const t=useDispatch(),St=reactExports.useRef(null),[r,xe]=reactExports.useState(!1),[_e,Ee]=reactExports.useState(null),{Tr:Pe,Th:Ce,Td:Te,THead:Ie,TBody:Ve}=Table,{invoiceDialog:He,invoiceComplete:ke,invoiceData:qe,addingItem:De,invoiceNumber:Oe}=useSelector(hn=>hn.chat.state),{chat:Be,invoiceStatus:Ye,makingInvoice:nn,sendingMessage:en}=useSelector(hn=>hn.chat.data),{profile:Ue}=useSelector(hn=>hn.auth.user),{createStatus:Je,notification:Ge}=useSelector(hn=>hn.notifications.data),{totalPrice:Me}=useInvoiceData(qe),tn=()=>{t(toggleInvoiceDialog(!1)),De&&t(setAddingItem(!1))},dn={receiver_id:e==null?void 0:e.id,type:"invoice",data:JSON.stringify({message:"New Invoice",chat_id:Be==null?void 0:Be.id,invoice_number:Oe}),url:`/chat/${(cn=Ue==null?void 0:Ue.username)==null?void 0:cn.toLowerCase()}`},Re=(hn,Pn,kn)=>{toast.push(jsxRuntimeExports.jsx(Notification,{title:kn||"Error",type:Pn||"warning",duration:3e3,children:hn}),{placement:"top-center"})};reactExports.useEffect(()=>{var hn;Ye==="success"&&(t(createNotification(dn)),t(sendNewInvoiceNotification({sender_id:Ue==null?void 0:Ue.id,receiver_id:e==null?void 0:e.id})),sendPushNotification({app_id:"9749386f-0c3b-417c-b986-3447a73296cd",channel_for_external_user_ids:"push",include_external_user_ids:[`${e==null?void 0:e.id}`],url:`${appConfig.appURL}/chat/${Ue==null?void 0:Ue.username.toLowerCase()}`,contents:{en:`Hello ${e==null?void 0:e.username}, you have received a new invoice from ${Ue==null?void 0:Ue.username}, please check your messages.`},content_available:!0}),Re("Invoice sent","success","Success")),tn(),t(setInvoiceStatus("idle")),(hn=socket)==null||hn.emit("sendInvoice",e==null?void 0:e.id,()=>{console.log("Emit New Invoice: ",!0)})},[Ye]),reactExports.useEffect(()=>{Je==="success"&&(socket.emit("sendNotification",[Ge,e==null?void 0:e.id]),t(setCreateStatus("idle")))},[Je]);const Qe=()=>{xe(!0);const hn=document.getElementById("print");toPng(hn).then(Pn=>{const kn=new Image;kn.crossOrigin="anonymous",kn.src=Pn,kn.onload=()=>{const Dn=new E({orientation:"portrait",unit:"in",format:[5.5,8.5],compress:!0}),Rn=Dn.getImageProperties(kn),jn=Rn.fileType,zn=Dn.internal.pageSize.getWidth(),ii=Rn.height,an=Math.floor(Rn.width*8.5/5.5),_n=Math.ceil(ii/an);let sn=Dn.internal.pageSize.getHeight();const ze=document.createElement("canvas"),Xe=ze.getContext("2d");ze.width=Rn.width,ze.height=an;for(let rn=0;rn<_n;rn++){rn===_n-1&&ii%an!==0&&(ze.height=ii%an,sn=ze.height*zn/ze.width);const gn=ze.width,fn=ze.height;Xe.fillStyle="white",Xe.fillRect(0,0,gn,fn),Xe.drawImage(kn,0,rn*an,gn,fn,0,0,gn,fn),rn&&Dn.addPage();const Nn=ze.toDataURL(`image/${jn}`,1);Dn.addImage(Nn,jn,0,0,zn,sn)}xe(!1),Ee(Dn.output("blob")),t(makeInvoice({invoice_number:Oe,price:Me,chat_id:Be==null?void 0:Be.id,receiver_id:e==null?void 0:e.id,invoiceData:JSON.stringify(qe),invoice:Dn.output("blob")}))}}).catch(Pn=>{xe(!1),Re("Oops! Something went wrong! Please try again."),console.error("oops, something went wrong!",Pn)})};return jsxRuntimeExports.jsxs(Dialog,{isOpen:He,onClose:tn,shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!1,scrollable:!0,className:"overflow-y-auto",title:"Invoice",children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-bold text-gray-700",children:"Generate Invoice"}),jsxRuntimeExports.jsxs("div",{className:" ",children:[jsxRuntimeExports.jsxs("div",{id:"print",ref:St,className:"pb-4 mt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 px-4 justify-between",children:[jsxRuntimeExports.jsx("h4",{className:"text-primary-500 font-bold",children:"TASKITLY"}),jsxRuntimeExports.jsx("h4",{className:"font-bold text-2xl",children:"INVOICE"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-8 flex items-center gap-4 justify-between bg-blue-500 py-2 px-4 text-white",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("p",{className:"font-semibold",children:["Invoice #",Oe]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("p",{className:"font-bold",children:"Date:"}),jsxRuntimeExports.jsx("p",{className:"font-semibold",children:dayjs().format("DD/MM/YYYY")})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 px-4",children:jsxRuntimeExports.jsxs("p",{className:"font-semibold",children:["Invoice To: ",e==null?void 0:e.username]})}),jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsxs(Table,{className:"",children:[jsxRuntimeExports.jsx(Ie,{className:"",children:jsxRuntimeExports.jsxs(Pe,{className:"bg-blue-500",children:[jsxRuntimeExports.jsx(Ce,{className:"!text-white",children:"No."}),jsxRuntimeExports.jsx(Ce,{className:"!text-white",children:"Item"}),jsxRuntimeExports.jsx(Ce,{className:"!text-white",children:"Price"}),!ke&&jsxRuntimeExports.jsx(Ce,{className:"!text-white"})]})}),jsxRuntimeExports.jsx(Ve,{children:jsxRuntimeExports.jsxs(AnimatePresence,{children:[(qe==null?void 0:qe.length)<1&&jsxRuntimeExports.jsx(Pe,{className:"w-full",children:jsxRuntimeExports.jsx(Te,{colSpan:"4",className:"font-bold text-base text-gray-400 text-center",children:"Add items to the invoice"})}),qe==null?void 0:qe.map((hn,Pn)=>{var kn;return jsxRuntimeExports.jsxs(motion.tr,{layoutId:hn.tid,initial:{opacity:0,visibility:"hidden"},animate:{opacity:1,visibility:"visible"},transition:{duration:.2,type:"tween"},exit:{opacity:0,visibility:"hidden"},children:[jsxRuntimeExports.jsx(Te,{className:"",children:Pn+1}),jsxRuntimeExports.jsx(Te,{className:"",children:hn.item}),jsxRuntimeExports.jsxs(Te,{className:"",children:["₦",(kn=hn.price)==null?void 0:kn.toLocaleString()]}),!ke&&jsxRuntimeExports.jsx(Te,{className:"",children:jsxRuntimeExports.jsx(Button,{variant:"solid",className:"bg-red-500 hover:bg-red-600",size:"xs",color:"red-500",icon:jsxRuntimeExports.jsx(MdDelete,{}),onClick:()=>t(removeInvoiceItem(hn.tid))})})]},hn.tid)})]})})]})}),jsxRuntimeExports.jsx("div",{className:"mt-4 flex justify-end",children:jsxRuntimeExports.jsxs("h4",{className:"text-right text-base text-white bg-blue-500 px-4 py-2",children:["Total: ₦",(qe==null?void 0:qe.length)<1?0:Me==null?void 0:Me.toLocaleString()]})}),De&&jsxRuntimeExports.jsx(InvoiceForm,{}),!De&&!ke&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx(Button,{className:"mt-4",variant:"solid",size:"sm",icon:jsxRuntimeExports.jsx(BiAddToQueue,{}),onClick:()=>t(setAddingItem(!0)),children:"Add Item"}),(qe==null?void 0:qe.length)>0&&jsxRuntimeExports.jsx(Button,{className:"mt-4",variant:"solid",size:"sm",icon:jsxRuntimeExports.jsx(MdOutlineDownloadDone,{}),onClick:()=>t(setInvoiceComplete(!0)),children:"Done"})]})]}),ke&&jsxRuntimeExports.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[jsxRuntimeExports.jsx(Button,{className:"mt-4",variant:"solid",size:"sm",icon:jsxRuntimeExports.jsx(BsFillSendFill,{}),onClick:Qe,loading:r||nn||en,children:"Send Invoice"}),jsxRuntimeExports.jsx(Button,{className:"mt-4",variant:"solid",size:"sm",disabled:r||nn||en,icon:jsxRuntimeExports.jsx(AiTwotoneEdit,{}),onClick:()=>t(setInvoiceComplete(!1)),children:"Modify"})]})]})]})},PaymentDialog=()=>{var Ge,Me,tn,dn;const e=useDispatch(),{Tr:t,Th:St,Td:r,THead:xe,TBody:_e}=Table,{paymentDialog:Ee,viewingInvoice:Pe}=useSelector(Re=>Re.chat.state),{invoice:Ce,chat:Te,bookingService:Ie,bookingMessage:Ve,bookingStatus:He}=useSelector(Re=>Re.chat.data),{profile:ke}=useSelector(Re=>Re.auth.user),qe=(Ge=Te==null?void 0:Te.user)!=null&&Ge.service?Te==null?void 0:Te.user:Te==null?void 0:Te.receiver,De=(Me=Te==null?void 0:Te.user)!=null&&Me.service?Te.receiver:Te.user,Oe=!(ke!=null&&ke.service),Be=(Ce==null?void 0:Ce.status)==="paid",{totalPrice:Ye}=useInvoiceData(Ce==null?void 0:Ce.items),nn=()=>{e(togglePaymentDialog(!1))},en=(Re,Qe,cn,hn)=>{toast.push(jsxRuntimeExports.jsx(Notification,{title:cn||"Error",type:Qe||"warning",duration:hn||3e3,children:Re}),{placement:"top-center"})};reactExports.useEffect(()=>{Ve==="insufficient balance"&&en("Insufficient balance, please top up and try again","warning","Error",5e3),e(resetBookingStatus())},[Ve,e]),reactExports.useEffect(()=>{He==="success"&&(sendPushNotification({app_id:"9749386f-0c3b-417c-b986-3447a73296cd",channel_for_external_user_ids:"push",include_external_user_ids:[`${De==null?void 0:De.id}`],url:`${appConfig.appURL}/chat/${ke==null?void 0:ke.username.toLowerCase()}`,contents:{en:`Hello ${De==null?void 0:De.username}, this is to inform you that ${ke==null?void 0:ke.username} has fully paid for invoice #${Ce==null?void 0:Ce.invoice_number}, you may resume work.`},content_available:!0}),en("Service booked successfully","success","Success",5e3)),e(resetBookingStatus()),e(togglePaymentDialog(!1)),socket.emit("bookedService",qe==null?void 0:qe.id,console.log("Emit Service Booked: ",!0))},[He]);const Ue=()=>{e(setViewingInvoice(!1))},Je=()=>{var Re;e(bookService({service_id:(Re=qe==null?void 0:qe.service)==null?void 0:Re.id,provider_id:qe==null?void 0:qe.id,user_id:ke==null?void 0:ke.id,invoice_id:Ce==null?void 0:Ce.id,amount:Ce==null?void 0:Ce.price}))};return jsxRuntimeExports.jsxs(Dialog,{isOpen:Ee,onClose:nn,shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!1,scrollable:!0,className:"overflow-y-auto",bodyOpenClassName:"overflow-hidden",title:Pe?`Invoice #${Ce==null?void 0:Ce.invoice_number}`:"Confirm Service Payment",children:[!Pe&&jsxRuntimeExports.jsx("h4",{className:"text-lg font-bold text-gray-700",children:"Confirm Service Payment"}),jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[!Pe&&jsxRuntimeExports.jsx("p",{children:"Confirm payment for the following invoice. Don't worry, we will hold onto the payment until the service has been completed before we release it to the service provider."}),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 px-4 justify-between",children:[jsxRuntimeExports.jsx("h4",{className:"text-primary-500 font-bold",children:"TASKITLY"}),jsxRuntimeExports.jsx("h4",{className:"font-bold text-2xl",children:"INVOICE"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-8 flex items-center gap-4 justify-between bg-blue-500 py-2 px-4 text-white",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("p",{className:"font-semibold",children:["Invoice #",Ce==null?void 0:Ce.invoice_number]})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("p",{className:"font-bold",children:"Date:"}),jsxRuntimeExports.jsx("p",{className:"font-semibold",children:dayjs(Ce==null?void 0:Ce.created_at).format("DD/MM/YYYY")})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-4 px-4",children:jsxRuntimeExports.jsxs("p",{className:"font-semibold",children:["Invoice To: ",De==null?void 0:De.username]})}),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsxs(Table,{children:[jsxRuntimeExports.jsx(xe,{children:jsxRuntimeExports.jsxs(t,{className:"bg-blue-500",children:[jsxRuntimeExports.jsx(St,{className:"!text-white",children:"No."}),jsxRuntimeExports.jsx(St,{className:"!text-white",children:"Item"}),jsxRuntimeExports.jsx(St,{className:"!text-white",children:"Price"})]})}),jsxRuntimeExports.jsx(_e,{children:(tn=Ce==null?void 0:Ce.items)==null?void 0:tn.map((Re,Qe)=>{var cn;return jsxRuntimeExports.jsxs(t,{className:"",children:[jsxRuntimeExports.jsx(r,{children:Qe+1}),jsxRuntimeExports.jsx(r,{children:Re.item}),jsxRuntimeExports.jsxs(r,{children:["₦",(cn=Re.price)==null?void 0:cn.toLocaleString()]})]},Re.id)})})]}),jsxRuntimeExports.jsx("div",{className:classNames("mt-4 flex items-center gap-4",Be?"justify-between":"justify-end"),children:jsxRuntimeExports.jsxs("h4",{className:"text-right text-base text-white bg-blue-500 px-4 py-2",children:["Total: ₦",Ye==null?void 0:Ye.toLocaleString()]})}),!Pe&&!Be&&jsxRuntimeExports.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[jsxRuntimeExports.jsxs(Button,{variant:"solid",block:!0,size:"sm",loading:Ie,icon:jsxRuntimeExports.jsx(BiCheckDouble,{}),onClick:Je,children:["Pay ",(dn=Ce==null?void 0:Ce.price)==null?void 0:dn.toLocaleString()]}),jsxRuntimeExports.jsx(Button,{variant:"solid",className:"bg-red-500 hover:bg-red-600",block:!0,size:"sm",disabled:Ie,icon:jsxRuntimeExports.jsx(MdOutlineCancel,{}),onClick:nn,children:"Cancel"})]}),Oe&&Pe&&!Be&&jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx(Button,{variant:"solid",block:!0,size:"sm",onClick:Ue,children:"Ready to Pay"})})]})]})]})]})},ChatBar=({onCreateInvoice:e})=>{var ke,qe;const t=useNavigate(),St=useDispatch(),{imagePath:r}=appConfig,{provider:xe,invoice:_e,booked:Ee}=useSelector(De=>De.chat.data),{viewingInvoice:Pe}=useSelector(De=>De.chat.state),{profile:Ce}=useSelector(De=>De.auth.user),Te=!(Ce!=null&&Ce.service),Ie=(_e==null?void 0:_e.status)==="paid",Ve=()=>{Pe||St(setViewingInvoice(!0)),St(togglePaymentDialog(!0))},He=()=>{Pe&&St(setViewingInvoice(!1)),St(togglePaymentDialog(!0))};return jsxRuntimeExports.jsxs("div",{className:"p-4 flex items-center gap-4 justify-between bg-white border-t-2 sticky top-[4.7rem] z-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-1 items-center",children:[jsxRuntimeExports.jsx("div",{onClick:()=>t(-1),className:"hover:bg-emerald-50 transition duration-300 h-10 w-10 flex items-center justify-center rounded-full cursor-pointer",children:jsxRuntimeExports.jsx(HiArrowNarrowLeft,{className:"text-2xl"})}),jsxRuntimeExports.jsxs(Link,{to:`/browse/profile/${xe==null?void 0:xe.username}`,className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsx(Avatar,{src:`${r}/${((ke=xe==null?void 0:xe.service)==null?void 0:ke.banner)||(xe==null?void 0:xe.image)}`,size:"md",shape:"circle"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("h4",{className:"font-bold text-base",children:((qe=xe==null?void 0:xe.service)==null?void 0:qe.title)||(xe==null?void 0:xe.username)}),jsxRuntimeExports.jsx("p",{className:"font-semibold text-green-500",children:"Online"})]})]})]}),(_e==null?void 0:_e.status)==="pending"&&jsxRuntimeExports.jsxs(Dropdown,{customToggleClass:"flex",placement:"bottom-end",renderTitle:jsxRuntimeExports.jsxs(Button,{size:"sm",variant:"solid",children:["Invoice ",Ie?"Paid":"Available"]}),children:[jsxRuntimeExports.jsxs(Dropdown.Item,{onClick:Ve,eventKey:"view",style:{justifyContent:"flex-start"},children:[jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(AiFillEye,{className:"text-lg"})}),jsxRuntimeExports.jsx("span",{children:"View"})]}),Te&&!Ie&&jsxRuntimeExports.jsxs(Dropdown.Item,{onClick:He,eventKey:"pay",style:{justifyContent:"flex-start"},children:[jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(FaMoneyCheckAlt,{className:"text-lg"})}),jsxRuntimeExports.jsx("span",{children:"Pay for Service"})]}),!Te&&jsxRuntimeExports.jsxs(Dropdown.Item,{eventKey:"new",onClick:e,style:{justifyContent:"flex-start"},children:[jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(FaFileInvoiceDollar,{className:"text-lg"})}),jsxRuntimeExports.jsx("span",{children:"New Invoice"})]})]}),Ee&&!(_e!=null&&_e.status)&&(Te?Te?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 p-2 rounded-md bg-primary-500",children:[jsxRuntimeExports.jsx(AiOutlineSync,{className:"text-white text-md"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-white font-semibold",children:"Service Ongoing"})]}):null:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 p-2 rounded-md bg-primary-500",children:[jsxRuntimeExports.jsx(BsShieldFillCheck,{className:"text-white text-md"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-white font-semibold",children:"Service Booked"})]}))]})};injectReducer("chat",reducer);const Chat=()=>{var De,Oe;const e=useDispatch(),{state:t}=useLocation(),{providerSlug:St}=useParams();window.OneSignal=window.OneSignal||[];const r=window.OneSignal,{chat:xe,receivedInvoice:_e,serviceBooked:Ee,bookingStatus:Pe,invoiceStatus:Ce}=useSelector(Be=>Be.chat.data),{profile:Te}=useSelector(Be=>Be.auth.user),Ie=(Te==null?void 0:Te.id)===((De=xe==null?void 0:xe.user)==null?void 0:De.id)?xe==null?void 0:xe.user:xe==null?void 0:xe.receiver,Ve=(Te==null?void 0:Te.id)===((Oe=xe==null?void 0:xe.user)==null?void 0:Oe.id)?xe==null?void 0:xe.receiver:xe==null?void 0:xe.user,He=Be=>(Be==null?void 0:Be.sender_id)===(Te==null?void 0:Te.id),{gettingProvider:ke}=useSelector(Be=>Be.chat.data),qe=()=>{e(toggleInvoiceDialog(!0)),e(setInvoiceNumber(createUID(8)))};return r.push(()=>{r.init({appId:"9749386f-0c3b-417c-b986-3447a73296cd",safari_web_id:"web.onesignal.auto.4d0b3421-6847-4c4b-a531-b4bcf634e4d8",allowLocalhostAsSecureOrigin:!0,autoResubscribe:!0})}),reactExports.useEffect(()=>{e(initiateChat({slug:St,id:(t==null?void 0:t.chat)&&t.chat,provider_id:(t==null?void 0:t.provider_id)&&t.provider_id}))},[]),reactExports.useEffect(()=>{(_e||Ee||Pe==="success"||Ce==="success")&&e(initiateChat({slug:St,id:(t==null?void 0:t.chat)&&t.chat,provider_id:(t==null?void 0:t.provider_id)&&t.provider_id})),_e&&e(setReceivedInvoice(!1)),Ee&&e(setServiceBooked(!1)),Pe==="success"&&e(resetBookingStatus()),Ce==="success"&&e(setInvoiceStatus("idle"))},[e,_e,Ee,Pe,Ce]),jsxRuntimeExports.jsxs("div",{className:"",children:[ke?jsxRuntimeExports.jsx("div",{className:"min-h-[70vh] flex justify-center items-center",children:jsxRuntimeExports.jsx(Loading,{loading:!0})}):jsxRuntimeExports.jsxs("div",{className:"relative min-h-[72vh]",children:[jsxRuntimeExports.jsx(ChatBar,{onCreateInvoice:qe}),jsxRuntimeExports.jsx("div",{className:"p-4",children:jsxRuntimeExports.jsx("div",{className:"mb-14 min-h-[50vh]",children:jsxRuntimeExports.jsx(Messages,{isOwner:He,sender:Ie,receiver:Ve})})}),jsxRuntimeExports.jsx("div",{className:"sticky w-full min-w-full p-4 pb-5 bg-white max-w-2xl bottom-[5rem] border-b-2",children:jsxRuntimeExports.jsx(MessageBox,{receiver:Ve,socket:socket.current,onCreateInvoice:qe})})]}),jsxRuntimeExports.jsx(InvoiceDialog,{receiver:Ve,socket:socket.current}),jsxRuntimeExports.jsx(PaymentDialog,{providerSlug:St,state:t,socket:socket.current})]})};export{Chat as default};
