import{a as F,n as P,r as w,P as S,j as e,F as C,p as u,L as I,Q as V,I as $,w as E}from"./index-508e130b.js";import{F as L,a as k,b as x}from"./formik.esm-5d2ef744.js";import{c as q,a as f}from"./index.esm-5685692b.js";import{u as M}from"./index-f2bfb18d.js";const z=({onNext:t})=>{const l=F(),{countries:c,loading:d,phoneStatus:j,settingPhone:g,message:h}=P(s=>s.verify.data),b=s=>{const{code:a,phone:n}=s,i={phone:a.substring(1)+n};l(M(i))};w.useEffect(()=>{h==="Otp sent"&&(l(S()),t())},[l,h,t]);const v=s=>/^((\+[1-9]{1,4}[ -]?)|(\([0-9]{2,3}\)[ -]?)|([0-9]{2,4})[ -]?)*?[0-9]{3,4}[ -]?[0-9]{3,4}$/.test(s),N=q().shape({phone:f().matches(/^((\+[1-9]{1,4}[ -]?)|(\([0-9]{2,3}\)[ -]?)|([0-9]{2,4})[ -]?)*?[0-9]{3,4}[ -]?[0-9]{3,4}$/,"Invalid number").required(""),code:f().required("Please select your country")}),y={phone:"",code:"+234"},o=c==null?void 0:c.map(s=>({label:`+${s.phone}`,value:s.name}));return e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx(L,{initialValues:y,validationSchema:N,onSubmit:(s,{setSubmitting:a})=>{a(!0),b(s)},children:({errors:s,touched:a,values:n})=>{const i=v(n.phone);return console.log(n.code+n.phone),e.jsx(k,{children:e.jsxs(C,{children:[e.jsxs("div",{className:"flex",children:[e.jsx(u,{label:"",invalid:s.code&&a.code,className:"",errorMessage:s.code,children:e.jsx(x,{name:"code",prefix:"",className:"",autoComplete:"off",children:({field:m,form:p})=>d?e.jsx("div",{className:"bg-blue-100 h-11 w-28 rounded-l-md",children:e.jsx(I,{size:30,loading:!0})}):e.jsx(V,{placeholder:"",field:m,form:p,className:"w-28 select_phone",isLoading:d,onInputChange:r=>{console.log(r)},options:o,defaultValue:o[163],value:o==null?void 0:o.value,onChange:r=>{p.setFieldValue(m.name,r.label)}})})}),e.jsx(u,{label:"",invalid:s.phone&&a.phone,errorMessage:s.phone,children:e.jsx(x,{type:"text",autoComplete:"off",name:"phone",className:"rounded-l-none border-l-0",placeholder:"Enter phone number",component:$})})]}),e.jsx(E,{block:!0,variant:"solid",disabled:!n.phone||!n.code||!i,loading:j==="loading"||g,children:"Send Code"})]})})}})})},R=({onNext:t})=>e.jsx("div",{className:"h-full flex flex-col justify-center",children:e.jsxs("div",{className:"w-full flex flex-col gap-4 justify-center",children:[e.jsx("div",{className:"w-full flex justify-center items-center",children:e.jsx("img",{className:"w-72",src:"/img/signup.png",alt:""})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-center mt-4 text-2xl font-bold",children:"Phone Verification"}),e.jsx("p",{className:"font-semibold text-center text-gray-400",children:"We will send you an OTP code on this phone number."})]}),e.jsx(z,{onNext:t})]})});export{R as default};
