import{h as g,d as i,V as S,W as P,X as _,Y as x,i as j,K as A,r as t,_ as y,u as b,a as E,c as R,j as r,C as V}from"./index-2aa62b4f.js";const h=g({name:"verify/state",initialState:{country:null,resent:!1},reducers:{setCountry:(s,e)=>{s.country=e.payload},setResent:(s,e)=>{s.resent=e.payload}}}),{setCountry:D,setResent:B}=h.actions,k=h.reducer,o=i("verify/data/getCountries",async(s,{rejectWithValue:e})=>{try{return(await S(s)).data}catch(a){return e(a.response.data)}}),d=i("verify/data/updatePhone",async(s,{rejectWithValue:e})=>{try{return(await P(s)).data}catch(a){return e(a.response.data)}}),c=i("verify/data/verifyPhone",async(s,{rejectWithValue:e})=>{try{return(await _(s)).data}catch(a){return e(a.response.data)}}),u=i("verify/data/assignVirtualAccount",async(s,{rejectWithValue:e})=>{try{return(await x(s)).data}catch(a){return e(a.response.data)}}),m=g({name:"verify/data",initialState:{countries:[],loading:!1,phone:null,assigningAccount:!1,settingPhone:!1,verifying:!1,resending:!1,phoneStatus:"idle",accountStatus:"idle",message:"",verifyMessage:"",status:"idle",timer:!0},reducers:{setPhone:(s,e)=>{s.phone=e.payload},setPhoneStatus:(s,e)=>{s.phoneStatus=e.payload},setMessage:(s,e)=>{s.message=e.payload},resetStatus:s=>{s.status="idle"},setTimer:(s,e)=>{s.timer=e.payload}},extraReducers:s=>{s.addCase(o.pending,e=>{e.loading=!0}).addCase(o.fulfilled,(e,a)=>{e.loading=!1,e.countries=a.payload.countries}).addCase(o.rejected,e=>{e.loading=!1}).addCase(d.pending,e=>{e.settingPhone=!0,e.resending=!0}).addCase(d.fulfilled,(e,a)=>{e.settingPhone=!1,e.resending=!1,e.message=a.payload.message}).addCase(d.rejected,e=>{e.settingPhone=!1,e.resending=!1,e.message=""}).addCase(c.pending,e=>{e.verifying=!0}).addCase(c.fulfilled,(e,a)=>{e.verifying=!1,e.status=a.payload.status,e.verifyMessage=a.payload.message}).addCase(c.rejected,(e,a)=>{e.verifying=!1,e.status=a.payload.status,e.verifyMessage=a.payload.message}).addCase(u.pending,e=>{e.assigningAccount=!0}).addCase(u.fulfilled,(e,a)=>{e.assigningAccount=!1,e.accountStatus=a.payload.status}).addCase(u.rejected,e=>{e.assigningAccount=!1})}}),{setPhone:I,setPhoneStatus:L,setMessage:f,resetStatus:F,setTimer:G}=m.actions,w=m.reducer,M=j({state:k,data:w});A("verify",M);const T=t.lazy(()=>y(()=>import("./Step1-133a2dd8.js"),["assets/Step1-133a2dd8.js","assets/index-2aa62b4f.js","assets/index-d44cc40d.css"])),N=t.lazy(()=>y(()=>import("./Step2-599de689.js"),["assets/Step2-599de689.js","assets/index-2aa62b4f.js","assets/index-d44cc40d.css","assets/useTimeOutMessage-8d4d5856.js"])),O=()=>{const s=b(),e=E(),{verifiedPhone:a}=R(C=>C.auth.user),[n,l]=t.useState(1);t.useEffect(()=>{a&&s("/home")},[s,a]),t.useEffect(()=>{e(o())},[e]);const p=t.useCallback(()=>{e(f("")),l(n+1)},[e,n]),v=t.useCallback(()=>{e(f("")),l(n-1)},[e,n]);return console.log(n),r.jsx(V,{className:"max-w-xl h-screen bg-white",children:r.jsxs(t.Suspense,{fallback:r.jsx(r.Fragment,{}),children:[n===1&&r.jsx(T,{onNext:p}),n===2&&r.jsx(N,{onNext:p,onBack:v})]})})},K=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"}));export{B as a,K as i,G as s,d as u,c as v};
