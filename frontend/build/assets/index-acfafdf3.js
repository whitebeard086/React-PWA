import{aJ as te,aY as se,aZ as ae,a_ as je,W as ne,aL as Z,a$ as Me,u as re,j as t,aO as Se,k as oe,l as N,F as ce,o as ie,p as le,q as L,t as w,I as q,y as de,a6 as Ye,a7 as De,aN as ue,X as Ce,aD as _e,h as me,i as Ne,c as Le,E as we,O as Ae,ap as $e,N as Fe}from"./index-2cc994c4.js";import{U as Ee}from"./UploadImage-3223695b.js";import"./index-34cd410a.js";import"./CropImage-27c309dd.js";const qe=()=>{const e=te(),o=se();return ae({mutationKey:["users"],mutationFn:c=>je(c),staleTime:18e4,cacheTime:3e5,onSuccess:c=>{o.invalidateQueries("users"),e(ne()),Z("Success",c.message??"Actions performed successfully","success")},onError:c=>{Z("Failed",c.response.data.message??c.message,"danger")}})},Pe=()=>{const e=te(),o=se();return ae({mutationKey:["users"],mutationFn:c=>Me(c),staleTime:18e4,cacheTime:3e5,onSuccess:c=>{o.invalidateQueries("users"),e(ne()),Z("Success",c.message??"Actions performed successfully","success")},onError:c=>{Z("Failed",c.response.data.message??c.message,"danger")}})},ke=()=>{const e=re(),o=()=>{e(-1)};return t.jsx("div",{children:t.jsx(Se,{className:"h-6 w-6 hover:cursor-pointer",onClick:o})})},Oe=oe().shape({street:N().required("Enter the name of your street"),city:N().required("Enter the name of your city"),state:N().required("Enter the name of your state"),country:N().required("Enter the name of your country"),postal_code:N().required("Enter your postal code")}),Te=({profile:e,mutate:o,isLoading:c,isSuccess:x})=>{var l,m,v,i,a;const y=r=>{o(r)},h={street:((l=e==null?void 0:e.address)==null?void 0:l.street)??"",city:((m=e==null?void 0:e.address)==null?void 0:m.city)??"",state:((v=e==null?void 0:e.address)==null?void 0:v.state)??"",country:((i=e==null?void 0:e.address)==null?void 0:i.country)??"",postal_code:((a=e==null?void 0:e.address)==null?void 0:a.postal_code)??""};return t.jsx(ce,{initialValues:h,enableReinitialize:!0,validationSchema:Oe,onSubmit:r=>y(r),children:({errors:r,touched:Y})=>t.jsx(ie,{children:t.jsxs(le,{children:[t.jsxs("div",{className:"flex gap-3",children:[t.jsx(L,{className:"mb-3 flex-1",label:"Street",invalid:r.street&&Y.street,errorMessage:r.street,children:t.jsx(w,{type:"text",autoComplete:"off",name:"street",placeholder:"Street",component:q})}),t.jsx(L,{className:"mb-3 flex-1",label:"City",invalid:r.city&&Y.city,errorMessage:r.city,children:t.jsx(w,{type:"text",autoComplete:"off",name:"city",placeholder:"City",component:q})})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx(L,{className:"mb-3 flex-1",label:"State",invalid:r.state&&Y.state,errorMessage:r.state,children:t.jsx(w,{type:"text",autoComplete:"off",name:"state",placeholder:"State",component:q})}),t.jsx(L,{className:"mb-3 flex-1",label:"Country",invalid:r.country&&Y.country,errorMessage:r.country,children:t.jsx(w,{type:"text",autoComplete:"off",name:"country",placeholder:"Country",component:q})})]}),t.jsx(L,{className:"mb-3",label:"Postal Code",invalid:r.postal_code&&Y.postal_code,errorMessage:r.postal_code,children:t.jsx(w,{type:"text",autoComplete:"off",name:"postal_code",placeholder:"Postal Code",component:q})}),t.jsx(de,{loading:c,block:!0,disabled:x,variant:"solid",type:"submit",children:"Submit"})]})})})};var he={exports:{}};(function(e,o){(function(c,x){e.exports=x()})(Ye,function(){var c={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},x=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,y=/\d\d/,h=/\d\d?/,l=/\d*[^-_:/,()\s\d]+/,m={},v=function(s){return(s=+s)+(s>68?1900:2e3)},i=function(s){return function(n){this[s]=+n}},a=[/[+-]\d\d:?(\d\d)?|Z/,function(s){(this.zone||(this.zone={})).offset=function(n){if(!n||n==="Z")return 0;var d=n.match(/([+-]|\d\d)/g),u=60*d[1]+(+d[2]||0);return u===0?0:d[0]==="+"?-u:u}(s)}],r=function(s){var n=m[s];return n&&(n.indexOf?n:n.s.concat(n.f))},Y=function(s,n){var d,u=m.meridiem;if(u){for(var b=1;b<=24;b+=1)if(s.indexOf(u(b,0,n))>-1){d=b>12;break}}else d=s===(n?"pm":"PM");return d},xe={A:[l,function(s){this.afternoon=Y(s,!1)}],a:[l,function(s){this.afternoon=Y(s,!0)}],S:[/\d/,function(s){this.milliseconds=100*+s}],SS:[y,function(s){this.milliseconds=10*+s}],SSS:[/\d{3}/,function(s){this.milliseconds=+s}],s:[h,i("seconds")],ss:[h,i("seconds")],m:[h,i("minutes")],mm:[h,i("minutes")],H:[h,i("hours")],h:[h,i("hours")],HH:[h,i("hours")],hh:[h,i("hours")],D:[h,i("day")],DD:[y,i("day")],Do:[l,function(s){var n=m.ordinal,d=s.match(/\d+/);if(this.day=d[0],n)for(var u=1;u<=31;u+=1)n(u).replace(/\[|\]/g,"")===s&&(this.day=u)}],M:[h,i("month")],MM:[y,i("month")],MMM:[l,function(s){var n=r("months"),d=(r("monthsShort")||n.map(function(u){return u.slice(0,3)})).indexOf(s)+1;if(d<1)throw new Error;this.month=d%12||d}],MMMM:[l,function(s){var n=r("months").indexOf(s)+1;if(n<1)throw new Error;this.month=n%12||n}],Y:[/[+-]?\d+/,i("year")],YY:[y,function(s){this.year=v(s)}],YYYY:[/\d{4}/,i("year")],Z:a,ZZ:a};function ge(s){var n,d;n=s,d=m&&m.formats;for(var u=(s=n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function($,D,p){var g=p&&p.toUpperCase();return D||d[p]||c[p]||d[g].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(C,_,F){return _||F.slice(1)})})).match(x),b=u.length,j=0;j<b;j+=1){var O=u[j],A=xe[O],M=A&&A[0],S=A&&A[1];u[j]=S?{regex:M,parser:S}:O.replace(/^\[|\]$/g,"")}return function($){for(var D={},p=0,g=0;p<b;p+=1){var C=u[p];if(typeof C=="string")g+=C.length;else{var _=C.regex,F=C.parser,T=$.slice(g),P=_.exec(T)[0];F.call(D,P),$=$.replace(P,"")}}return function(E){var f=E.afternoon;if(f!==void 0){var k=E.hours;f?k<12&&(E.hours+=12):k===12&&(E.hours=0),delete E.afternoon}}(D),D}}return function(s,n,d){d.p.customParseFormat=!0,s&&s.parseTwoDigitYear&&(v=s.parseTwoDigitYear);var u=n.prototype,b=u.parse;u.parse=function(j){var O=j.date,A=j.utc,M=j.args;this.$u=A;var S=M[1];if(typeof S=="string"){var $=M[2]===!0,D=M[3]===!0,p=$||D,g=M[2];D&&(g=M[2]),m=this.$locale(),!$&&g&&(m=d.Ls[g]),this.$d=function(T,P,E){try{if(["x","X"].indexOf(P)>-1)return new Date((P==="X"?1e3:1)*T);var f=ge(P)(T),k=f.year,U=f.month,fe=f.day,ye=f.hours,pe=f.minutes,ve=f.seconds,be=f.milliseconds,G=f.zone,B=new Date,H=fe||(k||U?1:B.getDate()),R=k||B.getFullYear(),K=0;k&&!U||(K=U>0?U-1:B.getMonth());var I=ye||0,V=pe||0,Q=ve||0,X=be||0;return G?new Date(Date.UTC(R,K,H,I,V,Q,X+60*G.offset*1e3)):E?new Date(Date.UTC(R,K,H,I,V,Q,X)):new Date(R,K,H,I,V,Q,X)}catch{return new Date("")}}(O,S,A),this.init(),g&&g!==!0&&(this.$L=this.locale(g).$L),p&&O!=this.format(S)&&(this.$d=new Date("")),m={}}else if(S instanceof Array)for(var C=S.length,_=1;_<=C;_+=1){M[1]=S[_-1];var F=d.apply(this,M);if(F.isValid()){this.$d=F.$d,this.$L=F.$L,this.init();break}_===C&&(this.$d=new Date(""))}else b.call(this,j)}}})})(he);var Ue=he.exports;const Ke=De(Ue);ue.extend(Ke);const Ze=oe().shape({place_of_birth:N().required("Please enter your place of birth"),gender:N().required("Please enter your gender"),dob:N().required("Please enter your date of birth").test("dob","Required format: YYYY-MM-DD",e=>ue(e,"YYYY-MM-DD",!0).isValid())}),J=[{label:"Male",value:"Male"},{label:"Female",value:"Female"},{label:"Others",value:"Others"}],ze=({profile:e,mutate:o,isLoading:c,isSuccess:x})=>{const y=l=>{o(l)},h={place_of_birth:(e==null?void 0:e.place_of_birth)??"",gender:(e==null?void 0:e.gender)??"",dob:(e==null?void 0:e.dob)??""};return t.jsx(ce,{initialValues:h,enableReinitialize:!0,validationSchema:Ze,onSubmit:l=>y(l),children:({errors:l,touched:m,values:v})=>t.jsx(ie,{className:"xx:flex-1",children:t.jsx(le,{children:t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("div",{className:"flex-1 flex flex-col gap-4 items-center",children:[t.jsx(L,{className:"mb-3 w-full",label:"Date of Birth",invalid:l.dob&&m.dob,errorMessage:l.dob,children:t.jsx(w,{type:"text",autoComplete:"off",name:"dob",placeholder:"1989-03-30",component:q})}),t.jsx(L,{className:"mb-3 w-full",invalid:l.gender&&m.gender,errorMessage:l.gender,children:t.jsx(w,{name:"gender",children:({field:i,form:a})=>t.jsx(Ce,{className:"w-full",placeholder:"Gender",field:i,form:a,options:J,value:J.filter(r=>r.value===v.gender),onChange:r=>a.setFieldValue(i.name,r.value)})})})]}),t.jsxs("div",{className:"flex-1 flex flex-col gap-4 justify-between pb-3",children:[t.jsx(L,{className:"mb-3",label:"Place of Birth",invalid:l.place_of_birth&&m.place_of_birth,errorMessage:l.place_of_birth,children:t.jsx(w,{type:"text",autoComplete:"off",name:"place_of_birth",placeholder:"Port-Harcourt",component:q})}),t.jsx(de,{loading:c,block:!0,disabled:x,variant:"solid",type:"submit",children:"Submit"})]})]})})})})},z="kyb",Be=_e(),W=Be.getInitialState({store:{}}),He=me({name:`${z}/data`,initialState:W,reducers:{setStore:(e,o)=>{e.store=o.payload===0?{}:o.payload},resetState:(e,o)=>{const x={user:()=>{e.user=W.user}}[o.payload];x&&x()}},extraReducers:e=>{}}),Re=He.reducer,Ie={state:{state:!1,steps:0},kybDialog:!1,query:{search:""}},Ve=me({name:`${z}/state`,initialState:Ie,reducers:{setState:(e,{payload:o})=>{e.state.state=o!==0,e.state.steps=o===0?0:o},setSearch:(e,{payload:o})=>{e.query.search=o},toggleKybDialog:(e,o)=>{e.kybDialog=o.payload}}}),Qe=Ve.reducer,Xe=Ne({state:Qe,data:Re}),ee=Le;we(`${z}`,Xe);const Ge=()=>{const{imagePath:e}=Fe,o=re(),c=()=>{o(-1)},{mutate:x,isLoading:y,isSuccess:h}=qe(),{mutate:l,isLoading:m,isSuccess:v}=Pe(),{state:i}=ee(r=>r[z].state),{profile:a}=ee(r=>r.auth.user);return a!=null&&a.address&&(a!=null&&a.gender)&&(a!=null&&a.dob)&&(a!=null&&a.place_of_birth)&&(a!=null&&a.image)&&c(),console.log("state: ",i),console.log("profile: ",a),t.jsx("div",{className:"bg-white min-h-[80vh] space-y-2",children:t.jsxs("div",{className:"w-[96%] mx-auto space-y-3",children:[t.jsx(ke,{}),t.jsxs("div",{className:"flex flex-col items-center xx:flex-row xx:justify-between gap-4 cursor-pointer relative",children:[t.jsxs("div",{className:"relative",children:[t.jsx(Ae,{size:150,className:"relative",icon:a!=null&&a.image?null:t.jsx($e,{}),src:a!=null&&a.image?`${e}/${a.image}`:null}),t.jsx(Ee,{})]}),t.jsx(ze,{profile:a,mutate:l,isLoading:m,isSuccess:v})]}),t.jsx(Te,{profile:a,mutate:x,isLoading:y,isSuccess:h})]})})},at=Ge;export{at as default};
