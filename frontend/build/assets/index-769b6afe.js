import{h as m,aB as l,d as g,i as b,K as h,a as O,r as d,_ as y,j as n,L as x}from"./index-3595f095.js";const f=m({name:"airtime/state",initialState:{selectedOperator:null,operator:null,formData:{}},reducers:{setFormData:(t,e)=>{t.formData=e.payload},setOperator:(t,e)=>{t.operator=e.payload},setSelectedOperator:(t,e)=>{t.selectedOperator=e.payload}}}),{setFormData:E,setOperator:R,setSelectedOperator:k}=f.actions,_=f.reducer;async function j(t){return l.fetchData({url:"/bills/operators",method:"get",data:t})}async function A(t){return l.fetchData({url:"/bills/operator/products",method:"post",data:t})}async function P(t){return l.fetchData({url:"/bills/airtime",method:"post",data:t})}const u=g("airtime/data/getOperators",async(t,{rejectWithValue:e})=>{try{return(await j(t)).data}catch(a){return e(a.response.data)}}),i=g("airtime/data/getProducts",async(t,{rejectWithValue:e})=>{try{return(await A(t)).data}catch(a){return e(a.response.data)}}),p=g("airtime/data/buyAirtime",async(t,{rejectWithValue:e})=>{try{return(await P(t)).data}catch(a){return e(a.response.data)}}),S=m({name:"airtime/data",initialState:{gettingOperators:!1,operators:[],operatorStatus:"idle",operatorMessage:"",gettingProducts:!1,products:[],airtime:{},productStatus:"idle",productMessage:"",buyingAirtime:!1,buyStatus:"idle",buyMessage:""},reducers:{setOperatorStatus:(t,e)=>{t.operatorStatus=e.payload},setProductStatus:(t,e)=>{t.productStatus=e.payload},setBuyStatus:(t,e)=>{t.buyStatus=e.payload}},extraReducers:t=>{t.addCase(u.pending,e=>{e.gettingOperators=!0}).addCase(u.fulfilled,(e,a)=>{var o;e.gettingOperators=!1;const{operators:s,status:r}=a.payload;e.operatorStatus=r,e.operators=(o=s==null?void 0:s.data)==null?void 0:o.filter(c=>c.name!=="Smile"&&c.name!=="Visafone"),e.operatorMessage=""}).addCase(u.rejected,(e,a)=>{e.gettingOperators=!1;const{status:s,message:r}=a.payload;e.operatorMessage=r,e.operatorStatus=s||"error",e.operators=[]}).addCase(i.pending,e=>{e.gettingProducts=!0}).addCase(i.fulfilled,(e,a)=>{var o;e.gettingProducts=!1;const{products:s,status:r}=a.payload;e.productStatus=r,e.products=s==null?void 0:s.data,e.productMessage="",e.airtime=(o=e.products)==null?void 0:o.filter(c=>c.fee_type==="RANGE")[0]}).addCase(i.rejected,(e,a)=>{e.gettingProducts=!1;const{status:s,message:r}=a.payload;e.productMessage=r,e.productStatus=s||"error",e.products=[]}).addCase(p.pending,e=>{e.buyingAirtime=!0}).addCase(p.fulfilled,(e,a)=>{e.buyingAirtime=!1;const{status:s}=a.payload;e.buyStatus=s}).addCase(p.rejected,(e,a)=>{e.buyingAirtime=!1;const{status:s,message:r}=a.payload;e.buyStatus=s||"error",e.buyMessage=r})}}),{setBuyStatus:B,setProductStatus:N,setOperatorStatus:L}=S.actions,C=S.reducer,D=b({state:_,data:C});h("airtime",D);const M=()=>{const t=O(),[e,a]=d.useState(1),s=d.lazy(()=>y(()=>import("./index-d0ac7d59.js"),["assets/index-d0ac7d59.js","assets/index-3595f095.js","assets/index-073dfdab.css"])),r=d.lazy(()=>y(()=>import("./index-9d744cdd.js"),["assets/index-9d744cdd.js","assets/index-3595f095.js","assets/index-073dfdab.css"]));d.useEffect(()=>{t(u())},[]);const o=d.useCallback(()=>{a(e+1)},[e]),c=d.useCallback(()=>{a(e-1)},[e]);return n.jsx("div",{className:"mt-2 p-4",children:n.jsxs(d.Suspense,{fallback:n.jsx("div",{className:"flex flex-auto flex-col h-[100vh]",children:n.jsx(x,{loading:!0})}),children:[e===1&&n.jsx(s,{onNext:o}),e===2&&n.jsx(r,{onNext:o,onBack:c})]})})},T=Object.freeze(Object.defineProperty({__proto__:null,default:M},Symbol.toStringTag,{value:"Module"}));export{L as a,N as b,k as c,R as d,B as e,p as f,i as g,T as i,E as s};
