import{r as o,j as e,z as j,S as c,c as f,t as b,aD as k,K as $,a as M,aE as C,aF as U,Z as W,ap as Y,aG as F,aH as G}from"./index-2aa62b4f.js";import{d as H}from"./dayjs.min-4b43e4d2.js";function g(t){const a=o.useRef(t);return o.useEffect(()=>{a.current=t}),o.useMemo(()=>(...s)=>{var l;return(l=a.current)==null?void 0:l.call(a,...s)},[])}function I({defaultProp:t,onChange:a}){const s=o.useState(t),[l]=s,n=o.useRef(l),r=g(a);return o.useEffect(()=>{n.current!==l&&(r(l),n.current=l)},[l,n,r]),s}function K({prop:t,defaultProp:a,onChange:s=()=>{}}){const[l,n]=I({defaultProp:a,onChange:s}),r=t!==void 0,d=r?t:l,h=g(s),m=o.useCallback(i=>{const x=i;if(r){const u=typeof i=="function"?x(t):i;u!==t&&h(u)}else n(i)},[r,t,n,h]);return[d,m]}const V=()=>e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"21%"}),e.jsx(c,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"18%"}),e.jsx(c,{height:"1rem",width:"28%"})]})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"21%"}),e.jsx(c,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"18%"}),e.jsx(c,{height:"1rem",width:"28%"})]})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"21%"}),e.jsx(c,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"18%"}),e.jsx(c,{height:"1rem",width:"28%"})]})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"21%"}),e.jsx(c,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"18%"}),e.jsx(c,{height:"1rem",width:"28%"})]})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"21%"}),e.jsx(c,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"18%"}),e.jsx(c,{height:"1rem",width:"28%"})]})]})]}),v=({transactions:t})=>{const{userType:a}=f(s=>s.auth.user);return e.jsx("div",{className:"flex flex-col",children:t==null?void 0:t.map(s=>{var l,n,r;return e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-700",children:s.type}),s.type==="Wallet Topup"&&e.jsxs("p",{className:"text-lg font-semibold text-green-500",children:["+₦",(l=s.amount)==null?void 0:l.toLocaleString()]}),a==="Provider"&&s.type==="Service Payment"&&e.jsxs("p",{className:"text-lg font-semibold text-green-500",children:["+₦",(n=s.amount)==null?void 0:n.toLocaleString()]}),a==="Client"&&s.type==="Service Payment"&&e.jsxs("p",{className:"text-lg font-semibold text-red-500",children:["-₦",(r=s.amount)==null?void 0:r.toLocaleString()]})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[s.status==="Success"&&e.jsx("p",{className:"font-semibold text-green-500",children:"Completed"}),e.jsx("p",{className:"font-semibold",children:H(s.created_at).format("DD MMM YYYY hh:mm a")})]})]},s.id)})})},y=o.createContext({}),z=y.Provider;y.Consumer;function N(){return o.useContext(y)}const p=o.forwardRef((t,a)=>{const{className:s,defaultValue:l,onChange:n,value:r,variant:d="underline",...h}=t,[m,i]=K({prop:r,onChange:n,defaultProp:l}),x=b("tabs",s);return e.jsx(z,{value:{value:m,onValueChange:i,variant:d},children:e.jsx("div",{className:x,...h,ref:a})})});p.displayName="Tabs";const T=o.forwardRef((t,a)=>{const{className:s,children:l,...n}=t,{variant:r}=N(),d=b("tab-list",`tab-list-${r}`,s);return e.jsx("div",{ref:a,role:"tablist",className:d,...n,children:l})});T.displayName="TabList";const S=o.forwardRef((t,a)=>{const{value:s,disabled:l,className:n,icon:r,children:d,...h}=t,{value:m,onValueChange:i,variant:x}=N(),u=s===m,{themeColor:D,primaryColorLevel:E}=k(),w=g(()=>{!u&&!l&&(i==null||i(s))}),R=`${D}-${E}`,L=b("tab-nav",`tab-nav-${x}`,u&&"tab-nav-active text-white",u&&x==="underline"&&`border-${R}`,u&&x==="pill"&&"bg-black",l&&"tab-nav-disabled",!l&&!u&&"hover:text-black hover:bg-gray-300",n);return e.jsxs("div",{ref:a,className:L,role:"tab","aria-selected":u,tabIndex:0,onClick:w,onKeyDown:w,...h,children:[r&&e.jsx("div",{className:"tab-nav-icon",children:r}),d]})});S.displayName="TabNav";const P=o.forwardRef((t,a)=>{const{value:s,children:l,className:n,...r}=t,d=N(),h=s===d.value,m=b("tab-content",h&&"tab-content-active",n);return e.jsx("div",{ref:a,role:"tabpanel",tabIndex:0,className:m,...r,children:h&&l})});P.displayName="TabContent";p.TabList=T;p.TabNav=S;p.TabContent=P;const A=()=>{const{verifying:t}=f(i=>i.payments.data),{userType:a}=f(i=>i.auth.user),{transactions:s}=f(i=>i.payments.data),l=s==null?void 0:s.filter(i=>i.type==="Wallet Topup"),n=s==null?void 0:s.filter(i=>i.type==="Wallet Topup"||i.type==="Service Payment"),r=s==null?void 0:s.filter(i=>i.type==="Service Payment"),{TabNav:d,TabList:h,TabContent:m}=p;return e.jsxs("div",{className:"mt-2 mb-2",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-700 mb-4",children:"Transactions"}),t?e.jsx(V,{}):e.jsx(e.Fragment,{children:e.jsxs(p,{defaultValue:"all",variant:"pill",children:[e.jsxs(h,{children:[e.jsx(d,{value:"all",children:"All"}),e.jsx(d,{value:"topups",children:"Topups"}),e.jsx(d,{value:"expenses",children:"Expenses"}),a==="Provider"&&e.jsx(d,{value:"withdrawals",children:"Withdrawals"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(m,{value:"all",children:e.jsx(v,{transactions:s})}),e.jsxs(m,{value:"topups",children:[a==="Client"&&e.jsx(v,{transactions:l}),a==="Provider"&&e.jsx(v,{transactions:n})]}),e.jsx(m,{value:"expenses",children:a==="Client"&&e.jsx(v,{transactions:r})})]})]})})]})};$("payments",G);const q=()=>{const t=M(),{updateStatus:a,receivedDeposit:s}=f(n=>n.payments.data),{depositDialog:l}=f(n=>n.payments.state);return o.useEffect(()=>{t(C())},[]),o.useEffect(()=>{(a==="success"||a==="error")&&t(U("idle"))},[t,a]),o.useEffect(()=>{s&&(t(C()),t(W()),l&&t(Y(!1))),t(F(!1))},[l,t,s]),e.jsx("div",{className:"mt-2 p-4",children:e.jsx(A,{})})};export{q as default};
