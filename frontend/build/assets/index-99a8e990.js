import{a as v,r as b,c as d,j as e,D as C,y as j,dj as E,$ as y,a0 as f,u as P,W as k,bw as w,dh as O}from"./index-43834327.js";import{e as m,t as N,f as A}from"./index-88015abf.js";import{P as I}from"./bundle-3f42fdda.js";const T={padding:void 0,margin:void 0,textAlign:void 0,border:void 0,background:void 0,width:void 0,height:void 0},_={outline:void 0,boxShadow:void 0},R=()=>{const a=v(),[n,u]=b.useState("");let i;const{formData:s,pinDialog:h}=d(t=>t.airtime.state),{buyStatus:r,buyingAirtime:p}=d(t=>t.airtime.data),c=()=>{a(N(!1))},l=(t,g,x,S)=>{y.push(e.jsx(f,{title:x||"Error",type:g||"warning",duration:S||3e3,children:t}),{placement:"top-center"})};b.useEffect(()=>{const t=()=>{i==null||i.clear(),u("")};r==="error"&&(l("Oops! Something went wrong, please try again.","danger","Error",5e3),t(),a(m("idle")),c()),r==="pin error"&&(l("The PIN entered does not match your transaction PIN, please try again.","danger","Error",5e3),t(),a(m("idle"))),r==="success"&&(t(),a(N(!1)))},[r]);const o=()=>{a(A({pin:n,phone:s==null?void 0:s.phone,amount:s==null?void 0:s.amount,product:s==null?void 0:s.product,operator:s==null?void 0:s.oid}))};return e.jsxs(C,{isOpen:h,onClose:c,onRequestClose:c,shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!1,contentClassName:"mt-[30vh]",title:"Require PIN",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-700",children:"Authorize Transaction"}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm mb-2",children:"Please enter your transaction pin to authorize this transaction"}),e.jsx("div",{children:e.jsx(I,{length:6,initialValue:"",secretDelay:200,ref:t=>i=t,onChange:t=>{u(t)},type:"numeric",inputMode:"number",inputStyle:T,inputFocusStyle:_,autoSelect:!0,regexCriteria:/^[ A-Za-z0-9_@./#&+-]*$/})}),e.jsx(j,{block:!0,variant:"solid",className:"!bg-gray-900 hover:!bg-black mt-6",icon:e.jsx(E,{}),loading:p,disabled:!n||(n==null?void 0:n.length)<6,onClick:o,children:"Authorize"})]})]})},L=({onBack:a})=>{var l;const n=v(),u=P(),{formData:i}=d(o=>o.airtime.state),{buyStatus:s,buyingAirtime:h}=d(o=>o.airtime.data),{hasPin:r}=d(o=>o.auth.user),p=(o,t,g,x)=>{y.push(e.jsx(f,{title:g||"Error",type:t||"warning",duration:x||3e3,children:o}),{placement:"top-center"})};b.useEffect(()=>{s==="error"&&(p("Oops! Something went wrong, please try again.","danger","Error",5e3),n(m("idle")),a()),s==="success"&&(p("Transaction completed successfully.","success","Success",5e3),n(m("idle")),n(k()),a())},[s]);const c=()=>{r?n(N(!0)):u("/transaction-pin")};return e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-base mb-2",children:"Your Order"}),e.jsxs("div",{className:"flex items-center gap-2 justify-between",children:[e.jsx("p",{className:"text-sm",children:"Operator:"}),e.jsx("p",{className:"text-sm font-semibold",children:i==null?void 0:i.operator})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-between",children:[e.jsx("p",{className:"text-sm",children:"Phone Number:"}),e.jsx("p",{className:"text-sm font-semibold",children:i==null?void 0:i.phone})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-between",children:[e.jsx("p",{className:"text-sm",children:"Recharge Amount:"}),e.jsx("p",{className:"text-sm font-semibold",children:`â‚¦${(l=i==null?void 0:i.amount)==null?void 0:l.toLocaleString()}`})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-8",children:[e.jsx(j,{block:!0,variant:"solid",color:"red-500",icon:e.jsx(w,{}),className:"",disabled:h,onClick:()=>a(),children:"Back"}),e.jsx(j,{block:!0,variant:"solid",icon:e.jsx(O,{}),className:"!bg-gray-900 hover:!bg-black",loading:h,onClick:c,children:"Confirm"})]})]}),e.jsx(R,{})]})};export{L as default};
