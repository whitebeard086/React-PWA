import{r as o,j as e,q as j,S as c,n as f,o as b,at as k,y as $,a as M,au as C,av as U,P as W,aw as Y,ax as I,ay as V}from"./index-508e130b.js";import{d as q}from"./dayjs.min-51c6cef3.js";function g(t){const a=o.useRef(t);return o.useEffect(()=>{a.current=t}),o.useMemo(()=>(...s)=>{var n;return(n=a.current)==null?void 0:n.call(a,...s)},[])}function A({defaultProp:t,onChange:a}){const s=o.useState(t),[n]=s,l=o.useRef(n),r=g(a);return o.useEffect(()=>{l.current!==n&&(r(n),l.current=n)},[n,l,r]),s}function F({prop:t,defaultProp:a,onChange:s=()=>{}}){const[n,l]=A({defaultProp:a,onChange:s}),r=t!==void 0,d=r?t:n,h=g(s),m=o.useCallback(i=>{const x=i;if(r){const u=typeof i=="function"?x(t):i;u!==t&&h(u)}else l(i)},[r,t,l,h]);return[d,m]}const G=()=>e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"21%"}),e.jsx(c,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"18%"}),e.jsx(c,{height:"1rem",width:"28%"})]})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"21%"}),e.jsx(c,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"18%"}),e.jsx(c,{height:"1rem",width:"28%"})]})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"21%"}),e.jsx(c,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"18%"}),e.jsx(c,{height:"1rem",width:"28%"})]})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"21%"}),e.jsx(c,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"18%"}),e.jsx(c,{height:"1rem",width:"28%"})]})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"21%"}),e.jsx(c,{height:"1rem",width:"21%"})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[e.jsx(c,{height:"1rem",width:"18%"}),e.jsx(c,{height:"1rem",width:"28%"})]})]})]}),v=({transactions:t})=>{const{userType:a}=f(s=>s.auth.user);return e.jsx("div",{className:"flex flex-col",children:t==null?void 0:t.map(s=>{var n,l,r;return e.jsxs(j,{children:[e.jsxs("div",{className:"flex items-center gap-4 justify-between",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-700",children:s.type}),s.type==="Wallet Topup"&&e.jsxs("p",{className:"text-lg font-semibold text-green-500",children:["+₦",(n=s.amount)==null?void 0:n.toLocaleString()]}),a==="Provider"&&s.type==="Service Payment"&&e.jsxs("p",{className:"text-lg font-semibold text-green-500",children:["+₦",(l=s.amount)==null?void 0:l.toLocaleString()]}),a==="Client"&&s.type==="Service Payment"&&e.jsxs("p",{className:"text-lg font-semibold text-red-500",children:["-₦",(r=s.amount)==null?void 0:r.toLocaleString()]})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 justify-between",children:[s.status==="Success"&&e.jsx("p",{className:"font-semibold text-green-500",children:"Completed"}),e.jsx("p",{className:"font-semibold",children:q(s.created_at).format("DD MMM YYYY hh:mm a")})]})]},s.id)})})},y=o.createContext({}),H=y.Provider;y.Consumer;function N(){return o.useContext(y)}const p=o.forwardRef((t,a)=>{const{className:s,defaultValue:n,onChange:l,value:r,variant:d="underline",...h}=t,[m,i]=F({prop:r,onChange:l,defaultProp:n}),x=b("tabs",s);return e.jsx(H,{value:{value:m,onValueChange:i,variant:d},children:e.jsx("div",{className:x,...h,ref:a})})});p.displayName="Tabs";const T=o.forwardRef((t,a)=>{const{className:s,children:n,...l}=t,{variant:r}=N(),d=b("tab-list",`tab-list-${r}`,s);return e.jsx("div",{ref:a,role:"tablist",className:d,...l,children:n})});T.displayName="TabList";const S=o.forwardRef((t,a)=>{const{value:s,disabled:n,className:l,icon:r,children:d,...h}=t,{value:m,onValueChange:i,variant:x}=N(),u=s===m,{themeColor:D,primaryColorLevel:R}=k(),w=g(()=>{!u&&!n&&(i==null||i(s))}),E=`${D}-${R}`,L=b("tab-nav",`tab-nav-${x}`,u&&"tab-nav-active text-white",u&&x==="underline"&&`border-${E}`,u&&x==="pill"&&"bg-black",n&&"tab-nav-disabled",!n&&!u&&"hover:text-black hover:bg-gray-300",l);return e.jsxs("div",{ref:a,className:L,role:"tab","aria-selected":u,tabIndex:0,onClick:w,onKeyDown:w,...h,children:[r&&e.jsx("div",{className:"tab-nav-icon",children:r}),d]})});S.displayName="TabNav";const P=o.forwardRef((t,a)=>{const{value:s,children:n,className:l,...r}=t,d=N(),h=s===d.value,m=b("tab-content",h&&"tab-content-active",l);return e.jsx("div",{ref:a,role:"tabpanel",tabIndex:0,className:m,...r,children:h&&n})});P.displayName="TabContent";p.TabList=T;p.TabNav=S;p.TabContent=P;const K=()=>{const{verifying:t}=f(i=>i.payments.data),{userType:a}=f(i=>i.auth.user),{transactions:s}=f(i=>i.payments.data),n=s==null?void 0:s.filter(i=>i.type==="Wallet Topup"),l=s==null?void 0:s.filter(i=>i.type==="Wallet Topup"||i.type==="Service Payment"),r=s==null?void 0:s.filter(i=>i.type==="Service Payment"),{TabNav:d,TabList:h,TabContent:m}=p;return e.jsxs("div",{className:"mt-2 mb-2",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-700 mb-4",children:"Transactions"}),t?e.jsx(G,{}):e.jsx(e.Fragment,{children:e.jsxs(p,{defaultValue:"all",variant:"pill",children:[e.jsxs(h,{children:[e.jsx(d,{value:"all",children:"All"}),e.jsx(d,{value:"topups",children:"Topups"}),e.jsx(d,{value:"expenses",children:"Expenses"}),a==="Provider"&&e.jsx(d,{value:"withdrawals",children:"Withdrawals"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(m,{value:"all",children:e.jsx(v,{transactions:s})}),e.jsxs(m,{value:"topups",children:[a==="Client"&&e.jsx(v,{transactions:n}),a==="Provider"&&e.jsx(v,{transactions:l})]}),e.jsx(m,{value:"expenses",children:a==="Client"&&e.jsx(v,{transactions:r})})]})]})})]})};$("payments",V);const B=()=>{const t=M(),{updateStatus:a,receivedDeposit:s}=f(l=>l.payments.data),{depositDialog:n}=f(l=>l.payments.state);return o.useEffect(()=>{t(C())},[]),o.useEffect(()=>{(a==="success"||a==="error")&&t(U("idle"))},[t,a]),o.useEffect(()=>{s&&(t(C()),t(W()),n&&t(Y(!1))),t(I(!1))},[n,t,s]),e.jsx("div",{className:"mt-2 p-4",children:e.jsx(K,{})})};export{B as default};
