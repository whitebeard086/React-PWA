import{u as w,j as e,aQ as V,l as S,m as i,aT as m,b as E,d as U,r as M,aN as L,Y as $,aU as k,F as A,p as _,q as z,t as j,v as F,Z as K,aV as O,I as Y,z as Z,af as G,aW as Q,G as W,aL as X,aX as b,aY as N,aZ as H}from"./index-d4dc8e82.js";const J=()=>{const c=w(),s=()=>{c(-1)};return e.jsx("div",{children:e.jsx(V,{className:"h-6 w-6 hover:cursor-pointer",onClick:s})})},ee=(c,s)=>c==="nin"?s.nin==="":c==="passport"?s.passportCover===""||s.passportDataPage==="":c==="voterId"?s.voterIdFront===""||s.voterIdBack==="":c==="driversLicense"?s.driversLicenseFront===""||s.driversLicenseBack==="":!1;S().shape({documentType:i().required("Please select your document type"),passportCover:i().when("documentType",{is:"passport",then:i().required("Please upload passport cover"),otherwise:m().notRequired()}),passportDataPage:i().when("documentType",{is:"passport",then:i().required("Please upload passport data page"),otherwise:m().notRequired()}),voterIdFront:i().when("documentType",{is:"voterId",then:i().required("Please upload your front Voter's ID"),otherwise:m().notRequired()}),voterIdBack:i().when("documentType",{is:"voterId",then:i().required("Please upload your back Voter's ID"),otherwise:m().notRequired()}),driversLicenseFront:i().when("documentType",{is:"driversLicense",then:i().required("Please upload your front Drivers license"),otherwise:m().notRequired()}),driversLicenseBack:i().when("documentType",{is:"driversLicense",then:i().required("Please upload your back Drivers license"),otherwise:m().notRequired()}),nin:i().when("documentType",{is:"nin",then:i().required("Please provide your NIN"),otherwise:m().notRequired()})});const se={documentType:"passport",passportCover:"",passportDataPage:"",voterIdFront:"",voterIdBack:"",driversLicenseFront:"",driversLicenseBack:"",nin:""},D=[{value:"passport",label:"Passport"},{value:"voterId",label:"Voter's ID"},{value:"driversLicense",label:"Drivers License"},{value:"nin",label:"NIN"}],re={passport:["Clear and complete passport image is required","Passport must be valid with an unexpired date","The data page should display your full name, date of birth, and photo"],voterId:["Ensure a clear image of the ID with all details visible","Voter ID must be within its validity period","Must include your complete name, date of birth, and a recognizable photo"],driversLicense:["Uploaded driver license image must be sharp and eligible","Driver's license should be within its valid timeframe","The provided ID must feature your full name, date of birth, and a clear photo"],nin:["Provide your National Identification Number","Ensure your full name and date of birth are associated with the provided NIN"]},h=c=>{const{label:s,name:o,children:a,touched:v,errors:r}=c,l=(t,d,n)=>{t.setFieldValue(d.name,URL.createObjectURL(n[0])),t.setFieldValue(`${d.name}File`,n[0])};return e.jsx(j,{label:s,invalid:r[o]&&v[o],errorMessage:r[o],className:"mb-0",children:e.jsx(F,{name:o,children:({field:t,form:d})=>e.jsx(G,{draggable:!0,className:"cursor-pointer h-[250px]",onChange:n=>l(d,t,n),onFileRemove:n=>l(d,t,n),showList:!1,uploadLimit:1,children:t.value?e.jsx("img",{className:"p-3 max-h-[250px]",src:t.value,alt:""}):e.jsxs("div",{className:"text-center",children:[a,e.jsxs("p",{className:"font-semibold",children:[e.jsxs("span",{className:"text-gray-800 dark:text-white",children:["Drop your image here, or"," "]}),e.jsx("span",{className:"text-blue-500",children:"browse"})]}),e.jsx("p",{className:"mt-1 opacity-60 dark:text-white",children:"Support: jpeg, png"})]})})})})},ae=({userId:c})=>{const s=E(),o=w(),{kycState:a}=U(r=>r.kyc.data),v=r=>{const{documentType:l,passportCover:t,passportCoverFile:d,passportDataPageFile:n,voterIdFrontFile:p,voterIdBackFile:u,driversLicenseFrontFile:g,driversLicenseBackFile:y,passportDataPage:x,voterIdFront:P,voterIdBack:T,driversLicenseFront:B,driversLicenseBack:q,nin:I}=r,C=()=>t.length!==0?d:P.length!==0?p:B.length!==0?g:null,R=()=>x.length!==0?n:T.length!==0?u:q.length!==0?y:null,f={user_id:c,document_type:l,nin:(()=>I.length!==0?I:null)(),doc_front:C(),doc_back:R()};console.log("Values: ",f),s(Q(f))};return M.useEffect(()=>{(a==null?void 0:a.status)==="success"&&(L("Success",a.message,"success"),s($()),s(k("kycState")),o("/settings",{replace:!0})),(a==null?void 0:a.status)==="failed"&&(L("Failed",a==null?void 0:a.message,"danger"),s(k("kycState")))},[a,s,o]),e.jsx(A,{initialValues:se,enableReinitialize:!0,onSubmit:(r,{setSubmitting:l})=>{v(r)},children:({values:r,touched:l,errors:t,isSubmitting:d})=>{const n={touched:l,errors:t};return e.jsx(_,{children:e.jsxs(z,{children:[e.jsx(j,{label:e.jsx("p",{className:"mt-3",children:"Please select your ID type"}),invalid:t.documentType&&l.documentType,errorMessage:t.documentType,className:"mb-4",children:e.jsx(F,{name:"documentType",children:({field:p,form:u})=>e.jsx(K,{field:p,form:u,options:D,value:D.filter(g=>g.value===r.documentType),onChange:g=>{u.setFieldValue(p.name,g.value),["passportCover","passportDataPage","voterIdFront","voterIdBack","driversLicenseFront","driversLicenseBack","nin"].forEach(x=>{u.setFieldValue(x,"")})}})})}),e.jsx("ul",{className:"mb-4 text-sm",children:re[r.documentType].map((p,u)=>e.jsxs("li",{className:"mb-1 flex items-center",children:[e.jsx(O,{className:"mr-3",innerClass:"bg-emerald-500"}),e.jsx("span",{children:p})]},p+u))}),e.jsxs("div",{className:"grid xl:grid-cols-2 gap-4",children:[r.documentType==="passport"&&e.jsxs(e.Fragment,{children:[e.jsx(h,{name:"passportCover",label:"Passport Cover",...n,children:e.jsx("img",{className:"mx-auto mb-3",src:"/img/passport.png",alt:""})}),e.jsx(h,{name:"passportDataPage",label:"Passport Data Page",...n,children:e.jsx("img",{className:"mx-auto mb-3",src:"/img/passport-data.png",alt:""})})]}),r.documentType==="voterId"&&e.jsxs(e.Fragment,{children:[e.jsx(h,{name:"voterIdFront",label:"Voter's ID Front",...n,children:e.jsx("img",{className:"mx-auto mb-3",src:"/img/id-card-front.png",alt:""})}),e.jsx(h,{name:"voterIdBack",label:"Voter's Id Back",...n,children:e.jsx("img",{className:"mx-auto mb-3",src:"/img/id-card-back.png",alt:""})})]}),r.documentType==="driversLicense"&&e.jsxs(e.Fragment,{children:[e.jsx(h,{name:"driversLicenseFront",label:"Drivers License Front",...n,children:e.jsx("img",{className:"mx-auto mb-3",src:"/img/drivers-license-front.png",alt:""})}),e.jsx(h,{name:"driversLicenseBack",label:"Drivers License Back",...n,children:e.jsx("img",{className:"mx-auto mb-3",src:"/img/drivers-license-back.png",alt:""})})]})]}),r.documentType==="nin"&&e.jsx(j,{label:"NIN",invalid:t.nin&&l.nin,errorMessage:t.nin,children:e.jsx(F,{type:"text",autoComplete:"off",name:"nin",placeholder:"National Identification Number",className:"border-green-500 dark:border-green-500 focus:!ring-emerald-500",component:Y})}),e.jsx("div",{className:"flex mt-5",children:e.jsx(Z,{loading:(a==null?void 0:a.status)==="pending",block:!0,disabled:ee(r.documentType,r),variant:"solid",type:"submit",children:"Submit"})})]})})}})};W(`${N}`,H);const te=()=>{X();const{state:c}=b(o=>o[N].state);b(o=>o[N].data);const{profile:s}=b(o=>o.auth.user);return console.log("state: ",c),console.log("profile: ",s),e.jsx("div",{className:"bg-white min-h-[80vh] space-y-2",children:e.jsxs("div",{className:"w-[96%] mx-auto",children:[e.jsx(J,{}),e.jsx(ae,{userId:s==null?void 0:s.id})]})})},oe=te;export{oe as default};
