import{b as F,d as P,r as S,Y as w,l as C,m as u,j as e,F as I,p as V,q as $,t as x,v as f,L as E,Z as q,I as L,z as k}from"./index-d4dc8e82.js";import{u as z}from"./index-d5a514e4.js";const M=({onNext:o})=>{const t=F(),{countries:c,loading:d,phoneStatus:j,settingPhone:g,message:h}=P(s=>s.verify.data),b=s=>{const{code:a,phone:n}=s,i={phone:a.substring(1)+n};t(z(i))};S.useEffect(()=>{h==="Otp sent"&&(t(w()),o())},[t,h,o]);const v=s=>/^((\+[1-9]{1,4}[ -]?)|(\([0-9]{2,3}\)[ -]?)|([0-9]{2,4})[ -]?)*?[0-9]{3,4}[ -]?[0-9]{3,4}$/.test(s),N=C().shape({phone:u().matches(/^((\+[1-9]{1,4}[ -]?)|(\([0-9]{2,3}\)[ -]?)|([0-9]{2,4})[ -]?)*?[0-9]{3,4}[ -]?[0-9]{3,4}$/,"Invalid number").required(""),code:u().required("Please select your country")}),y={phone:"",code:"+234"},l=c==null?void 0:c.map(s=>({label:`+${s.phone}`,value:s.name}));return e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx(I,{initialValues:y,validationSchema:N,onSubmit:(s,{setSubmitting:a})=>{a(!0),b(s)},children:({errors:s,touched:a,values:n})=>{const i=v(n.phone);return console.log(n.code+n.phone),e.jsx(V,{children:e.jsxs($,{children:[e.jsxs("div",{className:"flex",children:[e.jsx(x,{label:"",invalid:s.code&&a.code,className:"",errorMessage:s.code,children:e.jsx(f,{name:"code",prefix:"",className:"",autoComplete:"off",children:({field:m,form:p})=>d?e.jsx("div",{className:"bg-blue-100 h-11 w-28 rounded-l-md",children:e.jsx(E,{size:30,loading:!0})}):e.jsx(q,{placeholder:"",field:m,form:p,className:"w-28 select_phone",isLoading:d,onInputChange:r=>{console.log(r)},options:l,defaultValue:l[163],value:l==null?void 0:l.value,onChange:r=>{p.setFieldValue(m.name,r.label)}})})}),e.jsx(x,{label:"",invalid:s.phone&&a.phone,errorMessage:s.phone,children:e.jsx(f,{type:"text",autoComplete:"off",name:"phone",className:"rounded-l-none border-l-0",placeholder:"Enter phone number",component:L})})]}),e.jsx(k,{block:!0,variant:"solid",disabled:!n.phone||!n.code||!i,loading:j==="loading"||g,children:"Send Code"})]})})}})})},O=({onNext:o})=>e.jsx("div",{className:"h-full flex flex-col justify-center",children:e.jsxs("div",{className:"w-full flex flex-col gap-4 justify-center",children:[e.jsx("div",{className:"w-full flex justify-center items-center",children:e.jsx("img",{className:"w-72",src:"/img/signup.png",alt:""})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-center mt-4 text-2xl font-bold",children:"Phone Verification"}),e.jsx("p",{className:"font-semibold text-center text-gray-400",children:"We will send you an OTP code on this phone number."})]}),e.jsx(M,{onNext:o})]})});export{O as default};
