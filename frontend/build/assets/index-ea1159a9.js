import{d as g,an as O,h as F,a as L,r as c,c as b,Z as w,j as e,F as R,v as I,w as P,x as E,y as A,af as B,G as D,ag as $,a2 as z,a3 as H,t as T,U as v,ao as S,L as G,T as V,i as _,K as q,ap as K,H as l,aq as M,ar as U}from"./index-2aa62b4f.js";import{C as W}from"./CropImage-59907372.js";import{a as Y,b as Z}from"./BrowseService-2c296ccd.js";import{b as J,c as Q}from"./HomeService-ec791e4c.js";import{u as X}from"./useAuth-9ed3d467.js";import"./index.esm-46c9d8cb.js";const m=g("browse/data/getBrowseData",async(t,{rejectWithValue:a})=>{try{return(await Y(t)).data}catch(s){return a(s.response.data)}}),y=g("settings/data/createCategory",async(t,{rejectWithValue:a})=>{try{return(await J(t)).data}catch(s){return a(s.response.data)}}),j=g("settings/data/updateCategory",async(t,{rejectWithValue:a})=>{try{return(await Q(t)).data}catch(s){return a(s.response.data)}}),C=g("browse/data/getCategory",async(t,{rejectWithValue:a})=>{try{return(await Z(t)).data}catch(s){return a(s.response.data)}}),f=g("settings/data/uploadImage",async(t,{rejectWithValue:a})=>{try{return(await O(t)).data}catch(s){return a(s.response.data)}}),k=F({name:"settings/data",initialState:{gettingCategories:!1,gettingCategory:!1,creatingCategory:!1,updatingCategory:!1,uploading:!1,category:{},uploadStatus:"idle"},reducers:{setUploadStatus:(t,a)=>{t.uploadStatus=a.payload}},extraReducers:t=>{t.addCase(y.pending,a=>{a.creatingCategory=!0}).addCase(y.fulfilled,a=>{a.creatingCategory=!1}).addCase(y.rejected,a=>{a.creatingCategory=!1}).addCase(j.pending,a=>{a.updatingCategory=!0}).addCase(j.fulfilled,a=>{a.updatingCategory=!1}).addCase(j.rejected,a=>{a.updatingCategory=!1}).addCase(m.pending,a=>{a.gettingCategories=!0}).addCase(m.fulfilled,(a,s)=>{a.gettingCategories=!1,a.categories=s.payload.categories}).addCase(m.rejected,a=>{a.gettingCategories=!1}).addCase(C.pending,a=>{a.gettingCategory=!0}).addCase(C.fulfilled,(a,s)=>{a.gettingCategory=!1,a.category=s.payload.category}).addCase(C.rejected,a=>{a.gettingCategory=!1}).addCase(f.pending,a=>{a.uploading=!0}).addCase(f.fulfilled,(a,s)=>{a.uploading=!1,a.uploadStatus=s.payload.status}).addCase(f.rejected,a=>{a.uploading=!1,a.uploadStatus="error"})}}),{setUploadStatus:ee}=k.actions,ae=k.reducer,se=()=>{const t=L(),[a,s]=c.useState(!1),[d,n]=c.useState(null),[i,h]=c.useState(null);console.log(i);const{uploadStatus:r}=b(o=>o.settings.data),p=c.useCallback(()=>{t(f({image:i})),t(w())},[t,i]),N=(o,x,u)=>{o.setFieldValue(x.name,URL.createObjectURL(u[0])),n(URL.createObjectURL(u[0])),s(!0)};return c.useEffect(()=>{i!==null&&p()},[i,p]),c.useEffect(()=>{r!=="idle"&&(()=>{z.push(e.jsx(H,{title:`${r==="success"?"Success":"Error"}`,type:`${r==="success"?"success":"danger"}`,duration:5e3,children:r==="success"?"Image uploaded successfully!":"Looks like something went wrong, please try again."}),{placement:"top-center"})})(),r==="success"&&t(w()),(r==="success"||r==="error")&&t(ee("idle"))},[t,r]),e.jsx(R,{initialValues:{image:""},onSubmit:p,children:()=>e.jsxs(I,{className:"absolute top-[45%] right-[23%]",children:[e.jsx(P,{children:e.jsx(E,{children:e.jsx(A,{name:"banner",children:({field:o,form:x})=>e.jsx(B,{showList:!1,uploadLimit:1,onChange:u=>N(x,o,u),onFileRemove:u=>N(x,o,u),children:e.jsx(D,{type:"button",size:"xs",className:"",variant:"solid",icon:e.jsx($,{}),children:"Upload"})})})})}),e.jsx(W,{photoURL:d,setOpenCrop:s,openCrop:a,aspect:1/1,setPhotoURL:n,setFile:h,onCropImage:p,maxSizeMB:.05})]})})},te=()=>{const{imagePath:t}=V,{profile:a,gettingUser:s}=b(n=>n.auth.user),{uploading:d}=b(n=>n.settings.data);return e.jsxs("div",{className:"flex flex-col justify-center items-center mb-8",children:[e.jsx("div",{className:T("flex items-center flex-row gap-2 cursor-pointer relative"),children:s||d?e.jsxs("div",{className:"relative",children:[e.jsx(v,{size:150,icon:e.jsx(S,{}),src:a!=null&&a.image?`${t}/${a.image}`:null}),e.jsx("div",{className:"absolute top-0 w-full h-full grid place-content-center bg-black/50 rounded-lg",children:e.jsx(G,{loading:!0})})]}):e.jsxs("div",{className:"relative",children:[e.jsx(v,{size:150,className:"relative",icon:a!=null&&a.image?null:e.jsx(S,{}),src:a!=null&&a.image?`${t}/${a.image}`:null}),e.jsx(se,{})]})}),e.jsxs("div",{className:"flex flex-col justify-center items-center",children:[e.jsx("h4",{className:"text-lg font-bold text-primary-500",children:a.username}),e.jsx("p",{className:"text-base font-semibold text-primary-500",children:a.email})]})]})},re=F({name:"settings/state",initialState:{},reducers:{}}),ne=re.reducer,ie=_({state:ne,data:ae});q("settings",ie);const pe=()=>{const{handleSignOut:t}=X(),a=L();window.OneSignal=window.OneSignal||[];const s=window.OneSignal;c.useEffect(()=>{a(m())},[]);const{userType:d,enabledNotifications:n,profile:i}=b(r=>r.auth.user);s.push(()=>{s.init({appId:"9749386f-0c3b-417c-b986-3447a73296cd",safari_web_id:"web.onesignal.auto.4d0b3421-6847-4c4b-a531-b4bcf634e4d8",allowLocalhostAsSecureOrigin:!0,autoResubscribe:!0,promptOptions:{customlink:{enabled:!0,style:"button",size:"small",color:{button:"",text:"#FFFFFF"},text:{subscribe:"Subscribe to push notifications",unsubscribe:"Unsubscribe from push notifications"},unsubscribeEnabled:!0}}})});const h=()=>{s.push(function(){s.isPushNotificationsEnabled(function(r){r?(console.log("Push notifications are enabled!"),s.setExternalUserId(i==null?void 0:i.id),n||a(U(!0))):(console.log("Push notifications are not enabled yet."),n&&a(U(!1)))})})};return e.jsxs("div",{className:"bg-white min-h-[80vh]",children:[e.jsx(te,{}),e.jsx("hr",{}),e.jsx("div",{className:"",children:e.jsxs("div",{children:[e.jsx("div",{onClick:()=>a(K(!0)),className:"flex items-center gap-2 transition duration-300 cursor-pointer w-full py-4 px-4 hover:bg-gray-100 border-b-gray-200 border-b-2",children:e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("span",{className:"text-base font-semibold text-gray-600",children:"Your Information"}),e.jsx("p",{className:"text xs",children:"Account details"})]})}),e.jsx(l,{className:"flex items-center gap-2 transition duration-300 w-full py-4 px-4 hover:bg-gray-100 border-b-gray-200 border-b-2",to:"/transactions",children:e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("span",{className:"text-base font-semibold text-gray-600",children:"Transactions"}),e.jsx("p",{className:"text xs",children:"View your transaction history"})]})}),d==="Provider"&&e.jsx(e.Fragment,{children:e.jsx(l,{className:"flex items-center gap-2 transition duration-300 w-full py-4 px-4 hover:bg-gray-100 border-b-gray-200 border-b-2",to:"/profile",children:e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("span",{className:"text-base font-semibold text-gray-600",children:"Provider Profile"}),e.jsx("p",{className:"text xs",children:"Edit your service provider profile"})]})})}),d==="Provider"&&e.jsx(e.Fragment,{children:e.jsx(l,{className:"flex items-center gap-2 transition duration-300 w-full py-4 px-4 hover:bg-gray-100 border-b-gray-200 border-b-2",to:"/withdraw",children:e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("span",{className:"text-base font-semibold text-gray-600",children:"Withdrawal Banks"}),e.jsx("p",{className:"text xs",children:"Add or Remove Bank Accounts"})]})})}),e.jsx(l,{className:"flex items-center gap-2 transition duration-300 w-full py-4 px-4 hover:bg-gray-100 border-b-gray-200 border-b-2",to:"/transaction-pin",children:e.jsxs("div",{className:"w-full flex flex-col",children:[e.jsx("span",{className:"text-base font-semibold text-gray-600",children:"Change PIN"}),e.jsx("p",{className:"text xs",children:"Change your transaction pin"})]})}),e.jsx(l,{className:"flex items-center gap-2 transition duration-300 w-full py-4 px-4 hover:bg-gray-100 border-b-gray-200 border-b-2",to:"/help-&-support",children:e.jsx("div",{className:"w-full flex flex-col",children:e.jsx("span",{className:"text-base font-semibold text-gray-600",children:"Help & Support"})})}),e.jsx(l,{className:"flex items-center gap-2 transition duration-300 w-full py-4 px-4 hover:bg-gray-100 border-b-gray-200 border-b-2",to:"/t-&-c",children:e.jsx("div",{className:"w-full flex flex-col",children:e.jsx("span",{className:"text-base font-semibold text-gray-600",children:"Terms & Conditions"})})}),e.jsx(l,{className:"flex items-center gap-2 transition duration-300 w-full py-4 px-4 hover:bg-gray-100 border-b-gray-200 border-b-2",to:"/privacy-policy",children:e.jsx("div",{className:"w-full flex flex-col",children:e.jsx("span",{className:"text-base font-semibold text-gray-600",children:"Privacy Policy"})})}),e.jsx("div",{onClick:h,className:"onesignal-customlink-container"}),e.jsxs("div",{onClick:t,className:"flex items-center gap-2 cursor-pointer transition duration-300 w-full py-4 px-4 hover:bg-gray-100",children:[e.jsx("span",{className:"text-xl text-red-500 opacity-50",children:e.jsx(M,{})}),e.jsx("span",{className:"w-full text-base font-semibold text-red-500",children:"Logout"})]})]})})]})};export{pe as default};
